var int WNREFUGEE_HELP;
instance DIA_WNREFUGEE_EXIT(C_INFO) {
    NPC = 54156;
    NR = 999;
    CONDITION = DIA_WNREFUGEE_EXIT_CONDITION;
    INFORMATION = DIA_WNREFUGEE_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_WNREFUGEE_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_WNREFUGEE_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_WNREFUGEE_HELLO(C_INFO) {
    NPC = 54156;
    NR = 1;
    CONDITION = DIA_WNREFUGEE_HELLO_CONDITION;
    INFORMATION = DIA_WNREFUGEE_HELLO_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_WNREFUGEE_HELLO_CONDITION() {
    return TRUE;
}

func void DIA_WNREFUGEE_HELLO_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_HELLO_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_HELLO_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_WNRefugee_HELLO_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_HELLO_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_HELLO_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_HELLO_03_06");
    INFO_CLEARCHOICES(72157);
    INFO_ADDCHOICE(72157, "I don't believe you and I'm not giving you anything.", 72160);
    if ((NPC_HASITEMS(OTHER, 34203)) >= (EVENT_REFUGEEFAVOR)) {
        INFO_ADDCHOICE(72157, "Here. (Give 50 GP)", 72161);
    };
}

func void DIA_WNREFUGEE_FUCKOFF() {
    AI_OUTPUT(OTHER, SELF, "DIA_WNRefugee_FuckOff_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_FuckOff_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_FuckOff_03_03");
    WNREFUGEE_HELP = 1;
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_WNREFUGEE_ISNICE() {
    AI_OUTPUT(OTHER, SELF, "DIA_WNRefugee_IsNice_15_01");
    B_GIVEINVITEMS(OTHER, SELF, 34203, EVENT_REFUGEEFAVOR);
    B_GIVEPLAYERXP(XP_EVENT_REFUGEE_HELP);
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_IsNice_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_IsNice_03_03");
    WNREFUGEE_DAY = WLD_GETDAY();
    WNREFUGEE_HELP = 2;
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_WNREFUGEE_GETLOST(C_INFO) {
    NPC = 54156;
    NR = 4;
    CONDITION = DIA_WNREFUGEE_GETLOST_CONDITION;
    INFORMATION = DIA_WNREFUGEE_GETLOST_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_WNREFUGEE_GETLOST_CONDITION() {
    if (((WNREFUGEE_HELP) == (1)) && (NPC_ISINSTATE(SELF, 61599))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_WNREFUGEE_GETLOST_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_GetLost_03_01");
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_WNREFUGEE_COMELATER(C_INFO) {
    NPC = 54156;
    NR = 4;
    CONDITION = DIA_WNREFUGEE_COMELATER_CONDITION;
    INFORMATION = DIA_WNREFUGEE_COMELATER_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_WNREFUGEE_COMELATER_CONDITION() {
    if ((((WNREFUGEE_HELP) == (2)) && (NPC_ISINSTATE(SELF, 61599))) && (((KAPITEL) == (4)) || ((WNREFUGEE_DAY) == (WLD_GETDAY())))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_WNREFUGEE_COMELATER_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_ComeLater_03_01");
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_WNREFUGEE_YOURGOLD(C_INFO) {
    NPC = 54156;
    NR = 4;
    CONDITION = DIA_WNREFUGEE_YOURGOLD_CONDITION;
    INFORMATION = DIA_WNREFUGEE_YOURGOLD_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_WNREFUGEE_YOURGOLD_CONDITION() {
    if ((((WNREFUGEE_HELP) == (2)) && ((KAPITEL) >= (5))) && ((WNREFUGEE_DAY) != (WLD_GETDAY()))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_WNREFUGEE_YOURGOLD_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_YourGold_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_YourGold_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_YourGold_03_03");
    CREATEINVITEMS(SELF, 34203, EVENT_REFUGEEFAVOR_FORHERO);
    B_GIVEINVITEMS(SELF, OTHER, 34203, EVENT_REFUGEEFAVOR_FORHERO);
    B_GIVEPLAYERXP(XP_EVENT_REFUGEE_HELP);
    AI_OUTPUT(OTHER, SELF, "DIA_WNRefugee_YourGold_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_YourGold_03_05");
    WNREFUGEE_HELP = 3;
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_WNREFUGEE_AFTERPARTY(C_INFO) {
    NPC = 54156;
    NR = 4;
    CONDITION = DIA_WNREFUGEE_AFTERPARTY_CONDITION;
    INFORMATION = DIA_WNREFUGEE_AFTERPARTY_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_WNREFUGEE_AFTERPARTY_CONDITION() {
    if (((WNREFUGEE_HELP) == (3)) && (NPC_ISINSTATE(SELF, 61599))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_WNREFUGEE_AFTERPARTY_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_WNRefugee_Afterparty_03_01");
    AI_STOPPROCESSINFOS(SELF);
}

