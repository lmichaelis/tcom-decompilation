instance QA301_BADENDING(CUTSCENE) {
    ONSTART = FUNCTION(92770);
}

func void QA301_BADENDING_START() {
    WLD_SENDTRIGGER("KM_QA301_04");
    HERO.AIVAR[4] = TRUE;
    SLD_11056_GRIZ.AIVAR[4] = TRUE;
    QA301_BLOOD();
    QA301_LEAVEGUILD_MOVER_01 = TRUE;
    TELEPORTNPCTOWP(1819, "PART12_QA301_FIREPLACE");
    TELEPORTNPCTOWP(57706, "PART12_PATH_107");
    NPC_CLEARAIQUEUE(SLD_11056_GRIZ);
    B_CLEARPERCEPTIONS(SLD_11056_GRIZ);
    AI_WAIT(SLD_11056_GRIZ, 1077936128);
    AI_WAIT(HERO, 1065353216);
    AI_PLAYANI(HERO, "R_STRETCH_RANDOM_01");
    AI_WAIT(HERO, 1065353216);
    AI_TURNTONPC(HERO, SLD_11056_GRIZ);
    AI_WAIT(HERO, 1065353216);
    AI_FUNCTION(HERO, 92771);
    AI_WAIT(HERO, 1069547520);
    AI_PLAYANI(HERO, R_SCRATCHHEAD);
    AI_WAIT(HERO, 1056964608);
    AI_FUNCTION(HERO, 92772);
    AI_WAIT(HERO, 1065353216);
    AI_STARTFACEANI(HERO, S_SERIOUS, 1, -(1));
    AI_WAIT(HERO, 1069547520);
    AI_FUNCTION(HERO, 92773);
}

func void QA301_BADENDING_CHANGECAMERA_01() {
    QA301_SPAWNSHADOWBEAST();
    WLD_SENDTRIGGER("KM_QA301_05");
    WLD_SENDUNTRIGGER("KM_QA301_04");
    TELEPORTNPCTOWP(57706, "PART12_FOREST_QA301_SCAVENGER");
    B_KILLNPC(57706);
}

func void QA301_BADENDING_CHANGECAMERA_02() {
    WLD_SENDTRIGGER("KM_QA301_06");
    WLD_SENDUNTRIGGER("KM_QA301_05");
}

func void QA301_BADENDING_END() {
    WLD_SENDUNTRIGGER("KM_QA301_06");
    QA301_BADCUTSCENE = 3;
    B_LOGENTRY(TOPIC_QA301, LOG_QA301_NOTHINGHAPPEND);
    HERO.AIVAR[4] = FALSE;
}

