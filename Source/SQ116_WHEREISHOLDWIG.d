func void SQ116_WHEREISHOLDWIG() {
    if ((SQ116_WHEREISHOLDWIG_LOGENTRY) == (FALSE)) {
        SQ116_WHEREISHOLDWIG_LOGENTRY = TRUE;
        AI_LOGENTRY(TOPIC_SQ116, LOG_SQ116_WHEREISHOLDWIG);
    };
}

func void SQ116_FINISHSEARCHINGINKITCHEN() {
    SQ116_KITCHEN_COUNT = (SQ116_KITCHEN_COUNT) + (1);
    PRINTD(CS2("Punkty: ", INTTOSTRING(SQ116_KITCHEN_COUNT)));
    if ((SQ116_KITCHEN_COUNT) == (2)) {
        B_LOGENTRY(TOPIC_SQ116, LOG_SQ116_KITCHENCLEAR);
    };
    if ((SQ116_KITCHEN_COUNT) == (4)) {
        B_LOGENTRY(TOPIC_SQ116, LOG_SQ116_PANTRYCLEAR);
    };
}

func void SQ116_TERRY_ENABLECUTSCENE() {
    var int SQ116_TERRY_ENABLECUTSCENE_COUNT;
    SQ116_TERRY_ENABLECUTSCENE_COUNT = (SQ116_TERRY_ENABLECUTSCENE_COUNT) + (1);
    if ((SQ116_TERRY_ENABLECUTSCENE_COUNT) == (4)) {
        CUTSCENE_START(92858);
    };
}

func void SQ116_CUTSCENE_UNABLEV2() {
    var int SQ116_CUTSCENE_UNABLEV2_COUNT;
    SQ116_CUTSCENE_UNABLEV2_COUNT = (SQ116_CUTSCENE_UNABLEV2_COUNT) + (1);
    if ((SQ116_CUTSCENE_UNABLEV2_COUNT) == (2)) {
        PRINTD("Untrigger");
        WLD_SENDUNTRIGGER("SQ116_01");
        WLD_SENDUNTRIGGER("SQ116_02");
        WLD_SENDUNTRIGGER("SQ116_03");
        WLD_SENDUNTRIGGER("SQ116_04");
        WLD_SENDUNTRIGGER("SQ116_05");
        WLD_SENDUNTRIGGER("SQ116_06");
        WLD_SENDUNTRIGGER("SQ116_07");
        DIACAM_ENABLE();
        BAU_2242_DENNIS.AIVAR[96] = 7;
        BAU_2242_DENNIS.FLAGS = NPC_FLAG_IMPORTANT;
        BAU_2242_DENNIS.AIVAR[45] = AF_RUNNING;
        HERO.AIVAR[4] = FALSE;
        FF_APPLYONCEEXT(62297, 400, 3);
    };
}

func void SQ116_CUTSCENE_TERRYFLEE() {
    var int SQ116_CUTSCENE_TERRYFLEE_COUNT;
    SQ116_CUTSCENE_TERRYFLEE_COUNT = (SQ116_CUTSCENE_TERRYFLEE_COUNT) + (1);
    if ((SQ116_CUTSCENE_TERRYFLEE_COUNT) == (2)) {
        SQ116_TERRYRUNAWAY = TRUE;
        B_STARTOTHERROUTINE(BAU_2244_TERRY, "SQ116_FLEE");
        NPC_REFRESH(BAU_2244_TERRY);
    };
    if ((SQ116_CUTSCENE_TERRYFLEE_COUNT) == (3)) {
        B_IMMEDIATEATTACKPLAYER(BAU_2242_DENNIS, AR_KILL);
    };
}

func void SQ116_CUTSCENE_UNABLEV1() {
    var int SQ116_CUTSCENE_UNABLEV1_COUNT;
    SQ116_CUTSCENE_UNABLEV1_COUNT = (SQ116_CUTSCENE_UNABLEV1_COUNT) + (1);
    if ((SQ116_CUTSCENE_UNABLEV1_COUNT) == (2)) {
        WLD_SENDUNTRIGGER("SQ116_01");
        WLD_SENDUNTRIGGER("SQ116_02");
        WLD_SENDUNTRIGGER("SQ116_03");
        WLD_SENDUNTRIGGER("SQ116_04");
        WLD_SENDUNTRIGGER("SQ116_05");
        WLD_SENDUNTRIGGER("SQ116_06");
        WLD_SENDUNTRIGGER("SQ116_07");
        DIACAM_ENABLE();
        BAU_2244_TERRY.AIVAR[96] = -(1);
        BAU_2244_TERRY.FLAGS = NPC_FLAG_IMPORTANT;
        BAU_2242_DENNIS.FLAGS = 2;
        BAU_2242_DENNIS.AIVAR[15] = TRUE;
        BAU_2244_TERRY.AIVAR[45] = AF_RUNNING;
        BAU_2242_DENNIS.AIVAR[45] = AF_RUNNING;
        B_IMMEDIATEATTACKPLAYER(BAU_2244_TERRY, AR_KILL);
        NPC_EXCHANGEROUTINE(BAU_2242_DENNIS, "SQ116_FIGHT");
        HERO.AIVAR[4] = FALSE;
    };
}

func void SQ116_HEALEVERYONE() {
    if ((BAU_2242_DENNIS.ATTRIBUTE[0]) != (BAU_2242_DENNIS.ATTRIBUTE[1])) {
        BAU_2242_DENNIS.ATTRIBUTE[0] = BAU_2242_DENNIS.ATTRIBUTE[1];
    };
    if ((BAU_2244_TERRY.ATTRIBUTE[0]) != (BAU_2244_TERRY.ATTRIBUTE[1])) {
        BAU_2244_TERRY.ATTRIBUTE[0] = BAU_2244_TERRY.ATTRIBUTE[1];
    };
    if ((HERO.ATTRIBUTE[0]) != (HERO.ATTRIBUTE[1])) {
        HERO.ATTRIBUTE[0] = HERO.ATTRIBUTE[1];
    };
}

func void SQ116_UNABLEGUMBERCUTSCENE() {
    SQ116_GUMBERTCUTSCENE = 1;
    B_STARTOTHERROUTINE(BAU_2243_GUMBERT, "SQ116_CUTSCENE_GUMBERT");
    SQ116_GUMBERT_RTNCHECK = 8;
}

func void SQ116_GUMBERTCUTSCENE_START() {
    var int SQ116_GUMBERTCUTSCENE_COUNT;
    SQ116_GUMBERTCUTSCENE_COUNT = (SQ116_GUMBERTCUTSCENE_COUNT) + (1);
    if ((SQ116_GUMBERTCUTSCENE_COUNT) == (1)) {
        TELEPORTNPCTOWP(57053, "PART9_DENNIS_TELEPORT_01");
        AI_TELEPORTALWAYS(BAU_2243_GUMBERT, "PART9_DENNIS_TELEPORT_01", TRUE);
        PRINTD("Gumbert");
    };
    if ((SQ116_GUMBERTCUTSCENE_COUNT) == (4)) {
        CUTSCENE_START(92293);
    };
    if ((SQ116_GUMBERTCUTSCENE_COUNT) == (6)) {
        TELEPORTNPCTOWP(57040, "PART9_SQ116_CUTSCENE_DENNIS_03");
        PRINTD("Dennis");
    };
}

func void SQ116_DENNIS_ALLOWUSTOGO() {
    DENIS_ALLOWUSGO = 1;
    SQ116_CANTALKWITHHOLDWIG = TRUE;
    NPC_EXCHANGEROUTINE(BAU_2242_DENNIS, "NORMALDAY");
    B_STARTOTHERROUTINE(BAU_2245_HOLDWIG, "VINEYARD");
    NPC_REFRESH(BAU_2245_HOLDWIG);
    NPC_CLEARAIQUEUE(BAU_2245_HOLDWIG);
    AI_STANDUP(BAU_2245_HOLDWIG);
}

func void SQ116_SPAWNVINE() {
    PRINTD("Spawn");
    WLD_INSERTITEM(37024, "FP_PART9_SQ116_VINE_01");
    WLD_INSERTITEM(37024, "FP_PART9_SQ116_VINE_02");
    WLD_INSERTITEM(37024, "FP_PART9_SQ116_VINE_03");
}

func void SQ116_REMOVEMONSTERS() {
    if ((NPC_ISDEAD(GIANT_RAT_SQ116_01)) == (FALSE)) {
        B_REMOVENPC(50478);
    };
    if ((NPC_ISDEAD(GIANT_RAT_SQ116_02)) == (FALSE)) {
        B_REMOVENPC(50479);
    };
    if ((NPC_ISDEAD(GIANT_RAT_SQ116_03)) == (FALSE)) {
        B_REMOVENPC(50480);
    };
    if ((NPC_ISDEAD(SCAVENGER_SQ116_01)) == (FALSE)) {
        B_REMOVENPC(50745);
    };
    if ((NPC_ISDEAD(SCAVENGER_SQ116_02)) == (FALSE)) {
        B_REMOVENPC(50746);
    };
    if ((NPC_ISDEAD(SCAVENGER_SQ116_03)) == (FALSE)) {
        B_REMOVENPC(50747);
    };
    if ((NPC_ISDEAD(SCAVENGER_SQ116_04)) == (FALSE)) {
        B_REMOVENPC(50748);
    };
    if ((NPC_ISDEAD(SCAVENGER_SQ116_05)) == (FALSE)) {
        B_REMOVENPC(50749);
    };
    if ((NPC_ISDEAD(KM_TURTLE_SQ116_01)) == (FALSE)) {
        B_REMOVENPC(50146);
    };
    if ((NPC_ISDEAD(KM_TURTLE_SQ116_02)) == (FALSE)) {
        B_REMOVENPC(50147);
    };
    if ((NPC_ISDEAD(KM_TURTLE_SQ116_03)) == (FALSE)) {
        B_REMOVENPC(50148);
    };
}

func void SQ116_SPAWNMONSTERS() {
    WLD_INSERTNPC(50468, "PART9_MOB_40");
    WLD_INSERTNPC(50468, "PART9_MOB_41");
    WLD_INSERTNPC(50759, "PART9_MOB_42");
    WLD_INSERTNPC(50759, "PART9_MOB_43");
    WLD_INSERTNPC(50140, "PART9_MOB_60");
    WLD_INSERTNPC(50140, "PART9_MOB_61");
    WLD_INSERTNPC(50140, "PART9_MOB_62");
    HERO.AIVAR[4] = FALSE;
}

func void SQ116_BLOCKGUMBERTWAY() {
    SQ116_GUMBERTWAY_BLOCK = TRUE;
    MOB_CHANGEFOCUSNAME("SQ116_CHEST", "MOBNAME_NOTHING");
}

func void SQ116_DENNISCUTSCENE_TELEPORT() {
    FADESCREENTOBLACKF(1, 62311, 1000);
}

func void SQ116_DENNISCUTSCENE_TELEPORT_FADESCREEN() {
    TELEPORTNPCTOWP(1819, "PART9_SQ116_CUTSCENE_HERO");
    TELEPORTNPCTOWP(57040, BAU_2242_DENNIS.WP);
    TELEPORTNPCTOWP(57066, BAU_2244_TERRY.WP);
    HERO.AIVAR[4] = FALSE;
}

func void SQ116_KURTREWARD() {
    if ((HERO.HITCHANCE[1]) >= (HERO.HITCHANCE[2])) {
        if ((HERO.ATTRIBUTE[4]) >= (HERO.ATTRIBUTE[5])) {
            CREATEINVITEMS(BAU_701_KURT, 37797, 1);
        } else {
            CREATEINVITEMS(BAU_701_KURT, 37795, 1);
            B_GIVEINVITEMS(BAU_701_KURT, HERO, 37795, 1);
        };
    };
    if ((HERO.ATTRIBUTE[4]) >= (HERO.ATTRIBUTE[5])) {
        CREATEINVITEMS(BAU_701_KURT, 37861, 1);
    };
    CREATEINVITEMS(BAU_701_KURT, 37871, 1);
    B_GIVEINVITEMS(BAU_701_KURT, HERO, 37871, 1);
}

func void SQ116_HOLDWIGREWARD() {
    if ((HERO.HITCHANCE[3]) >= (HERO.HITCHANCE[4])) {
        CREATEINVITEMS(BAU_2245_HOLDWIG, 37937, 1);
    };
    CREATEINVITEMS(BAU_2245_HOLDWIG, 37907, 1);
    B_GIVEINVITEMS(BAU_2245_HOLDWIG, HERO, 37907, 1);
}

