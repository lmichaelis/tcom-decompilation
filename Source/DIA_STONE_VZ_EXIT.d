instance DIA_STONE_VZ_EXIT(C_INFO) {
    NPC = 59111;
    NR = 999;
    CONDITION = DIA_STONE_VZ_EXIT_CONDITION;
    INFORMATION = DIA_STONE_VZ_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_STONE_VZ_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_STONE_VZ_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_STONE_VZ_Q514_SMITH(C_INFO) {
    NPC = 59111;
    NR = 1;
    CONDITION = DIA_STONE_VZ_Q514_SMITH_CONDITION;
    INFORMATION = DIA_STONE_VZ_Q514_SMITH_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "In the east wing I found a small forge.";
}

func int DIA_STONE_VZ_Q514_SMITH_CONDITION() {
    return FALSE;
}

var int STONE_Q514_FOLLOW;
func void DIA_STONE_VZ_Q514_SMITH_INFO() {
    STONE_Q514_FOLLOW = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_Smith_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Smith_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Smith_03_03");
}

instance DIA_STONE_VZ_Q514_FOLLOW(C_INFO) {
    NPC = 59111;
    NR = 1;
    CONDITION = DIA_STONE_VZ_Q514_FOLLOW_CONDITION;
    INFORMATION = DIA_STONE_VZ_Q514_FOLLOW_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "Let's check out the forge.";
}

func int DIA_STONE_VZ_Q514_FOLLOW_CONDITION() {
    return FALSE;
}

func void DIA_STONE_VZ_Q514_FOLLOW_INFO() {
    STONE_Q514_FOLLOW = 2;
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_Follow_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Follow_03_02");
    NPC_EXCHANGEROUTINE(SELF, "Q514_FOLLOW");
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_STONE_VZ_Q514_WRONGWAY(C_INFO) {
    NPC = 59111;
    NR = 1;
    CONDITION = DIA_STONE_VZ_Q514_WRONGWAY_CONDITION;
    INFORMATION = DIA_STONE_VZ_Q514_WRONGWAY_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_STONE_VZ_Q514_WRONGWAY_CONDITION() {
    return FALSE;
}

func void DIA_STONE_VZ_Q514_WRONGWAY_INFO() {
    STONE_Q514_FOLLOW = 1;
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_WrongWay_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_WrongWay_03_02");
    AI_RESETFACEANI(SELF);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "CAMP");
}

instance DIA_STONE_VZ_Q514_FORGE(C_INFO) {
    NPC = 59111;
    NR = 1;
    CONDITION = DIA_STONE_VZ_Q514_FORGE_CONDITION;
    INFORMATION = DIA_STONE_VZ_Q514_FORGE_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_STONE_VZ_Q514_FORGE_CONDITION() {
    return FALSE;
}

func void DIA_STONE_VZ_Q514_FORGE_INFO() {
    STONE_Q514_FOLLOW = 3;
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Forge_03_01");
    AI_FUNCTION(SELF, 86663);
    AI_SETWALKMODE(SELF, NPC_WALK);
    AI_SETWALKMODE(OTHER, NPC_WALK);
    AI_TURNTONPC(OTHER, SELF);
    AI_TURNAWAY(SELF, OTHER);
    AI_GOTOWP(SELF, "VOLFZACKE_FORGE_BARREL");
    AI_WAITTILLEND(OTHER, SELF);
    AI_GOTOWP(OTHER, "VOLFZACK_FORGE_02");
    AI_TURNTONPC(OTHER, SELF);
    AI_PLAYANI(SELF, T_STAND_2_COUNTING);
    AI_WAITTILLEND(SELF, OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Forge_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Forge_03_03");
    AI_PLAYANI(SELF, T_COUNTING_2_STAND);
    AI_TURNTONPC(SELF, OTHER);
    AI_FUNCTION(SELF, 86664);
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Forge_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_Forge_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Forge_03_06");
    NPC_EXCHANGEROUTINE(SELF, "FORGE_WAIT");
}

func void STONE_Q514_CAMERA_ENABLE() {
    DIACAM_DISABLE();
    WLD_SENDTRIGGER("KM_FORGE");
    TELEPORTNPCTOWP(1819, "VOLFZACK_FORGE_01");
    TELEPORTNPCTOWP(59111, "VOLFZACK_FORGE_02");
}

func void STONE_Q514_CAMERA_DISABLE() {
    WLD_SENDUNTRIGGER("KM_FORGE");
    DIACAM_ENABLE();
}

instance DIA_STONE_VZ_Q514_WATER(C_INFO) {
    NPC = 59111;
    NR = 1;
    CONDITION = DIA_STONE_VZ_Q514_WATER_CONDITION;
    INFORMATION = DIA_STONE_VZ_Q514_WATER_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Please, here are 10 bottles of water.";
}

func int DIA_STONE_VZ_Q514_WATER_CONDITION() {
    return FALSE;
}

func void DIA_STONE_VZ_Q514_WATER_INFO() {
    B_GIVEINVITEMS(OTHER, SELF, 33982, 10);
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_Water_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Water_03_02");
    AI_LOOKATNPC(OTHER, SELF);
    AI_SETWALKMODE(SELF, NPC_WALK);
    AI_GOTOWP(SELF, "VOLFZACK_FORGE_COOL");
    CREATEINVITEMS(SELF, 36090, 1);
    AI_USEITEMTOSTATE(SELF, 36090, 1);
    AI_FUNCTION(SELF, 61358);
    AI_USEITEMTOSTATE(SELF, 36090, -(1));
    B_STANDUP();
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Water_03_03");
    AI_RESETFACEANI(SELF);
    AI_STOPLOOKAT(OTHER);
    NPC_EXCHANGEROUTINE(SELF, "FORGE");
}

instance DIA_STONE_VZ_Q514_MAKE(C_INFO) {
    NPC = 59111;
    NR = 1;
    CONDITION = DIA_STONE_VZ_Q514_MAKE_CONDITION;
    INFORMATION = DIA_STONE_VZ_Q514_MAKE_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I'd like you to forge something for me.";
}

func int DIA_STONE_VZ_Q514_MAKE_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q514)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 86665))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void STONE_Q514_MAKECHOICES() {
    INFO_CLEARCHOICES(86668);
    INFO_ADDCHOICE(86668, DIALOG_BACK, 86672);
    if ((NPC_HASITEMS(OTHER, 35440)) >= (1)) {
    };
}

func void DIA_STONE_VZ_Q514_MAKE_INFO() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_Make_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Make_03_02");
    STONE_Q514_MAKECHOICES();
}

func void DIA_STONE_VZ_Q514_MAKE_BACK() {
    INFO_CLEARCHOICES(86668);
}

func void DIA_STONE_VZ_Q514_MAKE_OLDARMOR() {
    INFO_CLEARCHOICES(86668);
    INFO_ADDCHOICE(86668, "I have nothing to lose anyway. Try to fix it.", 86674);
    INFO_ADDCHOICE(86668, "I think I'll keep it for myself.", 86675);
}

func void DIA_STONE_VZ_Q514_MAKE_OLDARMOR_YES() {
    STONE_Q514_MAKECHOICES();
}

func void DIA_STONE_VZ_Q514_MAKE_OLDARMOR_NO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_Make_No_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Make_No_03_02");
    STONE_Q514_MAKECHOICES();
}

instance DIA_STONE_VZ_TEACH(C_INFO) {
    NPC = 59111;
    NR = 10;
    CONDITION = DIA_STONE_VZ_TEACH_CONDITION;
    INFORMATION = DIA_STONE_VZ_TEACH_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = B_BUILDLEARNSTRING2(PRINT_LEARN_SMITH1, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_SMITH, 1), STONE_VZ_SMITH_01);
}

func int DIA_STONE_VZ_TEACH_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_Q514)) == (LOG_RUNNING)) && ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_SMITH)) == (0))) && ((Q514_CAMPISREADY) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_STONE_VZ_TEACH_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Teach_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (STONE_VZ_SMITH_01)) {
        if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_SMITH)) == (1)) {
            B_GIVEINVITEMS(OTHER, SELF, 34203, STONE_VZ_SMITH_01);
            AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Teach_03_02");
            AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Teach_03_03");
        };
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
}

instance DIA_STONE_VZ_TEACH2(C_INFO) {
    NPC = 59111;
    NR = 10;
    CONDITION = DIA_STONE_VZ_TEACH2_CONDITION;
    INFORMATION = DIA_STONE_VZ_TEACH2_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = B_BUILDLEARNSTRING2(PRINT_LEARN_SMITH2, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_SMITH, 2), STONE_VZ_SMITH_02);
}

func int DIA_STONE_VZ_TEACH2_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_Q514)) == (LOG_RUNNING)) && ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_SMITH)) == (1))) && ((Q514_CAMPISREADY) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_STONE_VZ_TEACH2_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Teach2_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (STONE_VZ_SMITH_02)) {
        if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_SMITH)) == (2)) {
            B_GIVEINVITEMS(OTHER, SELF, 34203, STONE_VZ_SMITH_02);
            AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Teach2_03_02");
            AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Teach2_03_03");
            AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Teach2_03_04");
        };
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
}

instance DIA_STONE_VZ_AMBIENT(C_INFO) {
    NPC = 59111;
    NR = 998;
    CONDITION = DIA_STONE_VZ_AMBIENT_CONDITION;
    INFORMATION = DIA_STONE_VZ_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How's the morale?";
}

func int DIA_STONE_VZ_AMBIENT_CONDITION() {
    if ((LOG_GETSTATUS(MIS_Q514)) == (LOG_RUNNING)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_STONE_VZ_AMBIENT_RANDOM() {
    NPC_INITAMBIENTS(SELF, 2);
    if ((NPC_GETLASTAMBIENT(SELF)) == (1)) {
        if ((NPC_KNOWSINFO(OTHER, 86660)) == (FALSE)) {
            AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
            AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Ambient_03_01");
        } else {
            AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
            AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Ambient_03_02");
        };
    };
    if ((NPC_GETLASTAMBIENT(SELF)) == (2)) {
        AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Ambient_03_05");
    };
}

func void DIA_STONE_VZ_AMBIENT_INFO() {
    var C_ITEM HEROARMOR;
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    B_SAY(OTHER, SELF, "$MARVIN_VolfzackMorale3");
    if ((Q514_FINISHVOLFZACKE) == (1)) {
        AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Ambient_03_07");
    };
    if ((Q514_CATACOMBS_GARGOYLE_FIRSTMEETING) == (2)) {
        AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Ambient_03_06");
    };
    if ((Q514_CAMPISREADY) == (FALSE)) {
        AI_STARTFACEANI(SELF, S_NOPE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Ambient_03_04");
    };
    if ((Q514_CAMPISREADY) == (TRUE)) {
        if (NPC_HASEQUIPPEDARMOR(HERO)) {
            HEROARMOR = NPC_GETEQUIPPEDARMOR(HERO);
            if (HLP_ISITEM(HEROARMOR, 35442)) {
                AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
                AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Ambient_03_03");
            } else {
                DIA_STONE_VZ_AMBIENT_RANDOM();
            };
        } else {
            DIA_STONE_VZ_AMBIENT_RANDOM();
        };
    };
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

instance DIA_STONE_VZ_Q514_OLDARMOR(C_INFO) {
    NPC = 59111;
    NR = 1;
    CONDITION = DIA_STONE_VZ_Q514_OLDARMOR_CONDITION;
    INFORMATION = DIA_STONE_VZ_Q514_OLDARMOR_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "In one room I found this old, destroyed armor.";
}

func int DIA_STONE_VZ_Q514_OLDARMOR_CONDITION() {
    if (((Q514_CRAWLER_FINISH) == (0)) && ((NPC_HASITEMS(OTHER, 35440)) >= (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int STONE_Q514_OLDARMOR_BETTER;
func void DIA_STONE_VZ_Q514_OLDARMOR_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_Make_OldArmor_15_01");
    AI_STARTFACEANI(SELF, S_THINK, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Make_OldArmor_03_02_A");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Make_OldArmor_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Make_OldArmor_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Make_OldArmor_03_05");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Make_OldArmor_03_06");
    B_GIVEINVITEMS(OTHER, SELF, 35440, 1);
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_Make_Yes_15_01");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    if (((VOLFZACKEARMOR_READ) == (TRUE)) && ((NPC_HASITEMS(OTHER, 39930)) >= (1))) {
        INFO_CLEARCHOICES(86687);
        INFO_ADDCHOICE(86687, "I found a book describing the craft of the Vardhal armorers.", 86691);
    };
    AI_LOGENTRY(TOPIC_VOLFZACKEARMOR, LOG_VOLFZACKEARMOR_GIVE_V1);
}

func void DIA_STONE_VZ_Q514_OLDARMOR_BOOK() {
    STONE_Q514_OLDARMOR_BETTER = TRUE;
    B_GIVEINVITEMS(OTHER, SELF, 39930, 1);
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_OldArmor_Book_15_01");
    AI_STARTFACEANI(OTHER, S_THINK, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_OldArmor_Book_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_SQ202_712_03");
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_OldArmor_Book_15_03");
    B_SAY(SELF, OTHER, "$SURE_V1");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Make_OldArmor_03_02_B");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Make_03_02");
    CREATEINVITEMS(SELF, 39933, 1);
    B_GIVEINVITEMS(SELF, OTHER, 39933, 1);
    INFO_CLEARCHOICES(86687);
    AI_LOGENTRY(TOPIC_VOLFZACKEARMOR, LOG_VOLFZACKEARMOR_GIVE_V2);
}

instance DIA_STONE_VZ_Q514_GOTLIST(C_INFO) {
    NPC = 59111;
    NR = 1;
    CONDITION = DIA_STONE_VZ_Q514_GOTLIST_CONDITION;
    INFORMATION = DIA_STONE_VZ_Q514_GOTLIST_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I brought all the materials mentioned in the book.";
}

func int DIA_STONE_VZ_Q514_GOTLIST_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 86687)) && ((STONE_Q514_OLDARMOR_BETTER) == (TRUE))) && ((Q514_CRAWLER_FINISH) == (0))) {
        if ((((((NPC_HASITEMS(OTHER, 33865)) >= (1)) && ((NPC_HASITEMS(OTHER, 35327)) >= (1))) && ((NPC_HASITEMS(OTHER, 33867)) >= (1))) && ((NPC_HASITEMS(OTHER, 34202)) >= (1))) && ((NPC_HASITEMS(OTHER, 36939)) >= (1))) {
            if (((NPC_HASITEMS(OTHER, 33868)) >= (1)) || ((NPC_HASITEMS(OTHER, 35358)) >= (1))) {
                if ((((NPC_HASITEMS(OTHER, 33871)) >= (1)) || ((NPC_HASITEMS(OTHER, 35371)) >= (1))) || ((NPC_HASITEMS(OTHER, 35370)) >= (1))) {
                    return TRUE;
                };
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_STONE_VZ_Q514_GOTLIST_INFO() {
    if ((NPC_HASITEMS(OTHER, 33868)) >= (1)) {
    };
    if ((NPC_HASITEMS(OTHER, 35358)) >= (1)) {
        B_GIVEINVITEMS(OTHER, SELF, 35358, 1);
    };
    if ((NPC_HASITEMS(OTHER, 33871)) >= (1)) {
    };
    if ((NPC_HASITEMS(OTHER, 35371)) >= (1)) {
    };
    if ((NPC_HASITEMS(OTHER, 35370)) >= (1)) {
        B_GIVEINVITEMS(OTHER, SELF, 35370, 1);
    };
    B_GIVEINVITEMS(OTHER, SELF, 36939, 1);
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    B_GIVEINVITEMS(OTHER, SELF, 34202, 1);
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_GotList_15_01");
    B_GIVEINVITEMS(OTHER, SELF, 33867, 1);
    B_SAY(SELF, OTHER, "$NotBad");
    B_GIVEINVITEMS(OTHER, SELF, 35327, 1);
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Water_03_02");
    B_GIVEINVITEMS(OTHER, SELF, 33865, 1);
    AI_RESETFACEANI(SELF);
    AI_LOGENTRY(TOPIC_VOLFZACKEARMOR, LOG_VOLFZACKEARMOR_MATERIALS);
}

instance DIA_STONE_VZ_Q514_ARMORREADY(C_INFO) {
    NPC = 59111;
    NR = 970;
    CONDITION = DIA_STONE_VZ_Q514_ARMORREADY_CONDITION;
    INFORMATION = DIA_STONE_VZ_Q514_ARMORREADY_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How's the armor repair going?";
}

func int DIA_STONE_VZ_Q514_ARMORREADY_CONDITION() {
    if ((Q514_FINISHVOLFZACKE) == (0)) {
        if ((NPC_KNOWSINFO(OTHER, 86692)) || ((NPC_KNOWSINFO(OTHER, 86687)) && ((STONE_Q514_OLDARMOR_BETTER) == (FALSE)))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_STONE_VZ_Q514_ARMORREADY_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_ArmorReady_15_01");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_Ambient_712_06");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

instance DIA_STONE_VZ_Q514_GIVEARMOR(C_INFO) {
    NPC = 59111;
    NR = 1;
    CONDITION = DIA_STONE_VZ_Q514_GIVEARMOR_CONDITION;
    INFORMATION = DIA_STONE_VZ_Q514_GIVEARMOR_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_STONE_VZ_Q514_GIVEARMOR_CONDITION() {
    if (((Q514_FINISHVOLFZACKE) >= (1)) && (NPC_KNOWSINFO(OTHER, 86687))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_STONE_VZ_Q514_GIVEARMOR_BETTER() {
    AI_STARTFACEANI(OTHER, S_SURPRISE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_GiveArmor_15_02");
}

func void DIA_STONE_VZ_Q514_GIVEARMOR_NEXTTIME() {
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_GiveArmor_03_05");
}

func void DIA_STONE_VZ_Q514_GIVEARMOR_INFO() {
    if (((STONE_Q514_OLDARMOR_BETTER) == (TRUE)) && (NPC_KNOWSINFO(OTHER, 86692))) {
        AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Stone_SQ202_Enough_712_02");
        CREATEINVITEMS(SELF, 35442, 1);
        B_GIVEINVITEMS(SELF, OTHER, 35442, 1);
        AI_EQUIPARMOR(OTHER, 35442);
        AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_GiveArmor_03_06");
        DIA_STONE_VZ_Q514_GIVEARMOR_BETTER();
        AI_STARTFACEANI(OTHER, S_SMUG, 1, -(1));
        AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_GiveArmor_15_07");
        AI_OUTPUT(SELF, OTHER, "DIA_Stone_Bolt_712_03");
        DIA_STONE_VZ_Q514_GIVEARMOR_NEXTTIME();
        AI_RESETFACEANI(OTHER);
        AI_RESETFACEANI(SELF);
        AI_LOGENTRY(TOPIC_VOLFZACKEARMOR, LOG_VOLFZACKEARMOR_GOTARMOR_V1);
    };
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_GiveArmor_03_01");
    CREATEINVITEMS(SELF, 35441, 1);
    B_GIVEINVITEMS(SELF, OTHER, 35441, 1);
    AI_EQUIPARMOR(OTHER, 35441);
    DIA_STONE_VZ_Q514_GIVEARMOR_BETTER();
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_GiveArmor_15_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Stone_VZ_Q514_GiveArmor_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_Bolt_712_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Stone_VZ_Q514_Make_No_03_02");
    DIA_STONE_VZ_Q514_GIVEARMOR_NEXTTIME();
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
    AI_LOGENTRY(TOPIC_VOLFZACKEARMOR, LOG_VOLFZACKEARMOR_GOTARMOR_V2);
}

var int STONEVZ_CANTTEACH;
var int STONEVZ_CURRENTSTRLEVEL;
var int STONEVZ_GOLDCOST;
instance DIA_STONEVZ_TEACH(C_INFO) {
    NPC = 59111;
    NR = 998;
    CONDITION = DIA_STONEVZ_TEACH_CONDITION;
    INFORMATION = DIA_STONEVZ_TEACH_INFO;
    PERMANENT = 1;
    DESCRIPTION = "Teach me.";
}

func int DIA_STONEVZ_TEACH_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 87105)) && (!(NPC_KNOWSINFO(OTHER, 87118)))) && ((STONEVZ_CANTTEACH) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_STONEVZ_TEACH_CHOICES() {
    STONEVZ_GOLDCOST = 25;
    STONEVZ_CURRENTSTRLEVEL = OTHER.AIVAR[81];
    INFO_CLEARCHOICES(86706);
    INFO_ADDCHOICE(86706, DIALOG_BACK, 86710);
    INFO_ADDCHOICE(86706, B_BUILDLEARNSTRING2(PRINT_LEARNSTR1, B_GETLEARNCOSTATTRIBUTE(OTHER, ATR_STRENGTH, 1), STONEVZ_GOLDCOST), 86711);
    INFO_ADDCHOICE(86706, B_BUILDLEARNSTRING2(PRINT_LEARNSTR5, B_GETLEARNCOSTATTRIBUTE(OTHER, ATR_STRENGTH, 5), (STONEVZ_GOLDCOST) * (5)), 86712);
}

func void DIA_STONEVZ_TEACH_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_TeachMe");
    DIA_STONEVZ_TEACH_CHOICES();
}

func void DIA_STONEVZ_TEACH_BACK() {
    if ((OTHER.AIVAR[81]) >= (200)) {
        B_SAY(SELF, OTHER, "$NoLearnYoureBetter");
        STONEVZ_CANTTEACH = TRUE;
    };
    INFO_CLEARCHOICES(86706);
}

func void DIA_STONEVZ_TEACH_STR1() {
    if ((NPC_HASITEMS(OTHER, 34203)) >= (STONEVZ_GOLDCOST)) {
        if ((STONEVZ_CURRENTSTRLEVEL) < (OTHER.AIVAR[81])) {
            B_SAY(SELF, OTHER, "$YouLearnedSomething");
        };
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_STONEVZ_TEACH_CHOICES();
}

func void DIA_STONEVZ_TEACH_STR5() {
    if ((NPC_HASITEMS(OTHER, 34203)) >= ((STONEVZ_GOLDCOST) * (5))) {
        if ((STONEVZ_CURRENTSTRLEVEL) < (OTHER.AIVAR[81])) {
            B_SAY(SELF, OTHER, "$YouLearnedSomething");
        };
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_STONEVZ_TEACH_CHOICES();
}

