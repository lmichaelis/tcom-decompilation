instance DIA_SALL_EXIT(C_INFO) {
    NPC = 52967;
    NR = 999;
    CONDITION = DIA_SALL_EXIT_CONDITION;
    INFORMATION = DIA_SALL_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_SALL_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_SALL_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_SALL_CANYOUTRAIN(C_INFO) {
    NPC = 52967;
    NR = 20;
    CONDITION = DIA_SALL_CANYOUTRAIN_CONDITION;
    INFORMATION = DIA_SALL_CANYOUTRAIN_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Could we train together?";
}

func int DIA_SALL_CANYOUTRAIN_CONDITION() {
    if (((((OTHER.GUILD) == (GIL_MIL)) && ((LOG_GETSTATUS(MIS_Q203)) == (LOG_SUCCESS))) && ((LOG_GETSTATUS(MIS_CQ004)) != (LOG_RUNNING))) && (NPC_KNOWSINFO(OTHER, 66982))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_SALL_CANYOUTRAIN_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_Canyoutrain_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_Canyoutrain_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_Canyoutrain_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_Canyoutrain_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_Canyoutrain_03_05");
    LOG_CREATETOPIC(TOPIC_MILITIATEACHER, LOG_NOTE);
    AI_LOGENTRY(TOPIC_MILITIATEACHER, LOG_SALL_TEACHFIGHT);
    LOG_CREATETOPIC(TOPIC_MILITIATEACHER, LOG_NOTE);
    AI_LOGENTRY(TOPIC_MILITIATEACHER, LOG_SALL_TEACHHUNT);
}

var int SALL_NOMORE;
var int SALL_CURRENT1HLEVEL;
var int SALL_CURRENTDEXLEVEL;
var string SALL_PRINTS;
instance DIA_SALL_TRAIN(C_INFO) {
    NPC = 52967;
    NR = 20;
    CONDITION = DIA_SALL_TRAIN_CONDITION;
    INFORMATION = DIA_SALL_TRAIN_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I'd like to train.";
}

func int DIA_SALL_TRAIN_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 66960)) && ((SALL_NOMORE) == (FALSE))) && ((LOG_GETSTATUS(MIS_CQ004)) != (LOG_RUNNING))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_SALL_TRAIN_CHOICES() {
    var int SALL_GOLDCOST;
    SALL_CURRENT1HLEVEL = OTHER.AIVAR[84];
    SALL_CURRENTDEXLEVEL = OTHER.AIVAR[82];
    SALL_GOLDCOST = 0;
    INFO_CLEARCHOICES(66967);
    INFO_ADDCHOICE(66967, DIALOG_BACK, 66973);
    INFO_ADDCHOICE(66967, B_BUILDLEARNSTRING2(PRINT_LEARN1H1, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_1H, 1), SALL_GOLDCOST), 66975);
    INFO_ADDCHOICE(66967, B_BUILDLEARNSTRING2(PRINT_LEARN1H5, (B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_1H, 1)) * (5), (SALL_GOLDCOST) * (5)), 66977);
    INFO_ADDCHOICE(66967, B_BUILDLEARNSTRING2(PRINT_LEARNDEX1, B_GETLEARNCOSTATTRIBUTE(OTHER, ATR_DEXTERITY, 1), SALL_GOLDCOST), 66979);
    INFO_ADDCHOICE(66967, B_BUILDLEARNSTRING2(PRINT_LEARNDEX5, B_GETLEARNCOSTATTRIBUTE(OTHER, ATR_DEXTERITY, 5), (SALL_GOLDCOST) * (5)), 66981);
}

func void DIA_SALL_TRAIN_LETSGO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_Train_03_02");
    DIA_SALL_TRAIN_CHOICES();
}

func void DIA_SALL_TRAIN_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_Train_15_00");
    if ((Q205_WEGOTARMOR) == (FALSE)) {
        if (((OTHER.AIVAR[84]) >= (40)) && ((OTHER.AIVAR[82]) >= (50))) {
            B_SAY(SELF, OTHER, "$NoLearnOverPersonalMAX");
            SALL_PRINTS = PRINT_MILPROMOTIONNEEDED;
        } else {
            DIA_SALL_TRAIN_LETSGO();
        };
    };
    if ((Q205_WEGOTARMOR) == (TRUE)) {
        if (((OTHER.AIVAR[84]) >= (60)) && ((OTHER.AIVAR[82]) >= (80))) {
            AI_OUTPUT(SELF, OTHER, "DIA_Sall_Train_03_01");
            SALL_NOMORE = TRUE;
        } else {
            DIA_SALL_TRAIN_LETSGO();
        };
    };
}

func void DIA_SALL_TRAIN_BACK() {
    INFO_CLEARCHOICES(66967);
}

func void DIA_SALL_TRAIN_1H_1_GOODJOB() {
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_Train_1H1_03_01");
    DIA_SALL_TRAIN_CHOICES();
}

func void DIA_SALL_TRAIN_1H_1() {
    if ((Q205_WEGOTARMOR) == (FALSE)) {
        if ((SALL_CURRENT1HLEVEL) < (OTHER.AIVAR[84])) {
            DIA_SALL_TRAIN_1H_1_GOODJOB();
        } else if (((OTHER.AIVAR[84]) >= (40)) && ((SALL_CURRENT1HLEVEL) == (OTHER.AIVAR[84]))) {
            B_SAY(SELF, OTHER, "$NoLearnOverPersonalMAX");
            SALL_PRINTS = PRINT_MILPROMOTIONNEEDED;
            PRINTSCREEN(SALL_PRINTS, -(1), YPOS_LEVELUP, FONT_SCREEN, 2);
            DIA_SALL_TRAIN_CHOICES();
        };
    };
    if ((Q205_WEGOTARMOR) == (TRUE)) {
        if ((SALL_CURRENT1HLEVEL) < (OTHER.AIVAR[84])) {
            DIA_SALL_TRAIN_1H_1_GOODJOB();
        };
    };
    DIA_SALL_TRAIN_CHOICES();
}

func void DIA_SALL_TRAIN_1H_5_GOODJOB() {
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_Train_1H5_03_01");
    DIA_SALL_TRAIN_CHOICES();
}

func void DIA_SALL_TRAIN_1H_5() {
    if ((Q205_WEGOTARMOR) == (FALSE)) {
        if ((SALL_CURRENT1HLEVEL) < (OTHER.AIVAR[84])) {
            DIA_SALL_TRAIN_1H_1_GOODJOB();
        } else if (((OTHER.AIVAR[84]) >= (40)) && ((SALL_CURRENT1HLEVEL) == (OTHER.AIVAR[84]))) {
            B_SAY(SELF, OTHER, "$NoLearnOverPersonalMAX");
            SALL_PRINTS = PRINT_MILPROMOTIONNEEDED;
            PRINTSCREEN(SALL_PRINTS, -(1), YPOS_LEVELUP, FONT_SCREEN, 2);
            DIA_SALL_TRAIN_CHOICES();
        };
    };
    if ((Q205_WEGOTARMOR) == (TRUE)) {
        if ((SALL_CURRENT1HLEVEL) < (OTHER.AIVAR[84])) {
            DIA_SALL_TRAIN_1H_5_GOODJOB();
        };
    };
    DIA_SALL_TRAIN_CHOICES();
}

func void DIA_SALL_TRAINDEX_1_GOODJOB() {
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_Train_STR1_03_01");
    DIA_SALL_TRAIN_CHOICES();
}

func void DIA_SALL_TRAINDEX_1() {
    if ((Q205_WEGOTARMOR) == (FALSE)) {
        if ((SALL_CURRENTDEXLEVEL) < (OTHER.AIVAR[82])) {
            DIA_SALL_TRAINDEX_1_GOODJOB();
        } else if (((OTHER.AIVAR[82]) >= (50)) && ((SALL_CURRENTDEXLEVEL) == (OTHER.AIVAR[82]))) {
            B_SAY(SELF, OTHER, "$NoLearnOverPersonalMAX");
            SALL_PRINTS = PRINT_MILPROMOTIONNEEDED;
            PRINTSCREEN(SALL_PRINTS, -(1), YPOS_LEVELUP, FONT_SCREEN, 2);
            DIA_SALL_TRAIN_CHOICES();
        };
    };
    if ((Q205_WEGOTARMOR) == (TRUE)) {
        if ((SALL_CURRENTDEXLEVEL) < (OTHER.AIVAR[82])) {
            DIA_SALL_TRAINDEX_1_GOODJOB();
        };
    };
    DIA_SALL_TRAIN_CHOICES();
}

func void DIA_SALL_TRAINDEX_5_GOODJOB() {
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_Train_STR5_03_01");
    DIA_SALL_TRAIN_CHOICES();
}

func void DIA_SALL_TRAINDEX_5() {
    if ((Q205_WEGOTARMOR) == (FALSE)) {
        if ((SALL_CURRENTDEXLEVEL) < (OTHER.AIVAR[82])) {
            DIA_SALL_TRAINDEX_5_GOODJOB();
        } else if (((OTHER.AIVAR[82]) >= (50)) && ((SALL_CURRENTDEXLEVEL) == (OTHER.AIVAR[82]))) {
            B_SAY(SELF, OTHER, "$NoLearnOverPersonalMAX");
            SALL_PRINTS = PRINT_MILPROMOTIONNEEDED;
            PRINTSCREEN(SALL_PRINTS, -(1), YPOS_LEVELUP, FONT_SCREEN, 2);
            DIA_SALL_TRAIN_CHOICES();
        };
    };
    if ((Q205_WEGOTARMOR) == (TRUE)) {
        if ((SALL_CURRENTDEXLEVEL) < (OTHER.AIVAR[82])) {
            DIA_SALL_TRAINDEX_5_GOODJOB();
        };
    };
    DIA_SALL_TRAIN_CHOICES();
}

instance DIA_SALL_HELLO(C_INFO) {
    NPC = 52967;
    NR = 2;
    CONDITION = DIA_SALL_HELLO_CONDITION;
    INFORMATION = DIA_SALL_HELLO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "How do you like the guard?";
}

func int DIA_SALL_HELLO_CONDITION() {
    if ((KAPITEL) < (3)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_SALL_HELLO_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_Hello_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_Hello_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_Hello_03_03");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_Hello_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_Hello_15_05");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_Hello_03_06");
    B_STANDUP();
    AI_WAITTILLEND(SELF, OTHER);
    AI_PLAYANI(SELF, T_GREETGRD);
}

instance DIA_SALL_WHYNOT(C_INFO) {
    NPC = 52967;
    NR = 3;
    CONDITION = DIA_SALL_WHYNOT_CONDITION;
    INFORMATION = DIA_SALL_WHYNOT_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Why didn't you become anyone's apprentice?";
}

func int DIA_SALL_WHYNOT_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 66982)) && ((KAPITEL) < (3))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_SALL_WHYNOT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_WhyNot_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_WhyNot_03_02");
}

instance DIA_SALL_CQ004_WHAT(C_INFO) {
    NPC = 52967;
    NR = 1;
    CONDITION = DIA_SALL_CQ004_WHAT_CONDITION;
    INFORMATION = DIA_SALL_CQ004_WHAT_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_SALL_CQ004_WHAT_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 75271)) && ((LOG_GETSTATUS(MIS_CQ004)) == (LOG_RUNNING))) {
        if (((NPC_GETDISTTOWP(VLK_6230_KETH, VLK_6230_KETH.WP)) <= (500)) && ((NPC_GETDISTTOWP(MIL_4044_SALL, MIL_4044_SALL.WP)) <= (500))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_SALL_CQ004_WHAT_INFO() {
    TRIA_INVITE(VLK_6230_KETH);
    TRIA_START();
    AI_LOOKATNPC(OTHER, SELF);
    AI_STOPLOOKAT(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_03_01");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6230_KETH);
    AI_TURNTONPC(SELF, MIL_4044_SALL);
    AI_TURNTONPC(MIL_4044_SALL, SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_03_05");
    TRIA_WAIT();
    TRIA_NEXT(MIL_4044_SALL);
    AI_TURNTONPC(SELF, MIL_4044_SALL);
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_03_06");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6230_KETH);
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_03_07");
    INFO_CLEARCHOICES(66988);
    INFO_ADDCHOICE(66988, "How can you be sure it was damaged?", 66996);
    INFO_ADDCHOICE(66988, "Did it prevent them from continuing to work?", 66995);
}

func void DIA_SALL_CQ004_WHAT_TURN() {
    var int CQ004_KETHANDSALLTURN;
    if ((CQ004_KETHANDSALLTURN) == (0)) {
        AI_TURNTONPC(VLK_6230_KETH, HERO);
        AI_TURNTONPC(MIL_4044_SALL, HERO);
        CQ004_KETHANDSALLTURN = (CQ004_KETHANDSALLTURN) + (1);
    };
}

func void DIA_SALL_CQ004_WHAT_NEXT() {
    var int CQ004_KETHINFORMATION;
    CQ004_KETHINFORMATION = (CQ004_KETHINFORMATION) + (1);
    if ((CQ004_KETHINFORMATION) == (2)) {
        TRIA_WAIT();
        AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_Work_03_06");
        AI_OUTPUT(OTHER, SELF, "DIA_Sall_CQ004_What_Work_15_07");
        AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_Work_03_08");
        TRIA_WAIT();
        TRIA_NEXT(MIL_4044_SALL);
        TRIA_WAIT();
        AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_Work_03_09");
        TRIA_NEXT(VLK_6230_KETH);
        TRIA_WAIT();
        AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_Work_03_10");
        TRIA_WAIT();
        AI_OUTPUT(OTHER, SELF, "DIA_Sall_CQ004_What_Work_15_11");
        TRIA_WAIT();
        AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_Work_03_12");
        AI_OUTPUT(OTHER, SELF, "DIA_Sall_CQ004_What_Work_15_13");
        TRIA_FINISH();
        AI_WAITTILLEND(SELF, OTHER);
        AI_WAITTILLEND(OTHER, SELF);
        AI_STOPLOOKAT(SELF);
        AI_STOPLOOKAT(OTHER);
        AI_LOGENTRY(TOPIC_CQ004, LOG_CQ004_SALL_TRIALOG);
        INFO_CLEARCHOICES(66988);
        AI_STOPPROCESSINFOS(SELF);
        AI_FUNCTION(SELF, 62671);
    };
}

func void DIA_SALL_CQ004_WHAT_WORK() {
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_CQ004_What_Work_15_01");
    DIA_SALL_CQ004_WHAT_TURN();
    TRIA_WAIT();
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_Work_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_Work_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_Work_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_Work_03_05");
    DIA_SALL_CQ004_WHAT_NEXT();
}

func void DIA_SALL_CQ004_WHAT_BROKEN() {
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_CQ004_What_Broken_15_01");
    TRIA_WAIT();
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_Broken_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_Broken_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_What_Broken_03_04");
    DIA_SALL_CQ004_WHAT_NEXT();
}

instance DIA_SALL_CQ004_NOTBAD(C_INFO) {
    NPC = 52967;
    NR = 1;
    CONDITION = DIA_SALL_CQ004_NOTBAD_CONDITION;
    INFORMATION = DIA_SALL_CQ004_NOTBAD_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_SALL_CQ004_NOTBAD_CONDITION() {
    return FALSE;
}

func void DIA_SALL_CQ004_NOTBAD_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_NotBad_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_CQ004_NotBad_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_NotBad_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_CQ004_NotBad_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_NotBad_03_05");
}

instance DIA_SALL_CQ004_KETHWON(C_INFO) {
    NPC = 52967;
    NR = 1;
    CONDITION = DIA_SALL_CQ004_KETHWON_CONDITION;
    INFORMATION = DIA_SALL_CQ004_KETHWON_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_SALL_CQ004_KETHWON_CONDITION() {
    if ((((NPC_REFUSETALK(SELF)) == (FALSE)) && ((CQ004_MILITIAFOUNDGEAR) == (TRUE))) && ((LOG_GETSTATUS(MIS_CQ004)) == (LOG_RUNNING))) {
        if ((NPC_GETDISTTOWP(HERO, "PARTM3_PATH_163")) <= (300)) {
            if (((((((NPC_GETDISTTOWP(VLK_6232_VEIGO, "PARTM3_BARRACK_VEIGO")) <= (450)) && ((NPC_GETDISTTOWP(VLK_6231_RECON, "PARTM3_BARRACK_RECON")) <= (450))) && ((NPC_GETDISTTOWP(MIL_4044_SALL, "PARTM3_BARRACK_SALL")) <= (450))) && ((NPC_GETDISTTOWP(VLK_6233_ALDER, "PARTM3_BARRACK_ALDER")) <= (450))) && ((NPC_GETDISTTOWP(MIL_4047_PRISONGUARD, "PARTM3_PATH_164")) <= (450))) && ((NPC_GETDISTTOWP(SELF, "PARTM3_BARRACK_KETH")) <= (450))) {
                return TRUE;
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_SALL_CQ004_KETHWON_INFO() {
    WLD_SENDUNTRIGGER("WORKERHONOR_GEAR");
    DIACAM_ENABLE();
    TRIA_INVITE(VLK_6231_RECON);
    TRIA_START();
    AI_LOOKATNPC(HERO, MIL_4044_SALL);
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_KethWon_03_01");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6231_RECON);
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_KethWon_03_02");
    TRIA_WAIT();
    TRIA_NEXT(MIL_4044_SALL);
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_KethWon_03_03");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6231_RECON);
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_KethWon_03_04");
    TRIA_WAIT();
    TRIA_NEXT(MIL_4044_SALL);
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_KethWon_03_05");
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_CQ004_KethWon_15_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_CQ004_KethWon_03_07");
    TRIA_FINISH();
    AI_WAITTILLEND(SELF, OTHER);
    AI_WAITTILLEND(OTHER, SELF);
    AI_STOPLOOKAT(SELF);
    AI_STOPLOOKAT(OTHER);
    AI_LOGENTRY(TOPIC_CQ004, LOG_CQ004_JUDGMENT_RESULT_V2);
    AI_STOPPROCESSINFOS(SELF);
    CQ004_RESULT = 2;
    AI_FUNCTION(SELF, 62676);
    CQ004_CHANGEDOORRECON();
}

instance DIA_SALL_KQ402_ARMOR(C_INFO) {
    NPC = 52967;
    NR = 1;
    CONDITION = DIA_SALL_KQ402_ARMOR_CONDITION;
    INFORMATION = DIA_SALL_KQ402_ARMOR_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "You don't look happy.";
}

func int DIA_SALL_KQ402_ARMOR_CONDITION() {
    if (((LOG_GETSTATUS(MIS_KQ402)) == (LOG_RUNNING)) && ((KQ402_DECISION) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_SALL_KQ402_ARMOR_INFO() {
    AI_STARTFACEANI(SELF, S_TIRED, 0, 1);
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_KQ402_Armor_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_KQ402_Armor_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_KQ402_Armor_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_KQ402_Armor_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_KQ402_Armor_15_05");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_KQ402_Armor_03_06");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_KQ402_Armor_03_07");
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_KQ402_Armor_15_08");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_KQ402_Armor_03_09");
    AI_LOGENTRY(TOPIC_KQ402, LOG_KQ402_SALL_ARMOR);
}

instance DIA_SALL_QM401_FIREPLACE(C_INFO) {
    NPC = 52967;
    NR = 1;
    CONDITION = DIA_SALL_QM401_FIREPLACE_CONDITION;
    INFORMATION = DIA_SALL_QM401_FIREPLACE_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_SALL_QM401_FIREPLACE_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QM401)) == (LOG_RUNNING)) && ((QM401_SALLGUIDE) == (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_SALL_QM401_FIREPLACE_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_QM401_FirePlace_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_QM401_FirePlace_03_02");
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 62839);
    AI_LOGENTRY(TOPIC_QM401, LOG_QM401_SALL_FIREPLACE);
}

instance DIA_SALL_AMBIENT(C_INFO) {
    NPC = 52967;
    NR = 850;
    CONDITION = DIA_SALL_AMBIENT_CONDITION;
    INFORMATION = DIA_SALL_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How are you doing?";
}

func int DIA_SALL_AMBIENT_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 66982)) {
        if (((LOG_GETSTATUS(MIS_CQ004)) >= (1)) || ((KQ402_DECISION) == (1))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_SALL_AMBIENT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_Ambient_15_01");
    if (((LOG_GETSTATUS(MIS_CQ004)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 66988))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Sall_Ambient_03_02");
    };
    if (((LOG_GETSTATUS(MIS_CQ004)) == (LOG_SUCCESS)) && ((KQ402_DECISION) != (1))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Sall_Ambient_03_03");
    };
    if ((KQ402_DECISION) == (1)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Sall_Ambient_03_04");
    };
}

instance DIA_SALL_HUNTING_BASE(C_INFO) {
    NPC = 52967;
    NR = 940;
    CONDITION = DIA_SALL_HUNTING_BASE_CONDITION;
    INFORMATION = DIA_SALL_HUNTING_BASE_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = B_BUILDLEARNSTRING2(PRINT_LEARN_HUNTING_BASE, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_FUR), SALL_BASETROPHY);
}

func int DIA_SALL_HUNTING_BASE_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 66960)) && ((PLAYER_TALENT_TAKEANIMALTROPHY[2]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_SALL_HUNTING_BASE_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_Hunting_Base_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (SALL_BASETROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[2]) == (TRUE)) {
            if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_SNEAK)) == (0)) {
                B_TEACHTHIEFTALENT(MIL_4044_SALL, HERO, NPC_TALENT_SNEAK, 1);
                PRINTSCREEN(PRINT_LEARNSNEAK, -(1), YPOS_LEVELUP, FONT_SCREEN, 2);
            };
            NPC_REMOVEINVITEMS(SELF, 34203, SALL_BASETROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Sall_Hunting_Base_03_02");
            B_GIVEINVITEMS(OTHER, SELF, 34203, SALL_BASETROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Sall_Hunting_Base_03_03");
            AI_OUTPUT(SELF, OTHER, "DIA_Sall_Hunting_Base_03_04");
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHY, -(1), -(1), FONT_SCREEN, 2);
        };
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (SALL_BASETROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Sall_Hunting_Base_03_05");
    };
}

var int SALL_ALLHUNT;
instance DIA_SALL_HUNTING_SPECIAL(C_INFO) {
    NPC = 52967;
    NR = 1;
    CONDITION = DIA_SALL_HUNTING_SPECIAL_CONDITION;
    INFORMATION = DIA_SALL_HUNTING_SPECIAL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "Can you teach me something about hunting?";
}

func int DIA_SALL_HUNTING_SPECIAL_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 66960)) && ((PLAYER_TALENT_TAKEANIMALTROPHY[2]) == (TRUE))) && ((SALL_ALLHUNT) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_SALL_HUNTING_SPECIAL_CHOICES() {
    INFO_CLEARCHOICES(67016);
    INFO_ADDCHOICE(67016, DIALOG_BACK, 67020);
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[17]) == (FALSE)) {
        INFO_ADDCHOICE(67016, B_BUILDLEARNSTRING2(PRINT_TEACHSHELLS, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_SHELLS), SALL_SHELLSTROPHY), 67021);
    };
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[8]) == (FALSE)) {
        INFO_ADDCHOICE(67016, B_BUILDLEARNSTRING2(PRINT_TEACHMANDIBLES, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_MANDIBLES), SALL_MANDIBLESTROPHY), 67022);
    };
}

func void DIA_SALL_HUNTING_SPECIAL_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_CanYouTeachMeHunting");
    AI_OUTPUT(SELF, OTHER, "DIA_Sall_Hunting_Special_03_01");
    DIA_SALL_HUNTING_SPECIAL_CHOICES();
}

func void DIA_SALL_HUNTING_SPECIAL_BACK() {
    INFO_CLEARCHOICES(67016);
    if (((PLAYER_TALENT_TAKEANIMALTROPHY[17]) == (TRUE)) && ((PLAYER_TALENT_TAKEANIMALTROPHY[8]) == (TRUE))) {
        SALL_ALLHUNT = TRUE;
        AI_OUTPUT(SELF, OTHER, "DIA_Sall_AllHunt_03_01");
    };
}

func void DIA_SALL_HUNTING_SPECIAL_SHELLS() {
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_Hunting_Special_Shells_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (SALL_SHELLSTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[17]) == (TRUE)) {
            NPC_REMOVEINVITEMS(SELF, 34203, SALL_SHELLSTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Sall_Hunting_Special_Shells_03_02");
            B_GIVEINVITEMS(OTHER, SELF, 34203, SALL_SHELLSTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Sall_Hunting_Special_Shells_03_03");
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYSHELLS, -(1), -(1), FONT_SCREEN, 2);
        };
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (SALL_SHELLSTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Sall_Hunting_Special_Shells_03_04");
    };
    DIA_SALL_HUNTING_SPECIAL_CHOICES();
}

func void DIA_SALL_HUNTING_SPECIAL_MANDIBLES() {
    AI_OUTPUT(OTHER, SELF, "DIA_Sall_Hunting_Special_Mandibles_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (SALL_MANDIBLESTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[8]) == (TRUE)) {
            NPC_REMOVEINVITEMS(SELF, 34203, SALL_MANDIBLESTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Sall_Hunting_Special_Mandibles_03_02");
            B_GIVEINVITEMS(OTHER, SELF, 34203, SALL_MANDIBLESTROPHY);
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYMANDIBLES, -(1), -(1), FONT_SCREEN, 2);
        };
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (SALL_MANDIBLESTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Sall_Hunting_Special_Mandibles_03_03");
    };
    DIA_SALL_HUNTING_SPECIAL_CHOICES();
}

instance DIA_SALL_PICKPOCKET(C_INFO) {
    NPC = 52967;
    NR = 900;
    CONDITION = DIA_SALL_PICKPOCKET_CONDITION;
    INFORMATION = DIA_SALL_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_80;
}

func int DIA_SALL_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_SALL_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(67023);
    INFO_ADDCHOICE(67023, DIALOG_BACK, 67027);
    INFO_ADDCHOICE(67023, DIALOG_PICKPOCKET, 67026);
}

func void DIA_SALL_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (2)) {
        B_PICKPOCKET_AMBIENT_TIER_2();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(67023);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(67023);
}

func void DIA_SALL_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(67023);
}

