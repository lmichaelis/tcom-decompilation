instance Q101_CAPTAIN(CUTSCENE) {
    ONSTART = FUNCTION(92409);
}

func void Q101_CAPTAIN_START() {
    DIACAM_DISABLE();
    WLD_SENDTRIGGER("SHIP_CAPITAN_01");
    WLD_SENDTRIGGER("SHIP_TRAPDOOR");
    B_REMOVENPC(50688);
    B_REMOVENPC(50689);
    B_REMOVENPC(50690);
    B_REMOVENPC(50691);
    B_REMOVENPC(50692);
    B_REMOVENPC(50693);
    B_STARTOTHERROUTINE(NONE_8_ANA, "OBSERVE");
    NPC_REFRESH(NONE_8_ANA);
    B_STARTOTHERROUTINE(NONE_9_LEA, "OBSERVE");
    NPC_REFRESH(NONE_9_LEA);
    B_STARTOTHERROUTINE(NONE_3_EZEKIEL, "OBSERVE");
    NPC_REFRESH(NONE_3_EZEKIEL);
    B_STARTOTHERROUTINE(NONE_13_URS, "OBSERVE");
    NPC_REFRESH(NONE_13_URS);
    TELEPORTNPCTOWP(51429, NONE_13_URS.WP);
    B_STARTOTHERROUTINE(NONE_14_VRAZKA, "OBSERVE");
    NPC_REFRESH(NONE_14_VRAZKA);
    TELEPORTNPCTOWP(51434, NONE_14_VRAZKA.WP);
    FF_APPLYONCEEXT(92410, 1000, 10);
    TELEPORTNPCTOWP(51483, "SHIP_BEGINNING_14");
    TELEPORTNPCTOWP(51439, "SHIP_JORN_02");
    TELEPORTNPCTOWP(1819, "SHIP_MARVIN");
    AI_TURNTONPC(PIR_2_CAPTAIN, NONE_1_JORN);
    AI_TURNTONPC(HERO, PIR_2_CAPTAIN);
    AI_WAIT(PIR_2_CAPTAIN, 1069547520);
    AI_SETWALKMODE(PIR_2_CAPTAIN, NPC_WALK);
    AI_GOTOWP(PIR_2_CAPTAIN, "SHIP_CAPTAIN_02");
}

func void Q101_CAPTAIN_APPLY() {
    var int Q101_CAPTAIN_COUNT;
    Q101_CAPTAIN_COUNT = (Q101_CAPTAIN_COUNT) + (1);
    if ((Q101_CAPTAIN_COUNT) == (5)) {
        WLD_SENDTRIGGER("SHIP_CAPITAN_02");
        WLD_SENDUNTRIGGER("SHIP_CAPITAN_01");
    };
    if ((Q101_CAPTAIN_COUNT) == (7)) {
        HERO.AIVAR[4] = FALSE;
        AI_STARTSTATE(PIR_2_CAPTAIN, 61599, 1, "");
        AI_STARTSTATE(HERO, 61599, 1, "");
    };
    if ((Q101_CAPTAIN_COUNT) == (10)) {
        if ((NPC_ISINSTATE(PIR_2_CAPTAIN, 61599)) == (FALSE)) {
            PRINTD("Second time");
            AI_STARTSTATE(PIR_2_CAPTAIN, 61599, 1, "");
            AI_STARTSTATE(HERO, 61599, 1, "");
        } else {
            PRINTD("Jestem ju¿ w rozmowie");
        };
    };
}

