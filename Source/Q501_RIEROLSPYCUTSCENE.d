instance Q501_RIEROLSPYCUTSCENE(CUTSCENE) {
    ONSTART = FUNCTION(92654);
}

func void Q501_RIEROLSPYCUTSCENE_WAIT() {
    AI_WAITTILLEND(HERO, NONE_100008_ANA);
    AI_WAITTILLEND(HERO, KDW_303_RIEROL);
    AI_WAITTILLEND(NONE_100008_ANA, HERO);
    AI_WAITTILLEND(NONE_100008_ANA, KDW_303_RIEROL);
    AI_WAITTILLEND(KDW_303_RIEROL, NONE_100008_ANA);
    AI_WAITTILLEND(KDW_303_RIEROL, HERO);
}

func void Q501_RIEROLSPYCUTSCENE_START() {
    if (TORCH_HEROHOLDINGTORCH()) {
        TORCH_UNEQUIP();
    };
    MDL_APPLYOVERLAYMDS(HERO, HUMANSMARVINSNEAKMDS);
    WLD_SENDTRIGGER("Q501_RIEROL_02");
    TELEPORTNPCTOWP(1819, "PART8_Q501_RIEROL_CUTSCENE_02");
    TELEPORTNPCTOWP(51576, NONE_100008_ANA.WP);
    TELEPORTNPCTOWP(56650, KDW_303_RIEROL.WP);
    NPC_CLEARAIQUEUE(NONE_100008_ANA);
    NPC_CLEARAIQUEUE(KDW_303_RIEROL);
    NONE_100008_ANA.AIVAR[92] = TRUE;
    KDW_303_RIEROL.AIVAR[92] = TRUE;
    AI_TURNTONPC(NONE_100008_ANA, KDW_303_RIEROL);
    AI_TURNTONPC(HERO, NONE_100008_ANA);
    Q501_RIEROLSPYCUTSCENE_WAIT();
    AI_SETWALKMODE(KDW_303_RIEROL, NPC_RUN);
    AI_SETWALKMODE(NONE_100008_ANA, NPC_RUN);
    AI_TURNTONPC(KDW_303_RIEROL, NONE_100008_ANA);
    AI_GOTOWP(KDW_303_RIEROL, "PART8_Q501_RIEROL_CUTSCENE_01");
    B_SAY(NONE_100008_ANA, HERO, "$HELP");
    Q501_RIEROLSPYCUTSCENE_WAIT();
    AI_TURNTONPC(NONE_100008_ANA, KDW_303_RIEROL);
    AI_TURNTONPC(KDW_303_RIEROL, NONE_100008_ANA);
    AI_OUTPUT(KDW_303_RIEROL, HERO, "DIA_Rierol_Q501_RierolCutscene_303_02");
    Q501_RIEROLSPYCUTSCENE_WAIT();
    AI_FUNCTION(NONE_100008_ANA, 92655);
}

func void Q501_RIEROLSPYCUTSCENE_CAMERA_01() {
    FF_APPLYONCEEXT(92657, 1000, 7);
}

func void Q501_RIEROLSPYCUTSCENE_END() {
    FF_APPLYONCEEXT(63377, 75, 4);
}

func void Q501_RIEROLSPYCUTSCENE_CAMERA_01_APPLY() {
    var int Q501_RIEROLSPYCUTSCENE_CAMERA_01;
    Q501_RIEROLSPYCUTSCENE_CAMERA_01 = (Q501_RIEROLSPYCUTSCENE_CAMERA_01) + (1);
    if ((Q501_RIEROLSPYCUTSCENE_CAMERA_01) == (1)) {
        WLD_SENDTRIGGER("Q501_RIEROL_03");
        WLD_SENDUNTRIGGER("Q501_RIEROL_02");
        AI_GOTOWP(NONE_100008_ANA, "PART8_NOV_HOUSE_13");
        AI_GOTOWP(KDW_303_RIEROL, "PART8_NOV_HOUSE_14");
    };
    if ((Q501_RIEROLSPYCUTSCENE_CAMERA_01) == (7)) {
        Q501_RIEROLSPYCUTSCENE_END();
    };
}

