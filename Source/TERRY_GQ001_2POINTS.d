var int TERRY_GQ001_2POINTS;
instance DIA_TERRY_EXIT(C_INFO) {
    NPC = 57066;
    NR = 999;
    CONDITION = DIA_TERRY_EXIT_CONDITION;
    INFORMATION = DIA_TERRY_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_TERRY_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_TERRY_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_TERRY_SQ116_CUTSCENE(C_INFO) {
    NPC = 57066;
    NR = 1;
    CONDITION = DIA_TERRY_SQ116_CUTSCENE_CONDITION;
    INFORMATION = DIA_TERRY_SQ116_CUTSCENE_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_TERRY_SQ116_CUTSCENE_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ116)) == (LOG_RUNNING)) && ((SQ116_TRIALOGREADY) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_SQ116_CUTSCENE_INFO() {
    SQ116_HEALEVERYONE();
    TRIA_INVITE(BAU_2242_DENNIS);
    TRIA_STARTEXT(FALSE);
    NPC_EXCHANGEROUTINE(BAU_2244_TERRY, "SQ116_CUTSCENE");
    TRIA_WAIT();
    TRIA_NEXT(BAU_2242_DENNIS);
    AI_TURNTONPC(SELF, BAU_2242_DENNIS);
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_Cutscene_03_01");
    INFO_CLEARCHOICES(65060);
    INFO_ADDCHOICE(65060, "You should be taught a lesson! (Attack)", 65064);
    INFO_ADDCHOICE(65060, "Wait a minute, let's talk to him first.", 65065);
}

func void DIA_TERRY_WHATSGOINGON() {
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_Cutscene_Fight_03_02");
}

func void DIA_TERRY_SQ116_CUTSCENE_FIGHT() {
    AI_FUNCTION(SELF, 65066);
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_SQ116_Cutscene_Fight_15_01");
    TRIA_WAIT();
    TRIA_NEXT(BAU_2244_TERRY);
    AI_FUNCTION(SELF, 65067);
    AI_PLAYANI(SELF, T_JUMPB);
    DIA_TERRY_WHATSGOINGON();
    TRIA_WAIT();
    TRIA_NEXT(BAU_2242_DENNIS);
    AI_FUNCTION(SELF, 65068);
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_Cutscene_Fight_03_03");
    TRIA_FINISH();
    INFO_CLEARCHOICES(1815);
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 65071);
}

func void DIA_TERRY_SQ116_CUTSCENE_WAIT() {
    AI_FUNCTION(SELF, 65066);
    AI_TURNTONPC(OTHER, SELF);
    AI_TURNTONPC(SELF, OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_SQ116_Cutscene_Wait_15_01");
    TRIA_WAIT();
    TRIA_NEXT(BAU_2242_DENNIS);
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_Cutscene_Wait_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_SQ116_Cutscene_Wait_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_Cutscene_Wait_03_04");
    TRIA_WAIT();
    AI_FUNCTION(SELF, 65069);
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_SQ116_Cutscene_Wait_15_05");
    TRIA_WAIT();
    AI_FUNCTION(SELF, 65070);
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_Cutscene_Wait_03_06");
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_SQ116_Cutscene_Wait_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_Cutscene_Wait_03_08");
    TRIA_FINISH();
    AI_FUNCTION(SELF, 65072);
    INFO_CLEARCHOICES(1815);
    AI_STOPPROCESSINFOS(SELF);
}

func void TERRY_SQ116_CUTSCENE_CHANGECAMERA_01() {
    WLD_SENDTRIGGER("SQ116_03");
    WLD_SENDUNTRIGGER("SQ116_02");
}

func void TERRY_SQ116_CUTSCENE_CHANGECAMERA_02() {
    WLD_SENDTRIGGER("SQ116_04");
    WLD_SENDUNTRIGGER("SQ116_03");
}

func void TERRY_SQ116_CUTSCENE_CHANGECAMERA_03() {
    WLD_SENDTRIGGER("SQ116_05");
    WLD_SENDUNTRIGGER("SQ116_03");
}

func void TERRY_SQ116_CUTSCENE_CHANGECAMERA_04() {
    WLD_SENDTRIGGER("SQ116_06");
    WLD_SENDUNTRIGGER("SQ116_03");
}

func void TERRY_SQ116_CUTSCENE_CHANGECAMERA_05() {
    WLD_SENDTRIGGER("SQ116_07");
    WLD_SENDUNTRIGGER("SQ116_06");
}

func void TERRY_SQ116_CUTSCENE_CHANGECAMERA_END_V1() {
    PRINTD("Walcz¹");
    SQ116_TERRYEVENT = 1;
    SQ116_UNABLECAMERA = 1;
}

func void TERRY_SQ116_CUTSCENE_CHANGECAMERA_END_V2() {
    SQ116_UNABLECAMERA = 1;
    SQ116_TERRYEVENT = 2;
}

instance DIA_TERRY_SQ116_WHODIDIT(C_INFO) {
    NPC = 57066;
    NR = 1;
    CONDITION = DIA_TERRY_SQ116_WHODIDIT_CONDITION;
    INFORMATION = DIA_TERRY_SQ116_WHODIDIT_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_TERRY_SQ116_WHODIDIT_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ116)) == (LOG_RUNNING)) && ((SQ116_TERRYTRIALOG) == (1))) {
        if (((NPC_GETDISTTOWP(BAU_2244_TERRY, "PART9_TERRY")) <= (500)) && ((NPC_GETDISTTOWP(BAU_2242_DENNIS, "PART9_SQ116_CUTSCENE_DENNIS")) <= (500))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_IDONTKNOW() {
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_WhoDidIt_03_12");
}

func void DIA_TERRY_ASKHOLDWIG() {
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_WhoDidIt_03_02");
}

func void DIA_TERRY_IMTERRY() {
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_WhoDidIt_03_08");
}

func void DIA_TERRY_SQ116_WHODIDIT_INFO() {
    SELF.AIVAR[15] = FALSE;
    TRIA_INVITE(BAU_2242_DENNIS);
    TRIA_START();
    AI_LOOKATNPC(OTHER, SELF);
    TRIA_NEXT(BAU_2242_DENNIS);
    AI_TURNTONPC(SELF, BAU_2244_TERRY);
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_WhoDidIt_03_01");
    TRIA_WAIT();
    TRIA_NEXT(BAU_2244_TERRY);
    DIA_TERRY_ASKHOLDWIG();
    TRIA_WAIT();
    TRIA_NEXT(BAU_2242_DENNIS);
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_WhoDidIt_03_03");
    TRIA_WAIT();
    TRIA_NEXT(BAU_2244_TERRY);
    AI_TURNTONPC(OTHER, BAU_2242_DENNIS);
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_SQ116_WhoDidIt_15_04");
    AI_TURNTONPC(OTHER, SELF);
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_SQ116_WhoDidIt_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_WhoDidIt_03_06");
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_SQ116_WhoDidIt_15_07");
    DIA_TERRY_IMTERRY();
    AI_FUNCTION(SELF, 65079);
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_SQ116_WhoDidIt_15_09");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_WhoDidIt_03_10");
    TRIA_WAIT();
    TRIA_NEXT(BAU_2242_DENNIS);
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_WhoDidIt_03_11");
    TRIA_WAIT();
    TRIA_NEXT(BAU_2244_TERRY);
    AI_TURNTONPC(SELF, BAU_2242_DENNIS);
    DIA_TERRY_IDONTKNOW();
    AI_TURNTONPC(SELF, HERO);
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_WhoDidIt_03_13");
    TRIA_WAIT();
    TRIA_NEXT(BAU_2242_DENNIS);
    AI_TURNTONPC(OTHER, BAU_2244_TERRY);
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_SQ116_WhoDidIt_15_14");
    AI_TURNTONPC(SELF, OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_WhoDidIt_03_15");
    TRIA_WAIT();
    TRIA_FINISH();
    AI_STOPPROCESSINFOS(SELF);
    AI_STOPLOOKAT(OTHER);
    AI_FUNCTION(SELF, 62302);
}

func void TERRY_SQ116_CHANGENAME() {
    SQ116_KNOWTERRYNAME = TRUE;
    BAU_2244_TERRY.NAME[0] = NPCNAME_TERRY;
    BAU_2244_TERRY.AIVAR[79] = TRUE;
}

instance DIA_TERRY_SQ116_ATTACKEND(C_INFO) {
    NPC = 57066;
    NR = 1;
    CONDITION = DIA_TERRY_SQ116_ATTACKEND_CONDITION;
    INFORMATION = DIA_TERRY_SQ116_ATTACKEND_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_TERRY_SQ116_ATTACKEND_CONDITION() {
    if (((SQ116_GUMBERTCUTSCENE) == (3)) && ((LOG_GETSTATUS(MIS_SQ116)) == (LOG_RUNNING))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_SQ116_ATTACKEND_INFO() {
    SQ116_TERRYRUNAWAY = TRUE;
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_AttackEnd_03_00");
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_SQ116_AttackEnd_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_SQ116_AttackEnd_03_07");
    AI_LOGENTRY(TOPIC_SQ116, LOG_SQ116_TERRY_THANKSFORHELP);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "SQ116_FLEE");
}

instance DIA_TERRY_HELLO(C_INFO) {
    NPC = 57066;
    NR = 1;
    CONDITION = DIA_TERRY_HELLO_CONDITION;
    INFORMATION = DIA_TERRY_HELLO_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_TERRY_HELLO_CONDITION() {
    if ((((SQ116_TERRYCUTSCENEENABLE) >= (1)) && ((LOG_GETSTATUS(MIS_SQ116)) != (LOG_RUNNING))) || ((SQ116_TERRYCUTSCENEENABLE) == (0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_HELLO_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_03_01");
}

instance DIA_TERRY_NICESONG(C_INFO) {
    NPC = 57066;
    NR = 1;
    CONDITION = DIA_TERRY_NICESONG_CONDITION;
    INFORMATION = DIA_TERRY_NICESONG_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Nice song.";
}

func int DIA_TERRY_NICESONG_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 65083)) {
        if ((((SQ116_TERRYCUTSCENEENABLE) >= (1)) && ((LOG_GETSTATUS(MIS_SQ116)) != (LOG_RUNNING))) || ((SQ116_TERRYCUTSCENEENABLE) == (0))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_NICESONG_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_WhereIsJorn_NiceSong_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_NiceSong_03_02");
}

instance DIA_TERRY_WHO(C_INFO) {
    NPC = 57066;
    NR = 1;
    CONDITION = DIA_TERRY_WHO_CONDITION;
    INFORMATION = DIA_TERRY_WHO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Who are you?";
}

func int DIA_TERRY_WHO_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 65086)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_WHO_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_WhereIsJorn_WhoAreYou_15_01");
    TERRY_SQ116_CHANGENAME();
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_WhoAreYou_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_WhereIsJorn_WhoAreYou_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_WhoAreYou_03_04");
}

instance DIA_TERRY_SURVIVE(C_INFO) {
    NPC = 57066;
    NR = 1;
    CONDITION = DIA_TERRY_SURVIVE_CONDITION;
    INFORMATION = DIA_TERRY_SURVIVE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Can you make a living singing?";
}

func int DIA_TERRY_SURVIVE_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 65089)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_SURVIVE_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_WhereIsJorn_SingJob_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_SingJob_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_SingJob_03_03");
}

instance DIA_TERRY_GQ001_JORNV1(C_INFO) {
    NPC = 57066;
    NR = 1;
    CONDITION = DIA_TERRY_GQ001_JORNV1_CONDITION;
    INFORMATION = DIA_TERRY_GQ001_JORNV1_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Apparently, three people passed through here some time ago.";
}

func int DIA_TERRY_GQ001_JORNV1_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 87898)) && ((GQ001_INFOFROMDICKON) == (TRUE))) && ((LOG_GETSTATUS(MIS_GQ001)) == (LOG_RUNNING))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_WHEREISJORN_GOAWAY() {
    GQ001_THERRYWANTSFOOD = TRUE;
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_HowMany_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_HowMany_03_03");
    AI_LOGENTRY(TOPIC_GQ001, LOG_GQ001_HUNGRYTERRY);
}

func void DIA_TERRY_GQ001_JORNV1_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_WhereIsJorn_DickonToldMe_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_WhereIsJorn_DickonToldMe_15_02");
    DIA_TERRY_WHEREISJORN_GOAWAY();
}

instance DIA_TERRY_GQ001_JORNV2(C_INFO) {
    NPC = 57066;
    NR = 1;
    CONDITION = DIA_TERRY_GQ001_JORNV2_CONDITION;
    INFORMATION = DIA_TERRY_GQ001_JORNV2_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Do a lot of people walk down that road?";
}

func int DIA_TERRY_GQ001_JORNV2_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 87898)) && ((GQ001_INFOFROMDICKON) == (FALSE))) && ((LOG_GETSTATUS(MIS_GQ001)) == (LOG_RUNNING))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_GQ001_JORNV2_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_WhereIsJorn_HowMany_15_01");
    DIA_TERRY_WHEREISJORN_GOAWAY();
}

instance DIA_TERRY_FOODFORYOU(C_INFO) {
    NPC = 57066;
    NR = 2;
    CONDITION = DIA_TERRY_FOODFORYOU_CONDITION;
    INFORMATION = DIA_TERRY_FOODFORYOU_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = DIALOG_TREATWITHFOOD;
}

func int DIA_TERRY_FOODFORYOU_CONDITION() {
    if (((GQ001_THERRYWANTSFOOD) == (TRUE)) && ((LOG_GETSTATUS(MIS_GQ001)) == (LOG_RUNNING))) {
        if (C_GOTANYKINDOFMEAT_EATABLE(HERO)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_FOODFORYOU_INFO() {
    GQ001_THERRYWANTSFOOD = 2;
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_WhereIsJorn_Food_15_01");
    B_GIVEANYMEAT_EATABLE_USEIT();
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_Food_03_02");
}

instance DIA_TERRY_GQ001_SAWSOMEONEV1(C_INFO) {
    NPC = 57066;
    NR = 1;
    CONDITION = DIA_TERRY_GQ001_SAWSOMEONEV1_CONDITION;
    INFORMATION = DIA_TERRY_GQ001_SAWSOMEONEV1_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "So what, have you seen anyone here with that description or not?";
}

func int DIA_TERRY_GQ001_SAWSOMEONEV1_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_GQ001)) == (LOG_RUNNING)) && ((GQ001_THERRYWANTSFOOD) == (2))) && ((GQ001_INFOFROMDICKON) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_GQ001_RESULT() {
    GQ001_TALKEDWITHTERRYABOUTJORN = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_WhereIsJorn_Where_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_Where_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_Where_03_05");
    AI_LOGENTRY(TOPIC_GQ001, LOG_GQ001_TERRYNOTHUNGRY);
    AI_STOPPROCESSINFOS(SELF);
    if ((GQ001_KURTSECONDTALK) == (FALSE)) {
        GQ001_KURTSECONDTALK = TRUE;
    };
}

func void DIA_TERRY_GQ001_COUNT() {
    var int GQ001_TERRYINFORMATIONJORN;
    GQ001_TERRYINFORMATIONJORN = (GQ001_TERRYINFORMATIONJORN) + (1);
    if ((TERRY_GQ001_2POINTS) == (TRUE)) {
        if ((GQ001_TERRYINFORMATIONJORN) >= (2)) {
            DIA_TERRY_GQ001_RESULT();
        };
    };
    if ((GQ001_TERRYINFORMATIONJORN) >= (3)) {
        DIA_TERRY_GQ001_RESULT();
    };
}

func void DIA_TERRY_GQ001_SAWSOMEONE_CHOICES() {
    INFO_ADDCHOICE(65105, "Do you remember which way they went?", 65112);
    INFO_ADDCHOICE(65105, "How do you know the guy they were carrying was drunk?", 65113);
    if ((TERRY_GQ001_2POINTS) == (FALSE)) {
        INFO_ADDCHOICE(65105, "Remember what they looked like?", 65114);
    };
    INFO_ADDCHOICE(65115, "Do you remember which way they went?", 65112);
    INFO_ADDCHOICE(65115, "How do you know the guy they were carrying was drunk?", 65113);
    if ((TERRY_GQ001_2POINTS) == (FALSE)) {
        INFO_ADDCHOICE(65115, "Remember what they looked like?", 65114);
    };
}

func void DIA_TERRY_GQ001_SAWSOMEONEV1_INFO() {
    TERRY_GQ001_2POINTS = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_WhereIsJorn_TellMe_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_TellMe_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_TellMe_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_TellMe_03_05");
    DIA_TERRY_GQ001_SAWSOMEONE_CHOICES();
}

func void DIA_TERRY_GQ001_SAWSOMEONE_WHERE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_WhereIsJorn_Where_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_Where_03_02");
    DIA_TERRY_GQ001_COUNT();
}

func void DIA_TERRY_GQ001_SAWSOMEONE_DRUNK() {
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_WhereIsJorn_RlyDrunk_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_RlyDrunk_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_RlyDrunk_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_RlyDrunk_03_04");
    DIA_TERRY_GQ001_COUNT();
}

func void DIA_TERRY_GQ001_SAWSOMEONE_LOOK() {
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_WhereIsJorn_Look_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_Look_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_Look_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_Look_03_04");
    DIA_TERRY_GQ001_COUNT();
}

instance DIA_TERRY_GQ001_SAWSOMEONEV2(C_INFO) {
    NPC = 57066;
    NR = 1;
    CONDITION = DIA_TERRY_GQ001_SAWSOMEONEV2_CONDITION;
    INFORMATION = DIA_TERRY_GQ001_SAWSOMEONEV2_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "So, have you seen anyone here lately?";
}

func int DIA_TERRY_GQ001_SAWSOMEONEV2_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_GQ001)) == (LOG_RUNNING)) && ((GQ001_THERRYWANTSFOOD) == (2))) && ((GQ001_INFOFROMDICKON) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_GQ001_SAWSOMEONEV2_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_WhereIsJorn_SawAnybody_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_SawAnybody_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_SawAnybody_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Terry_WhereIsJorn_SawAnybody_03_04");
    DIA_TERRY_GQ001_SAWSOMEONE_CHOICES();
}

instance DIA_TERRY_AMBIENT(C_INFO) {
    NPC = 57066;
    NR = 998;
    CONDITION = DIA_TERRY_AMBIENT_CONDITION;
    INFORMATION = DIA_TERRY_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How are you doing?";
}

func int DIA_TERRY_AMBIENT_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 65089)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_AMBIENT_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_WhatNew2");
    if (((GQ001_TALKEDWITHTERRYABOUTJORN) == (FALSE)) && (!(NPC_KNOWSINFO(OTHER, 65080)))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Terry_Ambient_03_01");
    };
    if (((GQ001_TALKEDWITHTERRYABOUTJORN) == (TRUE)) && (!(NPC_KNOWSINFO(OTHER, 65080)))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Terry_Ambient_03_02");
    };
    if (NPC_KNOWSINFO(OTHER, 65080)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Terry_Ambient_03_03");
    };
}

instance DIA_TERRY_SQ116_ABOUTHOLDWIG(C_INFO) {
    NPC = 57066;
    NR = 1;
    CONDITION = DIA_TERRY_SQ116_ABOUTHOLDWIG_CONDITION;
    INFORMATION = DIA_TERRY_SQ116_ABOUTHOLDWIG_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Do you know anything about Holdwig's ailment?";
}

func int DIA_TERRY_SQ116_ABOUTHOLDWIG_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_SQ116)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 64891))) && ((SQ116_GUMBERTINFORMATIONS_THERRY) == (TRUE))) && ((NPC_KNOWSINFO(OTHER, 64901)) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_SQ116_ABOUTHOLDWIG_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    B_STOPLOOKAT(SELF);
    B_SAY(OTHER, SELF, "$SQ116_Marvin_AskHoldwig");
    AI_PLAYANI(SELF, T_SEARCH_SCARED);
    AI_STARTFACEANI(SELF, S_FRIGHTENED, 1, -(1));
    DIA_TERRY_ASKHOLDWIG();
    INFO_CLEARCHOICES(65121);
    INFO_ADDCHOICE(65121, "Don't play dumb, tell me what you know.", 65124);
}

func void DIA_TERRY_SQ116_ABOUTHOLDWIG_TALK() {
    AI_STARTFACEANI(OTHER, S_SERIOUS, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_SQ116_AboutHoldwig_Talk_15_01");
    DIA_TERRY_WHATSGOINGON();
    INFO_CLEARCHOICES(65121);
    INFO_ADDCHOICE(65121, "Okay, relax, I believe you.", 65127);
    INFO_ADDCHOICE(65121, "(Intimidate)", 65126);
}

var int TERRY_SCAREDINDIALOGUE;
func void DIA_TERRY_SQ116_ABOUTHOLDWIG_TALK_SCARE() {
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    if ((NPC_HASREADIEDMELEEWEAPON(OTHER)) == (FALSE)) {
        AI_DRAWWEAPON(OTHER);
    };
    TERRY_SCAREDINDIALOGUE = TRUE;
    AI_PLAYANI(SELF, T_STAND_2_SCAREDDIALOGUE);
    AI_STARTFACEANI(SELF, S_FRIGHTENED, 0, 1);
    DIA_TERRY_IMTERRY();
    AI_FUNCTION(SELF, 65079);
}

func void DIA_TERRY_SQ116_ABOUTHOLDWIG_TALK_BELIVE() {
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_SQ116_AboutHoldwig_Belive_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_REMOVEWEAPON(OTHER);
    if ((TERRY_SCAREDINDIALOGUE) == (TRUE)) {
        AI_PLAYANI(SELF, "T_REMOVE_SCAREDDIALOGUE");
    };
    AI_OUTPUT(OTHER, SELF, "DIA_Terry_SQ116_AboutHoldwig_Belive_15_02");
    INFO_CLEARCHOICES(65121);
    AI_WAITTILLEND(SELF, OTHER);
    AI_STOPPROCESSINFOS(SELF);
    SELF.AIVAR[15] = TRUE;
    NPC_EXCHANGEROUTINE(SELF, "SQ116_FLEE");
    SQ116_TERRYRUNAWAY = TRUE;
    if ((SQ116_KNOWTERRYNAME) == (TRUE)) {
        AI_LOGENTRY(TOPIC_SQ116, LOG_SQ116_TERRY_BADENDING_V1);
    };
    AI_LOGENTRY(TOPIC_SQ116, LOG_SQ116_TERRY_BADENDING_V2);
}

instance DIA_TERRY_TAKEGOLD(C_INFO) {
    NPC = 57066;
    NR = 870;
    CONDITION = DIA_TERRY_TAKEGOLD_CONDITION;
    INFORMATION = DIA_TERRY_TAKEGOLD_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_BEGGARMONEY;
}

func int DIA_TERRY_TAKEGOLD_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 65092)) && ((NPC_HASITEMS(OTHER, 34203)) >= (HOMELESS_ASKFORMONEY))) {
        if ((SELF.AIVAR[93]) <= (WLD_GETDAY())) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_TAKEGOLD_INFO() {
    var int TERRY_GOLDCOUNT;
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Homeless02_HomelessGold_15_01");
    B_GIVEINVITEMS(OTHER, SELF, 34203, HOMELESS_ASKFORMONEY);
    AI_WAITTILLEND(SELF, OTHER);
    AI_PLAYANI(SELF, "T_GREETCOOL");
    TERRY_GOLDCOUNT = (TERRY_GOLDCOUNT) + (1);
    if ((TERRY_GOLDCOUNT) == (5)) {
        B_GIVEPLAYERXP(XP_EVENT_HOMLESS_BONUS);
    };
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    SELF.AIVAR[93] = (WLD_GETDAY()) + (1);
}

instance DIA_TERRY_PICKPOCKET(C_INFO) {
    NPC = 57066;
    NR = 900;
    CONDITION = DIA_TERRY_PICKPOCKET_CONDITION;
    INFORMATION = DIA_TERRY_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_40;
}

func int DIA_TERRY_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_TERRY_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(65132);
    INFO_ADDCHOICE(65132, DIALOG_BACK, 65136);
    INFO_ADDCHOICE(65132, DIALOG_PICKPOCKET, 65135);
}

func void DIA_TERRY_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) {
        B_PICKPOCKET_AMBIENT_TIER_1();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(65132);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(65132);
}

func void DIA_TERRY_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(65132);
}

