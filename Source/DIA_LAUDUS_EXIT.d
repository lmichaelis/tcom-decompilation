instance DIA_LAUDUS_EXIT(C_INFO) {
    NPC = 54417;
    NR = 999;
    CONDITION = DIA_LAUDUS_EXIT_CONDITION;
    INFORMATION = DIA_LAUDUS_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_LAUDUS_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_LAUDUS_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

var int SQ412_MYSOUP;
var int SQ412_ERNESTOSOUP;
instance DIA_LAUDUS_SQ412_SOUP(C_INFO) {
    NPC = 54417;
    NR = 1;
    CONDITION = DIA_LAUDUS_SQ412_SOUP_CONDITION;
    INFORMATION = DIA_LAUDUS_SQ412_SOUP_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Ernesto asked me to give you a pot of soup.";
}

func int DIA_LAUDUS_SQ412_SOUP_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ412)) == (LOG_RUNNING)) && ((NPC_HASITEMS(OTHER, 36654)) >= (1))) && (NPC_KNOWSINFO(OTHER, 65573))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_ABOUTERNESTO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_Ambient_03_02");
}

func void DIA_LAUDUS_SQ412_SOUP_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Laudus_SQ412_Soup_15_01");
    B_GIVEINVITEMS(OTHER, SELF, 36654, 1);
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_SQ412_Soup_03_02");
    INFO_CLEARCHOICES(65522);
    INFO_ADDCHOICE(65522, "I cooked the soup, Ernesto paid me to do it.", 65528);
    INFO_ADDCHOICE(65522, "Yes, I personally saw him cooking the soup.", 65527);
}

func void DIA_LAUDUS_SQ412_SOUP_NEXT() {
    if ((SQ412_MYSOUP) == (FALSE)) {
        DIA_LAUDUS_ABOUTERNESTO();
    };
    INFO_CLEARCHOICES(65522);
    AI_LOGENTRY(TOPIC_SQ412, LOG_SQ412_LAUDUS_GIVESOUP);
}

func void DIA_LAUDUS_SQ412_SOUP_YES() {
    AI_OUTPUT(OTHER, SELF, "DIA_Laudus_SQ412_Soup_Yes_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_SQ412_Soup_Yes_03_02");
    SQ412_ERNESTOSOUP = TRUE;
    DIA_LAUDUS_SQ412_SOUP_NEXT();
}

func void DIA_LAUDUS_SQ412_SOUP_NO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Laudus_SQ412_Soup_No_15_01");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_SQ412_Soup_No_03_02");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_SQ412_Soup_No_03_03");
    SQ412_MYSOUP = TRUE;
    CREATEINVITEMS(SELF, 34701, 2);
    B_GIVEINVITEMS(SELF, OTHER, 34701, 2);
    DIA_LAUDUS_SQ412_SOUP_NEXT();
}

instance DIA_LAUDUS_MAGICRUNE(C_INFO) {
    NPC = 54417;
    NR = 50;
    CONDITION = DIA_LAUDUS_MAGICRUNE_CONDITION;
    INFORMATION = DIA_LAUDUS_MAGICRUNE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Can you tell me anything about this stone?";
}

func int DIA_LAUDUS_MAGICRUNE_CONDITION() {
    if (((C_GOTANYKINDOFRUNE(HERO)) && ((SELLINGRUNES_INFO) == (FALSE))) && (NPC_KNOWSINFO(OTHER, 65573))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int LAUDUS_CANBUYRUNES;
func void DIA_LAUDUS_MAGICRUNE_NEXT() {
    LAUDUS_CANBUYRUNES = TRUE;
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_MagicRune_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_MagicRune_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_MagicRune_03_05");
    if ((SELLINGRUNES_INFO) == (FALSE)) {
        SELLINGRUNES_INFO = TRUE;
        LOG_CREATETOPIC(TOPIC_BARTER, LOG_NOTE);
        AI_LOGENTRY(TOPIC_BARTER, LOG_CITYBARTER_LAUDUS);
    };
}

func void DIA_LAUDUS_MAGICRUNE_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_AskMagicRune");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_MagicRune_03_02");
    DIA_LAUDUS_MAGICRUNE_NEXT();
}

instance DIA_LAUDUS_YOUWANTMAGICRUNES(C_INFO) {
    NPC = 54417;
    NR = 50;
    CONDITION = DIA_LAUDUS_YOUWANTMAGICRUNES_CONDITION;
    INFORMATION = DIA_LAUDUS_YOUWANTMAGICRUNES_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I was told that you deal in runes.";
}

func int DIA_LAUDUS_YOUWANTMAGICRUNES_CONDITION() {
    if ((((SELLINGRUNES_INFO) == (TRUE)) && ((LAUDUS_CANBUYRUNES) == (FALSE))) && (NPC_KNOWSINFO(OTHER, 65573))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_YOUWANTMAGICRUNES_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Laudus_YouWantMagicRunes_15_01");
    DIA_LAUDUS_MAGICRUNE_NEXT();
}

instance DIA_LAUDUS_RUNEWHY(C_INFO) {
    NPC = 54417;
    NR = 50;
    CONDITION = DIA_LAUDUS_RUNEWHY_CONDITION;
    INFORMATION = DIA_LAUDUS_RUNEWHY_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Why are runes found in such different places?";
}

func int DIA_LAUDUS_RUNEWHY_CONDITION() {
    if ((LAUDUS_CANBUYRUNES) == (TRUE)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_RUNEWHY_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Laudus_RuneWhy_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_RuneWhy_03_02");
    AI_STARTFACEANI(SELF, "S_TIRED", 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_RuneWhy_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_RuneWhy_03_04");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_RuneWhy_03_05");
    AI_STARTFACEANI(SELF, "S_TIRED", 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_RuneWhy_03_06");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

instance DIA_LAUDUS_SELLRUNE(C_INFO) {
    NPC = 54417;
    NR = 900;
    CONDITION = DIA_LAUDUS_SELLRUNE_CONDITION;
    INFORMATION = DIA_LAUDUS_SELLRUNE_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I have a magic rune for you.";
}

func int DIA_LAUDUS_SELLRUNE_CONDITION() {
    if (((LAUDUS_CANBUYRUNES) == (TRUE)) && (C_GOTANYKINDOFRUNE(HERO))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_SELLRUNE_CHOICES() {
    INFO_CLEARCHOICES(65540);
    if ((NPC_HASITEMS(OTHER, 33705)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_SKULL, 65572);
    };
    if ((NPC_HASITEMS(OTHER, 38060)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_SLOWDOWN, 65549);
    };
    if ((NPC_HASITEMS(OTHER, 38061)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_ACID, 65550);
    };
    if ((NPC_HASITEMS(OTHER, 38062)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_PICKLOCK, 65551);
    };
    if ((NPC_HASITEMS(OTHER, 34595)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_LIGHT, 65552);
    };
    if ((NPC_HASITEMS(OTHER, 34597)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_ZAP, 65553);
    };
    if ((NPC_HASITEMS(OTHER, 34598)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_LIGHTHEAL, 65554);
    };
    if ((NPC_HASITEMS(OTHER, 34601)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_ICEBOLT, 65555);
    };
    if ((NPC_HASITEMS(OTHER, 34602)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_SUMMONWOLF, 65556);
    };
    if ((NPC_HASITEMS(OTHER, 33697)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_WHIRLWIND, 65557);
    };
    if ((NPC_HASITEMS(OTHER, 33700)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_ICELANCE, 65558);
    };
    if ((NPC_HASITEMS(OTHER, 34605)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_MEDIUMHEAL, 65559);
    };
    if ((NPC_HASITEMS(OTHER, 34610)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_ICECUBE, 65560);
    };
    if ((NPC_HASITEMS(OTHER, 34611)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_CHARGEZAP, 65561);
    };
    if ((NPC_HASITEMS(OTHER, 33698)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_GEYSER, 65562);
    };
    if ((NPC_HASITEMS(OTHER, 33696)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_THUNDERSTORM, 65563);
    };
    if ((NPC_HASITEMS(OTHER, 34606)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_LIGHTNINGFLASH, 65564);
    };
    if ((NPC_HASITEMS(OTHER, 34612)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_SUMMONGOLEM, 65565);
    };
    if ((NPC_HASITEMS(OTHER, 33699)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_WATERFIST, 65566);
    };
    if ((NPC_HASITEMS(OTHER, 34618)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_FULLHEAL, 65567);
    };
    if ((NPC_HASITEMS(OTHER, 34603)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_WINDFIST, 65568);
    };
    if ((NPC_HASITEMS(OTHER, 38065)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_SUMMONSNAPPER, 65569);
    };
    if ((NPC_HASITEMS(OTHER, 38066)) >= (1)) {
        INFO_ADDCHOICE(65540, NAME_SPL_SUMMONBEAR, 65570);
    };
    if (((NPC_HASITEMS(OTHER, 34175)) >= (1)) && ((RESERVED_VAR_INT_36) == (FALSE))) {
        INFO_ADDCHOICE(65540, MISCNAME_BLANKRUNE, 65571);
    };
    INFO_ADDCHOICE(65540, DIALOG_BACK, 65544);
}

func void DIA_LAUDUS_SELLRUNE_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Laudus_SellRune_15_01");
    DIA_LAUDUS_SELLRUNE_CHOICES();
}

func void DIA_LAUDUS_SELLRUNE_BACK() {
    INFO_CLEARCHOICES(65540);
}

func void DIA_LAUDUS_SELLRUNE_THANKYOU() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_SellRune_03_01");
    B_GIVEPLAYERXP(XP_LAUDUS_RUNE);
    AI_RESETFACEANI(SELF);
    DIA_LAUDUS_SELLRUNE_CHOICES();
}

const int LAUDUS_HOWMANYSCROLLS = 5;
const int LAUDUS_HOWMANYSCROLLSMEDIUM = 2;
const int LAUDUS_HOWMANYSCROLLSLOW = 1;
func void DIA_LAUDUS_SELLRUNE_SLOWDOWN() {
    NPC_REMOVEINVITEMS(SELF, 38060, 1);
    CREATEINVITEMS(SELF, 38183, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 38183, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 38060, 1);
}

func void DIA_LAUDUS_SELLRUNE_ACID() {
    NPC_REMOVEINVITEMS(SELF, 38061, 1);
    CREATEINVITEMS(SELF, 38187, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 38187, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 38061, 1);
}

func void DIA_LAUDUS_SELLRUNE_PICKLOCK() {
    NPC_REMOVEINVITEMS(SELF, 38062, 1);
    CREATEINVITEMS(SELF, 38186, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 38186, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 38062, 1);
}

func void DIA_LAUDUS_SELLRUNE_LIGHT() {
    NPC_REMOVEINVITEMS(SELF, 34595, 1);
    CREATEINVITEMS(SELF, 34686, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 34686, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 34595, 1);
}

func void DIA_LAUDUS_SELLRUNE_ZAP() {
    NPC_REMOVEINVITEMS(SELF, 34597, 1);
    CREATEINVITEMS(SELF, 34692, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 34692, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 34597, 1);
}

func void DIA_LAUDUS_SELLRUNE_LIGHTHEAL() {
    NPC_REMOVEINVITEMS(SELF, 34598, 1);
    CREATEINVITEMS(SELF, 34689, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 34689, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 34598, 1);
}

func void DIA_LAUDUS_SELLRUNE_ICEBOLT() {
    NPC_REMOVEINVITEMS(SELF, 34601, 1);
    CREATEINVITEMS(SELF, 34688, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 34688, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 34601, 1);
}

func void DIA_LAUDUS_SELLRUNE_SUMWOLF() {
    NPC_REMOVEINVITEMS(SELF, 34602, 1);
    CREATEINVITEMS(SELF, 34693, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 34693, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 34602, 1);
}

func void DIA_LAUDUS_SELLRUNE_WHIRLWIND() {
    NPC_REMOVEINVITEMS(SELF, 33697, 1);
    CREATEINVITEMS(SELF, 33718, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 33718, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 33697, 1);
}

func void DIA_LAUDUS_SELLRUNE_ICELANCE() {
    NPC_REMOVEINVITEMS(SELF, 33700, 1);
    CREATEINVITEMS(SELF, 33715, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 33715, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 33700, 1);
}

func void DIA_LAUDUS_SELLRUNE_MEDIUMHEAL() {
    NPC_REMOVEINVITEMS(SELF, 34605, 1);
    CREATEINVITEMS(SELF, 34696, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 34696, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 34605, 1);
}

func void DIA_LAUDUS_SELLRUNE_ICECUBE() {
    NPC_REMOVEINVITEMS(SELF, 34610, 1);
    CREATEINVITEMS(SELF, 34701, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 34701, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 34610, 1);
}

func void DIA_LAUDUS_SELLRUNE_THUNDERBALL() {
    NPC_REMOVEINVITEMS(SELF, 34611, 1);
    CREATEINVITEMS(SELF, 34702, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 34702, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 34611, 1);
}

func void DIA_LAUDUS_SELLRUNE_GEYSER() {
    NPC_REMOVEINVITEMS(SELF, 33698, 1);
    CREATEINVITEMS(SELF, 33714, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 33714, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 33698, 1);
}

func void DIA_LAUDUS_SELLRUNE_THUNDERSTORM() {
    NPC_REMOVEINVITEMS(SELF, 33696, 1);
    CREATEINVITEMS(SELF, 33717, LAUDUS_HOWMANYSCROLLSLOW);
    B_GIVEINVITEMS(SELF, OTHER, 33717, LAUDUS_HOWMANYSCROLLSLOW);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 33696, 1);
}

func void DIA_LAUDUS_SELLRUNE_LIGHTNINGFLASH() {
    NPC_REMOVEINVITEMS(SELF, 34606, 1);
    CREATEINVITEMS(SELF, 34697, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 34697, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 34606, 1);
}

func void DIA_LAUDUS_SELLRUNE_SUMGOL() {
    NPC_REMOVEINVITEMS(SELF, 34612, 1);
    CREATEINVITEMS(SELF, 34703, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 34703, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 34612, 1);
}

func void DIA_LAUDUS_SELLRUNE_WATERFIST() {
    NPC_REMOVEINVITEMS(SELF, 33699, 1);
    CREATEINVITEMS(SELF, 33716, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 33716, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 33699, 1);
}

func void DIA_LAUDUS_SELLRUNE_FULLHEAL() {
    NPC_REMOVEINVITEMS(SELF, 34618, 1);
    CREATEINVITEMS(SELF, 34709, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 34709, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 34618, 1);
}

func void DIA_LAUDUS_SELLRUNE_WINDFIST() {
    NPC_REMOVEINVITEMS(SELF, 34603, 1);
    CREATEINVITEMS(SELF, 34694, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 34694, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 34603, 1);
}

func void DIA_LAUDUS_SELLRUNE_SUMSNAPPER() {
    NPC_REMOVEINVITEMS(SELF, 38065, 1);
    CREATEINVITEMS(SELF, 38181, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 38181, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 38065, 1);
}

func void DIA_LAUDUS_SELLRUNE_SUMBEAR() {
    NPC_REMOVEINVITEMS(SELF, 38066, 1);
    CREATEINVITEMS(SELF, 38180, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 38180, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 38066, 1);
}

func void DIA_LAUDUS_SELLRUNE_BLANK() {
    NPC_REMOVEINVITEMS(SELF, 34175, 1);
    CREATEINVITEMS(SELF, 35988, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 35988, LAUDUS_HOWMANYSCROLLS);
    RESERVED_VAR_INT_36 = TRUE;
    B_GIVEINVITEMS(OTHER, SELF, 34175, 1);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
}

func void DIA_LAUDUS_SELLRUNE_SKULL() {
    NPC_REMOVEINVITEMS(SELF, 33705, 1);
    CREATEINVITEMS(SELF, 38189, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 38189, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 33705, 1);
}

instance DIA_LAUDUS_HELLO(C_INFO) {
    NPC = 54417;
    NR = 1;
    CONDITION = DIA_LAUDUS_HELLO_CONDITION;
    INFORMATION = DIA_LAUDUS_HELLO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Hello.";
}

func int DIA_LAUDUS_HELLO_CONDITION() {
    return TRUE;
}

func void DIA_LAUDUS_HELLO_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_Hello2");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_Hello_03_01");
}

instance DIA_LAUDUS_AMBIENT(C_INFO) {
    NPC = 54417;
    NR = 998;
    CONDITION = DIA_LAUDUS_AMBIENT_CONDITION;
    INFORMATION = DIA_LAUDUS_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How are you doing?";
}

func int DIA_LAUDUS_AMBIENT_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 65573)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_AMBIENT_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_WhatNew2");
    if (((SQ412_ERNESTOSOUP) == (FALSE)) && ((SQ412_MYSOUP) == (FALSE))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Laudus_Ambient_03_01");
    };
    if ((SQ412_ERNESTOSOUP) == (TRUE)) {
        DIA_LAUDUS_ABOUTERNESTO();
    };
    if ((SQ412_MYSOUP) == (TRUE)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Laudus_Ambient_03_03");
    };
}

instance DIA_LAUDUS_ABOUTMAGES(C_INFO) {
    NPC = 54417;
    NR = 1;
    CONDITION = DIA_LAUDUS_ABOUTMAGES_CONDITION;
    INFORMATION = DIA_LAUDUS_ABOUTMAGES_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What can you tell me about the Water Mages?";
}

func int DIA_LAUDUS_ABOUTMAGES_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 65573)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_ABOUTMAGES_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_TellMeAboutWaterMages");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_AboutMages_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_AboutMages_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_AboutMages_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_AboutMages_03_04");
}

instance DIA_LAUDUS_ABOUTARCHOLOS(C_INFO) {
    NPC = 54417;
    NR = 1;
    CONDITION = DIA_LAUDUS_ABOUTARCHOLOS_CONDITION;
    INFORMATION = DIA_LAUDUS_ABOUTARCHOLOS_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What can you tell me about Archolos?";
}

func int DIA_LAUDUS_ABOUTARCHOLOS_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 65573)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_ABOUTARCHOLOS_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_AboutThisArcholos");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_AboutArcholos_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_AboutArcholos_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_AboutArcholos_03_03");
}

instance DIA_LAUDUS_CANYOUTEACH(C_INFO) {
    NPC = 54417;
    NR = 1;
    CONDITION = DIA_LAUDUS_CANYOUTEACH_CONDITION;
    INFORMATION = DIA_LAUDUS_CANYOUTEACH_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Can you teach me something about magic?";
}

func int DIA_LAUDUS_CANYOUTEACH_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 65573)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_CANYOUTEACH_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_CanYouTeachMeMagic");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_CanYouTeach_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_CanYouTeach_03_02");
    if (((OTHER.GUILD) != (GIL_MIL)) && ((OTHER.GUILD) != (GIL_SLD))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Laudus_CanYouTeach_03_03");
    };
    if ((OTHER.GUILD) == (GIL_MIL)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Laudus_CanYouTeach_03_04");
    };
    if ((OTHER.GUILD) == (GIL_SLD)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Laudus_CanYouTeach_03_05");
    };
}

instance DIA_LAUDUS_TRADE(C_INFO) {
    NPC = 54417;
    NR = 850;
    CONDITION = DIA_LAUDUS_TRADE_CONDITION;
    INFORMATION = DIA_LAUDUS_TRADE_INFO;
    PERMANENT = TRUE;
    TRADE = TRUE;
    DESCRIPTION = "Show me your wares.";
}

func int DIA_LAUDUS_TRADE_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 65573)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_TRADE_INFO() {
    var int LAUDUS_TRADE_CHECKINFO;
    B_SAY(OTHER, SELF, "$MARVIN_LetsTrade2");
    B_GIVETRADEINV(SELF);
    if ((LAUDUS_TRADE_CHECKINFO) == (FALSE)) {
        LAUDUS_TRADE_CHECKINFO = TRUE;
        LOG_CREATETOPIC(TOPIC_CITYTRADER, LOG_NOTE);
        AI_LOGENTRY(TOPIC_CITYTRADER, LOG_TRADER_CITY_LAUDUS);
    };
}

instance DIA_LAUDUS_PICKPOCKET(C_INFO) {
    NPC = 54417;
    NR = 900;
    CONDITION = DIA_LAUDUS_PICKPOCKET_CONDITION;
    INFORMATION = DIA_LAUDUS_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_80;
}

func int DIA_LAUDUS_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(65592);
    INFO_ADDCHOICE(65592, DIALOG_BACK, 65596);
    INFO_ADDCHOICE(65592, DIALOG_PICKPOCKET, 65595);
}

func void DIA_LAUDUS_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (2)) {
        CREATEINVITEMS(SELF, 38248, 1);
        B_GIVEINVITEMS(SELF, OTHER, 38248, 1);
        B_PICKPOCKET_AMBIENT_TIER_2();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(65592);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(65592);
}

func void DIA_LAUDUS_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(65592);
}

