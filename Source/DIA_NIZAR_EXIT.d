instance DIA_NIZAR_EXIT(C_INFO) {
    NPC = 55610;
    NR = 999;
    CONDITION = DIA_NIZAR_EXIT_CONDITION;
    INFORMATION = DIA_NIZAR_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_NIZAR_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_NIZAR_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_NIZAR_QA401_WAIT(C_INFO) {
    NPC = 55610;
    NR = 1;
    CONDITION = DIA_NIZAR_QA401_WAIT_CONDITION;
    INFORMATION = DIA_NIZAR_QA401_WAIT_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_NIZAR_QA401_WAIT_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QA401)) == (LOG_RUNNING)) && ((QA401_LEVER_CHANGESMUGGLERS) >= (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_NIZAR_QA401_WAIT_INFO() {
    AI_TURNTONPC(BDT_13569_SMUGGLER, HERO);
    AI_STARTSTATE(BDT_13569_SMUGGLER, 61582, 1, "");
    AI_TURNTONPC(NONE_7005_HEKTOR, HERO);
    AI_STARTSTATE(NONE_7005_HEKTOR, 61582, 1, "");
    AI_STARTFACEANI(SELF, S_FRIGHTENED, 1, -(1));
    AI_PLAYANI(SELF, T_STAND_2_SCAREDDIALOGUE);
    AI_OUTPUT(SELF, OTHER, "DIA_Nizar_QA401_WAIT_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Nizar_QA401_WAIT_03_02");
    INFO_CLEARCHOICES(77183);
    INFO_ADDCHOICE(77183, "(Draw your weapon)", 77188);
    INFO_ADDCHOICE(77183, "Orders are orders... We're not to spare anyone.", 77187);
    INFO_ADDCHOICE(77183, "Get out of here now, or you'll end up like the rest of them.", 77186);
}

func void DIA_NIZAR_QA401_WAIT_GETOUT() {
    QA401_SMUGGLERCHEST_DECISION = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_Nizar_QA401_WAIT_GetOut_15_01");
    AI_PLAYANI(SELF, "T_REMOVE_SCAREDDIALOGUE");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Nizar_QA401_WAIT_GetOut_03_02");
    INFO_CLEARCHOICES(77183);
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 62920);
}

func void DIA_NIZAR_QA401_WAIT_SORRY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Nizar_QA401_WAIT_Sorry_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Nizar_QA401_WAIT_Sorry_03_02");
    QA401_GIVEITEMS();
}

func void DIA_NIZAR_QA401_WAIT_DRAW() {
    QA401_SMUGGLERCHEST_DECISION = 2;
    AI_DRAWWEAPON(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Nizar_QA401_WAIT_Draw_03_01");
    AI_PLAYANI(SELF, "T_REMOVE_SCAREDDIALOGUE");
    INFO_CLEARCHOICES(77183);
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 62921);
}

