instance CITY_NOENTERYCUTSCENE(CUTSCENE) {
    ONSTART = FUNCTION(92300);
}

func void CITY_NOENTERYCUTSCENE_START() {
    HERO.FLAGS = 0;
    MDL_APPLYOVERLAYMDS(MIL_6371_DUSTER, "HUMANS_CROSSBOW_DIALOGUE.mds");
    WLD_SENDTRIGGER("CITYNOENTRY_01");
    NPC_CLEARAIQUEUE(MIL_6371_DUSTER);
    TELEPORTNPCTOWP(54425, MIL_6371_DUSTER.WP);
    FF_APPLYONCEEXT(92301, 1000, 2);
}

func void CITY_NOENTERYCUTSCENE_APPLY() {
    var int CITY_NOENTERYCUTSCENE_COUNT;
    CITY_NOENTERYCUTSCENE_COUNT = (CITY_NOENTERYCUTSCENE_COUNT) + (1);
    if ((CITY_NOENTERYCUTSCENE_COUNT) == (2)) {
        PRINTD("Duster rusz siê");
        NPC_CLEARAIQUEUE(MIL_6371_DUSTER);
        CREATEINVITEMS(MIL_6371_DUSTER, 36960, 1);
        AI_USEITEMTOSTATE(MIL_6371_DUSTER, 36960, 1);
        AI_WAIT(MIL_6371_DUSTER, 1073741824);
        MDL_STARTFACEANI(MIL_6371_DUSTER, S_ANGRY, 1065353216, -1082130432);
        AI_USEITEMTOSTATE(MIL_6371_DUSTER, 36960, -(1));
        AI_READYRANGEDWEAPON(MIL_6371_DUSTER);
        AI_FUNCTION(MIL_6371_DUSTER, 92303);
        AI_PLAYANI(MIL_6371_DUSTER, "T_CROSSBOW_SHOOT");
        AI_WAIT(MIL_6371_DUSTER, 1050253722);
        AI_FUNCTION(MIL_6371_DUSTER, 92304);
    };
}

func void CITY_NOENTERYCUTSCENE_SND() {
    MDL_STARTFACEANI(MIL_6371_DUSTER, "VISEME", 1065353216, -1082130432);
    SND_PLAY("ALARM_DUSTER");
}

func void CITY_NOENTERYCUTSCENE_END() {
    WLD_SENDUNTRIGGER("CITYNOENTRY_01");
    HERO.ATTRIBUTE[1] = -(1);
    HERO.ATTRIBUTE[0] = -(1);
    HERO.AIVAR[4] = FALSE;
}

