instance KQ402_ARWID(CUTSCENE) {
    ONSTART = FUNCTION(92329);
}

func void KQ402_ARWID_WAIT() {
    AI_WAITTILLEND(HERO, MIL_4017_ARWID_KQ402);
    AI_WAITTILLEND(HERO, NONE_2009_LENNART);
    AI_WAITTILLEND(HERO, MIL_4000_RODERICH);
    AI_WAITTILLEND(MIL_4017_ARWID_KQ402, HERO);
    AI_WAITTILLEND(MIL_4017_ARWID_KQ402, NONE_2009_LENNART);
    AI_WAITTILLEND(MIL_4017_ARWID_KQ402, MIL_4000_RODERICH);
    AI_WAITTILLEND(NONE_2009_LENNART, HERO);
    AI_WAITTILLEND(NONE_2009_LENNART, MIL_4017_ARWID_KQ402);
    AI_WAITTILLEND(NONE_2009_LENNART, MIL_4000_RODERICH);
    AI_WAITTILLEND(MIL_4000_RODERICH, HERO);
    AI_WAITTILLEND(MIL_4000_RODERICH, MIL_4017_ARWID_KQ402);
    AI_WAITTILLEND(MIL_4000_RODERICH, NONE_2009_LENNART);
}

func void KQ402_ARWID_START() {
    DIACAM_DISABLE();
    WLD_SENDTRIGGER("KQ402_ARWID_01");
    WLD_INSERTITEM(37321, "FP_PARTM3_MILARMOR_G2_L_01");
    WLD_INSERTITEM(37322, "FP_PARTM3_MILARMOR_G2_L_02");
    TELEPORTNPCTOWP(1819, "PARTM3_BARRACK_HOUSE2_01");
    TELEPORTNPCTOWP(52412, MIL_4017_ARWID_KQ402.WP);
    TELEPORTNPCTOWP(53001, NONE_2009_LENNART.WP);
    TELEPORTNPCTOWP(52807, MIL_4000_RODERICH.WP);
    AI_TELEPORTALWAYS(MIL_4000_RODERICH, MIL_4000_RODERICH.WP, FALSE);
    TELEPORTNPCTOWP(52903, MIL_4040_CABI.WP);
    TELEPORTNPCTOWP(52929, MIL_4041_LEVE.WP);
    NPC_CLEARAIQUEUE(MIL_4017_ARWID_KQ402);
    NPC_CLEARAIQUEUE(NONE_2009_LENNART);
    NPC_CLEARAIQUEUE(MIL_4000_RODERICH);
    MIL_4017_ARWID_KQ402.AIVAR[92] = TRUE;
    NONE_2009_LENNART.AIVAR[92] = TRUE;
    B_TURNTONPC(NONE_2009_LENNART, MIL_4017_ARWID_KQ402);
    B_TURNTONPC(MIL_4000_RODERICH, MIL_4017_ARWID_KQ402);
    B_TURNTONPC(HERO, MIL_4017_ARWID_KQ402);
    KQ402_ARWID_WAIT();
    AI_STARTFACEANI(NONE_2009_LENNART, S_SMILE, 1, -(1));
    AI_STARTFACEANI(MIL_4017_ARWID_KQ402, S_DISGUST, 1, -(1));
    AI_OUTPUT(NONE_2009_LENNART, HERO, "DIA_Arwid_Cutscene_03_01");
    KQ402_ARWID_WAIT();
    AI_FUNCTION(NONE_2009_LENNART, 92331);
    AI_PLAYANI(MIL_4017_ARWID_KQ402, "R_STRETCH_RANDOM_01");
    AI_TURNTONPC(MIL_4017_ARWID_KQ402, NONE_2009_LENNART);
    AI_STARTFACEANI(MIL_4017_ARWID_KQ402, S_ANGRY, 1, -(1));
    AI_OUTPUT(MIL_4017_ARWID_KQ402, HERO, "DIA_Arwid_Cutscene_03_02");
    KQ402_ARWID_WAIT();
    AI_FUNCTION(NONE_2009_LENNART, 92332);
    AI_OUTPUT(MIL_4017_ARWID_KQ402, HERO, "DIA_Arwid_Cutscene_03_03");
    AI_TURNTONPC(NONE_2009_LENNART, MIL_4000_RODERICH);
    AI_TURNTONPC(MIL_4017_ARWID_KQ402, MIL_4000_RODERICH);
    KQ402_ARWID_WAIT();
    AI_FUNCTION(NONE_2009_LENNART, 92330);
}

func void KQ402_ARWID_END() {
    KQ402_ARWIDCUTSCENE = 2;
    NPC_REFRESH(MIL_4000_RODERICH);
    NPC_REFRESH(NONE_2009_LENNART);
    NPC_REFRESH(MIL_4017_ARWID_KQ402);
    MIL_4017_ARWID_KQ402.AIVAR[92] = FALSE;
    NONE_2009_LENNART.AIVAR[92] = FALSE;
    HERO.AIVAR[4] = FALSE;
}

func void KQ402_ARWID_CAMERA_01() {
    WLD_SENDTRIGGER("KQ402_ARWID_02");
    WLD_SENDUNTRIGGER("KQ402_ARWID_01");
}

func void KQ402_ARWID_CAMERA_02() {
    WLD_SENDTRIGGER("KQ402_ARWID_03");
    WLD_SENDUNTRIGGER("KQ402_ARWID_02");
}

