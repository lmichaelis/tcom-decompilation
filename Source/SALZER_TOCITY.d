func void SALZER_TOCITY() {
    PRINTD("DZIA£A!");
    FADESCREENTOBLACKF(1, 63459, 1000);
}

func void SALZER_TOCITY2() {
    if ((LOG_GETSTATUS(MIS_Q201)) == (LOG_RUNNING)) {
        CITYENTERED = TRUE;
        AI_TELEPORT(HERO, "PARTM1_SALZER_HERO");
        AI_FUNCTION(SLD_5004_SALZER, 63460);
        FADESCREENFROMBLACK(1);
        B_PASSTIME(3);
        SQ201_SALZER_INCITY = TRUE;
        GAMESERVICES_UNLOCKACHIEVEMENT(ACH_13);
        WLD_SENDTRIGGER("CITYEASTGATEOPEN");
        WLD_SENDTRIGGER("WESTCITYGATE");
        Q201_FINISHQUEST();
    };
    B_STARTOTHERROUTINE(SLD_5004_SALZER, "SQ201_WAIT");
    NPC_REFRESH(SLD_5004_SALZER);
    TELEPORTNPCTOWP(55785, SLD_5004_SALZER.WP);
    FF_APPLYONCEEXTGT(63461, 0, -(1));
}

func void SQ201_GETOUTFROMBARREL() {
    AI_USEMOB(HERO, "BARRELO", 1);
}

func void SQ201_CART_START() {
    var ZCMOVER MOVER2;
    var int MOVPTR2;
    var int MOVPTR1;
    var ZCMOVER MOVER3;
    var int MOVPTR3;
    var ZCMOVER MOVER1;
    var int SQ201_CART_COLLISION;
    if ((SQ201_CART_COLLISION) == (0)) {
        PRINTD("Rozpoczynam - SQ201_Cart_Start");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("CITYWHEEL_MOVER");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("NOWHEELS_MOVER");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        MOVPTR3 = MEM_SEARCHVOBBYNAME("NOWHEELS_MOVER2");
        MOVER3 = MEM_PTRTOINST(MOVPTR3);
        CHANGEVOBCOLLISION("SQ201_CART", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ201_BARREL", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ221_OLDCART_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ221_OLDCART_02", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ221_OLDCART_03", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("CITYWHEEL_MOVER");
        WLD_SENDTRIGGER("NOWHEELS_MOVER");
        WLD_SENDTRIGGER("NOWHEELS_MOVER2");
        SQ201_CART_COLLISION = 1;
    };
    if (((((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER3.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER3.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ201_Cart_Start");
        CHANGEVOBCOLLISION("SQ201_CART", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ201_BARREL", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ221_OLDCART_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ221_OLDCART_02", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ221_OLDCART_03", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(63461);
        SQ201_CART_COLLISION = 0;
    };
}

func void SQ201_FINISHQUEST() {
    LOG_SETSTATUS(_@(MIS_SQ201), TOPIC_SQ201, LOG_SUCCESS);
    B_GIVEPLAYERXP(XP_SQ201_FINISH);
    INFO_CLEARCHOICES(71533);
    INFO_CLEARCHOICES(71553);
    SQ201_SALZER_GOTOCITY = TRUE;
    SQ201_SALZER_GOTOCITY_DAY = WLD_GETDAY();
}

func void SQ201_SALZER_GIVEGOLD() {
    if ((FORWHEEL30) == (TRUE)) {
        CREATEINVITEMS(SELF, 34203, SQ201_REWARD_V1);
    };
    if ((FORWHEEL50) == (TRUE)) {
        CREATEINVITEMS(SELF, 34203, SQ201_REWARD_V2);
        B_GIVEINVITEMS(SELF, OTHER, 34203, SQ201_REWARD_V2);
    };
}

