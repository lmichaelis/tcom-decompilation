instance DIA_ANDERAS_EXIT(C_INFO) {
    NPC = 53767;
    NR = 999;
    CONDITION = DIA_ANDERAS_EXIT_CONDITION;
    INFORMATION = DIA_ANDERAS_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_ANDERAS_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_ANDERAS_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_ANDERAS_SQ225_HELLO(C_INFO) {
    NPC = 53767;
    NR = 1;
    CONDITION = DIA_ANDERAS_SQ225_HELLO_CONDITION;
    INFORMATION = DIA_ANDERAS_SQ225_HELLO_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ANDERAS_SQ225_HELLO_CONDITION() {
    if (((NPC_ISINSTATE(SELF, 61599)) && ((LOG_GETSTATUS(MIS_SQ225)) == (LOG_RUNNING))) && (NPC_KNOWSINFO(OTHER, 65623))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ANDERAS_SQ225_HELLO_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Hello_15_01");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Hello_03_02");
    NPC_REFRESH(MIL_11180_CITYGUARD);
    TELEPORTNPCTOWP(53521, MIL_11180_CITYGUARD.WP);
    INFO_CLEARCHOICES(72177);
    INFO_ADDCHOICE(72177, "I came to help you get your vineyard back.", 72182);
    INFO_ADDCHOICE(72177, "I heard you were having trouble with your brother.", 72181);
}

func void DIA_ANDERAS_SQ225_HELLO_NEXT() {
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Hello_Next_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Hello_Next_15_02");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Hello_Next_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Hello_Next_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Hello_Next_03_05");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Hello_Next_15_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Hello_Next_03_07");
    AI_LOGENTRY(TOPIC_SQ225, LOG_SQ225_ANDERAS_VINEYARD);
    INFO_CLEARCHOICES(72177);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_ANDERAS_SQ225_HELLO_BROTHER() {
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Hello_Brother_15_01");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Hello_Brother_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Hello_Brother_15_03");
    DIA_ANDERAS_SQ225_HELLO_NEXT();
}

func void DIA_ANDERAS_SQ225_HELLO_HELP() {
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Hello_Help_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Hello_Help_03_02");
    DIA_ANDERAS_SQ225_HELLO_NEXT();
}

instance DIA_ANDERAS_SQ225_AFTERFARMERS(C_INFO) {
    NPC = 53767;
    NR = 1;
    CONDITION = DIA_ANDERAS_SQ225_AFTERFARMERS_CONDITION;
    INFORMATION = DIA_ANDERAS_SQ225_AFTERFARMERS_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I'm back with the information you requested.";
}

func int DIA_ANDERAS_SQ225_AFTERFARMERS_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_SQ225)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 72177))) && ((SQ225_TALKEDWITHFARMERSCOUNT) >= (4))) && ((SQ225_VALERIOTESTAMENT) != (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ANDERAS_SQ225_AFTERFARMERS_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AfterFarmers_15_01");
    B_STANDUP();
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AfterFarmers_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AfterFarmers_15_03");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AfterFarmers_03_04");
    INFO_CLEARCHOICES(72183);
    INFO_ADDCHOICE(72183, "How can I put this mildly? They don't want you there.", 72188);
    INFO_ADDCHOICE(72183, "Most prefer to pick your brother or not pick at all.", 72187);
}

func void DIA_ANDERAS_SQ225_AFTERFARMERS_NEXT() {
    AI_RESETFACEANI(OTHER);
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AfterFarmers_Next_03_01");
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AfterFarmers_Next_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AfterFarmers_Next_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AfterFarmers_Next_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AfterFarmers_Next_03_05");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AfterFarmers_Next_03_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AfterFarmers_Next_03_07");
    AI_RESETFACEANI(OTHER);
    INFO_CLEARCHOICES(72183);
}

func void DIA_ANDERAS_SQ225_AFTERFARMERS_BADV1() {
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AfterFarmers_BadV1_15_01");
    DIA_ANDERAS_SQ225_AFTERFARMERS_NEXT();
}

func void DIA_ANDERAS_SQ225_AFTERFARMERS_BADV2() {
    AI_STARTFACEANI(OTHER, S_DISGUST, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AfterFarmers_BadV2_15_01");
    DIA_ANDERAS_SQ225_AFTERFARMERS_NEXT();
}

instance DIA_ANDERAS_SQ225_FATHER(C_INFO) {
    NPC = 53767;
    NR = 1;
    CONDITION = DIA_ANDERAS_SQ225_FATHER_CONDITION;
    INFORMATION = DIA_ANDERAS_SQ225_FATHER_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "You want me to destroy your father's vineyard?";
}

func int DIA_ANDERAS_SQ225_FATHER_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ225)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 72183))) && ((SQ225_VALERIOTESTAMENT) != (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int SQ225_ANDERASQUESTIONS_COUNT;
func void DIA_ANDERAS_SQ225_DECISION() {
    SQ225_ANDERASQUESTIONS_COUNT = (SQ225_ANDERASQUESTIONS_COUNT) + (1);
    if ((SQ225_ANDERASQUESTIONS_COUNT) >= (2)) {
        B_STANDUP();
        AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Decision_03_01");
        INFO_CLEARCHOICES(72194);
        INFO_ADDCHOICE(72194, "I'm getting to work.", 72202);
        INFO_ADDCHOICE(72194, "Preparing for such activities will be expensive.", 72204);
        INFO_ADDCHOICE(72194, "I'll have to think about it some more.", 72201);
        INFO_CLEARCHOICES(72189);
        INFO_ADDCHOICE(72189, "I'm getting to work.", 72202);
        INFO_ADDCHOICE(72189, "Preparing for such activities will be expensive.", 72204);
        INFO_ADDCHOICE(72189, "I'll have to think about it some more.", 72201);
    };
}

func void DIA_ANDERAS_SQ225_FATHER_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Father_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Father_03_02");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Father_03_03");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    DIA_ANDERAS_SQ225_DECISION();
}

instance DIA_ANDERAS_SQ225_SURE(C_INFO) {
    NPC = 53767;
    NR = 1;
    CONDITION = DIA_ANDERAS_SQ225_SURE_CONDITION;
    INFORMATION = DIA_ANDERAS_SQ225_SURE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Are you sure it's worth it to you?";
}

func int DIA_ANDERAS_SQ225_SURE_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ225)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 72183))) && ((SQ225_VALERIOTESTAMENT) != (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ANDERAS_SQ225_SURE_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Sure_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Sure_03_02");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Sure_03_03");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    DIA_ANDERAS_SQ225_DECISION();
}

var int ANDERAS_SQ225_DECISION_REFUSE_LOGENTRY;
var int ANDERAS_SQ225_DECISION_REFUSE;
func void DIA_ANDERAS_SQ225_DECISION_THINKABOUTTHIS() {
    ANDERAS_SQ225_DECISION_REFUSE = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Sure_No_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Sure_No_03_02");
    INFO_CLEARCHOICES(72194);
    AI_STOPPROCESSINFOS(SELF);
    if ((ANDERAS_SQ225_DECISION_REFUSE_LOGENTRY) == (FALSE)) {
        ANDERAS_SQ225_DECISION_REFUSE_LOGENTRY = TRUE;
        AI_LOGENTRY(TOPIC_SQ225, LOG_SQ225_ANDERAS_REFUSE);
    };
}

func void DIA_ANDERAS_SQ225_DECISION_TAKEQUEST() {
    SQ225_ANDERASWAY_AGREED = TRUE;
    SQ225_ANDERASWAY_AGREEDCHECK = TRUE;
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_WAITTILLEND(SELF, OTHER);
    AI_PLAYANI(SELF, "T_GREETCOOL");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Sure_Yes_03_02");
    INFO_CLEARCHOICES(72194);
    AI_STOPPROCESSINFOS(SELF);
    AI_RESETFACEANI(OTHER);
    AI_LOGENTRY(TOPIC_SQ225, LOG_SQ225_ANDERAS_ACCEPT);
    SQ225_ANDERAS_PREPARESCENE();
    SQ225_STARW_SPAWN();
}

func void DIA_ANDERAS_SQ225_SURE_DECISION_NO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Sure_No_15_01");
    DIA_ANDERAS_SQ225_DECISION_THINKABOUTTHIS();
}

func void DIA_ANDERAS_SQ225_SURE_DECISION_YES() {
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Sure_Yes_15_01");
    DIA_ANDERAS_SQ225_DECISION_TAKEQUEST();
}

var int ANDERAS_SQ225_DECISION_TAKEGOLD;
func void DIA_ANDERAS_SQ225_SURE_DECISION_GOLD() {
    ANDERAS_SQ225_DECISION_TAKEGOLD = TRUE;
    AI_STARTFACEANI(OTHER, S_THINK, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Sure_Gold_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Sure_Gold_03_02");
    CREATEINVITEMS(SELF, 34737, 1);
    B_GIVEINVITEMS(SELF, OTHER, 34737, 1);
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

instance DIA_ANDERAS_SQ225_AREYOUREADY(C_INFO) {
    NPC = 53767;
    NR = 1;
    CONDITION = DIA_ANDERAS_SQ225_AREYOUREADY_CONDITION;
    INFORMATION = DIA_ANDERAS_SQ225_AREYOUREADY_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_ANDERAS_SQ225_AREYOUREADY_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_SQ225)) == (LOG_RUNNING)) && ((ANDERAS_SQ225_DECISION_REFUSE) == (TRUE))) && (NPC_ISINSTATE(SELF, 61599))) && ((SQ225_VALERIOTESTAMENT) != (2))) {
        if (((SQ225_ANDERASWAY_AGREED) == (FALSE)) && ((SQ225_ANDERASWAY_FAILED) == (0))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_ANDERAS_SQ225_AREYOUREADY_INFO() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    B_STANDUP();
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AreYouReady_03_01");
    INFO_CLEARCHOICES(72205);
    INFO_ADDCHOICE(72205, "I will leave as soon as possible.", 72208);
    INFO_ADDCHOICE(72205, "I'll have to think about that.", 72210);
    if ((ANDERAS_SQ225_DECISION_TAKEGOLD) == (FALSE)) {
        INFO_ADDCHOICE(72205, "I still have some objections to this plan...", 72209);
    };
}

func void DIA_ANDERAS_SQ225_AREYOUREADY_YES() {
    if ((ANDERAS_SQ225_DECISION_TAKEGOLD) == (FALSE)) {
        AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AreYouReady_Yes_15_01");
    };
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AreYouReady_Yes_15_02");
    DIA_ANDERAS_SQ225_DECISION_TAKEQUEST();
}

func void DIA_ANDERAS_SQ225_AREYOUREADY_DONTKNOW() {
    ANDERAS_SQ225_DECISION_TAKEGOLD = TRUE;
    AI_STARTFACEANI(OTHER, S_THINK, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AreYouReady_DontKnow_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AreYouReady_DontKnow_03_02");
    CREATEINVITEMS(SELF, 34737, 1);
    B_GIVEINVITEMS(SELF, OTHER, 34737, 1);
    AI_RESETFACEANI(OTHER);
}

func void DIA_ANDERAS_SQ225_AREYOUREADY_NO() {
    DIA_ANDERAS_SQ225_DECISION_THINKABOUTTHIS();
}

instance DIA_ANDERAS_SQ225_FAILEDACTION(C_INFO) {
    NPC = 53767;
    NR = 1;
    CONDITION = DIA_ANDERAS_SQ225_FAILEDACTION_CONDITION;
    INFORMATION = DIA_ANDERAS_SQ225_FAILEDACTION_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I was detected sabotaging the vineyard.";
}

func int DIA_ANDERAS_SQ225_FAILEDACTION_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_SQ225)) == (LOG_RUNNING)) && ((SQ225_ANDERASWAY_AGREED) == (FALSE))) && ((SQ225_ANDERASWAY_FAILED) == (TRUE))) && ((SQ225_VALERIOTESTAMENT) != (2))) {
        if (!(NPC_KNOWSINFO(OTHER, 69331))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_ANDERAS_SQ225_FAILEDACTION_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_FailedAction_15_01");
    B_STANDUP();
    AI_STARTFACEANI(SELF, "S_HOSTILE", 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_FailedAction_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_FailedAction_03_03");
    AI_STARTFACEANI(OTHER, S_SERIOUS, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_FailedAction_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_FailedAction_03_05");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, START);
    SQ225_HIDEEVENTS_ANDERASWAY();
}

instance DIA_ANDERAS_SQ225_FAILEDACTION2(C_INFO) {
    NPC = 53767;
    NR = 1;
    CONDITION = DIA_ANDERAS_SQ225_FAILEDACTION2_CONDITION;
    INFORMATION = DIA_ANDERAS_SQ225_FAILEDACTION2_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_ANDERAS_SQ225_FAILEDACTION2_CONDITION() {
    if ((((((LOG_GETSTATUS(MIS_SQ225)) == (LOG_RUNNING)) && ((SQ225_ANDERASWAY_AGREED) == (FALSE))) && ((SQ225_ANDERASWAY_FAILED) == (2))) && (NPC_ISINSTATE(SELF, 61599))) && ((SQ225_VALERIOTESTAMENT) != (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ANDERAS_SQ225_FAILEDACTION2_INFO() {
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_FailedAction_03_06");
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_FailedAction_03_07");
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_ANDERAS_SQ225_ALLDONE(C_INFO) {
    NPC = 53767;
    NR = 1;
    CONDITION = DIA_ANDERAS_SQ225_ALLDONE_CONDITION;
    INFORMATION = DIA_ANDERAS_SQ225_ALLDONE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "There was some work involved, but I sabotaged the vineyard.";
}

func int DIA_ANDERAS_SQ225_ALLDONE_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_SQ225)) == (LOG_RUNNING)) && ((SQ225_ANDERASWAY_COUNT) >= (2))) && ((SQ225_ANDERASWAY_AGREED) == (1))) && ((SQ225_VALERIOTESTAMENT) != (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ANDERAS_SQ225_ALLDONE_INFO() {
    var int ANDERAS_SQ225_ALLDONE_COUNT;
    SQ225_HIDEEVENTS_HOLDWIGWAY();
    AI_FUNCTION(SELF, 72221);
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AllDone_15_01");
    B_STANDUP();
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AllDone_03_02");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    if ((SQ225_FIRECARTDONE) == (1)) {
        ANDERAS_SQ225_ALLDONE_COUNT = (ANDERAS_SQ225_ALLDONE_COUNT) + (1);
        AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AllDone_15_03");
        AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AllDone_03_04");
    };
    if ((SQ225_GRAPESDESTROYED) == (1)) {
        ANDERAS_SQ225_ALLDONE_COUNT = (ANDERAS_SQ225_ALLDONE_COUNT) + (1);
        AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AllDone_15_05");
        AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AllDone_03_06");
    };
    if ((SQ225_TOOLSSTOLEN) == (1)) {
        ANDERAS_SQ225_ALLDONE_COUNT = (ANDERAS_SQ225_ALLDONE_COUNT) + (1);
        AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AllDone_15_07");
        AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AllDone_03_08");
    };
    if ((SQ225_STRAWSDESTROYED) == (1)) {
        ANDERAS_SQ225_ALLDONE_COUNT = (ANDERAS_SQ225_ALLDONE_COUNT) + (1);
        AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AllDone_15_09");
        AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AllDone_03_10");
    };
    B_GIVEPLAYERXP((XP_SQ225_HELPEDANDERAS_COUNT) * (ANDERAS_SQ225_ALLDONE_COUNT));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AllDone_03_11");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AllDone_15_12");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AllDone_03_13");
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_SQ225, LOG_SQ225_GEHARDININN);
    AI_FUNCTION(SELF, 72222);
}

func void ANDERAS_SQ225_SPAWNGERHARD() {
    WLD_INSERTNPC(53410, "PARTM4_TAVERN_CHAIR_03");
    PRINTD("Player 3 joined the server");
}

func void ANDERAS_SQ225_MOVEGERHARD() {
    SQ225_MOVERGERHARD = 1;
}

instance DIA_ANDERAS_SQ225_OURPLAN(C_INFO) {
    NPC = 53767;
    NR = 1;
    CONDITION = DIA_ANDERAS_SQ225_OURPLAN_CONDITION;
    INFORMATION = DIA_ANDERAS_SQ225_OURPLAN_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ANDERAS_SQ225_OURPLAN_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_SQ225)) == (LOG_RUNNING)) && ((SQ225_ANDERASWAY_AGREED) == (1))) && ((SQ225_GERHARD_WAITFORACTION) == (2))) && ((SQ225_VALERIOTESTAMENT) != (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ANDERAS_SQ225_OURPLAN_INFO() {
    B_STANDUP();
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_OurPlan_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_OurPlan_15_02");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_OurPlan_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_OurPlan_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_OurPlan_03_05");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_OurPlan_03_06");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_OurPlan_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_OurPlan_03_08");
    AI_LOGENTRY(TOPIC_SQ225, LOG_SQ225_ANDERAS_GERHARDPLAN);
    AI_STOPPROCESSINFOS(SELF);
    SQ225_FIGHTINVINEYARD_ANDERASWAY();
    SQ225_STARTFIGHTINVINEYARD();
}

instance DIA_ANDERAS_SQ225_FINISH(C_INFO) {
    NPC = 53767;
    NR = 1;
    CONDITION = DIA_ANDERAS_SQ225_FINISH_CONDITION;
    INFORMATION = DIA_ANDERAS_SQ225_FINISH_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "The situation in the vineyard was brought under control.";
}

func int DIA_ANDERAS_SQ225_FINISH_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ225)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 80740))) && ((SQ225_VALERIOTESTAMENT) != (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ANDERAS_SQ225_FINISH_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Finish_15_01");
    B_STANDUP();
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Finish_03_02");
    INFO_CLEARCHOICES(72226);
    if ((SQ225_GERHARD_FINISHWAY) == (3)) {
        INFO_ADDCHOICE(72226, "We decided to send Holdwig to the Valley of Mines.", 72230);
    };
    INFO_ADDCHOICE(72226, "Holdwig was committed to his cause. He refused to give up.", 72231);
}

func void DIA_ANDERAS_SQ225_FINISH_END() {
    INFO_CLEARCHOICES(72226);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_SQ225, LOG_SQ225_ANDERAS_FINISHMYJOB);
}

func void DIA_ANDERAS_SQ225_FINISH_COLONY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Finish_Colony_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Finish_Colony_15_02");
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Finish_Colony_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Finish_Colony_15_04");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Finish_Colony_03_05");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Finish_Colony_15_06");
    DIA_ANDERAS_SQ225_FINISH_END();
}

func void DIA_ANDERAS_SQ225_FINISH_DEAD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Finish_Dead_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Finish_Dead_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Finish_Dead_15_03");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Finish_Dead_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Finish_Dead_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Finish_Dead_03_06");
    DIA_ANDERAS_SQ225_FINISH_END();
}

instance DIA_ANDERAS_SQ225_AFTERQUEST(C_INFO) {
    NPC = 53767;
    NR = 1;
    CONDITION = DIA_ANDERAS_SQ225_AFTERQUEST_CONDITION;
    INFORMATION = DIA_ANDERAS_SQ225_AFTERQUEST_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "How are things going?";
}

func int DIA_ANDERAS_SQ225_AFTERQUEST_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ225)) == (LOG_SUCCESS)) && ((SQ225_FINISHWAY) == (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ANDERAS_SQ225_AFTERQUEST_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_AfterQuest_15_01");
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AfterQuest_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AfterQuest_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_AfterQuest_03_04");
}

instance DIA_ANDERAS_SQ225_LOST(C_INFO) {
    NPC = 53767;
    NR = 1;
    CONDITION = DIA_ANDERAS_SQ225_LOST_CONDITION;
    INFORMATION = DIA_ANDERAS_SQ225_LOST_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Disappeared? What are you going to do now?";
}

func int DIA_ANDERAS_SQ225_LOST_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 72232)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ANDERAS_SQ225_LOST_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Lost_15_01");
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Lost_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_SQ225_Lost_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Lost_03_04");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_SQ225_Lost_03_05");
    CREATEINVITEMS(SELF, 34739, 2);
    B_GIVEINVITEMS(SELF, OTHER, 34739, 2);
}

instance DIA_ANDERAS_Q505_HELP(C_INFO) {
    NPC = 53767;
    NR = 1;
    CONDITION = DIA_ANDERAS_Q505_HELP_CONDITION;
    INFORMATION = DIA_ANDERAS_Q505_HELP_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Could you provide me with some supplies for my expedition?";
}

func int DIA_ANDERAS_Q505_HELP_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q505)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 80244))) {
        if ((LOG_GETSTATUS(MIS_SQ225)) == (LOG_SUCCESS)) {
            if (((SQ225_FINISHWAY) == (2)) || ((SQ225_FINISHWAY) == (3))) {
                if ((NPC_KNOWSINFO(OTHER, 65199)) == (FALSE)) {
                    return TRUE;
                };
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_ANDERAS_Q505_HELP_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    B_SAY(OTHER, SELF, "$Q505_MARVIN_VALERIOASK");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_Q505_Help_03_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Anderas_Q505_Help_03_02");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    CREATEINVITEMS(SELF, 36908, 1);
    B_GIVEINVITEMS(SELF, OTHER, 36908, 1);
}

instance DIA_ANDERAS_AFTERSQ225(C_INFO) {
    NPC = 53767;
    NR = 980;
    CONDITION = DIA_ANDERAS_AFTERSQ225_CONDITION;
    INFORMATION = DIA_ANDERAS_AFTERSQ225_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "How's the situation in the vineyard?";
}

func int DIA_ANDERAS_AFTERSQ225_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ225)) == (LOG_SUCCESS)) || ((LOG_GETSTATUS(MIS_SQ225)) == (LOG_FAILED))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ANDERAS_AFTERSQ225_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Anderas_AfterSQ225_15_01");
    if ((SQ225_FINISHWAY) == (3)) {
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Anderas_AfterSQ225_03_02");
        AI_OUTPUT(SELF, OTHER, "DIA_Anderas_AfterSQ225_03_03");
    };
    if ((SQ225_FINISHWAY) == (2)) {
        AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Anderas_AfterSQ225_03_04");
    };
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

instance DIA_ANDERAS_PICKPOCKET(C_INFO) {
    NPC = 53767;
    NR = 900;
    CONDITION = DIA_ANDERAS_PICKPOCKET_CONDITION;
    INFORMATION = DIA_ANDERAS_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_120;
}

func int DIA_ANDERAS_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ANDERAS_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(72244);
    INFO_ADDCHOICE(72244, DIALOG_BACK, 72248);
    INFO_ADDCHOICE(72244, DIALOG_PICKPOCKET, 72247);
}

func void DIA_ANDERAS_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (3)) {
        CREATEINVITEMS(SELF, 34207, 1);
        B_GIVEINVITEMS(SELF, OTHER, 34207, 1);
        B_PICKPOCKET_AMBIENT_TIER_3();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(72244);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(72244);
}

func void DIA_ANDERAS_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(72244);
}

