var int QA301_FARMERS_COUNT = 0;
func void EVENTSMANAGER_QA301() {
    if ((LOG_GETSTATUS(MIS_QA301)) == (LOG_RUNNING)) {
        if ((QA301_TALKWITHARAXOSGUARD) == (0)) {
            if (((NPC_KNOWSINFO(HERO, 0x14f64)) && ((QA301_FOREST) == (0))) && ((NPC_GETDISTTOWP(HERO, "PART12_PATH_41")) <= (0x4e2))) {
                PRINTD("Biegnie 1");
                B_SAY(HERO, HERO, "$MARVIN_WaitForMe");
                QA301_TALKWITHARAXOSGUARD = 1;
                B_STARTOTHERROUTINE(SLD_11054_ARAXOS_QA301, "QA301_FOLLOW_DIALOGUE");
                NPC_REFRESH(SLD_11054_ARAXOS_QA301);
            };
        } else if ((QA301_TALKWITHARAXOSGUARD) == (1)) {
            if (((NPC_GETDISTTOWP(HERO, "PART12_PATH_75")) <= (0x4e2)) && ((QA301_FOREST) == (1))) {
                PRINTD("Biegnie 2");
                B_SAY(HERO, HERO, "$MARVIN_WaitForMe");
                QA301_TALKWITHARAXOSGUARD = 2;
                B_STARTOTHERROUTINE(SLD_11055_ARAXOS_QA301, "QA301_FOLLOW_DIALOGUE");
                NPC_REFRESH(SLD_11055_ARAXOS_QA301);
            };
        } else if ((QA301_TALKWITHARAXOSGUARD) == (2)) {
            if (((QA301_FOREST) == (2)) && ((NPC_GETDISTTOWP(HERO, "PART12_PATH_94")) <= (0x4e2))) {
                PRINTD("Biegnie 3");
                B_SAY(HERO, HERO, "$MARVIN_WaitForMe");
                QA301_TALKWITHARAXOSGUARD = 3;
                B_STARTOTHERROUTINE(SLD_11056_GRIZ, "QA301_FOLLOW_DIALOGUE");
                NPC_REFRESH(SLD_11056_GRIZ);
            };
        };
        if ((QA301_FOREST) == (3)) {
            if (NPC_ISDEAD(SLD_11056_GRIZ)) {
                if ((QA301_GRIZISDEAD) == (FALSE)) {
                    QA301_GRIZISDEAD = 1;
                    B_LOGENTRY(TOPIC_QA301, LOG_QA301_GRIZ_DEAD);
                };
            };
        };
        if ((QA301_GRIZISDEAD) == (1)) {
            if ((((((NPC_ISDEAD(GOBBO_QA301_01)) && (NPC_ISDEAD(GOBBO_QA301_02))) && (NPC_ISDEAD(GOBBO_QA301_03))) && (NPC_ISDEAD(GOBBO_QA301_04))) && (NPC_ISDEAD(GOBBO_QA301_05))) && (NPC_ISDEAD(GOBBO_QA301_06))) {
                QA301_GRIZISDEAD = 2;
                B_LOGENTRY(TOPIC_QA301, LOG_QA301_ROADCLEAR);
            };
        };
        if ((QA301_FOREST) == (5)) {
            if (((QA301_FOREST_LOGENTRY) == (FALSE)) && ((QA301_USEDFIREPLACE) == (FALSE))) {
                if ((((((NPC_ISDEAD(GOBBO_QA301_01)) && (NPC_ISDEAD(GOBBO_QA301_02))) && (NPC_ISDEAD(GOBBO_QA301_03))) && (NPC_ISDEAD(GOBBO_QA301_04))) && (NPC_ISDEAD(GOBBO_QA301_05))) && (NPC_ISDEAD(GOBBO_QA301_06))) {
                    QA301_FOREST_LOGENTRY = TRUE;
                    B_LOGENTRY(TOPIC_QA301, LOG_QA301_CANUSEBONFIRE);
                };
            };
        };
        if ((QA301_FINALCUTSCENE) == (1)) {
            QA301_FINALCUTSCENE = 2;
            FF_APPLYONCEEXT(0x17019, 500, 2);
        };
        if ((QA301_FINALCUTSCENE) == (3)) {
            QA301_FINALCUTSCENE = 4;
            FF_APPLYONCEEXT(0x1701d, 250, 3);
            AI_DRAWWEAPON(BAU_11051_FARMER_QA301_CUTSCENE);
            AI_DRAWWEAPON(BAU_11052_FARMER_QA301_CUTSCENE);
            AI_DRAWWEAPON(BAU_11053_FARMER_QA301_CUTSCENE);
        };
        if ((QA301_FARMERS_COUNT) == (3)) {
            PRINTD("Id¹");
            QA301_FARMERS_COUNT = 4;
            NPC_CLEARAIQUEUE(BAU_11051_FARMER_QA301_CUTSCENE);
            NPC_CLEARAIQUEUE(BAU_11052_FARMER_QA301_CUTSCENE);
            NPC_CLEARAIQUEUE(BAU_11053_FARMER_QA301_CUTSCENE);
            AI_GOTOWP(BAU_11051_FARMER_QA301_CUTSCENE, "PART12_PATH_90");
            AI_GOTOWP(BAU_11052_FARMER_QA301_CUTSCENE, "PART12_PATH_90");
            AI_GOTOWP(BAU_11053_FARMER_QA301_CUTSCENE, "PART12_PATH_90");
        };
        if ((QA301_BADCUTSCENE) == (1)) {
            QA301_BADCUTSCENE = 2;
            FF_APPLYONCEEXT(0x1701b, 500, 2);
        };
        if ((QA301_BADCUTSCENE) == (3)) {
            if ((NPC_GETDISTTOWP(HERO, "PART12_QA301_GRIZWAIT")) <= (500)) {
                QA301_BADCUTSCENE = 4;
                AI_OUTPUT(HERO, HERO, "DIA_Marvin_QA301_Blood_15_01");
                B_LOGENTRY(TOPIC_QA301, LOG_QA301_BLOOD);
            };
        };
        if (((QA301_BADCUTSCENE) >= (3)) && ((QA301_BADCUTSCENE) < (5))) {
            if (HLP_ISVALIDNPC(SHADOWBEAST_QA301)) {
                if (NPC_ISDEAD(SHADOWBEAST_QA301)) {
                    QA301_BADCUTSCENE = 5;
                    B_LOGENTRY(TOPIC_QA301, LOG_QA301_FOUNDGRIZ);
                };
            };
        };
    };
    if ((LOG_GETSTATUS(MIS_QA301)) == (LOG_SUCCESS)) {
        if ((QA301_HIDEEVENTS) == (1)) {
            if ((QA301_HIDEEVENTS_DAY) <= ((WLD_GETDAY()) - (3))) {
                QA301_HIDEEVENTS = 2;
                QA301_REMOVEEVENTS();
            };
        };
    };
}

var int EVENTSMANAGER_QA301.QA301_FOREST_LOGENTRY = 0;
func void QA301_FINALCUTSCENEPLAY() {
    QA301_FINALCUTSCENEPLAY_COUNT = (QA301_FINALCUTSCENEPLAY_COUNT) + (1);
    if ((QA301_FINALCUTSCENEPLAY_COUNT) == (1)) {
        PRINTD("Nowi farmerzy");
        WLD_INSERTNPC(0xdfdd, "PART12_PATH_50");
        WLD_INSERTNPC(0xdfe4, "PART12_PATH_50");
        WLD_INSERTNPC(0xdfeb, "PART12_PATH_50");
    };
    if ((QA301_FINALCUTSCENEPLAY_COUNT) == (2)) {
        CUTSCENE_START(0x16a66);
    };
}

var int QA301_FINALCUTSCENEPLAY.QA301_FINALCUTSCENEPLAY_COUNT = 0;
func void QA301_BADCUTSCENEPLAY() {
    QA301_BADCUTSCENEPLAY_COUNT = (QA301_BADCUTSCENEPLAY_COUNT) + (1);
    if ((QA301_BADCUTSCENEPLAY_COUNT) == (2)) {
        CUTSCENE_START(0x16a61);
    };
}

var int QA301_BADCUTSCENEPLAY.QA301_BADCUTSCENEPLAY_COUNT = 0;
func void QA301_FARMERS() {
    QA301_FARMERS_COUNT = (QA301_FARMERS_COUNT) + (1);
    if ((QA301_FARMERS_COUNT) == (1)) {
        PRINTD("Refresh");
        NPC_CLEARAIQUEUE(BAU_11051_FARMER_QA301_CUTSCENE);
        NPC_CLEARAIQUEUE(BAU_11052_FARMER_QA301_CUTSCENE);
        NPC_CLEARAIQUEUE(BAU_11053_FARMER_QA301_CUTSCENE);
    };
    if ((QA301_FARMERS_COUNT) == (2)) {
        PRINTD("Broñ");
        AI_DRAWWEAPON(BAU_11051_FARMER_QA301_CUTSCENE);
        AI_DRAWWEAPON(BAU_11052_FARMER_QA301_CUTSCENE);
        AI_DRAWWEAPON(BAU_11053_FARMER_QA301_CUTSCENE);
    };
    if ((QA301_FARMERS_COUNT) == (3)) {
        AI_SETWALKMODE(BAU_11051_FARMER_QA301_CUTSCENE, NPC_RUN);
        AI_SETWALKMODE(BAU_11052_FARMER_QA301_CUTSCENE, NPC_RUN);
        AI_SETWALKMODE(BAU_11053_FARMER_QA301_CUTSCENE, NPC_RUN);
    };
}

