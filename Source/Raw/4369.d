instance DIA_OSIP_Q602_EXIT(C_INFO) {
    NPC = 0xea81;
    NR = 999;
    CONDITION = DIA_OSIP_Q602_EXIT_CONDITION;
    INFORMATION = DIA_OSIP_Q602_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_OSIP_Q602_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_OSIP_Q602_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_OSIP_Q602_GOAWAY(C_INFO) {
    NPC = 0xea81;
    NR = 1;
    CONDITION = DIA_OSIP_Q602_GOAWAY_CONDITION;
    INFORMATION = DIA_OSIP_Q602_GOAWAY_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_OSIP_Q602_GOAWAY_CONDITION() {
    if ((LOG_GETSTATUS(MIS_Q602)) == (LOG_RUNNING)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_OSIP_Q602_GOAWAY_INFO() {
    if (HLP_ISVALIDNPC(NONE_6408_OSIPFRIEND_Q602)) {
        if (!(NPC_ISDEAD(NONE_6408_OSIPFRIEND_Q602))) {
            TRIA_INVITE(NONE_6408_OSIPFRIEND_Q602);
        };
    };
    if (HLP_ISVALIDNPC(NONE_6409_OSIPFRIEND_Q602)) {
        if (!(NPC_ISDEAD(NONE_6409_OSIPFRIEND_Q602))) {
            TRIA_INVITE(NONE_6409_OSIPFRIEND_Q602);
        };
    };
    if ((HLP_ISVALIDNPC(NONE_6408_OSIPFRIEND_Q602)) || (HLP_ISVALIDNPC(NONE_6409_OSIPFRIEND_Q602))) {
        if ((!(NPC_ISDEAD(NONE_6408_OSIPFRIEND_Q602))) || (!(NPC_ISDEAD(NONE_6409_OSIPFRIEND_Q602)))) {
            TRIA_START();
        };
    };
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Osip_Q602_GOAWAY_03_01");
    AI_PLAYANI(SELF, "T_GETLOST2");
    INFO_CLEARCHOICES(0x1622c);
    INFO_ADDCHOICE(0x1622c, "I think I'm gonna punch your mangy faces.", 0x16231);
    INFO_ADDCHOICE(0x1622c, "Relax, I'm getting out of here.", 0x16230);
}

func void DIA_OSIP_Q602_ENDTRIALOG() {
    if ((HLP_ISVALIDNPC(NONE_6408_OSIPFRIEND_Q602)) || (HLP_ISVALIDNPC(NONE_6409_OSIPFRIEND_Q602))) {
        if ((!(NPC_ISDEAD(NONE_6408_OSIPFRIEND_Q602))) || (!(NPC_ISDEAD(NONE_6409_OSIPFRIEND_Q602)))) {
            TRIA_FINISH();
        };
    };
}

func void DIA_OSIP_Q602_GOAWAY_LEAVE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Osip_Q602_GOAWAY_Leave_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Osip_Q602_GOAWAY_Leave_03_02");
    DIA_OSIP_Q602_ENDTRIALOG();
    INFO_CLEARCHOICES(0x1622c);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_Q602, LOG_Q602_OSIP_LEAVE);
}

func void DIA_OSIP_Q602_GOAWAY_SCARE() {
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_STARTFACEANI(SELF, S_FRIGHTENED, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Osip_Q602_GOAWAY_Scare_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_DRAWWEAPON(OTHER);
    AI_PLAYANI(SELF, T_STAND_2_SCAREDDIALOGUE);
    AI_OUTPUT(SELF, OTHER, "DIA_Osip_Q602_GOAWAY_Scare_03_02");
    INFO_CLEARCHOICES(0x1622c);
    INFO_ADDCHOICE(0x1622c, "No.", 0x16233);
    INFO_ADDCHOICE(0x1622c, "All right, get out of here.", 0x16232);
}

func void DIA_OSIP_Q602_GOAWAY_SCARE_YES() {
    AI_RESETFACEANI(OTHER);
    AI_REMOVEWEAPON(OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_Osip_Q602_GOAWAY_Yes_15_01");
    AI_PLAYANI(SELF, "T_PRAY_2_STAND");
    AI_OUTPUT(SELF, OTHER, "DIA_Osip_Q602_GOAWAY_Yes_03_02");
    DIA_OSIP_Q602_ENDTRIALOG();
    INFO_CLEARCHOICES(0x1622c);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_Q602, LOG_Q602_OSIP_FLEE);
    AI_FUNCTION(SELF, 0x16235);
}

func void DIA_OSIP_Q602_GOAWAY_SCARE_NO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Osip_Q602_GOAWAY_No_15_01");
    AI_PLAYANI(SELF, "T_PRAY_2_STAND");
    DIA_OSIP_Q602_ENDTRIALOG();
    INFO_CLEARCHOICES(0x1622c);
    AI_WAITTILLEND(SELF, OTHER);
    AI_STOPPROCESSINFOS(OTHER);
    AI_LOGENTRY(TOPIC_Q602, LOG_Q602_OSIP_ATTACK);
    AI_FUNCTION(SELF, 0x16234);
}

func void OSIP_Q602_FIGHTWITHOSIP() {
    Q602_FIGHTWITHOSIP();
}

func void OSIP_Q602_OSIPFLEE() {
    Q602_OSIPFLEE();
}

