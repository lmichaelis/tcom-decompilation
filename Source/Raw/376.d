func void Q404_MARVINASK_NEEDHELP() {
    AI_OUTPUT(OTHER, SELF, "DIA_Dalmon_GuardMine_15_01");
}

func void Q404_GIVEREWARD_WEAPON() {
    MAXWEAPONSKILL = MAXOF4(HERO.HITCHANCE[1], HERO.HITCHANCE[2], HERO.HITCHANCE[3], HERO.HITCHANCE[4]);
    if ((MAXWEAPONSKILL) == (HERO.HITCHANCE[1])) {
        if ((HERO.ATTRIBUTE[4]) >= (HERO.ATTRIBUTE[5])) {
            CREATEINVITEMS(NONE_15_ULRYK, 0x8520, 1);
        } else {
            CREATEINVITEMS(NONE_15_ULRYK, 0x9a7a, 1);
            B_GIVEINVITEMS(NONE_15_ULRYK, HERO, 0x9a7a, 1);
        } else {
            /* set_instance(0) */;
        };
    };
    if ((MAXWEAPONSKILL) == (HERO.HITCHANCE[2])) {
        if ((HERO.ATTRIBUTE[4]) >= (HERO.ATTRIBUTE[5])) {
            CREATEINVITEMS(NONE_15_ULRYK, 0x8528, 1);
        } else {
            CREATEINVITEMS(NONE_15_ULRYK, 0x9adf, 1);
            B_GIVEINVITEMS(NONE_15_ULRYK, HERO, 0x9adf, 1);
        } else {
            /* set_instance(0) */;
        };
    };
    if ((MAXWEAPONSKILL) == (HERO.HITCHANCE[3])) {
        CREATEINVITEMS(NONE_15_ULRYK, 0x8661, 1);
    };
    if ((MAXWEAPONSKILL) == (HERO.HITCHANCE[4])) {
        CREATEINVITEMS(NONE_15_ULRYK, 0x8672, 1);
        B_GIVEINVITEMS(NONE_15_ULRYK, HERO, 0x8672, 1);
    };
}

var int Q404_GIVEREWARD_WEAPON.MAXWEAPONSKILL = 0;
func void Q404_GIVEREWARD_POTION() {
    if (((MARVIN_MILITIASPECIALIZATION) == (MILITIA_SPECIALIZATION_FIGHTER)) || ((MARVIN_ARAXOSSPECIALIZATION) == (ARAXOS_SPECIALIZATION_FIGHTER))) {
        CREATEINVITEMS(SELF, 0x8643, 1);
    };
    if (((MARVIN_MILITIASPECIALIZATION) == (MILITIA_SPECIALIZATION_CROSSBOWMAN)) || ((MARVIN_ARAXOSSPECIALIZATION) == (ARAXOS_SPECIALIZATION_ARCHER))) {
        CREATEINVITEMS(SELF, 0x8645, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8645, 1);
    };
}

func void Q404_GAURRING(var C_ITEM ITEM) {
    if (((Q404_GAURRING_TAKEITEM) == (FALSE)) && (NPC_KNOWSINFO(HERO, 0x1422d))) {
        if ((HLP_GETINSTANCEID(ITEM)) == (0x9479)) {
            Q404_GAURRING_TAKEITEM = TRUE;
            MOB_CHANGEFOCUSNAME("Q404_GAURCORPSE", "MOBNAME_NOTHING");
            WLD_SENDTRIGGER("Q404_GAURRING_PLUNDER");
            B_LOGENTRY(TOPIC_Q404, LOG_Q404_GAURRING);
        };
    };
}

func void Q404_BOSSFIGHT_STARTEVENT() {
    FF_APPLYONCEEXT(0xa466, 250, 7);
}

func void Q404_BOSSFIGHT_STARTEVENT_APPLY() {
    Q404_BOSSFIGHT_STARTEVENT_COUNT = (Q404_BOSSFIGHT_STARTEVENT_COUNT) + (1);
    if ((Q404_BOSSFIGHT_STARTEVENT_COUNT) == (1)) {
        WLD_PLAYEFFECT("FX_MINECRAWLER_EXPLODE", MINECRAWLERQUEEN, MINECRAWLERQUEEN, 0, 0, 0, FALSE);
        WLD_PLAYEFFECT("FX_MINECRAWLER_EXPLODE", HERO, HERO, 0, 0, 0, FALSE);
        WLD_PLAYEFFECT("FX_EarthQuake", HERO, HERO, 0, 0, 0, FALSE);
    };
    if ((Q404_BOSSFIGHT_STARTEVENT_COUNT) == (1)) {
        SND_PLAY("CRAWLER_POISON_EXPLODE");
    };
    if ((Q404_BOSSFIGHT_STARTEVENT_COUNT) == (3)) {
        AI_PLAYANI(HERO, "T_BOSSFALLDOWN");
        PRINTD("3");
        if ((NPC_ISDEAD(DJG_10021_WOLFSON)) == (FALSE)) {
            AI_PLAYANI(DJG_10021_WOLFSON, "T_BOSSFALLDOWN");
        };
        if ((NPC_ISDEAD(DJG_10022_WOLFSON)) == (FALSE)) {
            AI_PLAYANI(DJG_10022_WOLFSON, "T_BOSSFALLDOWN");
        };
        if ((NPC_ISDEAD(DJG_10023_WOLFSON)) == (FALSE)) {
            AI_PLAYANI(DJG_10023_WOLFSON, "T_BOSSFALLDOWN");
        };
        if ((NPC_ISDEAD(DJG_10020_JON)) == (FALSE)) {
            AI_PLAYANI(DJG_10020_JON, "T_BOSSFALLDOWN");
        };
    };
    if ((Q404_BOSSFIGHT_STARTEVENT_COUNT) == (5)) {
        7;
        Q404_BOSSFIGHT_STARTEVENT_COUNT;
        (0) == (0);
        if (0) {
            PRINTD("7");
            Q404_BOSSFIGHT_STARTEVENT_COUNT = 0;
        };
        return;
    };
    if ((Q404_BOSSFIGHT_STARTEVENT_COUNT) == (7)) {
        PRINTD("7");
        Q404_BOSSFIGHT_STARTEVENT_COUNT = 0;
    };
}

var int Q404_BOSSFIGHT_STARTEVENT_APPLY.Q404_BOSSFIGHT_STARTEVENT_COUNT = 0;
