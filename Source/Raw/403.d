instance DIA_BAU_FASTTRAVEL_EXIT(C_INFO) {
    NR = 999;
    CONDITION = DIA_BAU_FASTTRAVEL_EXIT_CONDITION;
    INFORMATION = DIA_BAU_FASTTRAVEL_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_BAU_FASTTRAVEL_EXIT_CONDITION() {
    if ((HLP_GETINSTANCEID(SELF)) != (HLP_GETINSTANCEID(BAU_6373_DUNCAN))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BAU_FASTTRAVEL_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_BAU_FASTTRAVEL_TRAVEL(C_INFO) {
    NR = 1;
    CONDITION = DIA_BAU_FASTTRAVEL_TRAVEL_CONDITION;
    INFORMATION = DIA_BAU_FASTTRAVEL_TRAVEL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_TAKEMETO;
}

func int DIA_BAU_FASTTRAVEL_TRAVEL_CONDITION() {
    return TRUE;
}

var int FASTTRAVEL_PLACE_FISHERMAN = 0;
var int FASTTRAVEL_PLACE_BERMARBEACH = 0;
var int FASTTRAVEL_PLACE_LIGHTHOUSE = 0;
var int FASTTRAVEL_PLACE_SILBACHFOREST = 0;
var int FASTTRAVEL_PLACE_WATERMAGES = 0;
var int FASTTRAVEL_PLACE_MILITIAMINE = 0;
var int FASTTRAVEL_PLACE_CITY_1 = 0;
var int FASTTRAVEL_PLACE_CITY_2 = 0;
var int FASTTRAVEL_PLACE_SWAMP = 0;
var int FASTTRAVEL_PLACE_COAST = 0;
var int PART8CARRIER_STATUS = 0;
var int PART1CARRIER_STATUS = 0;
func void DIA_BAU_FASTTRAVEL_TRAVEL_CHOICES() {
    INFO_CLEARCHOICES(0xa634);
    if ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(BAU_6348_YANNICK))) {
        if ((KAPITEL) >= (3)) {
            if (NPC_KNOWSINFO(OTHER, 0x13083)) {
                if ((NPC_GETDISTTOWP(SELF, "PART17_SWAMPBLOOD_03")) >= (FASTTRAVELBOAT_GETDISTTOWP)) {
                    if ((KAPITEL) < (5)) {
                        INFO_ADDCHOICE(0xa634, CHOICE_FASTTRAVEL_BAU_SWAMP, 0xa651);
                    };
                };
            };
        };
    };
    if ((CITYENTERED) == (TRUE)) {
        if ((((Q206_GOWITHPABLO) != (1)) && ((LOG_GETSTATUS(MIS_Q206)) != (LOG_RUNNING))) || (((LOG_GETSTATUS(MIS_Q206)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x112ac)))) {
            if ((NPC_GETDISTTOWP(SELF, "PARTM6_FASTTRAVEL_HERO_01")) >= (FASTTRAVELBOAT_GETDISTTOWP)) {
                INFO_ADDCHOICE(0xa634, CHOICE_FASTTRAVEL_BAU_CITY_1, 0xa64f);
            };
            if ((NPC_GETDISTTOWP(SELF, "PARTM6_FASTTRAVEL_HERO_02")) >= (FASTTRAVELBOAT_GETDISTTOWP)) {
                INFO_ADDCHOICE(0xa634, CHOICE_FASTTRAVEL_BAU_CITY_2, 0xa650);
            };
        };
    };
    if ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(BAU_6506_CARRIER))) {
        if ((NPC_GETDISTTOWP(SELF, "PART8_FASTTRAVEL_HERO")) >= (FASTTRAVELBOAT_GETDISTTOWP)) {
            INFO_ADDCHOICE(0xa634, CHOICE_FASTTRAVEL_BAU_WATERMAGES, 0xa64d);
        };
        if ((NPC_GETDISTTOWP(SELF, "PART10_FASTTRAVEL_HERO")) >= (FASTTRAVELBOAT_GETDISTTOWP)) {
            INFO_ADDCHOICE(0xa634, CHOICE_FASTTRAVEL_BAU_MILITIAMINE, 0xa64e);
        };
    };
    if ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(BAU_6373_DUNCAN))) {
        if ((NPC_GETDISTTOWP(SELF, "PART1_FISHER_BEACH_HERO_02")) >= (FASTTRAVELBOAT_GETDISTTOWP)) {
            if ((KAPITEL) < (5)) {
                INFO_ADDCHOICE(0xa634, CHOICE_FASTTRAVEL_BAU_LIGHTHOUSE, 0xa64a);
            };
        };
    };
    if ((NPC_GETDISTTOWP(SELF, "PART1_FISHER_BEACH_HERO")) >= (FASTTRAVELBOAT_GETDISTTOWP)) {
        INFO_ADDCHOICE(0xa634, CHOICE_FASTTRAVEL_BAU_COAST, 0xa652);
    };
    if ((SPAWNFASTTRAVELPART13) == (1)) {
        if ((NPC_GETDISTTOWP(SELF, "PART13_FASTTRAVEL_HERO")) >= (FASTTRAVELBOAT_GETDISTTOWP)) {
            INFO_ADDCHOICE(0xa634, CHOICE_FASTTRAVEL_BAU_SILBACHFOREST, 0xa64c);
        };
    };
    if ((NPC_GETDISTTOWP(SELF, "PART4_FASTTRAVEL_HERO")) >= (FASTTRAVELBOAT_GETDISTTOWP)) {
        INFO_ADDCHOICE(0xa634, CHOICE_FASTTRAVEL_BAU_FISHERMAN, 0xa648);
    };
    if ((SQ210_FASTTRAVEL) == (1)) {
        if ((NPC_GETDISTTOWP(SELF, "PART6_PATH_30")) >= (FASTTRAVELBOAT_GETDISTTOWP)) {
            if ((KAPITEL) < (5)) {
                INFO_ADDCHOICE(0xa634, CHOICE_FASTTRAVEL_BAU_BERMARBEACH, 0xa649);
            };
        };
    };
    INFO_ADDCHOICE(0xa634, DIALOG_BACK, 0xa653);
}

const int DIA_BAU_FASTTRAVEL_TRAVEL_CHOICES.FASTTRAVELBOAT_GETDISTTOWP = 10000;
func void DIA_BAU_FASTTRAVEL_TRAVEL_INFO() {
    B_SAY(OTHER, SELF, "$FASTTRAVEL_TAKEME");
    DIA_BAU_FASTTRAVEL_TRAVEL_CHOICES();
}

func void DIA_BAU_FASTTRAVEL_TRAVEL_LETSGO() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (FASTTRAVEL_BAU)) {
        B_SAY(SELF, OTHER, "$SURE_V3");
        B_GIVEINVITEMS(OTHER, SELF, 0x859b, FASTTRAVEL_BAU);
        INFO_CLEARCHOICES(0xa634);
        AI_STOPPROCESSINFOS(SELF);
        AI_FUNCTION(SELF, 0xa654);
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    INFO_CLEARCHOICES(0xa634);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_BAU_FASTTRAVEL_TRAVEL_Q312_CANT() {
    B_SAY(SELF, OTHER, "$NO");
    AI_PLAYANI(SELF, "T_CANNOTTAKE");
    INFO_CLEARCHOICES(0xa634);
    if ((LOG_GETSTATUS(MIS_Q312)) == (LOG_RUNNING)) {
        if ((Q312_FASTTRAVEL_BAU_LOGENTRY) == (FALSE)) {
            Q312_FASTTRAVEL_BAU_LOGENTRY = TRUE;
            AI_LOGENTRY(TOPIC_Q312, LOG_Q312_FASTTRAVEL_BAU);
        };
    };
}

var int DIA_BAU_FASTTRAVEL_TRAVEL_Q312_CANT.Q312_FASTTRAVEL_BAU_LOGENTRY = 0;
func void DIA_BAU_FASTTRAVEL_TRAVEL_FISHERMAN() {
    FASTTRAVEL_PLACE_FISHERMAN = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_BAU_FastTravel_15_01");
    DIA_BAU_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_BAU_FASTTRAVEL_TRAVEL_BERMARBEACH() {
    FASTTRAVEL_PLACE_BERMARBEACH = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_BAU_FastTravel_15_02");
    DIA_BAU_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_BAU_FASTTRAVEL_TRAVEL_LIGHTHOUSE() {
    FASTTRAVEL_PLACE_LIGHTHOUSE = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_BAU_FastTravel_15_03");
    DIA_BAU_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_BAU_FASTTRAVEL_TRAVEL_MINE() {
    FASTTRAVEL_PLACE_MINE = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_BAU_FastTravel_15_04");
    DIA_BAU_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_BAU_FASTTRAVEL_TRAVEL_SILBACHFOREST() {
    FASTTRAVEL_PLACE_SILBACHFOREST = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_BAU_FastTravel_15_05");
    DIA_BAU_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_BAU_FASTTRAVEL_TRAVEL_WATERMAGES() {
    FASTTRAVEL_PLACE_WATERMAGES = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_BAU_FastTravel_15_06");
    DIA_BAU_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_BAU_FASTTRAVEL_TRAVEL_MILITIAMINE() {
    FASTTRAVEL_PLACE_MILITIAMINE = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_BAU_FastTravel_15_07");
    DIA_BAU_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_BAU_FASTTRAVEL_TRAVEL_CITY_1() {
    AI_OUTPUT(OTHER, SELF, "DIA_BAU_FastTravel_15_08");
    if (((LOG_GETSTATUS(MIS_Q312)) == (LOG_RUNNING)) || ((LOG_GETSTATUS(MIS_Q308)) == (LOG_RUNNING))) {
        DIA_BAU_FASTTRAVEL_TRAVEL_Q312_CANT();
    };
    FASTTRAVEL_PLACE_CITY_1 = 1;
    DIA_BAU_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_BAU_FASTTRAVEL_TRAVEL_CITY_2() {
    AI_OUTPUT(OTHER, SELF, "DIA_BAU_FastTravel_15_09");
    if (((LOG_GETSTATUS(MIS_Q312)) == (LOG_RUNNING)) || ((LOG_GETSTATUS(MIS_Q308)) == (LOG_RUNNING))) {
        DIA_BAU_FASTTRAVEL_TRAVEL_Q312_CANT();
    };
    FASTTRAVEL_PLACE_CITY_2 = 1;
    DIA_BAU_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_BAU_FASTTRAVEL_TRAVEL_SWAMP() {
    FASTTRAVEL_PLACE_SWAMP = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_BAU_FastTravel_15_10");
    DIA_BAU_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_BAU_FASTTRAVEL_TRAVEL_COAST() {
    FASTTRAVEL_PLACE_COAST = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_BAU_FastTravel_15_11");
    DIA_BAU_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_BAU_FASTTRAVEL_TRAVEL_BACK() {
    B_SAY(OTHER, SELF, "$FASTTRAVEL_NEVERMIND");
    INFO_CLEARCHOICES(0xa634);
}

func void FISHERMAN_FASTTRAVEL() {
    ACH_7_BAU_FASTTRAVEL = TRUE;
    FADESCREENTOBLACKF(1, 0xa655, 1000);
}

func void FISHERMAN_FASTTRAVEL_FADESCREEN() {
    if ((FASTTRAVEL_PLACE_FISHERMAN) == (1)) {
        FASTTRAVEL_PLACE_FISHERMAN = 0;
        TELEPORTNPCTOWP(0x71b, "PART4_FASTTRAVEL_HERO");
        TELEMETRY_FASTTRAVEL(3, "PART4_FASTTRAVEL_HERO");
    };
    if ((FASTTRAVEL_PLACE_BERMARBEACH) == (1)) {
        FASTTRAVEL_PLACE_BERMARBEACH = 0;
        TELEPORTNPCTOWP(0x71b, "PART6_PATH_30");
        TELEMETRY_FASTTRAVEL(3, "PART6_PATH_30");
    };
    if ((FASTTRAVEL_PLACE_LIGHTHOUSE) == (1)) {
        FASTTRAVEL_PLACE_LIGHTHOUSE = 0;
        PART1CARRIER_STATUS = 1;
        B_STARTOTHERROUTINE(BAU_6373_DUNCAN, "LIGHTHOUSE");
        NPC_REFRESH(BAU_6373_DUNCAN);
        TELEPORTNPCTOWP(0xd8eb, BAU_6373_DUNCAN.WP);
        WLD_SENDTRIGGER("PART1_FASTTRAVEL_BOAT_01");
        WLD_SENDTRIGGER("PART1_FASTTRAVEL_BOAT_02");
        TELEPORTNPCTOWP(0x71b, "PART1_FISHER_BEACH_HERO_02");
        TELEMETRY_FASTTRAVEL(3, "PART1_FISHER_BEACH_HERO_02");
    };
    if ((FASTTRAVEL_PLACE_COAST) == (1)) {
        FASTTRAVEL_PLACE_COAST = 0;
        TELEPORTNPCTOWP(0x71b, "PART1_FISHER_BEACH_HERO");
        TELEMETRY_FASTTRAVEL(3, "PART1_FISHER_BEACH_HERO");
        if ((PART1CARRIER_STATUS) == (1)) {
            PART1CARRIER_STATUS = 0;
            B_STARTOTHERROUTINE(BAU_6373_DUNCAN, START);
            NPC_REFRESH(BAU_6373_DUNCAN);
            TELEPORTNPCTOWP(0xd8eb, BAU_6373_DUNCAN.WP);
            WLD_SENDTRIGGER("PART1_FASTTRAVEL_BOAT_01");
            WLD_SENDTRIGGER("PART1_FASTTRAVEL_BOAT_02");
        };
    };
    if ((FASTTRAVEL_PLACE_SILBACHFOREST) == (1)) {
        FASTTRAVEL_PLACE_SILBACHFOREST = 0;
        TELEPORTNPCTOWP(0x71b, "PART13_FASTTRAVEL_HERO");
        TELEMETRY_FASTTRAVEL(3, "PART13_FASTTRAVEL_HERO");
    };
    if ((FASTTRAVEL_PLACE_WATERMAGES) == (1)) {
        FASTTRAVEL_PLACE_WATERMAGES = 0;
        PART8CARRIER_STATUS = 1;
        WLD_SENDTRIGGER("KM_FASTTRAEVEL_PART10_BOAT");
        WLD_SENDTRIGGER("KM_FASTTRAEVEL_PART8_BOAT");
        B_STARTOTHERROUTINE(BAU_6506_CARRIER, "FASTTRAVEL_MONASTERY");
        TELEPORTNPCTOWP(0x71b, "PART8_FASTTRAVEL_HERO");
        TELEMETRY_FASTTRAVEL(3, "PART8_FASTTRAVEL_HERO");
    };
    if ((FASTTRAVEL_PLACE_MILITIAMINE) == (1)) {
        FASTTRAVEL_PLACE_MILITIAMINE = 0;
        PART8CARRIER_STATUS = 0;
        WLD_SENDTRIGGER("KM_FASTTRAEVEL_PART10_BOAT");
        WLD_SENDTRIGGER("KM_FASTTRAEVEL_PART8_BOAT");
        B_STARTOTHERROUTINE(BAU_6506_CARRIER, START);
        TELEPORTNPCTOWP(0x71b, "PART10_FASTTRAVEL_HERO");
        TELEMETRY_FASTTRAVEL(3, "PART10_FASTTRAVEL_HERO");
    };
    if ((FASTTRAVEL_PLACE_CITY_1) == (1)) {
        FASTTRAVEL_PLACE_CITY_1 = 0;
        TELEPORTNPCTOWP(0x71b, "PARTM6_FASTTRAVEL_HERO_01");
        TELEMETRY_FASTTRAVEL(3, "PARTM6_FASTTRAVEL_HERO_01");
    };
    if ((FASTTRAVEL_PLACE_CITY_2) == (1)) {
        FASTTRAVEL_PLACE_CITY_2 = 0;
        TELEPORTNPCTOWP(0x71b, "PARTM6_FASTTRAVEL_HERO_02");
        TELEMETRY_FASTTRAVEL(3, "PARTM6_FASTTRAVEL_HERO_02");
    };
    if ((FASTTRAVEL_PLACE_SWAMP) == (1)) {
        FASTTRAVEL_PLACE_SWAMP = 0;
        TELEPORTNPCTOWP(0x71b, "PART17_SWAMPBLOOD_03");
        TELEMETRY_FASTTRAVEL(3, "PART17_SWAMPBLOOD_03");
    };
    B_PASSTIME(2);
    FADESCREENFROMBLACK(1);
    HERO.AIVAR[4] = FALSE;
}

func void B_ASSIGNAMBIENTINFOS_BAU_FASTTRAVEL(var C_NPC SLF) {
    DIA_BAU_FASTTRAVEL_EXIT.NPC = HLP_GETINSTANCEID(SLF);
    DIA_BAU_FASTTRAVEL_TRAVEL.NPC = HLP_GETINSTANCEID(SLF);
}

