instance DIA_BEGGAR_11278_TRAP_DA2(C_INFO) {
    NPC = 0xcac1;
    NR = 1;
    CONDITION = DIA_BEGGAR_11278_TRAP_DA2_CONDITION;
    INFORMATION = DIA_BEGGAR_11278_TRAP_DA2_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_BEGGAR_11278_TRAP_DA2_CONDITION() {
    if (((TRAP_DA2_SPAWNED) == (TRUE)) && (NPC_KNOWSINFO(OTHER, 0x11a8c))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BEGGAR_11278_TRAP_DA2_INFO() {
    INFO_CLEARCHOICES(0x11a9c);
    INFO_ADDCHOICE(0x11a9c, "(Do nothing)", 0x11a9f);
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (EVENT_BEGGARARMY)) {
        INFO_ADDCHOICE(0x11a9c, DIALOG_GIVE10G, 0x11aa0);
    };
}

func void DIA_BEGGAR_11278_TRAP_DONTGIVE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Beggar_11278_Trap_DontGive_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_BEGGAR_11278_TRAP_GIVEMONEY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Beggar_11278_Trap_GiveMoney_15_01");
    B_GIVEINVITEMS(OTHER, SELF, 0x859b, EVENT_BEGGARARMY);
    TRAP_DA2_COUNTER = (TRAP_DA2_COUNTER) + (1);
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_BEGGAR_11278_TRAP_DA3(C_INFO) {
    NPC = 0xcac1;
    NR = 1;
    CONDITION = DIA_BEGGAR_11278_TRAP_DA3_CONDITION;
    INFORMATION = DIA_BEGGAR_11278_TRAP_DA3_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_BEGGAR_11278_TRAP_DA3_CONDITION() {
    if (((TRAP_DA3_SPAWNED) == (TRUE)) && (NPC_KNOWSINFO(OTHER, 0x11a94))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BEGGAR_11278_TRAP_DA3_INFO() {
    INFO_CLEARCHOICES(0x11aa1);
    INFO_ADDCHOICE(0x11aa1, "(Do nothing)", 0x11aa4);
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (EVENT_BEGGARARMY)) {
        INFO_ADDCHOICE(0x11aa1, DIALOG_GIVE10G, 0x11aa5);
    };
}

func void DIA_BEGGAR_11278_TRAP_DONTGIVE2() {
    AI_OUTPUT(OTHER, SELF, "DIA_Thug_10034_After_SQ218_YouGetNothing_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(HERO, 0x171c4);
}

func void DIA_BEGGAR_11278_TRAP_GIVEMONEY2() {
    M1_DA3_BEGGAR_GIVEMONEY();
    B_GIVEINVITEMS(OTHER, SELF, 0x859b, EVENT_BEGGARARMY);
    TRAP_DA3_COUNTER = (TRAP_DA3_COUNTER) + (1);
    AI_STOPPROCESSINFOS(SELF);
}

