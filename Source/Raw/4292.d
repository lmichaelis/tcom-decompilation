var int NS71_FIGHT = 0;
instance DIA_HORNPLAYER_EXIT(C_INFO) {
    NPC = 0xe1a9;
    NR = 999;
    CONDITION = DIA_HORNPLAYER_EXIT_CONDITION;
    INFORMATION = DIA_HORNPLAYER_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_HORNPLAYER_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_HORNPLAYER_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_HORNPLAYER_NS71_BEFORE(C_INFO) {
    NPC = 0xe1a9;
    NR = 1;
    CONDITION = DIA_HORNPLAYER_NS71_BEFORE_CONDITION;
    INFORMATION = DIA_HORNPLAYER_NS71_BEFORE_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_HORNPLAYER_NS71_BEFORE_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x1564c)) == (FALSE)) && (NPC_ISINSTATE(SELF, 0xf09f))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_HORNPLAYER_NS71_BEFORE_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_HornPlayer_NS71_Before_03_01");
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_HORNPLAYER_NS71_SHUTUP(C_INFO) {
    NPC = 0xe1a9;
    NR = 2;
    CONDITION = DIA_HORNPLAYER_NS71_SHUTUP_CONDITION;
    INFORMATION = DIA_HORNPLAYER_NS71_SHUTUP_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Can you be quieter?";
}

func int DIA_HORNPLAYER_NS71_SHUTUP_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x1564c)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_HORNPLAYER_NS71_SHUTUP_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_HornPlayer_NS71_ShutUp_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_HornPlayer_NS71_ShutUp_15_02");
    if ((SELF.AIVAR[0]) == (FIGHT_LOST)) {
        AI_STARTFACEANI(SELF, S_FRIGHTENED, 1, -(1));
        AI_OUTPUT(SELF, OTHER, RESERVED_CONST_STRING_62);
        NS71_FIGHT = 3;
        NS71_SILENCE = TRUE;
        NPC_EXCHANGEROUTINE(SELF, TOT);
        AI_STOPPROCESSINFOS(SELF);
    };
    AI_OUTPUT(SELF, OTHER, "DIA_HornPlayer_NS71_ShutUp_03_03");
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (HORNPLAYER_GOLD)) {
        INFO_ADDCHOICE(0x1565f, "I'll pay you to stop. (Give 50 GP)", 0x15662);
    };
    INFO_ADDCHOICE(0x1565f, "If you don't want to do it the right way, we'll talk another.", 0x15663);
}

func void DIA_HORNPLAYER_NS71_GOLD() {
    AI_OUTPUT(OTHER, SELF, "DIA_HornPlayer_NS71_Gold_15_01");
    B_GIVEINVITEMS(OTHER, SELF, 0x859b, HORNPLAYER_GOLD);
    AI_OUTPUT(SELF, OTHER, "DIA_HornPlayer_NS71_Gold_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_HornPlayer_NS71_Gold_03_03");
    NS71_SILENCE = TRUE;
    NS71_FIGHT = 3;
    NPC_EXCHANGEROUTINE(SELF, TOT);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_HORNPLAYER_NS71_FIGHT() {
    AI_OUTPUT(OTHER, SELF, "DIA_HornPlayer_NS71_Fight_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_HornPlayer_NS71_Fight_03_02");
    AI_STOPPROCESSINFOS(SELF);
    NS71_FIGHT = 1;
    B_ATTACK(SELF, OTHER, AR_NONE, 1);
}

instance DIA_HORNPLAYER_NS71_AFTERFIGHT(C_INFO) {
    NPC = 0xe1a9;
    NR = 4;
    CONDITION = DIA_HORNPLAYER_NS71_AFTERFIGHT_CONDITION;
    INFORMATION = DIA_HORNPLAYER_NS71_AFTERFIGHT_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_HORNPLAYER_NS71_AFTERFIGHT_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x1565f)) && ((NS71_FIGHT) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_HORNPLAYER_NS71_AFTERFIGHT_INFO() {
    if ((SELF.AIVAR[0]) == (FIGHT_WON)) {
        AI_OUTPUT(SELF, OTHER, "DIA_HornPlayer_NS71_AfterFight_03_01");
        AI_OUTPUT(OTHER, SELF, "DIA_HornPlayer_NS71_AfterFight_15_02");
        AI_OUTPUT(SELF, OTHER, "DIA_HornPlayer_NS71_AfterFight_03_03");
        AI_OUTPUT(OTHER, SELF, "DIA_HornPlayer_NS71_AfterFight_15_04");
        AI_OUTPUT(SELF, OTHER, "DIA_HornPlayer_NS71_AfterFight_03_05");
    };
    AI_OUTPUT(SELF, OTHER, "DIA_HornPlayer_NS71_AfterFight_03_07");
    AI_OUTPUT(OTHER, SELF, "DIA_HornPlayer_NS71_AfterFight_15_09");
    AI_OUTPUT(SELF, OTHER, "DIA_HornPlayer_NS71_AfterFight_03_10");
    NS71_FIGHT = 3;
    NS71_SILENCE = TRUE;
    NPC_EXCHANGEROUTINE(SELF, TOT);
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_HORNPLAYER_NS71_FUCKOFF(C_INFO) {
    NPC = 0xe1a9;
    NR = 6;
    CONDITION = DIA_HORNPLAYER_NS71_FUCKOFF_CONDITION;
    INFORMATION = DIA_HORNPLAYER_NS71_FUCKOFF_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_HORNPLAYER_NS71_FUCKOFF_CONDITION() {
    if (((NS71_SILENCE) == (TRUE)) && (NPC_ISINSTATE(SELF, 0xf09f))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_HORNPLAYER_NS71_FUCKOFF_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_HornPlayer_NS71_FuckOff_03_01");
    AI_STOPPROCESSINFOS(SELF);
}

