var int YES_COUNTER = 0;
var int NO_COUNTER = 0;
instance DIA_BEWILDEREDFARMER_EXIT(C_INFO) {
    NPC = 0xe1a3;
    NR = 999;
    CONDITION = DIA_BEWILDEREDFARMER_EXIT_CONDITION;
    INFORMATION = DIA_BEWILDEREDFARMER_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_BEWILDEREDFARMER_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_BEWILDEREDFARMER_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_BEWILDEREDFARMER_NS70_START(C_INFO) {
    NPC = 0xe1a3;
    NR = 1;
    CONDITION = DIA_BEWILDEREDFARMER_NS70_START_CONDITION;
    INFORMATION = DIA_BEWILDEREDFARMER_NS70_START_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_BEWILDEREDFARMER_NS70_START_CONDITION() {
    return TRUE;
}

func void DIA_BEWILDEREDFARMER_NS70_START_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_BewilderedFarmer_NS70_Start_03_01");
    NPC_EXCHANGEROUTINE(SELF, TOT);
    INFO_CLEARCHOICES(0x15639);
    INFO_ADDCHOICE(0x15639, "No.", 0x15643);
    INFO_ADDCHOICE(0x15639, "Yes.", 0x15642);
}

func void DIA_BEWILDEREDFARMER_NS70_ANOTHERCHOICE() {
    INFO_CLEARCHOICES(0x15639);
    INFO_ADDCHOICE(0x15639, "No.", 0x15645);
    INFO_ADDCHOICE(0x15639, "Yes.", 0x15644);
}

func void DIA_BEWILDEREDFARMER_NS70_ANOTHERCHOICE2() {
    INFO_CLEARCHOICES(0x15639);
    INFO_ADDCHOICE(0x15639, "(Draw your weapon)", 0x15641);
    INFO_ADDCHOICE(0x15639, "No.", 0x15640);
    INFO_ADDCHOICE(0x15639, "Yes.", 0x1563f);
}

func void DIA_BEWILDEREDFARMER_NS70_ANOTHERCHOICE2_AFTER() {
    B_GIVEPLAYERXP(XP_EVENT_BEWILDEREDFARMER);
    AI_OUTPUT(SELF, OTHER, "DIA_BewilderedFarmer_NS70_AnotherChoice2_After_03_01");
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_BEWILDEREDFARMER_NS70_YES3() {
    B_SAY(OTHER, SELF, "$MARVIN_YES");
    DIA_BEWILDEREDFARMER_NS70_ANOTHERCHOICE2_AFTER();
}

func void DIA_BEWILDEREDFARMER_NS70_NO3() {
    B_SAY(OTHER, SELF, "$MARVIN_NO");
    DIA_BEWILDEREDFARMER_NS70_ANOTHERCHOICE2_AFTER();
}

func void DIA_BEWILDEREDFARMER_NS70_WEAPON() {
    AI_DRAWWEAPON(OTHER);
    B_GIVEPLAYERXP(XP_EVENT_BEWILDEREDFARMER);
    AI_OUTPUT(OTHER, SELF, "DIA_BewilderedFarmer_Weapon_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_BewilderedFarmer_Weapon_03_02");
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_BEWILDEREDFARMER_NS70_YES1() {
    B_SAY(OTHER, SELF, "$MARVIN_YES");
    AI_OUTPUT(SELF, OTHER, "DIA_BewilderedFarmer_NS70_Yes1_03_01");
    YES_COUNTER = (YES_COUNTER) + (1);
    DIA_BEWILDEREDFARMER_NS70_ANOTHERCHOICE();
}

func void DIA_BEWILDEREDFARMER_NS70_NO1() {
    B_SAY(OTHER, SELF, "$MARVIN_NO");
    NO_COUNTER = (NO_COUNTER) + (1);
    AI_OUTPUT(SELF, OTHER, "DIA_BewilderedFarmer_NS70_No1_03_01");
    DIA_BEWILDEREDFARMER_NS70_ANOTHERCHOICE();
}

func void DIA_BEWILDEREDFARMER_NS70_YES2() {
    B_SAY(OTHER, SELF, "$MARVIN_YES");
    if ((YES_COUNTER) == (0)) {
        AI_OUTPUT(SELF, OTHER, "DIA_BewilderedFarmer_NS70_Yes2_03_01");
    };
    AI_OUTPUT(SELF, OTHER, "DIA_BewilderedFarmer_NS70_Yes2_03_02");
    DIA_BEWILDEREDFARMER_NS70_ANOTHERCHOICE2();
}

func void DIA_BEWILDEREDFARMER_NS70_NO2() {
    B_SAY(OTHER, SELF, "$MARVIN_NO");
    if ((NO_COUNTER) == (0)) {
        AI_OUTPUT(SELF, OTHER, "DIA_BewilderedFarmer_NS70_No2_03_01");
    };
    AI_OUTPUT(SELF, OTHER, "DIA_BewilderedFarmer_NS70_No2_03_02");
    DIA_BEWILDEREDFARMER_NS70_ANOTHERCHOICE2();
}

instance DIA_BEWILDEREDFARMER_NS70_AFTEREVENT(C_INFO) {
    NPC = 0xe1a3;
    NR = 6;
    CONDITION = DIA_BEWILDEREDFARMER_NS70_AFTEREVENT_CONDITION;
    INFORMATION = DIA_BEWILDEREDFARMER_NS70_AFTEREVENT_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_BEWILDEREDFARMER_NS70_AFTEREVENT_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x15639)) && (NPC_ISINSTATE(SELF, 0xf09f))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BEWILDEREDFARMER_NS70_AFTEREVENT_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_BewilderedFarmer_NS70_AfterEvent_03_01");
    AI_STOPPROCESSINFOS(SELF);
}

