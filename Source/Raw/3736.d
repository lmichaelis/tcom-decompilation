instance DIA_INEXTREMO_UNICORN_EXIT(C_INFO) {
    NPC = 0xd4b8;
    NR = 999;
    CONDITION = DIA_INEXTREMO_UNICORN_EXIT_CONDITION;
    INFORMATION = DIA_INEXTREMO_UNICORN_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_INEXTREMO_UNICORN_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_INEXTREMO_UNICORN_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_INEXTREMO_UNICORN_KQ404_CONCERT(C_INFO) {
    NPC = 0xd4b8;
    NR = 1;
    CONDITION = DIA_INEXTREMO_UNICORN_KQ404_CONCERT_CONDITION;
    INFORMATION = DIA_INEXTREMO_UNICORN_KQ404_CONCERT_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_INEXTREMO_UNICORN_KQ404_CONCERT_CONDITION() {
    if (((LOG_GETSTATUS(MIS_KQ404)) == (LOG_RUNNING)) && (WLD_ISTIME(18, 0, 21, 0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int UNICORN_KQ404_GOODPOINTS = 0;
func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_INFO() {
    AI_LOOKATNPC(OTHER, SELF);
    AI_TURNTONPC(SELF, OTHER);
    AI_TURNTONPC(OTHER, SELF);
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_03_02");
    AI_FUNCTION(SELF, 0xf188);
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_03_04");
    INFO_CLEARCHOICES(0x10b9c);
    INFO_ADDCHOICE(0x10b9c, "Down with the bad law! He speaks well!", 0x10ba4);
    INFO_ADDCHOICE(0x10b9c, "Till we're alive, Rhobar II will be vilified!", 0x10ba5);
    INFO_ADDCHOICE(0x10b9c, "This is not the Myrtana we fight for!", 0x10ba6);
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_NEXT() {
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_03_05");
    INFO_CLEARCHOICES(0x10b9c);
    INFO_ADDCHOICE(0x10b9c, "No! Every case is different!", 0x10ba7);
    INFO_ADDCHOICE(0x10b9c, "Rhobar will not spit in our faces!", 0x10ba8);
    INFO_ADDCHOICE(0x10b9c, "Beliar take those who pass such laws!", 0x10ba9);
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_NEXT_V2() {
    AI_FUNCTION(SELF, 0xf183);
    AI_STARTFACEANI(SELF, S_DOUBT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_03_07");
    INFO_CLEARCHOICES(0x10b9c);
    INFO_ADDCHOICE(0x10b9c, "Revolt! Free Archolos!", 0x10baa);
    INFO_ADDCHOICE(0x10b9c, "Oppose!", 0x10bab);
    INFO_ADDCHOICE(0x10b9c, "Don't obey the law!", 0x10bac);
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_NEXT_V3() {
    AI_STARTFACEANI(SELF, S_DOUBT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_03_08");
    INFO_CLEARCHOICES(0x10b9c);
    INFO_ADDCHOICE(0x10b9c, "We demand justice!", 0x10bad);
    INFO_ADDCHOICE(0x10b9c, "Death to the traitors of Myrtana!", 0x10bae);
    INFO_ADDCHOICE(0x10b9c, "We don't want a King like that!", 0x10baf);
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_FINISH() {
    AI_FUNCTION(SELF, 0xf187);
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    if ((UNICORN_KQ404_GOODPOINTS) >= (3)) {
        KQ404_INEXTREMO_BAITED = TRUE;
        AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_03_09");
        AI_LOGENTRY(TOPIC_KQ404, LOG_KQ404_INEXTREMO_BAIT);
    };
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_03_10");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_03_11");
    AI_STOPPROCESSINFOS(SELF);
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    AI_FUNCTION(SELF, 0xf189);
    AI_STOPLOOKAT(OTHER);
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_TEASE_V1_A() {
    UNICORN_KQ404_GOODPOINTS = (UNICORN_KQ404_GOODPOINTS) + (1);
    AI_FUNCTION(SELF, 0xf181);
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V1_A_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 0xf182);
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V1_A_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_CONCERT_NEXT();
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_TEASE_V1_B() {
    AI_FUNCTION(SELF, 0xf181);
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V1_B_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 0xf182);
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V1_B_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_CONCERT_NEXT();
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_TEASE_V1_C() {
    UNICORN_KQ404_GOODPOINTS = (UNICORN_KQ404_GOODPOINTS) + (1);
    AI_FUNCTION(SELF, 0xf181);
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V1_C_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 0xf182);
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V1_C_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_CONCERT_NEXT();
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_TEASE_V2_A() {
    UNICORN_KQ404_GOODPOINTS = (UNICORN_KQ404_GOODPOINTS) + (1);
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V2_A_15_01");
    AI_STARTFACEANI(SELF, "S_SNMILE", 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V2_A_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_CONCERT_NEXT_V2();
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_TEASE_V2_B() {
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V2_B_15_01");
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V2_B_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_CONCERT_NEXT_V2();
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_TEASE_V2_C() {
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V2_C_15_01");
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V2_C_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_CONCERT_NEXT_V2();
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_TEASE_V3_A() {
    AI_FUNCTION(SELF, 0xf184);
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V3_A_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 0xf185);
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V3_A_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_CONCERT_NEXT_V3();
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_TEASE_V3_B() {
    UNICORN_KQ404_GOODPOINTS = (UNICORN_KQ404_GOODPOINTS) + (1);
    AI_FUNCTION(SELF, 0xf184);
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V3_B_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 0xf185);
    AI_STARTFACEANI(SELF, "S_SNMILE", 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V3_B_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_CONCERT_NEXT_V3();
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_TEASE_V3_C() {
    AI_FUNCTION(SELF, 0xf184);
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V3_C_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 0xf185);
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V3_C_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_CONCERT_NEXT_V3();
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_TEASE_V4_A() {
    UNICORN_KQ404_GOODPOINTS = (UNICORN_KQ404_GOODPOINTS) + (1);
    AI_FUNCTION(SELF, 0xf186);
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V4_A_15_01");
    AI_STARTFACEANI(SELF, "S_SNMILE", 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V4_A_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_CONCERT_FINISH();
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_TEASE_V4_B() {
    AI_FUNCTION(SELF, 0xf186);
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V4_B_15_01");
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V4_B_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_CONCERT_FINISH();
}

func void DIA_INEXTREMO_UNICORN_KQ404_CONCERT_TEASE_V4_C() {
    AI_FUNCTION(SELF, 0xf186);
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V4_C_15_01");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Concert_Tease_V4_C_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_CONCERT_FINISH();
}

instance DIA_INEXTREMO_UNICORN_KQ404_NICECONCERT(C_INFO) {
    NPC = 0xd4b8;
    NR = 1;
    CONDITION = DIA_INEXTREMO_UNICORN_KQ404_NICECONCERT_CONDITION;
    INFORMATION = DIA_INEXTREMO_UNICORN_KQ404_NICECONCERT_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Amazing concert!";
}

func int DIA_INEXTREMO_UNICORN_KQ404_NICECONCERT_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_KQ404)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x10b9c))) && ((INEXTREMO_CANPLAYCONCERT) == (TRUE))) && (WLD_ISTIME(21, 0, 18, 0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INEXTREMO_UNICORN_KQ404_NICECONCERT_INFO() {
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_NiceConcert_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_NiceConcert_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_NiceConcert_03_03");
    if ((UNICORN_KQ404_GOODPOINTS) >= (3)) {
        AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_NiceConcert_03_04");
    };
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_NiceConcert_03_05");
    AI_RESETFACEANI(OTHER);
    B_STARTOTHERROUTINE(MIL_13381_EURIC, "KALEBHOUSE");
    NPC_REFRESH(MIL_13381_EURIC);
}

instance DIA_INEXTREMO_UNICORN_KQ404_LAW(C_INFO) {
    NPC = 0xd4b8;
    NR = 1;
    CONDITION = DIA_INEXTREMO_UNICORN_KQ404_LAW_CONDITION;
    INFORMATION = DIA_INEXTREMO_UNICORN_KQ404_LAW_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Do you not like the new royal law?";
}

func int DIA_INEXTREMO_UNICORN_KQ404_LAW_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_KQ404)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x10bb0))) && ((INEXTREMO_CANPLAYCONCERT) == (TRUE))) && (WLD_ISTIME(21, 0, 18, 0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INEXTREMO_UNICORN_KQ404_LAW_INFO() {
    AI_STARTFACEANI(OTHER, S_SURPRISE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Law_15_01");
    AI_STARTFACEANI(SELF, S_DOUBT, 1, -(1));
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Law_03_02");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Law_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Law_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Law_15_05");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Law_03_06");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Law_03_07");
    AI_RESETFACEANI(SELF);
}

instance DIA_INEXTREMO_UNICORN_KQ404_SOMEONE(C_INFO) {
    NPC = 0xd4b8;
    NR = 1;
    CONDITION = DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_CONDITION;
    INFORMATION = DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What if there was someone who could quietly help you?";
}

func int DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_CONDITION() {
    if ((((NPC_KNOWSINFO(OTHER, 0x10bb3)) && ((LOG_GETSTATUS(MIS_KQ404)) == (LOG_RUNNING))) && ((INEXTREMO_CANPLAYCONCERT) == (TRUE))) && (WLD_ISTIME(21, 0, 18, 0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Someone_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Someone_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Someone_15_03");
    if ((HERO.GUILD) == (GIL_MIL)) {
        AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Someone_03_04");
    };
    if ((HERO.GUILD) == (GIL_SLD)) {
        AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Someone_03_05");
    };
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Someone_03_06");
    INFO_CLEARCHOICES(0x10bb6);
    if ((HERO.GUILD) == (GIL_MIL)) {
        INFO_ADDCHOICE(0x10bb6, "The king wanted to deceive us.", 0x10bbc);
        INFO_ADDCHOICE(0x10bb6, "Tell him whatever you want.", 0x10bbd);
    };
    if ((HERO.GUILD) == (GIL_SLD)) {
        INFO_ADDCHOICE(0x10bb6, "Thanks to the king, we almost became homeless.", 0x10bbe);
        INFO_ADDCHOICE(0x10bb6, "Did you hear about the confiscation of the fleet?", 0x10bbf);
    };
    INFO_ADDCHOICE(0x10bb6, "The war destroyed my life.", 0x10bc0);
    INFO_ADDCHOICE(0x10bb6, "I'm looking for easy money.", 0x10bc1);
}

var int UNICORN_KQ404_BAITED = 0;
func void DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_NEXT() {
    UNICORN_KQ404_BAITED = TRUE;
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Someone_Next_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Someone_Next_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Someone_Next_03_03");
    INFO_CLEARCHOICES(0x10bb6);
}

func void DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_FAILED() {
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
    AI_LOGENTRY(TOPIC_KQ404, LOG_KQ404_UNICORN_FAILED);
    INFO_CLEARCHOICES(0x10bb6);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_MILQUEST() {
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Someone_MilQuest_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Someone_MilQuest_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_NEXT();
}

func void DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_TELL() {
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Someone_Tell_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Someone_Tell_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_FAILED();
}

func void DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_SLDQUEST() {
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Someone_SLDQuest_15_01");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Someone_SLDQuest_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_NEXT();
}

func void DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_FLEET() {
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Someone_Fleet_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Someone_Fleet_03_02");
    DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_FAILED();
}

func void DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_LIFE() {
    AI_STARTFACEANI(OTHER, S_TIRED, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Someone_Life_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Someone_Life_15_02");
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Someone_Life_15_03");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Someone_Life_03_04");
    DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_NEXT();
}

func void DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_BUSINESS() {
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Someone_Business_15_01");
    AI_STARTFACEANI(OTHER, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Someone_Business_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Someone_Business_03_03");
    DIA_INEXTREMO_UNICORN_KQ404_SOMEONE_FAILED();
}

instance DIA_INEXTREMO_UNICORN_KQ404_HELP(C_INFO) {
    NPC = 0xd4b8;
    NR = 1;
    CONDITION = DIA_INEXTREMO_UNICORN_KQ404_HELP_CONDITION;
    INFORMATION = DIA_INEXTREMO_UNICORN_KQ404_HELP_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "How about... making your show even better?";
}

func int DIA_INEXTREMO_UNICORN_KQ404_HELP_CONDITION() {
    if ((((NPC_KNOWSINFO(OTHER, 0x10bb6)) && ((LOG_GETSTATUS(MIS_KQ404)) == (LOG_RUNNING))) && ((INEXTREMO_CANPLAYCONCERT) == (TRUE))) && (WLD_ISTIME(21, 0, 18, 0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INEXTREMO_UNICORN_KQ404_HELP_INFO() {
    MOB_CREATEITEMS("KQ404_FIREMAGECHEST", 0x91d4, 2);
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Help_15_01");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Help_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Help_15_03");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Help_03_04");
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_Help_15_05");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Help_03_06");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Help_03_07");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Help_03_08");
    B_STANDUP();
    B_USEFAKESCROLL();
    CREATEINVITEMS(SELF, 0x91d1, 1);
    B_GIVEINVITEMS(SELF, OTHER, 0x91d1, 1);
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_Help_03_09");
    AI_LOGENTRY(TOPIC_KQ404, LOG_KQ404_UNICORN_HELP);
}

instance DIA_INEXTREMO_UNICORN_KQ404_LIST(C_INFO) {
    NPC = 0xd4b8;
    NR = 1;
    CONDITION = DIA_INEXTREMO_UNICORN_KQ404_LIST_CONDITION;
    INFORMATION = DIA_INEXTREMO_UNICORN_KQ404_LIST_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "As for the list...";
}

func int DIA_INEXTREMO_UNICORN_KQ404_LIST_CONDITION() {
    if ((((((LOG_GETSTATUS(MIS_KQ404)) == (LOG_RUNNING)) && ((KQ404_UNICORNLIST_READ) == (TRUE))) && ((INEXTREMO_CANPLAYCONCERT) == (TRUE))) && (WLD_ISTIME(21, 0, 18, 0))) && ((KQ404_UNICORNLIST_GOTEVERYTHING) != (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int UNICORN_KQ404_LIST_WHAT = 0;
var int UNICORN_KQ404_LIST_FIREMAGE_SEARCH = 0;
var int UNICORN_KQ404_LIST_WOODCUTTER_SEARCH = 0;
var int UNICORN_KQ404_LIST_VLKRICH_SEARCH = 0;
var int UNICORN_KQ404_LIST_RHOBARKING_SEARCH = 0;
func void DIA_INEXTREMO_UNICORN_KQ404_LIST_BACK() {
    INFO_CLEARCHOICES(0x10bc5);
}

func void DIA_INEXTREMO_UNICORN_KQ404_LIST_CHOICES() {
    INFO_CLEARCHOICES(0x10bc5);
    if ((UNICORN_KQ404_LIST_WHAT) == (FALSE)) {
        INFO_ADDCHOICE(0x10bc5, "I read your list. What are you planning?", 0x10bcf);
    };
    INFO_ADDCHOICE(0x10bc5, DIALOG_BACK, 0x10bcc);
    if ((C_SQ411_GOTRICHVLKARMOR(OTHER)) && (C_KQ404_GOTUNICORNSTUFF(OTHER))) {
        INFO_ADDCHOICE(0x10bc5, "The list is complete.", 0x10bd4);
    };
    INFO_ADDCHOICE(0x10bc5, "Why do you need the armor of a Royal Guardsman?", 0x10bd3);
    INFO_ADDCHOICE(0x10bc5, "You want a rich merchant's outfit?", 0x10bd2);
    INFO_ADDCHOICE(0x10bc5, "Why do you need a woodcutter's outfit?", 0x10bd1);
    INFO_ADDCHOICE(0x10bc5, "Where will I get the Fire Mage's robe?", 0x10bd0);
}

func void DIA_INEXTREMO_UNICORN_KQ404_LIST_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_List_15_01");
    DIA_INEXTREMO_UNICORN_KQ404_LIST_CHOICES();
}

func void DIA_INEXTREMO_UNICORN_KQ404_LIST_WHAT() {
    UNICORN_KQ404_LIST_WHAT = TRUE;
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_List_What_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_List_What_03_02");
    AI_RESETFACEANI(OTHER);
    DIA_INEXTREMO_UNICORN_KQ404_LIST_CHOICES();
}

func void DIA_INEXTREMO_UNICORN_KQ404_LIST_FIREMAGE_SEARCH() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_List_FireMage_Search_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_List_FireMage_Search_03_02");
    AI_RESETFACEANI(OTHER);
    if ((UNICORN_KQ404_LIST_FIREMAGE_SEARCH) == (FALSE)) {
        UNICORN_KQ404_LIST_FIREMAGE_SEARCH = TRUE;
        AI_LOGENTRY(TOPIC_KQ404, LOG_KQ404_UNICORN_LIST_FIREMAGE_SEARCH);
    };
    DIA_INEXTREMO_UNICORN_KQ404_LIST_CHOICES();
}

func void DIA_INEXTREMO_UNICORN_KQ404_LIST_WOODCUTTER_SEARCH() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_List_Woodcutter_Search_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_List_Woodcutter_Search_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_List_Woodcutter_Search_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_List_Woodcutter_Search_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_List_Woodcutter_Search_03_05");
    AI_RESETFACEANI(OTHER);
    if ((UNICORN_KQ404_LIST_WOODCUTTER_SEARCH) == (FALSE)) {
        UNICORN_KQ404_LIST_WOODCUTTER_SEARCH = TRUE;
        AI_LOGENTRY(TOPIC_KQ404, LOG_KQ404_UNICORN_LIST_WOODCUTTER_SEARCH);
    };
    DIA_INEXTREMO_UNICORN_KQ404_LIST_CHOICES();
}

func void DIA_INEXTREMO_UNICORN_KQ404_LIST_VLKRICH_SEARCH() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_List_VLKRich_Search_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_List_VLKRich_Search_03_02");
    AI_RESETFACEANI(OTHER);
    if ((UNICORN_KQ404_LIST_VLKRICH_SEARCH) == (FALSE)) {
        UNICORN_KQ404_LIST_VLKRICH_SEARCH = TRUE;
        AI_LOGENTRY(TOPIC_KQ404, LOG_KQ404_UNICORN_LIST_VLKRICH_SEARCH);
    };
    DIA_INEXTREMO_UNICORN_KQ404_LIST_CHOICES();
}

func void DIA_INEXTREMO_UNICORN_KQ404_LIST_RHOBARKING_SEARCH() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_List_RhobarKing_Search_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_List_RhobarKing_Search_03_02");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_List_RhobarKing_Search_03_03");
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
    if ((UNICORN_KQ404_LIST_RHOBARKING_SEARCH) == (FALSE)) {
        UNICORN_KQ404_LIST_RHOBARKING_SEARCH = TRUE;
        AI_LOGENTRY(TOPIC_KQ404, LOG_KQ404_UNICORN_LIST_RHOBARKING_SEARCH);
    };
    DIA_INEXTREMO_UNICORN_KQ404_LIST_CHOICES();
}

func void DIA_INEXTREMO_UNICORN_KQ404_LIST_GOTEVERYTHING() {
    B_GIVEINVITEMS(OTHER, SELF, 0x91d1, 1);
    KQ404_UNICORNLIST_GOTEVERYTHING = 2;
    KQ404_UNICORNLIST_GIVEITEMS();
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_List_GotEverything_15_01");
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_List_GotEverything_03_02");
    AI_RESETFACEANI(SELF);
}

instance DIA_INEXTREMO_UNICORN_KQ404_WHAT(C_INFO) {
    NPC = 0xd4b8;
    NR = 1;
    CONDITION = DIA_INEXTREMO_UNICORN_KQ404_WHAT_CONDITION;
    INFORMATION = DIA_INEXTREMO_UNICORN_KQ404_WHAT_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Will I finally find out what this is all about?";
}

func int DIA_INEXTREMO_UNICORN_KQ404_WHAT_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_KQ404)) == (LOG_RUNNING)) && ((KQ404_UNICORNLIST_GOTEVERYTHING) == (2))) && ((INEXTREMO_CANPLAYCONCERT) == (TRUE))) && (WLD_ISTIME(21, 0, 18, 0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INEXTREMO_UNICORN_KQ404_WHAT_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_What_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_What_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_What_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_What_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_What_03_05");
    INFO_CLEARCHOICES(0x10bd5);
    INFO_ADDCHOICE(0x10bd5, "What did you say?", 0x10bd8);
}

func void DIA_INEXTREMO_UNICORN_KQ404_WHAT_WAIT() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_What_Wait_15_01");
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_What_Wait_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_What_Wait_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_What_Wait_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_What_Wait_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_What_Wait_03_06");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_What_Wait_03_07");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_What_Wait_03_08");
}

instance DIA_INEXTREMO_UNICORN_KQ404_LETSGO(C_INFO) {
    NPC = 0xd4b8;
    NR = 1;
    CONDITION = DIA_INEXTREMO_UNICORN_KQ404_LETSGO_CONDITION;
    INFORMATION = DIA_INEXTREMO_UNICORN_KQ404_LETSGO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I'm in!";
}

func int DIA_INEXTREMO_UNICORN_KQ404_LETSGO_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_KQ404)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x10bd5))) && ((INEXTREMO_CANPLAYCONCERT) == (TRUE))) && (WLD_ISTIME(21, 0, 18, 0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INEXTREMO_UNICORN_KQ404_LETSGO_INFO() {
    INEXTREMO_CANPLAYCONCERT = FALSE;
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_LetsGo_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_LetsGo_03_02");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    AI_LOGENTRY(TOPIC_KQ404, LOG_KQ404_UNICORN_CONCERTIDEA);
}

instance DIA_INEXTREMO_UNICORN_KQ404_BIGCONCERTREADY(C_INFO) {
    NPC = 0xd4b8;
    NR = 1;
    CONDITION = DIA_INEXTREMO_UNICORN_KQ404_BIGCONCERTREADY_CONDITION;
    INFORMATION = DIA_INEXTREMO_UNICORN_KQ404_BIGCONCERTREADY_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I'm ready.";
}

func int DIA_INEXTREMO_UNICORN_KQ404_BIGCONCERTREADY_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_KQ404)) == (LOG_RUNNING)) && ((KQ404_INEXTREMO_BIGCONCERT) == (1))) && ((NPC_HASITEMS(OTHER, 0x8b1f)) >= (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void INEXTREMO_KQ404_BIGCONCERTREADY_STARTCONCERT() {
    KQ404_INEXTREMO_BIGCONCERT = 2;
}

func void DIA_INEXTREMO_UNICORN_KQ404_BIGCONCERTREADY_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_InExtremo_Unicorn_KQ404_BigConcertReady_15_01");
    ITM = NPC_GETEQUIPPEDARMOR(OTHER);
    if (((NPC_HASEQUIPPEDARMOR(OTHER)) == (TRUE)) && ((HLP_ISITEM(ITM, 0x8b1f)) == (TRUE))) {
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_BigConcertReady_03_02");
    };
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_BigConcertReady_03_03");
    AI_WAITTILLEND(OTHER, SELF);
    AI_EQUIPARMOR(OTHER, 0x8b1f);
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_FUNCTION(SELF, 0xf1b2);
    AI_OUTPUT(SELF, OTHER, "DIA_InExtremo_Unicorn_KQ404_BigConcertReady_03_04");
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 0x10bde);
    WLD_INSERTNPC(0xc3ac, "HARBOUR_STORAGE01_07");
    AI_RESETFACEANI(SELF);
}

instance DIA_INEXTREMO_UNICORN_KQ404_BIGCONCERTREADY_INFO.ITM(C_ITEM)
