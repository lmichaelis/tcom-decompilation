func void CATINV_DRAWCATEGORY() {
    if (!(CATINV_ACTIVECATEGORY)) {
        return;
    };
    if (!(CATINV_SUPPORTCAT(ESI))) {
        return;
    };
    if (!(CATVIEWPTR)) {
        CATVIEWPTR = VIEWPTR_NEW();
    };
    CONTAINER = _^(ESI);
    VIEWTITLE = _^(EAX);
    SCREENPTR = ECX;
    TEXT = MEM_READSTATSTRINGARR(TXT_INV_CAT[0], CATINV_GETCATID(CATINV_ACTIVECATEGORY));
    TEXT = CONCATSTRINGS(TEXT, STR_UNESCAPE("\n"));
    TEXTPTR = _@S(TEXT);
    if (CALL_BEGIN(CALL)) {
        CALL_INTPARAM(_@(ZERO));
        CALL_PTRPARAM(_@(CATVIEWPTR));
        CALL__THISCALL(_@(SCREENPTR), ZCVIEW__INSERTITEM);
        CALL_PUTRETVALTO(_@(PADDING));
        CALL_INTPARAM(_@(TEN));
        CALL__THISCALL(_@(SCREENPTR), ZCVIEW__ANX);
        CALL_PUTRETVALTO(_@(FONTSIZE));
        CALL_PTRPARAM(_@(TEXTPTR));
        CALL__THISCALL(_@(SCREENPTR), ZCVIEW__FONTSIZE);
        CALL = CALL_END();
    };
    HEIGHT = (MEM_READINT(CATINV_DEFAULTHEIGHTADDR)) / (2);
    POSX = (CONTAINER.MARGINLEFT) - (PADDING);
    POSY = (POSX) + (HEIGHT);
    POSX += VIEWTITLE.VSIZEX;
    FONTSIZE += (2) * (PADDING);
    WIDTH = (2) * (MEM_READINT(CATINV_DEFAULTWIDTHADDR));
    if ((WIDTH) <= (FONTSIZE)) {
        WIDTH = FONTSIZE;
    };
    if (CONTAINER.RIGHT) {
        POSX = ((PS_VMAX) - (WIDTH)) - (POSX);
    };
    BLENDPTR = (CATINV_BASEBLENDFUNCADDR) + ((CONTAINER.INVMODE) * (4));
    TEXPTR = MEM_READSTATARR(CATINV_BACKTEXTUREADDR[0], CONTAINER.INVMODE);
    I255 = 255;
    if (CALL_BEGIN(CALL2)) {
        ASM_OPEN(512);
        CALL_PTRPARAM(_@(TEXPTR));
        CALL__THISCALL(_@(CATVIEWPTR), ZCVIEW__INSERTBACK);
        CALL_PTRPARAM(_@(BLENDPTR));
        CALL__THISCALL(_@(CATVIEWPTR), ZCVIEW__SETALPHABLENDFUNC);
        CALL_PTRPARAM(_@(CATINV_FONTCOLORADDR));
        CALL__THISCALL(_@(CATVIEWPTR), ZCVIEW__SETFONTCOLOR);
        CALL_INTPARAM(_@(I255));
        CALL__THISCALL(_@(CATVIEWPTR), ZCVIEW__SETTRANSPARENCY);
        CALL_INTPARAM(_@(POSY));
        CALL_INTPARAM(_@(POSX));
        CALL__THISCALL(_@(CATVIEWPTR), ZCVIEW__SETPOS);
        CALL_INTPARAM(_@(HEIGHT));
        CALL_INTPARAM(_@(WIDTH));
        CALL__THISCALL(_@(CATVIEWPTR), ZCVIEW__SETSIZE);
        CALL__THISCALL(_@(CATVIEWPTR), ZCVIEW__CLRPRINTWIN);
        CALL__THISCALL(_@(CATVIEWPTR), ZCVIEW__BLIT);
        CALL_PTRPARAM(_@(CATINV_TITLETEXTUREADDR));
        CALL__THISCALL(_@(CATVIEWPTR), ZCVIEW__INSERTBACK);
        CALL_PTRPARAM(_@(CATINV_DEFAULTALPHAFUNCADDR));
        CALL__THISCALL(_@(CATVIEWPTR), ZCVIEW__SETALPHABLENDFUNC);
        CALL_PTRPARAM(_@(TEXTPTR));
        CALL__THISCALL(_@(CATVIEWPTR), ZCVIEW__PRINTCXY);
        CALL__THISCALL(_@(CATVIEWPTR), ZCVIEW__BLIT);
        CALL_PTRPARAM(_@(CATVIEWPTR));
        CALL__THISCALL(_@(SCREENPTR), ZCVIEW__REMOVEITEM);
        CALL2 = CALL_END();
    };
}

const int CATINV_DRAWCATEGORY.CATVIEWPTR = 0;
instance CATINV_DRAWCATEGORY.CONTAINER(OCITEMCONTAINER)
instance CATINV_DRAWCATEGORY.VIEWTITLE(ZCVIEW)
var int CATINV_DRAWCATEGORY.SCREENPTR = 0;
var string CATINV_DRAWCATEGORY.TEXT = "";
var int CATINV_DRAWCATEGORY.TEXTPTR = 0;
var int CATINV_DRAWCATEGORY.PADDING = 0;
var int CATINV_DRAWCATEGORY.FONTSIZE = 0;
var int CATINV_DRAWCATEGORY.ZERO = 0;
const int CATINV_DRAWCATEGORY.TEN = 10;
const int CATINV_DRAWCATEGORY.CALL = 0;
var int CATINV_DRAWCATEGORY.HEIGHT = 0;
var int CATINV_DRAWCATEGORY.POSX = 0;
var int CATINV_DRAWCATEGORY.POSY = 0;
var int CATINV_DRAWCATEGORY.WIDTH = 0;
var int CATINV_DRAWCATEGORY.BLENDPTR = 0;
var int CATINV_DRAWCATEGORY.TEXPTR = 0;
var int CATINV_DRAWCATEGORY.I255 = 0;
const int CATINV_DRAWCATEGORY.CALL2 = 0;
