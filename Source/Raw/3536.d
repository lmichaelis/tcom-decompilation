func void SQ510_SHRINKCUTSCENE_PREPARE() {
    FF_APPLYONCEEXT(0xf782, 75, 4);
}

func void SQ510_SHRINKCUTSCENE() {
    SQ510_SHRINKCUTSCENE_COUNT = (SQ510_SHRINKCUTSCENE_COUNT) + (1);
    if ((SQ510_SHRINKCUTSCENE_COUNT) == (4)) {
        NPC_CLEARAIQUEUE(KDW_216_INGOLF);
        CREATEINVITEMS(KDW_216_INGOLF, 0x8740, 1);
        B_READYSPELL(KDW_216_INGOLF, SPL_SHRINK, SPL_COST_SHRINK);
        AI_TURNTONPC(KDW_216_INGOLF, HERO);
        AI_TURNTONPC(HERO, KDW_216_INGOLF);
        AI_WAITTILLEND(HERO, KDW_216_INGOLF);
        AI_WAITTILLEND(KDW_216_INGOLF, HERO);
        AI_PLAYANI(KDW_216_INGOLF, "T_MAGRUN_2_SLESHOOT");
        AI_FUNCTION(KDW_216_INGOLF, 0xf784);
        AI_WAITTILLEND(HERO, KDW_216_INGOLF);
        AI_PLAYANI(HERO, "T_STAND_2_VICTIM_SLE");
        AI_PLAYANI(KDW_216_INGOLF, "T_SLESHOOT_2_STAND");
        AI_UNREADYSPELL(KDW_216_INGOLF);
    };
}

var int SQ510_SHRINKCUTSCENE.SQ510_SHRINKCUTSCENE_COUNT = 0;
func void SQ510_PLAYSPELLEFFECT() {
    WLD_PLAYEFFECT("SLOW_TIME_EFFECT", HERO, HERO, 0, 0, 0, FALSE);
    FADESCREENTOBLACKF(5, 0xf785, 0x76c);
}

func void SQ510_TELEPORTTOROOM_FADESCREEN() {
    SETHOLDTIME(TRUE);
    WLD_SETTIME(10, 0);
    AI_TELEPORT(HERO, "PART8_MONASTERY_SMALLROOM_HERO_START");
    HERO.AIVAR[4] = FALSE;
    FADESCREENFROMBLACK(3);
    MUSIC_OVERRIDETRACK(0x55a3);
    FF_APPLYONCEEXT(0xf786, 1000, 4);
}

func void SQ510_FADESCREEN_APPLY() {
    SQ510_FADESCREEN_COUNT = (SQ510_FADESCREEN_COUNT) + (1);
    if ((SQ510_FADESCREEN_COUNT) == (2)) {
        AI_PLAYANI(HERO, T_SEARCH);
    };
    if ((SQ510_FADESCREEN_COUNT) == (4)) {
        HERO.AIVAR[4] = FALSE;
        LOG_CREATETOPIC(TOPIC_SQ510, LOG_MISSION);
        LOG_SETSTATUS(_@(MIS_SQ510), TOPIC_SQ510, LOG_RUNNING);
        B_LOGENTRY(TOPIC_SQ510, LOG_SQ510_START);
    };
}

var int SQ510_FADESCREEN_APPLY.SQ510_FADESCREEN_COUNT = 0;
