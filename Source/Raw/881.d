func void BIGCRATESJORN_S1() {
    HER = HLP_GETNPC(0xc3ab);
    if ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(HER))) {
        FADESCREENTOBLACKF(2, 0xb96a, 350);
    };
}

instance BIGCRATESJORN_S1.HER(C_NPC)
func void BIGCRATESJORN_FADESCREEN() {
    FF_APPLYONCEEXTGT(0xb96b, 0, -(1));
    B_PASSTIME(3);
    AI_USEMOB(HERO, NPC_GETDETECTEDMOB(HERO), -(1));
    HERO.AIVAR[4] = FALSE;
    FADESCREENFROMBLACK(3);
}

func void BIGCRATESJORN_MOVER() {
    if ((CHANGEBIGCRATESJORNCOLLISION) == (0)) {
        PRINTD("Rozpoczynam - BIGCRATESJorn_Mover");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("KM_JORNHOUSE_MOVECRATES");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("KM_JORNHOUSE_DOOR_01");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        MOVPTR3 = MEM_SEARCHVOBBYNAME("KM_JORNHOUSE_DOOR_02");
        MOVER3 = MEM_PTRTOINST(MOVPTR3);
        CHANGEVOBCOLLISION("KM_JORNHOUSE_DOOR_VOB_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("KM_JORNHOUSE_DOOR_VOB_02", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("KM_JORNHOUSE_BIGCRATES", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("KM_JORNHOUSE_MOVECRATES");
        WLD_SENDTRIGGER("KM_JORNHOUSE_DOOR_01");
        WLD_SENDTRIGGER("KM_JORNHOUSE_DOOR_02");
        CHANGEBIGCRATESJORNCOLLISION = 1;
    };
    if (((((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER3.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER3.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - BIGCRATESJorn_Mover");
        CHANGEVOBCOLLISION("KM_JORNHOUSE_DOOR_VOB_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("KM_JORNHOUSE_DOOR_VOB_02", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("KM_JORNHOUSE_BIGCRATES", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0xb96b);
        CHANGEBIGCRATESJORNCOLLISION = 0;
        MOB_CHANGEFOCUSNAME("KM_JORNHOUSE_BIGCRATES", "MOBNAME_NOTHING");
        B_LOGENTRY(TOPIC_Q405, LOG_Q405_INSIDESAFE);
        Q405_SAFEPLACELOGENTRY = 2;
        if ((Q405_VOLKERGUARDSATTACK) == (0)) {
            Q405_VOLKERGUARDSATTACK = 2;
            AI_TELEPORT(NONE_6398_VOLKERGUARD, TOT);
            B_STARTOTHERROUTINE(NONE_6398_VOLKERGUARD, TOT);
            AI_TELEPORT(NONE_6399_VOLKERGUARD, TOT);
            B_STARTOTHERROUTINE(NONE_6399_VOLKERGUARD, TOT);
            AI_TELEPORT(NONE_6434_VOLKERGUARD, TOT);
            B_STARTOTHERROUTINE(NONE_6434_VOLKERGUARD, TOT);
        };
    };
}

var int BIGCRATESJORN_MOVER.CHANGEBIGCRATESJORNCOLLISION = 0;
instance BIGCRATESJORN_MOVER.MOVER1(ZCMOVER)
instance BIGCRATESJORN_MOVER.MOVER2(ZCMOVER)
instance BIGCRATESJORN_MOVER.MOVER3(ZCMOVER)
var int BIGCRATESJORN_MOVER.MOVPTR1 = 0;
var int BIGCRATESJORN_MOVER.MOVPTR2 = 0;
var int BIGCRATESJORN_MOVER.MOVPTR3 = 0;
