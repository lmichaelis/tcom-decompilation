instance DIA_CITIZEN07_EXIT(C_INFO) {
    NPC = 0xd4fa;
    NR = 999;
    CONDITION = DIA_CITIZEN07_EXIT_CONDITION;
    INFORMATION = DIA_CITIZEN07_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_CITIZEN07_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_CITIZEN07_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_CITIZEN07_QA304_WHATHAPPEND(C_INFO) {
    NPC = 0xd4fa;
    NR = 1;
    CONDITION = DIA_CITIZEN07_QA304_WHATHAPPEND_CONDITION;
    INFORMATION = DIA_CITIZEN07_QA304_WHATHAPPEND_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_CITIZEN07_QA304_WHATHAPPEND_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QA304)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x11cbf))) {
        if ((((NPC_GETDISTTOWP(VLK_13507_CITIZEN, VLK_13507_CITIZEN.WP)) <= (500)) && ((NPC_GETDISTTOWP(VLK_13504_FULKO, VLK_13504_FULKO.WP)) <= (500))) && ((NPC_GETDISTTOWP(VLK_13505_WORKER, VLK_13505_WORKER.WP)) <= (500))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_CITIZEN07_QA304_WHATHAPPEND_INFO() {
    QA304_FULKOGONE = TRUE;
    TRIA_INVITE(VLK_13505_WORKER);
    TRIA_INVITE(VLK_13504_FULKO);
    TRIA_STARTEXT(FALSE);
    TRIA_WAIT();
    TRIA_NEXT(VLK_13504_FULKO);
    AI_TURNTONPC(VLK_13507_CITIZEN, VLK_13504_FULKO);
    AI_TURNTONPC(VLK_13505_WORKER, VLK_13504_FULKO);
    AI_TURNTONPC(HERO, VLK_13504_FULKO);
    AI_LOOKATNPC(HERO, VLK_13504_FULKO);
    AI_OUTPUT(SELF, OTHER, "DIA_Citizen07_QA304_WhatHappend_03_01");
    if ((QA304_SIGUNDTAKEDOWN) == (1)) {
        TRIA_WAIT();
        TRIA_NEXT(VLK_13507_CITIZEN);
        AI_OUTPUT(SELF, OTHER, "DIA_Citizen07_QA304_WhatHappend_03_02");
        TRIA_WAIT();
        TRIA_NEXT(VLK_13504_FULKO);
        AI_TURNTONPC(VLK_13507_CITIZEN, VLK_13504_FULKO);
        AI_OUTPUT(SELF, OTHER, "DIA_Citizen07_QA304_WhatHappend_03_03");
        TRIA_WAIT();
        TRIA_NEXT(VLK_13507_CITIZEN);
        AI_OUTPUT(SELF, OTHER, "DIA_Citizen07_QA304_WhatHappend_03_04");
        TRIA_WAIT();
        TRIA_NEXT(VLK_13504_FULKO);
        AI_OUTPUT(SELF, OTHER, "DIA_Citizen07_QA304_WhatHappend_03_05");
        AI_TURNTONPC(VLK_13504_FULKO, HERO);
        AI_OUTPUT(SELF, OTHER, "DIA_Citizen07_QA304_WhatHappend_03_06");
    };
    TRIA_WAIT();
    TRIA_NEXT(VLK_13507_CITIZEN);
    AI_OUTPUT(SELF, OTHER, "DIA_Citizen07_QA304_WhatHappend_03_07");
    TRIA_WAIT();
    TRIA_NEXT(VLK_13504_FULKO);
    AI_OUTPUT(SELF, OTHER, "DIA_Citizen07_QA304_WhatHappend_03_08");
    TRIA_WAIT();
    TRIA_NEXT(VLK_13507_CITIZEN);
    AI_OUTPUT(SELF, OTHER, "DIA_Citizen07_QA304_WhatHappend_03_09");
    TRIA_WAIT();
    TRIA_NEXT(VLK_13504_FULKO);
    AI_TURNTONPC(VLK_13504_FULKO, HERO);
    AI_OUTPUT(SELF, OTHER, "DIA_Citizen07_QA304_WhatHappend_03_10");
    AI_OUTPUT(OTHER, SELF, "DIA_Citizen07_QA304_WhatHappend_15_11");
    AI_OUTPUT(SELF, OTHER, "DIA_Citizen07_QA304_WhatHappend_03_12");
    TRIA_FINISH();
    AI_STOPLOOKAT(SELF);
    AI_STOPLOOKAT(OTHER);
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 0xf63c);
}

