func void B_MARVIN_ATTACKINDIALOGUE_PREPARE() {
    AI_WAITTILLEND(HERO, SELF);
    AI_WAITTILLEND(SELF, HERO);
    if ((KAPITEL) == (6)) {
        NPC_REMOVEINVITEMS(HERO, 0x9a2a, NPC_HASITEMS(HERO, 0x9a2a));
    };
    AI_SETWALKMODE(HERO, NPC_WALK);
    if ((NPC_HASREADIEDMELEEWEAPON(HERO)) == (FALSE)) {
        if ((NPC_HASEQUIPPEDMELEEWEAPON(HERO)) == (FALSE)) {
            CREATEINVITEMS(HERO, 0x84cb, 1);
            AI_EQUIPBESTMELEEWEAPON(HERO);
        };
        AI_REMOVEWEAPON(HERO);
        AI_READYMELEEWEAPON(HERO);
    };
    AI_GOTONPC(HERO, SELF);
    AI_WAITTILLEND(HERO, SELF);
    AI_WAITTILLEND(SELF, HERO);
}

func void B_MARVIN_ATTACKINDIALOGUE_ATTACK() {
    WPN = NPC_GETEQUIPPEDMELEEWEAPON(HERO);
    if ((GETWEAPONTYPE(WPN)) == (1)) {
        AI_PLAYANI(HERO, T_1HATTACKR);
    };
    if ((GETWEAPONTYPE(WPN)) == (2)) {
        AI_PLAYANI(HERO, "T_2HATTACKR");
    };
    AI_PLAYANI(HERO, T_1HATTACKR);
}

instance B_MARVIN_ATTACKINDIALOGUE_ATTACK.WPN(C_ITEM)
