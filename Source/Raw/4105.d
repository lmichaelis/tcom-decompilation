var int GASTON_TEACH_WANTSBEER = 0;
var int GASTON_CANTEACHHUNTING = 0;
instance DIA_GASTON_EXIT(C_INFO) {
    NPC = 0xe379;
    NR = 999;
    CONDITION = DIA_GASTON_EXIT_CONDITION;
    INFORMATION = DIA_GASTON_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_GASTON_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_GASTON_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_GASTON_WHO(C_INFO) {
    NPC = 0xe379;
    NR = 1;
    CONDITION = DIA_GASTON_WHO_CONDITION;
    INFORMATION = DIA_GASTON_WHO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Who are you?";
}

func int DIA_GASTON_WHO_CONDITION() {
    return TRUE;
}

func void DIA_GASTON_WHO_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_Who_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Who_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Who_03_03");
    INFO_CLEARCHOICES(0x13cf8);
    INFO_ADDCHOICE(0x13cf8, "So what are you doing?", 0x13cfb);
}

func void DIA_GASTON_WHO_WHAT() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_Who_What_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Who_What_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Who_What_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Who_What_03_04");
    INFO_CLEARCHOICES(0x13cf8);
}

instance DIA_GASTON_TEACH(C_INFO) {
    NPC = 0xe379;
    NR = 10;
    CONDITION = DIA_GASTON_TEACH_CONDITION;
    INFORMATION = DIA_GASTON_TEACH_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Can you teach me something?";
}

func int DIA_GASTON_TEACH_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x13cf8)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GASTON_TEACH_INFO() {
    GASTON_TEACH_WANTSBEER = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_Teach_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Teach_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Teach_03_03");
    LOG_CREATETOPIC(TOPIC_WOLFSDENTEACHER, LOG_NOTE);
    AI_LOGENTRY(TOPIC_WOLFSDENTEACHER, LOG_WOLFSDENTEACHER_GASTON_NEEDBEER);
}

var int GASTONCANTEACHDEX = 0;
instance DIA_GASTON_TEACHBOW(C_INFO) {
    NPC = 0xe379;
    NR = 10;
    CONDITION = DIA_GASTON_TEACHBOW_CONDITION;
    INFORMATION = DIA_GASTON_TEACHBOW_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What about archery?";
}

func int DIA_GASTON_TEACHBOW_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x13cfc)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GASTON_TEACHBOW_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_TeachBow_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_TeachBow_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_TeachBow_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_TeachBow_03_04");
    LOG_CREATETOPIC(TOPIC_WOLFSDENTEACHER, LOG_NOTE);
    AI_LOGENTRY(TOPIC_WOLFSDENTEACHER, LOG_WOLFSDENTEACHER_GASTON);
    GASTONCANTEACHDEX = TRUE;
}

instance DIA_GASTON_BEER(C_INFO) {
    NPC = 0xe379;
    NR = 10;
    CONDITION = DIA_GASTON_BEER_CONDITION;
    INFORMATION = DIA_GASTON_BEER_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "Here's your beer.";
}

func int DIA_GASTON_BEER_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x13cfc)) && ((GASTON_TEACH_WANTSBEER) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int GASTON_BEER_FIRSTDIALOGUE = 0;
func void DIA_GASTON_BEER_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_Beer_15_01");
    if ((NPC_HASITEMS(OTHER, 0x8e0c)) >= (1)) {
        GASTON_TEACH_WANTSBEER = 2;
        GASTON_CANTEACHHUNTING = TRUE;
        B_GIVEINVITEMS(OTHER, SELF, 0x8e0c, 1);
        B_STANDUP();
        B_STOPLOOKAT(SELF);
        AI_USEITEM(SELF, 0x8e0c);
        B_LOOKATNPC(SELF, HERO);
        AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Beer_03_02");
        AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Beer_03_07");
        LOG_CREATETOPIC(TOPIC_WOLFSDENTEACHER, LOG_NOTE);
        AI_LOGENTRY(TOPIC_WOLFSDENTEACHER, LOG_WOLFSDENTEACHER_GASTON_BOWS);
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Beer_03_03");
    if ((GASTON_BEER_FIRSTDIALOGUE) == (FALSE)) {
        GASTON_BEER_FIRSTDIALOGUE = TRUE;
        AI_OUTPUT(OTHER, SELF, "DIA_Gaston_Beer_15_04");
        AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Beer_03_05");
        AI_OUTPUT(OTHER, SELF, "DIA_Gaston_Beer_15_06");
    };
}

instance DIA_GASTON_TEACHFLETCHERY2(C_INFO) {
    NPC = 0xe379;
    NR = 950;
    CONDITION = DIA_GASTON_TEACHFLETCHERY2_CONDITION;
    INFORMATION = DIA_GASTON_TEACHFLETCHERY2_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = B_BUILDLEARNSTRING2(PRINT_LEARN_FLETCHERY2, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_FLETCHERY, 2), GASTON_FLETCHERY2);
}

func int DIA_GASTON_TEACHFLETCHERY2_CONDITION() {
    if (((GASTON_CANTEACHHUNTING) == (TRUE)) && ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_FLETCHERY)) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GASTON_TEACHFLETCHERY2_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_TeachFletchery2_15_01");
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (GASTON_FLETCHERY2)) {
        if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_FLETCHERY)) == (2)) {
            NPC_REMOVEINVITEMS(SELF, 0x859b, GASTON_FLETCHERY2);
            AI_OUTPUT(SELF, OTHER, "DIA_Gaston_TeachFletchery2_13_01");
            B_GIVEINVITEMS(OTHER, SELF, 0x859b, GASTON_FLETCHERY2);
            AI_OUTPUT(SELF, OTHER, "DIA_Gaston_TeachFletchery2_13_02");
        };
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_TeachFletchery2_13_03");
}

instance DIA_GASTON_TEACHFLETCHERY3(C_INFO) {
    NPC = 0xe379;
    NR = 950;
    CONDITION = DIA_GASTON_TEACHFLETCHERY3_CONDITION;
    INFORMATION = DIA_GASTON_TEACHFLETCHERY3_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = B_BUILDLEARNSTRING2(PRINT_LEARN_FLETCHERY3, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_FLETCHERY, 3), GASTON_FLETCHERY3);
}

func int DIA_GASTON_TEACHFLETCHERY3_CONDITION() {
    if (((GASTON_CANTEACHHUNTING) == (TRUE)) && ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_FLETCHERY)) == (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GASTON_TEACHFLETCHERY3_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_TeachFletchery3_15_01");
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (GASTON_FLETCHERY3)) {
        FLETCHERY_FINISHTRAIN = TRUE;
        FLETCHERY_FINISHTRAIN_DAY = WLD_GETDAY();
        if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_FLETCHERY)) == (3)) {
            NPC_REMOVEINVITEMS(SELF, 0x859b, GASTON_FLETCHERY3);
            AI_OUTPUT(SELF, OTHER, "DIA_Gaston_TeachFletchery3_13_01");
            B_GIVEINVITEMS(OTHER, SELF, 0x859b, GASTON_FLETCHERY3);
            AI_OUTPUT(SELF, OTHER, "DIA_Gaston_TeachFletchery3_13_02");
            AI_OUTPUT(SELF, OTHER, "DIA_Gaston_TeachFletchery3_13_03");
        };
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_TeachFletchery3_13_04");
}

var int GASTON_NOMORE = 0;
var string GASTON_PRINTS = "";
var int GASTON_CURRENTDEXLEVEL = 0;
instance DIA_GASTON_TRAINING(C_INFO) {
    NPC = 0xe379;
    NR = 1;
    CONDITION = DIA_GASTON_TRAINING_CONDITION;
    INFORMATION = DIA_GASTON_TRAINING_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I want to be more dexterous.";
}

func int DIA_GASTON_TRAINING_CONDITION() {
    if (((GASTONCANTEACHDEX) == (TRUE)) && ((GASTON_NOMORE) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GASTON_TRAINING_CHOICES() {
    GASTON_GOLDCOST = 10;
    GASTON_CURRENTDEXLEVEL = OTHER.AIVAR[82];
    INFO_CLEARCHOICES(0x13d10);
    INFO_ADDCHOICE(0x13d10, DIALOG_BACK, 0x13d15);
    INFO_ADDCHOICE(0x13d10, B_BUILDLEARNSTRING2(PRINT_LEARNDEX1, B_GETLEARNCOSTATTRIBUTE(OTHER, ATR_DEXTERITY, 1), GASTON_GOLDCOST), 0x13d16);
    INFO_ADDCHOICE(0x13d10, B_BUILDLEARNSTRING2(PRINT_LEARNDEX5, B_GETLEARNCOSTATTRIBUTE(OTHER, ATR_DEXTERITY, 5), (GASTON_GOLDCOST) * (5)), 0x13d17);
}

var int DIA_GASTON_TRAINING_CHOICES.GASTON_GOLDCOST = 0;
func void DIA_GASTON_TRAINING_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_Training_15_00");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Training_13_01");
    DIA_GASTON_TRAINING_CHOICES();
}

func void DIA_GASTON_TRAINING_BACK() {
    if ((OTHER.AIVAR[82]) >= (100)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Gaston_TrainingBack_03_00");
        GASTON_NOMORE = TRUE;
    };
    INFO_CLEARCHOICES(0x13d10);
}

func void DIA_GASTON_TRAININGDEX1() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (GASTON_PAYMENT1)) {
        if ((GASTON_CURRENTDEXLEVEL) < (OTHER.AIVAR[82])) {
            SND_PLAY(GELDBEUTEL);
            B_GIVEINVITEMS(OTHER, SELF, 0x859b, GASTON_PAYMENT1);
            NPC_REMOVEINVITEMS(SELF, 0x859b, GASTON_PAYMENT1);
        };
        B_TEACHATTRIBUTEPOINTS(SELF, OTHER, ATR_DEXTERITY, 1, 100);
        DIA_GASTON_TRAINING_CHOICES();
    };
    if ((NPC_HASITEMS(OTHER, 0x859b)) < (GASTON_PAYMENT1)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Gaston_TrainingDEX1_13_01");
        GASTON_PRINTS = CONCATSTRINGS(PRINT_RGOLD, INTTOSTRING(GASTON_PAYMENT1));
        PRINTSCREEN(GASTON_PRINTS, -(1), -(1), FONT_SCREEN, 2);
        DIA_GASTON_TRAINING_CHOICES();
    };
}

func void DIA_GASTON_TRAININGDEX5() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (GASTON_PAYMENT5)) {
        if ((GASTON_CURRENTDEXLEVEL) < (OTHER.AIVAR[82])) {
            SND_PLAY(GELDBEUTEL);
            B_GIVEINVITEMS(OTHER, SELF, 0x859b, GASTON_PAYMENT5);
            NPC_REMOVEINVITEMS(SELF, 0x859b, GASTON_PAYMENT5);
        };
        B_TEACHATTRIBUTEPOINTS(SELF, OTHER, ATR_DEXTERITY, 5, 100);
        DIA_GASTON_TRAINING_CHOICES();
    };
    if ((NPC_HASITEMS(OTHER, 0x859b)) < (GASTON_PAYMENT5)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Gaston_TrainingDEX5_13_01");
        GASTON_PRINTS = CONCATSTRINGS(PRINT_RGOLD, INTTOSTRING(GASTON_PAYMENT5));
        PRINTSCREEN(GASTON_PRINTS, -(1), -(1), FONT_SCREEN, 2);
        DIA_GASTON_TRAINING_CHOICES();
    };
}

instance DIA_GASTON_AMBIENT(C_INFO) {
    NPC = 0xe379;
    NR = 850;
    CONDITION = DIA_GASTON_AMBIENT_CONDITION;
    INFORMATION = DIA_GASTON_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "Are you all right?";
}

func int DIA_GASTON_AMBIENT_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x13cf8)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GASTON_AMBIENT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_Ambient_15_01");
    if ((((LOG_GETSTATUS(MIS_SQ402)) == (LOG_SUCCESS)) && ((NELSON_AFTERHUNT) == (TRUE))) && ((NELSON_AFTERHUNT_DAY) <= ((WLD_GETDAY()) - (1)))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Ambient_03_03");
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Ambient_03_02");
}

instance DIA_GASTON_SQ402NELSON(C_INFO) {
    NPC = 0xe379;
    NR = 1;
    CONDITION = DIA_GASTON_SQ402NELSON_CONDITION;
    INFORMATION = DIA_GASTON_SQ402NELSON_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I talked to your son.";
}

func int DIA_GASTON_SQ402NELSON_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ402)) == (LOG_RUNNING)) && ((SQ402_NELSON_READYFORHUNT) == (1))) {
        if (NPC_KNOWSINFO(OTHER, 0x13cf8)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_GASTON_SQ402NELSON_LEAVE() {
    INFO_ADDCHOICE(0x13d1b, "(Let go)", 0x13d27);
}

func void DIA_GASTON_SQ402NELSON_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_SQ402Nelson_15_01");
    INFO_CLEARCHOICES(0x13d1b);
    INFO_ADDCHOICE(0x13d1b, "Your son asked me to help him get a horn.", 0x13d26);
    INFO_ADDCHOICE(0x13d1b, "Are you sure Nelson can kill a shadowbeast?", 0x13d1f);
}

func void DIA_GASTON_SQ402NELSON_SHADOWBEAST() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_SQ402Nelson_Shadowbeast_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_SQ402Nelson_Shadowbeast_03_02");
    INFO_CLEARCHOICES(0x13d1b);
    DIA_GASTON_SQ402NELSON_LEAVE();
    INFO_ADDCHOICE(0x13d1b, "I've heard that one of your sons has already been killed while hunting...", 0x13d20);
    INFO_ADDCHOICE(0x13d1b, "Nelson is a strong boy, but aren't you afraid for his life?", 0x13d25);
}

func void DIA_GASTON_SQ402NELSON_SHADOWBEAST_DEATH() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_SQ402Nelson_Death_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_SQ402Nelson_Death_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_SQ402Nelson_Death_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_SQ402Nelson_Death_03_04");
    INFO_CLEARCHOICES(0x13d1b);
    DIA_GASTON_SQ402NELSON_LEAVE();
    INFO_ADDCHOICE(0x13d1b, "It seems to me that he would rather occupy himself with the study of books of magic.", 0x13d21);
    INFO_ADDCHOICE(0x13d1b, "But not everyone can live to old age as a hunter.", 0x13d24);
}

func void DIA_GASTON_SQ402NELSON_SHADOWBEAST_DEATH_MAGIC() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_SQ402Nelson_Magic_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_SQ402Nelson_Magic_03_02");
    INFO_CLEARCHOICES(0x13d1b);
    DIA_GASTON_SQ402NELSON_LEAVE();
    INFO_ADDCHOICE(0x13d1b, "I came to save your son's life.", 0x13d22);
    INFO_ADDCHOICE(0x13d1b, "Sorry, I'm just scared for your son.", 0x13d23);
}

func void DIA_GASTON_SQ402NELSON_SHADOWBEAST_DEATH_MAGIC_SAVE() {
    SQ402_NELSON_READYFORHUNT = 3;
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_SQ402Nelson_Save_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_SQ402Nelson_Save_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_SQ402Nelson_Save_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_SQ402Nelson_Save_03_04");
    INFO_CLEARCHOICES(0x13d1b);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_SQ402, LOG_SQ402_GASTON_SEESON);
}

func void DIA_GASTON_SQ402NELSON_SHADOWBEAST_DEATH_MAGIC_SCARED() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_SQ402Nelson_Scared_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_SQ402Nelson_Scared_03_02");
    INFO_CLEARCHOICES(0x13d1b);
    AI_LOGENTRY(TOPIC_SQ402, LOG_SQ402_GASTON_BADCHOICE_V1);
}

func void DIA_GASTON_SQ402NELSON_SHADOWBEAST_DEATH_HUNTER() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_SQ402Nelson_Hunter_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_SQ402Nelson_Hunter_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_SQ402Nelson_Hunter_03_03");
    AI_LOGENTRY(TOPIC_SQ402, LOG_SQ402_GASTON_BADCHOICE_V2);
    INFO_CLEARCHOICES(0x13d1b);
}

func void DIA_GASTON_SQ402NELSON_SHADOWBEAST_STRONG() {
    INFO_CLEARCHOICES(0x13d1b);
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_SQ402Nelson_Strong_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_SQ402Nelson_Strong_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_SQ402Nelson_Strong_03_03");
    AI_LOGENTRY(TOPIC_SQ402, LOG_SQ402_GASTON_BADCHOICE_V2);
}

func void DIA_GASTON_SQ402NELSON_HELP() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_SQ402Nelson_Help_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_SQ402Nelson_Help_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_SQ402Nelson_Help_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_SQ402Nelson_Help_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_SQ402Nelson_Help_03_05");
    INFO_CLEARCHOICES(0x13d1b);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_SQ402, LOG_SQ402_GASTON_BADCHOICE_V3);
}

func void DIA_GASTON_SQ402NELSON_SHADOWBEAST_BACK() {
    INFO_CLEARCHOICES(0x13d1b);
    AI_LOGENTRY(TOPIC_SQ402, LOG_SQ402_GASTON_BADCHOICE_V2);
}

instance DIA_GASTON_WHERENELSON(C_INFO) {
    NPC = 0xe379;
    NR = 1;
    CONDITION = DIA_GASTON_WHERENELSON_CONDITION;
    INFORMATION = DIA_GASTON_WHERENELSON_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What happened to your son?";
}

func int DIA_GASTON_WHERENELSON_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ402)) == (LOG_RUNNING)) && ((SQ402_NELSON_READYFORHUNT) == (5))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GASTON_WHERENELSON_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_WhereNelson_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_WhereNelson_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_WhereNelson_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_WhereNelson_03_04");
    INFO_CLEARCHOICES(0x13d28);
    INFO_ADDCHOICE(0x13d28, "I just want to know where he is.", 0x13d2c);
    INFO_ADDCHOICE(0x13d28, "You've been rather unsuccessful so far.", 0x13d2d);
}

func void DIA_GASTON_WHERENELSON_FINISHQUESTV2() {
    B_LOGENTRY(TOPIC_SQ402, LOG_SQ402_FINISH_V2);
    LOG_SETSTATUS(_@(MIS_SQ402), TOPIC_SQ402, LOG_SUCCESS);
    INFO_CLEARCHOICES(0x13d28);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_GASTON_WHERENELSON_KNOW() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_WhereNelson_Know_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_WhereNelson_Know_03_02");
    B_GIVEPLAYERXP(XP_SQ402_FINISH_V2_MORE);
    DIA_GASTON_WHERENELSON_FINISHQUESTV2();
}

func void DIA_GASTON_WHERENELSON_NO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_WhereNelson_No_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_WhereNelson_No_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_WhereNelson_No_03_03");
    B_GIVEPLAYERXP(XP_SQ402_FINISH_V2_LESS);
    CREATEINVITEMS(SELF, 0x859b, SQ402_REWARD_V1);
    B_GIVEINVITEMS(SELF, OTHER, 0x859b, SQ402_REWARD_V1);
    DIA_GASTON_WHERENELSON_FINISHQUESTV2();
}

var int GASTON_ALLHUNT = 0;
instance DIA_GASTON_HUNTING_SPECIAL(C_INFO) {
    NPC = 0xe379;
    NR = 1;
    CONDITION = DIA_GASTON_HUNTING_SPECIAL_CONDITION;
    INFORMATION = DIA_GASTON_HUNTING_SPECIAL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "Can you teach me something about hunting?";
}

func int DIA_GASTON_HUNTING_SPECIAL_CONDITION() {
    if ((((GASTON_CANTEACHHUNTING) == (TRUE)) && ((GASTON_ALLHUNT) == (FALSE))) && ((PLAYER_TALENT_TAKEANIMALTROPHY[2]) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GASTON_HUNTING_SPECIAL_CHOICES() {
    INFO_CLEARCHOICES(0x13d2f);
    INFO_ADDCHOICE(0x13d2f, DIALOG_BACK, 0x13d33);
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[0]) == (FALSE)) {
        DUMMYFUNCWITHSTRINGPARAMETER("Wyrywanie k³ów");
        INFO_ADDCHOICE(0x13d2f, B_BUILDLEARNSTRING2(PRINT_TEACHTEETH, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_TEETH), GASTON_TEETHTROPHY), 0x13d34);
    };
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[1]) == (FALSE)) {
        DUMMYFUNCWITHSTRINGPARAMETER("Wyrywanie pazurów");
        INFO_ADDCHOICE(0x13d2f, B_BUILDLEARNSTRING2(PRINT_TEACHCLAWS, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_CLAWS), GASTON_CLAWSTROPHY), 0x13d35);
    };
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[3]) == (FALSE)) {
        DUMMYFUNCWITHSTRINGPARAMETER("Serca magicznych istot");
        INFO_ADDCHOICE(0x13d2f, B_BUILDLEARNSTRING2(PRINT_TEACHHEART, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_HEART), GASTON_HEARTTROPHY), 0x13d36);
    };
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[4]) == (FALSE)) {
        DUMMYFUNCWITHSTRINGPARAMETER("Rogi cieniostworów");
        INFO_ADDCHOICE(0x13d2f, B_BUILDLEARNSTRING2(PRINT_TEACHSHADOWHORN, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_SHADOWHORN), GASTON_SHADOWHORNTROPHY), 0x13d37);
    };
}

func void DIA_GASTON_HUNTING_SPECIAL_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_CanYouTeachMeHunting");
    AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Hunting_Special_03_01");
    DIA_GASTON_HUNTING_SPECIAL_CHOICES();
}

func void DIA_GASTON_HUNTING_SPECIAL_BACK() {
    INFO_CLEARCHOICES(0x13d2f);
    if (((((PLAYER_TALENT_TAKEANIMALTROPHY[0]) == (TRUE)) && ((PLAYER_TALENT_TAKEANIMALTROPHY[1]) == (TRUE))) && ((PLAYER_TALENT_TAKEANIMALTROPHY[3]) == (TRUE))) && ((PLAYER_TALENT_TAKEANIMALTROPHY[4]) == (TRUE))) {
        GASTON_ALLHUNT = TRUE;
        AI_OUTPUT(SELF, OTHER, "DIA_Gaston_AllHunt_03_01");
    };
}

func void DIA_GASTON_HUNTING_SPECIAL_TEETH() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_Hunting_Special_Teeth_15_01");
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (GASTON_TEETHTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[0]) == (TRUE)) {
            B_GIVEINVITEMS(OTHER, SELF, 0x859b, GASTON_TEETHTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Hunting_Special_Teeth_03_02");
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYTEETH, -(1), -(1), FONT_SCREEN, 2);
        };
    };
    if ((NPC_HASITEMS(OTHER, 0x859b)) < (GASTON_TEETHTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Hunting_Special_Teeth_03_03");
    };
    DIA_GASTON_HUNTING_SPECIAL_CHOICES();
}

func void DIA_GASTON_HUNTING_SPECIAL_CLAWS() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_Hunting_Special_Claws_15_01");
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (GASTON_CLAWSTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[1]) == (TRUE)) {
            B_GIVEINVITEMS(OTHER, SELF, 0x859b, GASTON_CLAWSTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Hunting_Special_Claws_03_02");
            AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Hunting_Special_Claws_03_03");
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYCLAWS, -(1), -(1), FONT_SCREEN, 2);
        };
    };
    if ((NPC_HASITEMS(OTHER, 0x859b)) < (GASTON_CLAWSTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Hunting_Special_Claws_03_04");
    };
    DIA_GASTON_HUNTING_SPECIAL_CHOICES();
}

func void DIA_GASTON_HUNTING_SPECIAL_HEART() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_Hunting_Special_Heart_15_01");
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (GASTON_HEARTTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[3]) == (TRUE)) {
            B_GIVEINVITEMS(OTHER, SELF, 0x859b, GASTON_HEARTTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Hunting_Special_Heart_03_02");
            AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Hunting_Special_Heart_03_03");
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYHEART, -(1), -(1), FONT_SCREEN, 2);
        };
    };
    if ((NPC_HASITEMS(OTHER, 0x859b)) < (GASTON_HEARTTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Hunting_Special_Heart_03_04");
    };
    DIA_GASTON_HUNTING_SPECIAL_CHOICES();
}

func void DIA_GASTON_HUNTING_SPECIAL_SHADOWHORN() {
    AI_OUTPUT(OTHER, SELF, "DIA_Gaston_Hunting_Special_ShadowHorn_15_01");
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (GASTON_SHADOWHORNTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[4]) == (TRUE)) {
            B_GIVEINVITEMS(OTHER, SELF, 0x859b, GASTON_SHADOWHORNTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Hunting_Special_ShadowHorn_03_02");
            AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Hunting_Special_ShadowHorn_03_03");
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYHORN, -(1), -(1), FONT_SCREEN, 2);
        };
    };
    if ((NPC_HASITEMS(OTHER, 0x859b)) < (GASTON_SHADOWHORNTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Gaston_Hunting_Special_ShadowHorn_03_04");
    };
    DIA_GASTON_HUNTING_SPECIAL_CHOICES();
}

instance DIA_GASTON_PICKPOCKET(C_INFO) {
    NPC = 0xe379;
    NR = 900;
    CONDITION = DIA_GASTON_PICKPOCKET_CONDITION;
    INFORMATION = DIA_GASTON_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_80;
}

func int DIA_GASTON_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GASTON_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(0x13d38);
    INFO_ADDCHOICE(0x13d38, DIALOG_BACK, 0x13d3c);
    INFO_ADDCHOICE(0x13d38, DIALOG_PICKPOCKET, 0x13d3b);
}

func void DIA_GASTON_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (2)) {
        CREATEINVITEMS(SELF, 0x89f6, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x89f6, 1);
        B_PICKPOCKET_AMBIENT_TIER_2();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(0x13d38);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(0x13d38);
}

func void DIA_GASTON_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(0x13d38);
}

