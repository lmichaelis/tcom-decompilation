instance DIA_WEEDFAN_EXIT(C_INFO) {
    NPC = 0xcf8e;
    NR = 999;
    CONDITION = DIA_WEEDFAN_EXIT_CONDITION;
    INFORMATION = DIA_WEEDFAN_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_WEEDFAN_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_WEEDFAN_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_WEEDFAN_NS47_WEED(C_INFO) {
    NPC = 0xcf8e;
    NR = 1;
    CONDITION = DIA_WEEDFAN_NS47_WEED_CONDITION;
    INFORMATION = DIA_WEEDFAN_NS47_WEED_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_WEEDFAN_NS47_WEED_CONDITION() {
    return TRUE;
}

func void DIA_WEEDFAN_NS47_WEED_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_WeedFan_NS47_Weed_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_WeedFan_NS47_Weed_03_02");
    INFO_CLEARCHOICES(0x11e96);
    INFO_ADDCHOICE(0x11e96, "Who needs it?", 0x11e99);
    INFO_ADDCHOICE(0x11e96, "Good idea.", 0x11e9a);
}

func void DIA_WEEDFAN_NS47_NOWEED() {
    AI_OUTPUT(OTHER, SELF, "DIA_WeedFan_NS47_NoWeed_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_WeedFan_NS47_NoWeed_03_02");
    B_GIVEPLAYERXP((XP_EVENT_JOINTSELLER) * (3));
    NPC_EXCHANGEROUTINE(SELF, "AFTEREVENT");
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_WEEDFAN_NS47_WEEDYES() {
    AI_OUTPUT(OTHER, SELF, "DIA_WeedFan_DIA_WeedFan_NS47_WeedYes_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_WeedFan_DIA_WeedFan_NS47_WeedYes_03_02");
    AI_PLAYANI(SELF, T_SEARCH);
    AI_OUTPUT(SELF, OTHER, "DIA_WeedFan_DIA_WeedFan_NS47_WeedYes_03_03");
    CREATEINVITEMS(SELF, 0x8592, 3);
    B_GIVEINVITEMS(SELF, OTHER, 0x8592, 3);
    INFO_CLEARCHOICES(0x11e96);
    INFO_ADDCHOICE(0x11e96, "Thanks.", 0x11e9b);
    INFO_ADDCHOICE(0x11e96, "Hey, that's illegal!", 0x11e9c);
}

func void DIA_WEEDFAN_NS47_SMOKEWEEDNOW() {
    AI_OUTPUT(OTHER, SELF, "DIA_WeedFan_NS47_SmokeWeedNow_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_WeedFan_NS47_SmokeWeedNow_03_02");
    B_GIVEPLAYERXP(XP_EVENT_JOINTSELLER);
    NPC_EXCHANGEROUTINE(SELF, "AFTEREVENT");
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_WEEDFAN_NS47_ITISILLEGALYOUKNOW() {
    AI_OUTPUT(OTHER, SELF, "DIA_WeedFan_NS47_ItIsIllegalYouKnow_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_WeedFan_NS47_ItIsIllegalYouKnow_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_WeedFan_NS47_ItIsIllegalYouKnow_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_WeedFan_NS47_ItIsIllegalYouKnow_03_04");
    B_GIVEPLAYERXP((XP_EVENT_JOINTSELLER) * (2));
    NPC_EXCHANGEROUTINE(SELF, "RUN");
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_WEEDFAN_AFTER_NS47(C_INFO) {
    NPC = 0xcf8e;
    NR = 5;
    CONDITION = DIA_WEEDFAN_AFTER_NS47_CONDITION;
    INFORMATION = DIA_WEEDFAN_AFTER_NS47_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_WEEDFAN_AFTER_NS47_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x11e96)) && (NPC_ISINSTATE(SELF, 0xf09f))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_WEEDFAN_AFTER_NS47_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_WeedFan_After_NS47_03_01");
    AI_STOPPROCESSINFOS(SELF);
}

