var int KICKOBJECT_01_USED = 0;
var int KICKOBJECT_02_USED = 0;
var int KICKOBJECT_03_USED = 0;
var int KICKOBJECT_04_USED = 0;
var int KICKOBJECT_05_USED = 0;
var int KICKOBJECT_ISINUSE = 0;
const int KICKOBJECT_USED = 1;
func void KICKOBJECT_BARREL() {
    Q402_ARETHEWAY = 2;
    B_STARTOTHERROUTINE(DJG_10012_ARETHE, "BARRELRUN");
    NPC_REFRESH(DJG_10012_ARETHE);
    AI_USEMOB(DJG_10012_ARETHE, NPC_GETDETECTEDMOB(DJG_10012_ARETHE), -(1));
    B_STARTOTHERROUTINE(DJG_16036_WOLFSON, "BARRELRUN");
    NPC_REFRESH(DJG_16036_WOLFSON);
    AI_USEMOB(DJG_16036_WOLFSON, NPC_GETDETECTEDMOB(DJG_16036_WOLFSON), -(1));
    KICKOBJECT_ISINUSE = TRUE;
    KICKOBJECT_01_USED = TRUE;
    SND_PLAY("DESTROY_WOOD");
    SND_PLAY("DOOR_SLAM");
    FF_APPLYONCEEXTGT(0xbeff, 0, -(1));
}

func void KICKOBJECT_STOP() {
    HERO.AIVAR[4] = FALSE;
    AI_USEMOB(HERO, NPC_GETDETECTEDMOB(HERO), -(1));
}

func void KICKOBJECT_S1() {
    HER = HLP_GETNPC(0xc3ab);
    if ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(HER))) {
        if (HLP_STRCMP(NPC_GETNEARESTWP(HERO), "WOLFSDEN_KICK_BARREL")) {
            if ((KICKOBJECT_USED) > (KICKOBJECT_01_USED)) {
                KICKOBJECT_BARREL();
            } else {
                KICKOBJECT_STOP();
            };
        };
    };
}

instance KICKOBJECT_S1.HER(C_NPC)
func void KICKOBJECT_S0() {
    KICKOBJECT_ISINUSE = FALSE;
    HERO.AIVAR[4] = FALSE;
    B_ENDPRODUCTIONDIALOG();
}

func void BARREL_KICKED() {
    if ((CHANGEKICKEDBARRELCOLLISION) == (0)) {
        PRINTD("Rozpoczynam - Barrel_Kicked");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("KM_ARETHE_01");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("KM_ARETHE_02");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("KM_PART16_BARREL_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("KM_PART16_BARREL_02", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("KM_ARETHE_01");
        WLD_SENDTRIGGER("KM_ARETHE_02");
        CHANGEKICKEDBARRELCOLLISION = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - Barrel_Kicked");
        CHANGEVOBCOLLISION("KM_PART16_BARREL_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("KM_PART16_BARREL_02", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0xbeff);
        CHANGEKICKEDBARRELCOLLISION = 0;
    };
}

var int BARREL_KICKED.CHANGEKICKEDBARRELCOLLISION = 0;
instance BARREL_KICKED.MOVER1(ZCMOVER)
instance BARREL_KICKED.MOVER2(ZCMOVER)
var int BARREL_KICKED.MOVPTR1 = 0;
var int BARREL_KICKED.MOVPTR2 = 0;
