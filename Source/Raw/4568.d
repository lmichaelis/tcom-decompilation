instance Q306_ENDFIRSTROUND(CUTSCENE) {
    ONSTART = FUNCTION(0x16947);
}

func void Q306_ENDFIRSTROUND_START() {
    Q306_LOSTWEAPONINTOURNAMENT = 0;
    WLD_SENDTRIGGER("KM_ARENAFIGHT_2_01");
    WLD_SENDTRIGGER("P17_HAVEN_ARENA_PLAYER");
    WLD_SENDTRIGGER("P17_HAVEN_ARENA_OPPONENT");
    NPC_CLEARAIQUEUE(PIR_1307_PROXIMO);
    TELEPORTNPCTOWP(0xe548, "P17_HAVEN_ARENA_SPEAKER_01");
    B_STARTOTHERROUTINE(PIR_1328_ARENAGUARD, "Tournament");
    NPC_REFRESH(PIR_1328_ARENAGUARD);
    TELEPORTNPCTOWP(0xe478, PIR_1328_ARENAGUARD.WP);
    PIR_1307_PROXIMO.AIVAR[92] = TRUE;
    AI_TURNTONPC(PIR_1307_PROXIMO, PIR_1306_RODRIGO);
    AI_OUTPUT(PIR_1307_PROXIMO, HERO, "DIA_Proximo_BeforeRound2_13_01");
    AI_OUTPUT(PIR_1307_PROXIMO, HERO, "DIA_Proximo_BeforeRound2_13_02");
    AI_FUNCTION(PIR_1307_PROXIMO, 0x16948);
}

func void Q306_ENDFIRSTROUND_END() {
    FADESCREENTOBLACKF(1, 0x16949, 1000);
}

func void Q306_TELEPORTPLAYERTOLOCKER_ROUND1() {
    PRINTD("Koniec Rundy 1");
    WLD_SENDUNTRIGGER("Q306_ARENACROWD");
    WLD_SENDUNTRIGGER("KM_ARENAFIGHT_2_01");
    WLD_SENDTRIGGER("P17_HAVEN_ARENA_PLAYER");
    WLD_SENDTRIGGER("P17_HAVEN_ARENA_OPPONENT");
    Q306_READYFORFIGHT = 0;
    Q306_FIRSTROUNDFINISH = 1;
    NPC_REFRESH(PIR_1307_PROXIMO);
    PIR_1307_PROXIMO.AIVAR[92] = FALSE;
    AI_TELEPORT(HERO, "P17_HAVEN_ARENA_INSIDE_06");
    B_STARTOTHERROUTINE(PIR_13050_OTIS_ARENA, "ArenaFightWait");
    NPC_REFRESH(PIR_13050_OTIS_ARENA);
    TELEPORTNPCTOWP(0xe52f, Q306_OPPONENT_SPAWNWP);
    HERO.AIVAR[4] = FALSE;
    FADESCREENFROMBLACK(3);
}

