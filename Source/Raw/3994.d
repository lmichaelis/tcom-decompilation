instance DIA_BODOWIN_EXIT(C_INFO) {
    NPC = 0xd9ed;
    NR = 999;
    CONDITION = DIA_BODOWIN_EXIT_CONDITION;
    INFORMATION = DIA_BODOWIN_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_BODOWIN_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_BODOWIN_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_BODOWIN_WHOAREYOU(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_WHOAREYOU_CONDITION;
    INFORMATION = DIA_BODOWIN_WHOAREYOU_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "You're Bodowin?";
}

func int DIA_BODOWIN_WHOAREYOU_CONDITION() {
    return TRUE;
}

func void DIA_BODOWIN_WHOAREYOU_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_WhoAreYou_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_WhoAreYou_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_WhoAreYou_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_WhoAreYou_03_04");
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_WhoAreYou_15_05");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_WhoAreYou_03_06");
}

instance DIA_BODOWIN_Q106_HELP(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_Q106_HELP_CONDITION;
    INFORMATION = DIA_BODOWIN_Q106_HELP_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "My brother was stung by a bloodfly.";
}

func int DIA_BODOWIN_Q106_HELP_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q106)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x12e74))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_Q106_HELP_INFO() {
    AI_STARTFACEANI(OTHER, S_SAD, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_HELP_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_HELP_15_02");
    AI_RESETFACEANI(OTHER);
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_HELP_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_HELP_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_HELP_03_05");
    INFO_CLEARCHOICES(0x12e77);
    INFO_ADDCHOICE(0x12e77, "Gold won't be a problem.", 0x12e7b);
    INFO_ADDCHOICE(0x12e77, "I thought you were friends with Kurt.", 0x12e7a);
}

func void DIA_BODOWIN_Q106_HELP_KURT() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_HELP_Kurt_15_01");
    AI_RESETFACEANI(OTHER);
    AI_STARTFACEANI(SELF, "S_HOSTILE", 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_HELP_Kurt_03_02");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_HELP_Kurt_03_03");
}

func void DIA_BODOWIN_Q106_HELP_GOLD() {
    Q106_CANUSEBOOK = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_HELP_Gold_15_01");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_HELP_Gold_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_HELP_Gold_03_03");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_HELP_Gold_03_04");
    INFO_CLEARCHOICES(0x12e77);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_Q106, LOG_Q106_BODOWIN_BOOK);
}

instance DIA_BODOWIN_Q106_BLOODFLY(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_Q106_BLOODFLY_CONDITION;
    INFORMATION = DIA_BODOWIN_Q106_BLOODFLY_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I already know what bloodfly stung my brother, it was...";
}

func int DIA_BODOWIN_Q106_BLOODFLY_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q106)) == (LOG_RUNNING)) && ((Q106_READBODOWINBOOK) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_Q106_BLOODFLY_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_Bloodfly_15_01");
    INFO_CLEARCHOICES(0x12e7c);
    INFO_ADDCHOICE(0x12e7c, "Common Bloodfly.", 0x12e80);
    INFO_ADDCHOICE(0x12e7c, "Swamp Bloodfly.", 0x12e81);
    INFO_ADDCHOICE(0x12e7c, "River Bloodfly.", 0x12e82);
}

func void DIA_BODOWIN_Q106_BLOODFLY_NEXT() {
    AI_LOOKATNPC(OTHER, SELF);
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_Bloodfly_Next_03_01");
    AI_FUNCTION(SELF, 0xf272);
    AI_WAIT(SELF, 0x3f19999a);
    AI_TURNTONPC(SELF, SCAVENGER_BODOWIN_02);
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_Bloodfly_Next_03_02");
    AI_TURNTONPC(SELF, OTHER);
    AI_STOPLOOKAT(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_Bloodfly_Next_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_FireBelt_03_01");
    CREATEINVITEMS(SELF, 0x8ba3, 1);
    B_GIVEINVITEMS(SELF, OTHER, 0x8ba3, 1);
    NPC_EXCHANGEROUTINE(SELF, "Q106_WORK");
    AI_STOPPROCESSINFOS(SELF);
    INFO_CLEARCHOICES(0x12e7c);
    AI_LOGENTRY(TOPIC_Q106, LOG_Q106_BODOWIN_FIREBELT);
}

func void DIA_BODOWIN_Q106_BLOODFLY_NORMAL() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_Bloodfly_Normal_15_01");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_Bloodfly_Normal_03_02");
    DIA_BODOWIN_Q106_BLOODFLY_NEXT();
}

func void DIA_BODOWIN_Q106_BLOODFLY_SWAMP() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_Bloodfly_Swamp_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_Bloodfly_Swamp_03_02");
    DIA_BODOWIN_Q106_BLOODFLY_NEXT();
}

func void DIA_BODOWIN_Q106_BLOODFLY_RIVER() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_Bloodfly_River_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_Bloodfly_River_03_02");
    B_GIVEPLAYERXP(XP_Q106_BLOODFLYGOODANWSER);
    DIA_BODOWIN_Q106_BLOODFLY_NEXT();
}

instance DIA_BODOWIN_Q106_SCAVENGERSGONE(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_Q106_SCAVENGERSGONE_CONDITION;
    INFORMATION = DIA_BODOWIN_Q106_SCAVENGERSGONE_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_BODOWIN_Q106_SCAVENGERSGONE_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q106)) == (LOG_RUNNING)) && ((Q106_FIGHTWITHSCAVENGERS) == (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_Q106_SCAVENGERSGONE_INFO() {
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_ScavengersGone_03_01");
    NPC_EXCHANGEROUTINE(SELF, "AtWork");
    INFO_CLEARCHOICES(0x12e83);
    INFO_ADDCHOICE(0x12e83, "Yeah, what about those ingredients?", 0x12e89);
    INFO_ADDCHOICE(0x12e83, "What happened to those scavengers?", 0x12e8a);
}

var int BODOWIN_Q106_POTIONMAKING = 0;
var int BODOWIN_Q106_POTIONMAKING_DAY = 0;
func void DIA_BODOWIN_Q106_SCAVENGERSGONE_NEXT() {
    BODOWIN_Q106_POTIONMAKING = TRUE;
    BODOWIN_Q106_POTIONMAKING_DAY = WLD_GETDAY();
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_ScavengersGone_Next_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_ScavengersGone_Next_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_ScavengersGone_Next_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_ScavengersGone_Next_03_04");
    INFO_CLEARCHOICES(0x12e83);
    CREATEINVITEMS(SELF, 0x90c9, 3);
    B_GIVEINVITEMS(SELF, OTHER, 0x90c9, 3);
    AI_LOGENTRY(TOPIC_Q106, LOG_Q106_BODOWIN_WAIT);
    LOG_CREATETOPIC(TOPIC_Q107, LOG_MISSION);
    LOG_SETSTATUS(_@(MIS_Q107), TOPIC_Q107, LOG_RUNNING);
    AI_LOGENTRY(TOPIC_Q107, LOG_Q107_BEGINNING);
}

func void DIA_BODOWIN_Q106_SCAVENGERSGONE_YES() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_ScavengersGone_Yes_15_01");
    DIA_BODOWIN_Q106_SCAVENGERSGONE_NEXT();
}

func void DIA_BODOWIN_Q106_SCAVENGERSGONE_WHAT() {
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_ScavengersGone_What_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_ScavengersGone_What_03_02");
    AI_STARTFACEANI(SELF, S_DOUBT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_ScavengersGone_What_03_03");
    DIA_BODOWIN_Q106_SCAVENGERSGONE_NEXT();
}

instance DIA_BODOWIN_Q107_FINISH(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_Q107_FINISH_CONDITION;
    INFORMATION = DIA_BODOWIN_Q107_FINISH_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I distributed all the notices.";
}

func int DIA_BODOWIN_Q107_FINISH_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q107)) == (LOG_RUNNING)) && ((Q107_SILBACH_POSTER_COUNTS) >= (3))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_Q107_FINISH_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q107_Finish_15_01");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q107_Finish_03_02");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q107_Finish_03_03");
    AI_LOGENTRY(TOPIC_Q107, LOG_Q107_FINISH);
    LOG_SETSTATUS(_@(MIS_Q107), TOPIC_Q107, LOG_SUCCESS);
    B_GIVEPLAYERXP(XP_Q107_FINISH);
    CREATEINVITEMS(SELF, 0x8623, 1);
    B_GIVEINVITEMS(SELF, OTHER, 0x8623, 1);
    CREATEINVITEMS(SELF, 0x8632, 1);
    B_GIVEINVITEMS(SELF, OTHER, 0x8632, 1);
}

instance DIA_BODOWIN_GOTYOURPACKET(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_GOTYOURPACKET_CONDITION;
    INFORMATION = DIA_BODOWIN_GOTYOURPACKET_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I think this package belongs to you.";
}

func int DIA_BODOWIN_GOTYOURPACKET_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q107)) == (LOG_SUCCESS)) && ((NPC_HASITEMS(OTHER, 0x9066)) >= (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_GOTYOURPACKET_INFO() {
    B_GIVEINVITEMS(OTHER, SELF, 0x9066, 1);
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_GotYourPacket_15_01");
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_GotYourPacket_03_02");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_GotYourPacket_03_03");
    CREATEINVITEMS(SELF, 0x8647, 1);
    NPC_REMOVEINVITEM(SELF, 0x9066);
    B_GIVEPLAYERXP(XP_EVENT_FOUNDBODOWINPACKET);
    B_GIVEINVITEMS(SELF, OTHER, 0x8647, 1);
}

instance DIA_BODOWIN_Q106_POTIONREADY(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_Q106_POTIONREADY_CONDITION;
    INFORMATION = DIA_BODOWIN_Q106_POTIONREADY_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "When will the potion be ready?";
}

func int DIA_BODOWIN_Q106_POTIONREADY_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_Q106)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x12e83))) && ((BODOWIN_Q106_POTIONMAKING) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_Q106_POTIONREADY_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_PotionReady_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    if (((BODOWIN_Q106_POTIONMAKING_DAY) <= ((WLD_GETDAY()) - (1))) || ((LOG_GETSTATUS(MIS_Q107)) == (LOG_SUCCESS))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_PotionReady_03_02");
        AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_PotionReady_03_03");
        AI_RESETFACEANI(SELF);
        INFO_CLEARCHOICES(0x12e91);
        INFO_ADDCHOICE(0x12e91, "Okay, give me that.", 0x12e95);
        INFO_ADDCHOICE(0x12e91, "But it's a potion for my brother, why should I drink it?", 0x12e94);
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_PotionReady_03_04");
}

func void DIA_BODOWIN_Q106_POTIONREADY_WHY() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_PotionReady_Why_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_PotionReady_Why_03_02");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

func void DIA_BODOWIN_Q106_POTIONREADY_GIVE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_PotionReady_Give_15_01");
    B_MARVIN_USEFAKEJORNPOTION();
    B_HEALNPC_OTHER();
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_PotionReady_Give_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_PotionReady_Give_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_PotionReady_Give_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_PotionReady_Give_15_05");
    AI_FUNCTION(OTHER, 0xf273);
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_PotionReady_Give_15_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_PotionReady_Give_03_07");
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_PotionReady_Give_15_08");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_PotionReady_Give_03_09");
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_PotionReady_Give_15_10");
    INFO_CLEARCHOICES(0x12e91);
    AI_STOPPROCESSINFOS(SELF);
    AI_WAITTILLEND(SELF, OTHER);
    AI_PLAYANI(OTHER, "T_STAND_2_VICTIM_SLE");
    AI_FUNCTION(SELF, 0x12e96);
}

func void BODOWIN_DRINKINGPOTION() {
    FADESCREENTOBLACKF(5, 0x12e97, 0x6a4);
}

func void BODOWIN_DRINKINGPOTION_FADESCREEN() {
    if ((NPC_HASITEMS(HERO, 0x8ba3)) >= (1)) {
        NPC_REMOVEINVITEM(SELF, 0x8ba3);
    };
    BODOWIN_Q106_POTIONMAKING = 2;
    AI_STOPPROCESSINFOS(HERO);
    B_SETNPCVISUAL(VLK_2261_BODOWIN, MALE, HUMHEADBALD, FACE_N_BODOWIN, 1, 0x8ada);
    NPC_REMOVEINVITEM(VLK_2261_BODOWIN, 0x8a3f);
    B_PASSTIME(4);
    AI_TELEPORT(HERO, "PART3_BODOWINHOUSE_BED");
    HERO.AIVAR[4] = FALSE;
    FADESCREENFROMBLACK(3);
}

instance DIA_BODOWIN_Q106_GIVEPOTION(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_Q106_GIVEPOTION_CONDITION;
    INFORMATION = DIA_BODOWIN_Q106_GIVEPOTION_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_BODOWIN_Q106_GIVEPOTION_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q106)) == (LOG_RUNNING)) && ((BODOWIN_Q106_POTIONMAKING) == (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int BODOWIN_CANTEACHUS = 0;
func void DIA_BODOWIN_Q106_GIVEPOTION_INFO() {
    BODOWIN_CANTEACHUS = TRUE;
    AI_STARTFACEANI(OTHER, S_TIRED, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_GivePotion_15_01");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_03_02");
    AI_RESETFACEANI(OTHER);
    INFO_CLEARCHOICES(0x12e98);
    INFO_ADDCHOICE(0x12e98, "Can you give me a potion for my brother already?", 0x12e9e);
    INFO_ADDCHOICE(0x12e98, "More experiments?", 0x12e9d);
    INFO_ADDCHOICE(0x12e98, "How long was I unconscious?", 0x12e9c);
}

func void DIA_BODOWIN_Q106_GIVEPOTION_LONG() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_GivePotion_Long_15_01");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_Long_03_02");
}

func void DIA_BODOWIN_Q106_GIVEPOTION_MORE() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_GivePotion_More_15_01");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_More_03_02");
}

func void DIA_BODOWIN_Q106_GIVEPOTION_GIVE() {
    AI_LOOKATNPC(OTHER, SELF);
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_GivePotion_Give_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_STARTFACEANI(SELF, S_THINK, 1, -(1));
    AI_SETWALKMODE(SELF, NPC_RUN);
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_Give_03_02");
    AI_PLAYANI(SELF, T_SEARCH);
    AI_RESETFACEANI(SELF);
    AI_GOTOWP(SELF, "PART3_BODOWINHOUSE_BOOKSHELF");
    AI_WAITTILLEND(OTHER, SELF);
    AI_TURNTONPC(OTHER, SELF);
    AI_PLAYANI(SELF, T_PLUNDER);
    AI_TURNTONPC(SELF, OTHER);
    AI_GOTONPC(SELF, OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_Give_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_Give_03_04");
    AI_STOPLOOKAT(OTHER);
    INFO_CLEARCHOICES(0x12e98);
    INFO_ADDCHOICE(0x12e98, "How much?", 0x12ea0);
}

var int BODOWIN_Q106_POTIONPRICE = 0;
func void DIA_BODOWIN_Q106_GIVEPOTION_GIVE_HOWMANYGOLD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_GivePotion_HowManyGold_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_STARTFACEANI(SELF, S_THINK, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_HowManyGold_03_02");
    AI_PLAYANI(SELF, T_STAND_2_COUNTING);
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_HowManyGold_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_HowManyGold_03_04");
    if ((LOG_GETSTATUS(MIS_Q107)) == (LOG_SUCCESS)) {
        BODOWIN_Q106_POTIONPRICE = 1;
        AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_HowManyGold_03_05");
        AI_RESETFACEANI(SELF);
        AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_HowManyGold_03_06");
    };
    BODOWIN_Q106_POTIONPRICE = 2;
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_HowManyGold_03_07");
    AI_PLAYANI(SELF, T_COUNTING_2_STAND);
    INFO_CLEARCHOICES(0x12e98);
    if ((((BODOWIN_Q106_POTIONPRICE) == (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= (Q106_JORNPOTION_V2))) || (((BODOWIN_Q106_POTIONPRICE) == (2)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= (Q106_JORNPOTION_V1)))) {
        INFO_ADDCHOICE(0x12e98, "Here's your gold.", 0x12ea2);
    };
    INFO_ADDCHOICE(0x12e98, "I don't have that much gold.", 0x12ea3);
    INFO_ADDCHOICE(0x12e98, "Is this your final offer?", 0x12ea5);
}

func void DIA_BODOWIN_Q106_GIVEPOTION_END() {
    B_GIVEPLAYERXP(XP_Q106_FINISH);
    Q106_GOTJORNPOTION = 1;
    CREATEINVITEMS(SELF, 0x90cc, 1);
    B_GIVEINVITEMS(SELF, OTHER, 0x90cc, 1);
    Q106_KURTHOUSE();
    INFO_CLEARCHOICES(0x12e98);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_Q106, LOG_Q106_BODOWIN_GOTPOTION);
    NPC_EXCHANGEROUTINE(SELF, START);
}

func void DIA_BODOWIN_Q106_GIVEPOTION_GIVE_HOWMANYGOLD_PAY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_GivePotion_Pay_15_01");
    Q106_PAYGOLD();
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_Pay_03_02");
    DIA_BODOWIN_Q106_GIVEPOTION_END();
}

func void DIA_BODOWIN_Q106_GIVEPOTION_GIVE_HOWMANYGOLD_NOGOLD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_GivePotion_NoGold_15_01");
    AI_STARTFACEANI(SELF, "S_HOSTILE", 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_NoGold_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_NoGold_03_03");
    MARVINCURRENTGOLD = NPC_HASITEMS(OTHER, 0x859b);
    B_GIVEINVITEMS(OTHER, SELF, 0x859b, MARVINCURRENTGOLD);
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_NoGold_03_04");
    DIA_BODOWIN_Q106_GIVEPOTION_END();
}

var int DIA_BODOWIN_Q106_GIVEPOTION_GIVE_HOWMANYGOLD_NOGOLD.MARVINCURRENTGOLD = 0;
func void DIA_BODOWIN_Q106_GIVEPOTION_GIVE_HOWMANYGOLD_LETSTALK() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_Q106_GivePotion_LetsTalk_15_01");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Q106_GivePotion_LetsTalk_03_02");
}

instance DIA_BODOWIN_FAQ002_BUSY(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_FAQ002_BUSY_CONDITION;
    INFORMATION = DIA_BODOWIN_FAQ002_BUSY_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_BODOWIN_FAQ002_BUSY_CONDITION() {
    if ((LOG_GETSTATUS(MIS_FAQ002)) == (LOG_RUNNING)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int BODOWIN_FAQ002_CANTHELP = 0;
var int BODOWIN_FAQ002_BUSY_PROBLEM = 0;
var int BODOWIN_FAQ002_BUSY_PROBLEM_ROF = 0;
var int BODOWIN_FAQ002_BUSY_ARAXOS = 0;
func void DIA_BODOWIN_FAQ002_BUSY_CHOICES() {
    INFO_CLEARCHOICES(0x12ea6);
    if ((BODOWIN_FAQ002_BUSY_PROBLEM) == (FALSE)) {
        INFO_ADDCHOICE(0x12ea6, "News of your conflict spread quickly through the city.", 0x12eaf);
    };
    if ((BODOWIN_FAQ002_BUSY_PROBLEM_ROF) == (FALSE)) {
        INFO_ADDCHOICE(0x12ea6, "Do you remember what the 'snot' looked like and how was he called?", 0x12eb2);
    };
    if ((BODOWIN_FAQ002_BUSY_ARAXOS) == (FALSE)) {
        INFO_ADDCHOICE(0x12ea6, "I am sent by the Araxos Guild.", 0x12eb0);
        INFO_ADDCHOICE(0x12ea6, "You guessed it, Ernesto sent me.", 0x12eb1);
    };
    INFO_ADDCHOICE(0x12ea6, "The kind that makes you forget the whole thing or... (Intimidate)", 0x12eb3);
    INFO_ADDCHOICE(0x12ea6, "Why don't I just look for those herbs for you?", 0x12eb4);
}

func void DIA_BODOWIN_FAQ002_BUSY_BADENDING() {
    INFO_CLEARCHOICES(0x12ea6);
    if ((FAQ002_KAFINFORMATION) == (2)) {
        AI_LOGENTRY(TOPIC_FAQ002, LOG_FAQ002_BODOWIN_NOTRADE_V1);
    };
    AI_LOGENTRY(TOPIC_FAQ002, LOG_FAQ002_BODOWIN_NOTRADE_V2);
}

func void DIA_BODOWIN_FAQ002_BUSY_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_FAQ002_Busy_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_03_03");
    DIA_BODOWIN_FAQ002_BUSY_CHOICES();
}

func void DIA_BODOWIN_FAQ002_BUSY_PROBLEM() {
    BODOWIN_FAQ002_BUSY_PROBLEM = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_FAQ002_Busy_Problem_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Problem_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Problem_03_03");
    DIA_BODOWIN_FAQ002_BUSY_CHOICES();
}

func void DIA_BODOWIN_FAQ002_BUSY_ARAXOS() {
    BODOWIN_FAQ002_BUSY_ARAXOS = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_FAQ002_Busy_Araxos_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Araxos_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_FAQ002_Busy_Araxos_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Araxos_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Araxos_03_05");
    DIA_BODOWIN_FAQ002_BUSY_CHOICES();
}

func void DIA_BODOWIN_FAQ002_BUSY_ERNESTO() {
    BODOWIN_FAQ002_CANTHELP = TRUE;
    FAQ002_BODOWINTRADEARAXOSSTATUS = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_FAQ002_Busy_Ernesto_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Ernesto_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Ernesto_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Ernesto_03_04");
    DIA_BODOWIN_FAQ002_BUSY_BADENDING();
}

func void DIA_BODOWIN_FAQ002_BUSY_PROBLEM_ROF() {
    BODOWIN_FAQ002_BUSY_PROBLEM_ROF = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_FAQ002_Busy_Rof_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Rof_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_FAQ002_Busy_Rof_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Rof_03_04");
    FAQ002_HEROKNOWROFNAME = TRUE;
    AI_LOGENTRY(TOPIC_FAQ002, LOG_FAQ002_BODOWIN_KAF);
    DIA_BODOWIN_FAQ002_BUSY_CHOICES();
}

func void DIA_BODOWIN_FAQ002_BUSY_ARAXOS_SCARE() {
    BODOWIN_FAQ002_CANTHELP = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_FAQ002_Busy_Scare_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Scare_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Scare_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Scare_03_04");
    DIA_BODOWIN_FAQ002_BUSY_BADENDING();
}

func void DIA_BODOWIN_FAQ002_BUSY_ARAXOS_SEARCH() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_FAQ002_Busy_Search_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Search_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_Busy_Search_03_03");
    INFO_CLEARCHOICES(0x12ea6);
    AI_LOGENTRY(TOPIC_FAQ002, LOG_FAQ002_BODOWIN_SEARCHHERB);
}

instance DIA_BODOWIN_FAQ002_GOTHERBS(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_FAQ002_GOTHERBS_CONDITION;
    INFORMATION = DIA_BODOWIN_FAQ002_GOTHERBS_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I brought you the herbs you asked for.";
}

func int DIA_BODOWIN_FAQ002_GOTHERBS_CONDITION() {
    if ((LOG_GETSTATUS(MIS_FAQ002)) == (LOG_RUNNING)) {
        if ((NPC_KNOWSINFO(OTHER, 0x12ea6)) && ((BODOWIN_FAQ002_CANTHELP) == (FALSE))) {
            if (((NPC_HASITEMS(OTHER, 0x85e8)) >= (10)) || ((NPC_HASITEMS(OTHER, 0x85ea)) >= (10))) {
                return TRUE;
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_FAQ002_GOTHERBS_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_FAQ002_GotHerbs_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_GotHerbs_03_02");
    if ((NPC_HASITEMS(OTHER, 0x85e8)) >= (10)) {
    };
    if ((NPC_HASITEMS(OTHER, 0x85ea)) >= (10)) {
        B_GIVEINVITEMS(OTHER, SELF, 0x85ea, 10);
    };
    B_GIVEPLAYERXP(XP_FAQ002_BODOWINHERBS);
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_FAQ002_GotHerbs_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_GotHerbs_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_FAQ002_GotHerbs_03_05");
    FAQ002_BODOWINTRADEARAXOSSTATUS = 2;
    if ((FAQ002_KAFINFORMATION) == (2)) {
        AI_LOGENTRY(TOPIC_FAQ002, LOG_FAQ002_BODOWIN_SUCCESS_V1);
    };
    AI_LOGENTRY(TOPIC_FAQ002, LOG_FAQ002_BODOWIN_SUCCESS_V2);
}

instance DIA_BODOWIN_QM302_PLANTS(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_QM302_PLANTS_CONDITION;
    INFORMATION = DIA_BODOWIN_QM302_PLANTS_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I need herbs to maintain crossbows.";
}

func int DIA_BODOWIN_QM302_PLANTS_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QM302)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x120ee))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_QM302_PLANTS_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_QM302_Plants_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_QM302_Plants_03_02");
    AI_STARTFACEANI(OTHER, S_TIRED, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_QM302_Plants_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_QM302_Plants_03_04");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    INFO_CLEARCHOICES(0x12eb8);
    INFO_ADDCHOICE(0x12eb8, "It's too much.", 0x12ebe);
    INFO_ADDCHOICE(0x12eb8, "I will pay. (100 GP)", 0x12ebb);
}

func void DIA_BODOWIN_QM302_PLANTS_PAY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_QM302_Plants_Pay_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_QM302_Plants_Pay_03_02");
    CREATEINVITEMS(SELF, 0x916c, 1);
    B_GIVEINVITEMS(SELF, OTHER, 0x916c, 1);
    INFO_CLEARCHOICES(0x12eb8);
    INFO_ADDCHOICE(0x12eb8, "Did you know you have scavenger in the garden again?", 0x12ec0);
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (QM302_BODOWINPRICE)) {
        INFO_ADDCHOICE(0x12eb8, "(Pay)", 0x12ebf);
    };
    INFO_CLEARCHOICES(0x12ec1);
    INFO_ADDCHOICE(0x12ec1, "Did you know you have scavenger in the garden again?", 0x12ec0);
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (QM302_BODOWINPRICE)) {
        INFO_ADDCHOICE(0x12ec1, "(Pay)", 0x12ebf);
    };
}

var int BODOWIN_QM302_PAYGOLD = 0;
var int BODOWIN_QM302_SCAVENGER = 0;
func void DIA_BODOWIN_QM302_PLANTS_TOOMUCH() {
    BODOWIN_QM302_PAYGOLD = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_QM302_Plants_TooMuch_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_QM302_Plants_TooMuch_03_02");
    INFO_CLEARCHOICES(0x12eb8);
}

func void DIA_BODOWIN_QM302_PLANTS_PAY_GIVEGOLD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_QM302_Plants_GiveGold_15_01");
    B_GIVEINVITEMS(OTHER, SELF, 0x859b, QM302_BODOWINPRICE);
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_QM302_Plants_GiveGold_03_02");
    AI_LOGENTRY(TOPIC_QM302, LOG_QM302_BODOWIN_PAIDFORPLANTS);
    INFO_CLEARCHOICES(0x12eb8);
    INFO_CLEARCHOICES(0x12ec1);
    INFO_CLEARCHOICES(0x12ec4);
}

func void DIA_BODOWIN_QM302_PLANTS_PAY_SCAVENGER() {
    BODOWIN_QM302_SCAVENGER = TRUE;
    AI_STARTFACEANI(OTHER, S_SURPRISE, 1, -(1));
    AI_STARTFACEANI(SELF, T_HURT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_QM302_Plants_Scavenger_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_QM302_Plants_Scavenger_03_02");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    INFO_CLEARCHOICES(0x12eb8);
    INFO_CLEARCHOICES(0x12ec1);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "QM302_SCAVENGER");
    AI_LOGENTRY(TOPIC_QM302, LOG_QM302_BODOWIN_SCAVENGER);
}

instance DIA_BODOWIN_QM302_PAYGOLD(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_QM302_PAYGOLD_CONDITION;
    INFORMATION = DIA_BODOWIN_QM302_PAYGOLD_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I'll pay for the herbs. (100 GP)";
}

func int DIA_BODOWIN_QM302_PAYGOLD_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_QM302)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x12eb8))) && ((BODOWIN_QM302_PAYGOLD) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_QM302_PAYGOLD_INFO() {
    DIA_BODOWIN_QM302_PLANTS_PAY();
}

instance DIA_BODOWIN_QM302_THIEF(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_QM302_THIEF_CONDITION;
    INFORMATION = DIA_BODOWIN_QM302_THIEF_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_BODOWIN_QM302_THIEF_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_QM302)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x12eb8))) && ((NPC_GETDISTTOWP(SELF, "PART3_BODOWINHOUSE_GARDEN_PATH02")) <= (500))) && ((BODOWIN_QM302_SCAVENGER) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_QM302_THIEF_INFO() {
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_QM302_Thief_03_01");
    AI_STARTFACEANI(OTHER, S_SURPRISE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_QM302_Thief_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_QM302_Thief_03_03");
    AI_RESETFACEANI(OTHER);
    INFO_CLEARCHOICES(0x12ec4);
    INFO_ADDCHOICE(0x12ec4, "Of course I did. You think I'm some kind of thief?", 0x12ec8);
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (QM302_BODOWINPRICE)) {
        INFO_ADDCHOICE(0x12ec4, "Not yet. Here's the money.", 0x12ec7);
    };
}

func void DIA_BODOWIN_QM302_THIEF_NO() {
    DIA_BODOWIN_QM302_PLANTS_PAY_GIVEGOLD();
}

func void DIA_BODOWIN_QM302_THIEF_YES() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_QM302_Thief_Yes_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_QM302_Thief_Yes_03_02");
    AI_LOGENTRY(TOPIC_QM302, LOG_QM302_BODOWIN_SCAVENGER_PAIDFORPLANTS);
    INFO_CLEARCHOICES(0x12ec4);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, START);
}

instance DIA_BODOWIN_KQ402_RUST(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_KQ402_RUST_CONDITION;
    INFORMATION = DIA_BODOWIN_KQ402_RUST_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Any idea how to get the rust effect?";
}

func int DIA_BODOWIN_KQ402_RUST_CONDITION() {
    if (((LOG_GETSTATUS(MIS_KQ402)) == (LOG_RUNNING)) && ((KQ402_ALCHEMIC) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_KQ402_RUST_INFO() {
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_KQ402_Rust_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_KQ402_Rust_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_KQ402_Rust_03_03");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_KQ402_Rust_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_KQ402_Rust_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_KQ402_Rust_03_06");
    AI_RESETFACEANI(SELF);
    AI_LOGENTRY(TOPIC_KQ402, LOG_KQ402_BODOWIN_RUST);
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_BODOWIN_SQ509_HELLO(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_SQ509_HELLO_CONDITION;
    INFORMATION = DIA_BODOWIN_SQ509_HELLO_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_BODOWIN_SQ509_HELLO_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ509)) == (LOG_RUNNING)) && ((SQ509_BODOWINDIARY_01_READ) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_SQ509_STOPADDCHOICE() {
    INFO_ADDCHOICE(0x12ecc, "Stop pretending, I already know everything.", 0x12ed2);
}

func void DIA_BODOWIN_SQ509_HELLO_INFO() {
    if ((LOG_GETSTATUS(MIS_Q107)) == (LOG_RUNNING)) {
        LOG_SETSTATUS(_@(MIS_Q107), TOPIC_Q107, LOG_FAILED);
        B_LOGENTRY(TOPIC_Q107, LOG_Q107_VZ_FAIL);
    };
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_Hello_03_01");
    INFO_CLEARCHOICES(0x12ecc);
    DIA_BODOWIN_SQ509_STOPADDCHOICE();
    INFO_ADDCHOICE(0x12ecc, "It's not what you think!", 0x12ed1);
    INFO_ADDCHOICE(0x12ecc, "I've been looking for you, it's about those weird scavengers.", 0x12ed0);
}

func void DIA_BODOWIN_SQ509_HELLO_LOOKING() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_SQ509_Hello_Looking_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_Hello_Looking_03_02");
    INFO_CLEARCHOICES(0x12ecc);
    DIA_BODOWIN_SQ509_STOPADDCHOICE();
}

func void DIA_BODOWIN_SQ509_HELLO_NOTLIKE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_SQ509_Hello_NotLike_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_Hello_NotLike_03_02");
    INFO_CLEARCHOICES(0x12ecc);
    DIA_BODOWIN_SQ509_STOPADDCHOICE();
}

func void DIA_BODOWIN_SQ509_HELLO_STOP() {
    VLK_2261_BODOWIN.AIVAR[96] = 10;
    VLK_2261_BODOWIN.FLAGS = NPC_FLAG_IMPORTANT;
    AI_STARTFACEANI(OTHER, S_SERIOUS, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_SQ509_Hello_Stop_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_Hello_Stop_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_Hello_Stop_03_03");
    AI_RESETFACEANI(OTHER);
    B_USEFAKESQ509POTION_BODOWIN();
    INFO_CLEARCHOICES(0x12ecc);
    AI_STOPPROCESSINFOS(SELF);
    B_ATTACK(SELF, OTHER, AR_KILL, 1);
}

instance DIA_BODOWIN_SQ509_LASTSTAND(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_SQ509_LASTSTAND_CONDITION;
    INFORMATION = DIA_BODOWIN_SQ509_LASTSTAND_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_BODOWIN_SQ509_LASTSTAND_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ509)) == (LOG_RUNNING)) && ((SQ509_POTIONINUSE) == (3))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int BODOWIN_SQ509_LASTSTAND_KNOW = 0;
var int BODOWIN_SQ509_LASTSTAND_ME = 0;
func void DIA_BODOWIN_SQ509_LASTSTAND_CHOICES() {
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
    INFO_CLEARCHOICES(0x12ed3);
    if ((SQ509_BODOWINDIARY_04_READ) == (TRUE)) {
        if ((BODOWIN_SQ509_LASTSTAND_ME) == (FALSE)) {
            INFO_ADDCHOICE(0x12ed3, "You experimented on me!", 0x12ee2);
        };
    };
    if ((BODOWIN_SQ509_LASTSTAND_KNOW) == (FALSE)) {
        INFO_ADDCHOICE(0x12ed3, "Tell me what you know about these scavengers and plants.", 0x12ee1);
    };
}

func void DIA_BODOWIN_SQ509_LASTSTAND_LASTCHOICE() {
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Next_03_01");
    INFO_CLEARCHOICES(0x12ed3);
    INFO_ADDCHOICE(0x12ed3, "You deserve to die. (Kill)", 0x12eec);
    INFO_ADDCHOICE(0x12ed3, "I won't kill you, but you are to leave Archolos forever.", 0x12eea);
    INFO_ADDCHOICE(0x12ed3, "I will spare your life, but you will never do these experiments again.", 0x12ee9);
}

func void DIA_BODOWIN_SQ509_LASTSTAND_PROGRESS() {
    if ((SQ509_BODOWINDIARY_04_READ) == (TRUE)) {
        if (((BODOWIN_SQ509_LASTSTAND_KNOW) == (FALSE)) || ((BODOWIN_SQ509_LASTSTAND_ME) == (FALSE))) {
            DIA_BODOWIN_SQ509_LASTSTAND_CHOICES();
        } else {
            DIA_BODOWIN_SQ509_LASTSTAND_LASTCHOICE();
        } else {
            /* set_instance(0) */;
        };
    };
    if ((BODOWIN_SQ509_LASTSTAND_KNOW) == (FALSE)) {
        DIA_BODOWIN_SQ509_LASTSTAND_CHOICES();
    };
    DIA_BODOWIN_SQ509_LASTSTAND_LASTCHOICE();
}

func void DIA_BODOWIN_SQ509_LASTSTAND_INFO() {
    CREATEINVITEMS(SELF, 0x934e, 1);
    CREATEINVITEMS(SELF, 0x9352, 1);
    CREATEINVITEMS(SELF, 0x8647, 1);
    CREATEINVITEMS(SELF, 0x9029, 1);
    AI_STARTFACEANI(SELF, S_FRIGHTENED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_03_02");
    DIA_BODOWIN_SQ509_LASTSTAND_PROGRESS();
}

var int BODOWIN_SQ509_LASTSTAND_KNOW_WHO = 0;
var int BODOWIN_SQ509_LASTSTAND_KNOW_POTION = 0;
var int BODOWIN_SQ509_LASTSTAND_KNOW_NOTES = 0;
func void DIA_BODOWIN_SQ509_LASTSTAND_KNOW_CHOICES() {
    AI_RESETFACEANI(OTHER);
    INFO_CLEARCHOICES(0x12ed3);
    if ((BODOWIN_SQ509_LASTSTAND_KNOW_WHO) == (FALSE)) {
        INFO_ADDCHOICE(0x12ed3, "What is the test object you wrote about?", 0x12ee4);
    };
    if ((BODOWIN_SQ509_LASTSTAND_KNOW_POTION) == (FALSE)) {
        INFO_ADDCHOICE(0x12ed3, "What potion did you want to create?", 0x12ee5);
    };
    if ((SQ509_INSIDEBODOWINHOUSE_SCROLLS) == (TRUE)) {
        if ((BODOWIN_SQ509_LASTSTAND_KNOW_NOTES) == (FALSE)) {
            INFO_ADDCHOICE(0x12ed3, "Where did you get the letter with the royal seal?", 0x12ee6);
        };
    };
}

var int BODOWIN_SQ509_LASTSTAND_COUNTPOINT = 0;
func void DIA_BODOWIN_SQ509_LASTSTAND_KNOW_PROGGRES() {
    if ((SQ509_INSIDEBODOWINHOUSE_SCROLLS) == (TRUE)) {
        if ((BODOWIN_SQ509_LASTSTAND_COUNTPOINT) == (3)) {
            BODOWIN_SQ509_LASTSTAND_KNOW = TRUE;
            DIA_BODOWIN_SQ509_LASTSTAND_PROGRESS();
        } else {
            DIA_BODOWIN_SQ509_LASTSTAND_KNOW_CHOICES();
        } else {
            /* set_instance(0) */;
        };
    };
    if ((BODOWIN_SQ509_LASTSTAND_COUNTPOINT) == (2)) {
        BODOWIN_SQ509_LASTSTAND_KNOW = TRUE;
        DIA_BODOWIN_SQ509_LASTSTAND_PROGRESS();
    };
    DIA_BODOWIN_SQ509_LASTSTAND_KNOW_CHOICES();
}

func void DIA_BODOWIN_SQ509_LASTSTAND_KNOW() {
    AI_STARTFACEANI(OTHER, S_SERIOUS, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_SQ509_LastStand_Know_15_01");
    AI_STARTFACEANI(SELF, S_NOPE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Know_03_02");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Know_03_03");
    AI_STARTFACEANI(SELF, S_NOPE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Know_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Know_03_05");
    AI_RESETFACEANI(OTHER);
    DIA_BODOWIN_SQ509_LASTSTAND_KNOW_PROGGRES();
}

func void DIA_BODOWIN_SQ509_LASTSTAND_ME() {
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_SQ509_LastStand_Me_15_01");
    AI_STARTFACEANI(SELF, S_FRIGHTENED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Me_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Me_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Me_03_04");
    INFO_CLEARCHOICES(0x12ed3);
    INFO_ADDCHOICE(0x12ed3, "My brother.", 0x12ee3);
}

func void DIA_BODOWIN_SQ509_LASTSTAND_ME_BROTHER() {
    BODOWIN_SQ509_LASTSTAND_ME = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_SQ509_LastStand_Brother_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Brother_03_02");
    DIA_BODOWIN_SQ509_LASTSTAND_PROGRESS();
}

func void DIA_BODOWIN_SQ509_LASTSTAND_KNOW_WHO() {
    BODOWIN_SQ509_LASTSTAND_KNOW_WHO = TRUE;
    BODOWIN_SQ509_LASTSTAND_COUNTPOINT = (BODOWIN_SQ509_LASTSTAND_COUNTPOINT) + (1);
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_SQ509_LastStand_Who_15_01");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Who_03_02");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Who_03_03");
    DIA_BODOWIN_SQ509_LASTSTAND_KNOW_PROGGRES();
}

func void DIA_BODOWIN_SQ509_LASTSTAND_KNOW_POTION() {
    BODOWIN_SQ509_LASTSTAND_KNOW_POTION = TRUE;
    BODOWIN_SQ509_LASTSTAND_COUNTPOINT = (BODOWIN_SQ509_LASTSTAND_COUNTPOINT) + (1);
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_SQ509_LastStand_Potion_15_01");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Potion_03_02");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Potion_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Potion_03_04");
    AI_RESETFACEANI(SELF);
    DIA_BODOWIN_SQ509_LASTSTAND_KNOW_PROGGRES();
}

func void DIA_BODOWIN_SQ509_LASTSTAND_KNOW_NOTES() {
    BODOWIN_SQ509_LASTSTAND_KNOW_NOTES = TRUE;
    BODOWIN_SQ509_LASTSTAND_COUNTPOINT = (BODOWIN_SQ509_LASTSTAND_COUNTPOINT) + (1);
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_SQ509_LastStand_Notes_15_01");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Notes_03_02");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Notes_03_03");
    DIA_BODOWIN_SQ509_LASTSTAND_KNOW_PROGGRES();
}

func void DIA_BODOWIN_SQ509_LASTSTAND_MAGES() {
    AI_STARTFACEANI(OTHER, S_SERIOUS, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_SQ509_LastStand_Stop_15_02");
}

func void DIA_BODOWIN_SQ509_LASTSTAND_THANKYOU() {
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Stop_03_04");
}

func void DIA_BODOWIN_SQ509_LASTSTAND_ME_BROTHER_NEXT_STOP() {
    B_HEALNPC_SELF();
    SELF.FLAGS = 2;
    FINALBOARDS_BODOWINSTATUS = 1;
    SQ509_BODOWINRESULT = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_SQ509_LastStand_Stop_15_01");
    DIA_BODOWIN_SQ509_LASTSTAND_MAGES();
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Stop_03_03");
    DIA_BODOWIN_SQ509_LASTSTAND_THANKYOU();
    BODOWIN_SQ509_GIVEREWARD();
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    NPC_EXCHANGEROUTINE(SELF, START);
    AI_LOGENTRY(TOPIC_SQ509, LOG_SQ509_BODOWINRESULT_V1);
    INFO_CLEARCHOICES(0x12ed3);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_BODOWIN_SQ509_LASTSTAND_ME_BROTHER_NEXT_FLEE() {
    B_HEALNPC_SELF();
    SELF.FLAGS = 2;
    FINALBOARDS_BODOWINSTATUS = 3;
    SQ509_BODOWINRESULT = 2;
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_SQ509_LastStand_Flee_15_01");
    DIA_BODOWIN_SQ509_LASTSTAND_MAGES();
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Flee_03_03");
    DIA_BODOWIN_SQ509_LASTSTAND_THANKYOU();
    BODOWIN_SQ509_GIVEREWARD();
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    NPC_EXCHANGEROUTINE(SELF, FLEE);
    AI_LOGENTRY(TOPIC_SQ509, LOG_SQ509_BODOWINRESULT_V2);
    INFO_CLEARCHOICES(0x12ed3);
    AI_STOPPROCESSINFOS(SELF);
}

func void MARVIN_SQ509_KILLBODOWIN() {
    MDL_APPLYOVERLAYMDS(VLK_2261_BODOWIN, "HUMANS_SUDDENDEATH.MDS");
    AI_PLAYANI(VLK_2261_BODOWIN, T_DEAD);
    SND_PLAY("FIG_SwordFinal");
    SND_PLAY("SVM_9_DEAD");
    B_MAGICHURTNPC(HERO, VLK_2261_BODOWIN, 0x1869f);
    AI_REMOVEWEAPON(HERO);
    HERO.AIVAR[4] = FALSE;
}

func void DIA_BODOWIN_SQ509_LASTSTAND_ME_BROTHER_NEXT_DIE() {
    FINALBOARDS_BODOWINSTATUS = 2;
    SQ509_BODOWINRESULT = 3;
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_SQ509_LastStand_Die_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_SQ509_LastStand_Die_03_02");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    SELF.FLAGS = 0;
    SELF.ATTRIBUTE[0] = 1;
    B_MARVIN_ATTACKINDIALOGUE_PREPARE();
    AI_FUNCTION(OTHER, 0x12eeb);
    B_MARVIN_ATTACKINDIALOGUE_ATTACK();
    INFO_CLEARCHOICES(0x12ed3);
    AI_STOPPROCESSINFOS(OTHER);
    AI_LOGENTRY(TOPIC_SQ509, LOG_SQ509_BODOWINRESULT_V3);
}

instance DIA_BODOWIN_CANYOUTEACH(C_INFO) {
    NPC = 0xd9ed;
    NR = 7;
    CONDITION = DIA_BODOWIN_CANYOUTEACH_CONDITION;
    INFORMATION = DIA_BODOWIN_CANYOUTEACH_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Could you teach me something about alchemy?";
}

func int DIA_BODOWIN_CANYOUTEACH_CONDITION() {
    if ((BODOWIN_CANTEACHUS) == (TRUE)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_CANYOUTEACH_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_CanYouTeach_15_00");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_CanYouTeach_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_CanYouTeach_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_CanYouTeach_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_CanYouTeach_03_04");
    LOG_CREATETOPIC(TOPIC_TEACHER, LOG_NOTE);
    AI_LOGENTRY(TOPIC_TEACHER, LOG_TEACHER_BODOWIN);
}

instance DIA_BODOWIN_TEACH_ALCHEMY(C_INFO) {
    NPC = 0xd9ed;
    NR = 7;
    CONDITION = DIA_BODOWIN_TEACH_ALCHEMY_CONDITION;
    INFORMATION = DIA_BODOWIN_TEACH_ALCHEMY_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = B_BUILDLEARNSTRING2(PRINT_LEARN_ALCHEMY1, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_ALCHEMY, 1), BODOWIN_ALCHEMY);
}

func int DIA_BODOWIN_TEACH_ALCHEMY_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x12eed)) && ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_ALCHEMY)) == (0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_TEACH_ALCHEMY_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_teach_alchemy_15_00");
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (BODOWIN_ALCHEMY)) {
        if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_ALCHEMY)) == (1)) {
            NPC_REMOVEINVITEMS(SELF, 0x859b, BODOWIN_ALCHEMY);
            AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_teach_alchemy_03_01");
            B_GIVEINVITEMS(OTHER, SELF, 0x859b, BODOWIN_ALCHEMY);
            CREATEINVITEMS(SELF, 0x861e, 1);
            CREATEINVITEMS(SELF, 0x8630, 1);
            B_GIVEINVITEMS(SELF, OTHER, 0x8630, 1);
            AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_teach_alchemy_03_02");
        };
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_teach_alchemy_03_03");
}

instance DIA_BODOWIN_TEACH_ALCHEMY2(C_INFO) {
    NPC = 0xd9ed;
    NR = 7;
    CONDITION = DIA_BODOWIN_TEACH_ALCHEMY2_CONDITION;
    INFORMATION = DIA_BODOWIN_TEACH_ALCHEMY2_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = B_BUILDLEARNSTRING2(PRINT_LEARN_ALCHEMY2, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_ALCHEMY, 2), BODOWIN_ALCHEMY2);
}

func int DIA_BODOWIN_TEACH_ALCHEMY2_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x12eed)) && ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_ALCHEMY)) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_TEACH_ALCHEMY2_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_teach_alchemy2_15_00");
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (BODOWIN_ALCHEMY2)) {
        if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_ALCHEMY)) == (2)) {
            NPC_REMOVEINVITEMS(SELF, 0x859b, BODOWIN_ALCHEMY2);
            AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_teach_alchemy2_03_01");
            B_GIVEINVITEMS(OTHER, SELF, 0x859b, BODOWIN_ALCHEMY2);
            CREATEINVITEMS(SELF, 0x8623, 1);
            CREATEINVITEMS(SELF, 0x8632, 1);
            B_GIVEINVITEMS(SELF, OTHER, 0x8632, 1);
            AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_teach_alchemy2_03_02");
        };
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_teach_alchemy2_03_03");
}

instance DIA_BODOWIN_TEACH_ALCHEMY3(C_INFO) {
    NPC = 0xd9ed;
    NR = 7;
    CONDITION = DIA_BODOWIN_TEACH_ALCHEMY3_CONDITION;
    INFORMATION = DIA_BODOWIN_TEACH_ALCHEMY3_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = B_BUILDLEARNSTRING2(PRINT_LEARN_ALCHEMY3, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_ALCHEMY, 3), BODOWIN_ALCHEMY3);
}

func int DIA_BODOWIN_TEACH_ALCHEMY3_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x12eed)) && ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_ALCHEMY)) == (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_TEACH_ALCHEMY3_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_teach_alchemy3_15_00");
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (BODOWIN_ALCHEMY3)) {
        ALCHEMY_FINISHTRAIN = TRUE;
        ALCHEMY_FINISHTRAIN_DAY = WLD_GETDAY();
        if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_ALCHEMY)) == (3)) {
            NPC_REMOVEINVITEMS(SELF, 0x859b, BODOWIN_ALCHEMY3);
            AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_teach_alchemy3_03_02");
            B_GIVEINVITEMS(OTHER, SELF, 0x859b, BODOWIN_ALCHEMY3);
            AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_teach_alchemy3_03_03");
            AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_teach_alchemy3_03_04");
        };
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_teach_alchemy3_03_05");
}

var int BODOWIN_ANGRY = 0;
instance DIA_BODOWIN_ITISYOURFAULT(C_INFO) {
    NPC = 0xd9ed;
    NR = 1;
    CONDITION = DIA_BODOWIN_ITISYOURFAULT_CONDITION;
    INFORMATION = DIA_BODOWIN_ITISYOURFAULT_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "My brother's missing.";
}

func int DIA_BODOWIN_ITISYOURFAULT_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x1575a)) && ((LOG_GETSTATUS(MIS_SQ509)) != (LOG_RUNNING))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_ITISYOURFAULT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_ItIsYourFault_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Bodowin_ItIsYourFault_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_ItIsYourFault_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_ItIsYourFault_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_ItIsYourFault_03_05");
    BODOWIN_ANGRY = TRUE;
}

instance DIA_BODOWIN_AMBIENT(C_INFO) {
    NPC = 0xd9ed;
    NR = 990;
    CONDITION = DIA_BODOWIN_AMBIENT_CONDITION;
    INFORMATION = DIA_BODOWIN_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How's the work going?";
}

func int DIA_BODOWIN_AMBIENT_CONDITION() {
    if ((NPC_ISINSTATE(SELF, 0xf09f)) && (NPC_KNOWSINFO(OTHER, 0x12e74))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_AMBIENT_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_AboutWork");
    if (((KAPITEL) == (1)) && ((BODOWIN_ANGRY) == (FALSE))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Ambient_03_01");
    };
    if (((KAPITEL) == (2)) && ((BODOWIN_ANGRY) == (FALSE))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Ambient_03_02");
    };
    if ((((LOG_GETSTATUS(MIS_Q308)) == (LOG_RUNNING)) || ((LOG_GETSTATUS(MIS_Q308)) == (LOG_SUCCESS))) && ((BODOWIN_ANGRY) == (FALSE))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Ambient_03_03");
    };
    if ((((Q402_MILITIA_MESSAGE) == (TRUE)) || ((Q402_ARAXOS_MESSAGE) == (TRUE))) && ((BODOWIN_ANGRY) == (FALSE))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Ambient_03_04");
    };
    if ((BODOWIN_ANGRY) == (TRUE)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Bodowin_Ambient_03_05");
    };
}

instance DIA_BODOWIN_TRADE(C_INFO) {
    NPC = 0xd9ed;
    NR = 940;
    CONDITION = DIA_BODOWIN_TRADE_CONDITION;
    INFORMATION = DIA_BODOWIN_TRADE_INFO;
    PERMANENT = TRUE;
    TRADE = TRUE;
    DESCRIPTION = "Let's deal.";
}

func int DIA_BODOWIN_TRADE_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x12e74)) && ((LOG_GETSTATUS(MIS_Q106)) == (LOG_SUCCESS))) && ((SQ509_BODOWINRESULT) == (0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_TRADE_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_LetsTrade");
    B_GIVETRADEINV(SELF);
    if ((BODOWIN_TRADE_CHECKINFO) == (FALSE)) {
        BODOWIN_TRADE_CHECKINFO = TRUE;
        LOG_CREATETOPIC(TOPIC_OTHERTRADER, LOG_NOTE);
        AI_LOGENTRY(TOPIC_OTHERTRADER, LOG_TRADER_BODOWIN);
    };
}

var int DIA_BODOWIN_TRADE_INFO.BODOWIN_TRADE_CHECKINFO = 0;
instance DIA_BODOWIN_PICKPOCKET(C_INFO) {
    NPC = 0xd9ed;
    NR = 900;
    CONDITION = DIA_BODOWIN_PICKPOCKET_CONDITION;
    INFORMATION = DIA_BODOWIN_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_40;
}

func int DIA_BODOWIN_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BODOWIN_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(0x12f04);
    INFO_ADDCHOICE(0x12f04, DIALOG_BACK, 0x12f08);
    INFO_ADDCHOICE(0x12f04, DIALOG_PICKPOCKET, 0x12f07);
}

func void DIA_BODOWIN_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) {
        CREATEINVITEMS(SELF, 0x85f2, 2);
        B_GIVEINVITEMS(SELF, OTHER, 0x85f2, 2);
        B_PICKPOCKET_AMBIENT_TIER_1();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(0x12f04);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(0x12f04);
}

func void DIA_BODOWIN_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(0x12f04);
}

