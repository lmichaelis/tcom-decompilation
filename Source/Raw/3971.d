instance DIA_WORKER4_EXIT(C_INFO) {
    NPC = 0xd5d8;
    NR = 999;
    CONDITION = DIA_WORKER4_EXIT_CONDITION;
    INFORMATION = DIA_WORKER4_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_WORKER4_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_WORKER4_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_WORKER4_SQ309(C_INFO) {
    NPC = 0xd5d8;
    NR = 1;
    CONDITION = DIA_WORKER4_SQ309_CONDITION;
    INFORMATION = DIA_WORKER4_SQ309_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_WORKER4_SQ309_CONDITION() {
    if ((LOG_GETSTATUS(MIS_SQ309)) == (LOG_RUNNING)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_WORKER4_SQ309_INFO() {
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Worker4_SQ309_03_01");
    INFO_CLEARCHOICES(0x12d2a);
    INFO_ADDCHOICE(0x12d2a, "I just wanted to find out who was bringing them in.", 0x12d2d);
}

func void DIA_WORKER4_SQ309_WHO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Worker4_SQ309_Who_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Worker4_SQ309_Who_15_02");
    AI_STARTFACEANI(SELF, S_SMILE, 0, 1);
    AI_OUTPUT(SELF, OTHER, "DIA_Worker4_SQ309_Who_03_03");
    INFO_CLEARCHOICES(0x12d2a);
    INFO_ADDCHOICE(0x12d2a, "I don't want to buy them.", 0x12d2e);
    INFO_ADDCHOICE(0x12d2a, "Actually, I'm looking for a job.", 0x12d2f);
}

func void DIA_WORKER4_SQ309_WHO_BUY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Worker4_SQ309_Buy_15_01");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Worker4_SQ309_Buy_03_02");
}

func void DIA_WORKER4_SQ309_WHO_WORK() {
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(OTHER, SELF, "DIA_Worker4_SQ309_Work_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Worker4_SQ309_Work_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Worker4_SQ309_Work_03_03");
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Worker4_SQ309_Work_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Worker4_SQ309_Work_03_05");
    if ((NPC_HASEQUIPPEDARMOR(OTHER)) == (TRUE)) {
        if (((NPC_HASGUILDARMOREQUIPPED(OTHER, GIL_MIL)) == (FALSE)) && ((NPC_HASGUILDARMOREQUIPPED(OTHER, GIL_SLD)) == (FALSE))) {
            AI_OUTPUT(SELF, OTHER, "DIA_Worker4_SQ309_Work_03_06");
        };
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Worker4_SQ309_Work_03_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Worker4_SQ309_Work_03_06");
    AI_RESETFACEANI(OTHER);
    INFO_CLEARCHOICES(0x12d2a);
    INFO_ADDCHOICE(0x12d2a, "I'd be happy to.", 0x12d30);
}

func void DIA_WORKER4_SQ309_WHO_WORK_YES() {
    AI_OUTPUT(OTHER, SELF, "DIA_Worker4_SQ309_Yes_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Worker4_SQ309_Yes_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Worker4_SQ309_Yes_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Worker4_SQ309_Yes_03_04");
    if ((SQ309_INFORMATIONABOUTSUES) == (FALSE)) {
        SQ309_SEARCHINGFORSUESHOUSE = TRUE;
        AI_LOGENTRY(TOPIC_SQ309, LOG_SQ309_SEARCHINGFORMURESHOUSEV1);
    };
    AI_LOGENTRY(TOPIC_SQ309, LOG_SQ309_SEARCHINGFORMURESHOUSEV2);
    INFO_CLEARCHOICES(0x12d2a);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, TOT);
}

