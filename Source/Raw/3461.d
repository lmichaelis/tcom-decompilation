func void SQ123_PREPARENPC() {
    WLD_SENDTRIGGER("SQ123_CROWD");
    B_STARTOTHERROUTINE(NONE_6086_FISHERMAN, "SQ123_WATCHCONTEST");
    NPC_REFRESH(NONE_6086_FISHERMAN);
    TELEPORTNPCTOWP(0xda8f, NONE_6086_FISHERMAN.WP);
    B_STARTOTHERROUTINE(NONE_6087_FISHERMAN, "SQ123_WATCHCONTEST");
    NPC_REFRESH(NONE_6087_FISHERMAN);
    TELEPORTNPCTOWP(0xda96, NONE_6087_FISHERMAN.WP);
    B_STARTOTHERROUTINE(NONE_6088_FISHERMAN, "SQ123_WATCHCONTEST");
    NPC_REFRESH(NONE_6088_FISHERMAN);
    TELEPORTNPCTOWP(0xda9c, NONE_6088_FISHERMAN.WP);
    B_STARTOTHERROUTINE(NONE_6085_LIMAN, "SQ123_WATCHCONTEST");
    NPC_REFRESH(NONE_6085_LIMAN);
    TELEPORTNPCTOWP(0xda57, NONE_6085_LIMAN.WP);
    B_STARTOTHERROUTINE(NONE_6346_ZACHARY, "SQ123_WATCHCONTEST");
    NPC_REFRESH(NONE_6346_ZACHARY);
    TELEPORTNPCTOWP(0xda65, NONE_6346_ZACHARY.WP);
    B_STARTOTHERROUTINE(NONE_6350_SVEN, TOT);
    NPC_REFRESH(NONE_6350_SVEN);
    TELEPORTNPCTOWP(0xda78, NONE_6350_SVEN.WP);
    B_STARTOTHERROUTINE(NONE_6347_HAROLD, TOT);
    NPC_REFRESH(NONE_6347_HAROLD);
    TELEPORTNPCTOWP(0xda6b, NONE_6347_HAROLD.WP);
    FF_APPLYONCEEXTGT(0xf28e, 0, -(1));
}

func void SQ123_STOPWATCHFIGHT() {
    WLD_SENDUNTRIGGER("SQ123_CROWD");
    AI_PLAYANI(HERO, "T_LOOKOUT_2_STAND");
    B_STARTOTHERROUTINE(NONE_6086_FISHERMAN, "SQ123_STOPCONTEST");
    NPC_REFRESH(NONE_6086_FISHERMAN);
    B_STARTOTHERROUTINE(NONE_6087_FISHERMAN, "SQ123_STOPCONTEST");
    NPC_REFRESH(NONE_6087_FISHERMAN);
    B_STARTOTHERROUTINE(NONE_6088_FISHERMAN, "SQ123_STOPCONTEST");
    NPC_REFRESH(NONE_6088_FISHERMAN);
    B_STARTOTHERROUTINE(NONE_6085_LIMAN, "SQ123_STOPCONTEST");
    NPC_REFRESH(NONE_6085_LIMAN);
    B_STARTOTHERROUTINE(NONE_6346_ZACHARY, "SQ123_STOPCONTEST");
    NPC_REFRESH(NONE_6346_ZACHARY);
}

func void SQ123_PREPARENPC_APPLY() {
    if ((SQ123_PREPARENPC_COUNT) == (0)) {
        PRINTD("Rozpoczynam - SQ123_PrepareNPC_Apply");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("SQ123_MOVER_BOATTODESTROY_HAROLD");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("SQ123_MOVER_BOATTODESTROY_SVEN");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("SQ123_BOATTODESTROY_HAROLD", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ123_BOATTODESTROY_SVEN", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ123_MOVER_BOAT_HAROLD_02", FALSE, TRUE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ123_MOVER_BOAT_SVEN_02", FALSE, TRUE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ123_HAROLD_MODEL", FALSE, TRUE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ123_SVEN_MODEL", FALSE, TRUE, FALSE, TRUE);
        WLD_SENDTRIGGER("SQ123_MOVER_BOATTODESTROY_HAROLD");
        WLD_SENDTRIGGER("SQ123_MOVER_BOATTODESTROY_SVEN");
        SQ123_PREPARENPC_COUNT = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Sko刃zy쓴m - SQ123_PrepareNPC_Apply");
        CHANGEVOBCOLLISION("SQ123_BOATTODESTROY_HAROLD", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ123_BOATTODESTROY_SVEN", TRUE, TRUE, TRUE, TRUE);
        SQ123_PREPARENPC_COUNT = 0;
        FF_REMOVE(0xf28e);
    };
}

var int SQ123_PREPARENPC_APPLY.SQ123_PREPARENPC_COUNT = 0;
instance SQ123_PREPARENPC_APPLY.MOVER1(ZCMOVER)
instance SQ123_PREPARENPC_APPLY.MOVER2(ZCMOVER)
var int SQ123_PREPARENPC_APPLY.MOVPTR1 = 0;
var int SQ123_PREPARENPC_APPLY.MOVPTR2 = 0;
func void SQ123_FISHINGCONTESTCUTSCENE_PREPARE() {
    HERO.AIVAR[4] = TRUE;
    FF_APPLYONCEEXT(0xf295, 75, 4);
}

func void SQ123_FISHINGCONTESTCUTSCENE_APPLY() {
    SQ123_FISHINGCONTESTCUTSCENE_COUNT = (SQ123_FISHINGCONTESTCUTSCENE_COUNT) + (1);
    if ((SQ123_FISHINGCONTESTCUTSCENE_COUNT) == (4)) {
        CUTSCENE_START(0x16aca);
    };
}

var int SQ123_FISHINGCONTESTCUTSCENE_APPLY.SQ123_FISHINGCONTESTCUTSCENE_COUNT = 0;
func void SQ123_FISHINGCONTESTCUTSCENE_END() {
    FADESCREENTOBLACKF(1, 0xf298, 1000);
}

func void SQ123_FISHINGCONTESTCUTSCENE_END_FADESCREEN() {
    FF_APPLYONCEEXTGT(0xf29a, 0, -(1));
}

func void SQ123_AFTERCONTEST() {
    if ((SQ123_DESTROYEDBOAT) == (1)) {
        B_STARTOTHERROUTINE(NONE_6086_FISHERMAN, "SQ123_HAROLDWON");
        NPC_REFRESH(NONE_6086_FISHERMAN);
        TELEPORTNPCTOWP(0xda8f, NONE_6086_FISHERMAN.WP);
        B_STARTOTHERROUTINE(NONE_6087_FISHERMAN, "SQ123_HAROLDWON");
        NPC_REFRESH(NONE_6087_FISHERMAN);
        TELEPORTNPCTOWP(0xda96, NONE_6087_FISHERMAN.WP);
        B_STARTOTHERROUTINE(NONE_6088_FISHERMAN, "SQ123_HAROLDWON");
        NPC_REFRESH(NONE_6088_FISHERMAN);
        TELEPORTNPCTOWP(0xda9c, NONE_6088_FISHERMAN.WP);
        B_STARTOTHERROUTINE(NONE_6085_LIMAN, "SQ123_HAROLDWON");
        NPC_REFRESH(NONE_6085_LIMAN);
        TELEPORTNPCTOWP(0xda57, NONE_6085_LIMAN.WP);
        B_STARTOTHERROUTINE(NONE_6346_ZACHARY, "SQ123_HAROLDWON");
        NPC_REFRESH(NONE_6346_ZACHARY);
        TELEPORTNPCTOWP(0xda65, NONE_6346_ZACHARY.WP);
        B_STARTOTHERROUTINE(NONE_6350_SVEN, "SQ123_HAROLDWON");
        NPC_REFRESH(NONE_6350_SVEN);
        TELEPORTNPCTOWP(0xda78, NONE_6350_SVEN.WP);
        B_STARTOTHERROUTINE(NONE_6347_HAROLD, "SQ123_HAROLDWON");
        NPC_REFRESH(NONE_6347_HAROLD);
        TELEPORTNPCTOWP(0xda6b, NONE_6347_HAROLD.WP);
    };
    if ((SQ123_DESTROYEDBOAT) == (2)) {
        B_STARTOTHERROUTINE(NONE_6086_FISHERMAN, "SQ123_SVENWON");
        NPC_REFRESH(NONE_6086_FISHERMAN);
        TELEPORTNPCTOWP(0xda8f, NONE_6086_FISHERMAN.WP);
        B_STARTOTHERROUTINE(NONE_6087_FISHERMAN, "SQ123_SVENWON");
        NPC_REFRESH(NONE_6087_FISHERMAN);
        TELEPORTNPCTOWP(0xda96, NONE_6087_FISHERMAN.WP);
        B_STARTOTHERROUTINE(NONE_6088_FISHERMAN, "SQ123_SVENWON");
        NPC_REFRESH(NONE_6088_FISHERMAN);
        TELEPORTNPCTOWP(0xda9c, NONE_6088_FISHERMAN.WP);
        B_STARTOTHERROUTINE(NONE_6085_LIMAN, "SQ123_SVENWON");
        NPC_REFRESH(NONE_6085_LIMAN);
        TELEPORTNPCTOWP(0xda57, NONE_6085_LIMAN.WP);
        B_STARTOTHERROUTINE(NONE_6346_ZACHARY, "SQ123_SVENWON");
        NPC_REFRESH(NONE_6346_ZACHARY);
        TELEPORTNPCTOWP(0xda65, NONE_6346_ZACHARY.WP);
        B_STARTOTHERROUTINE(NONE_6350_SVEN, "SQ123_SVENWON");
        NPC_REFRESH(NONE_6350_SVEN);
        TELEPORTNPCTOWP(0xda78, NONE_6350_SVEN.WP);
        B_REMOVENPC(0xda6b);
    };
}

func void SQ123_FISHINGCONTESTCUTSCENE_END_APPLY() {
    if ((SQ123_FISHINGCONTESTCUTSCENE_END_COUNT) == (0)) {
        PRINTD("Rozpoczynam - SQ123_FishingContestCutscene_End_Apply");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("SQ123_MOVER_BOATTODESTROY_HAROLD");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("SQ123_MOVER_BOATTODESTROY_SVEN");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        MOVPTR3 = MEM_SEARCHVOBBYNAME("SQ123_MOVER_CORPSE_HAROLD");
        MOVER3 = MEM_PTRTOINST(MOVPTR3);
        if ((SQ123_DESTROYEDBOAT) == (1)) {
            CHANGEVOBCOLLISION("SQ123_BOATTODESTROY_HAROLD", FALSE, FALSE, FALSE, TRUE);
        } else if ((SQ123_DESTROYEDBOAT) == (2)) {
            CHANGEVOBCOLLISION("SQ123_BOATTODESTROY_SVEN", FALSE, FALSE, FALSE, TRUE);
            CHANGEVOBCOLLISION("SQ123_CORPSE_HAROLD", FALSE, FALSE, FALSE, TRUE);
        };
        CHANGEVOBCOLLISION("SQ123_MOVER_BOAT_HAROLD_02", FALSE, FALSE, FALSE, FALSE);
        CHANGEVOBCOLLISION("SQ123_MOVER_BOAT_SVEN_02", FALSE, FALSE, FALSE, FALSE);
        CHANGEVOBCOLLISION("SQ123_HAROLD_MODEL", FALSE, FALSE, FALSE, FALSE);
        CHANGEVOBCOLLISION("SQ123_SVEN_MODEL", FALSE, FALSE, FALSE, FALSE);
        if ((SQ123_DESTROYEDBOAT) == (1)) {
            WLD_SENDTRIGGER("SQ123_MOVER_BOATTODESTROY_HAROLD");
        } else if ((SQ123_DESTROYEDBOAT) == (2)) {
            WLD_SENDTRIGGER("SQ123_MOVER_BOATTODESTROY_SVEN");
            WLD_SENDTRIGGER("SQ123_MOVER_CORPSE_HAROLD");
        };
        SQ123_FISHINGCONTESTCUTSCENE_END_COUNT = 1;
    };
    if (((((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER3.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER3.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Sko刃zy쓴m - SQ123_FishingContestCutscene_End_Apply");
        CHANGEVOBCOLLISION("SQ123_BOATTODESTROY_SVEN", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ123_BOATTODESTROY_HAROLD", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ123_CORPSE_HAROLD", TRUE, TRUE, TRUE, TRUE);
        AI_RESETFACEANI(NONE_6086_FISHERMAN);
        AI_RESETFACEANI(NONE_6087_FISHERMAN);
        AI_RESETFACEANI(NONE_6088_FISHERMAN);
        AI_RESETFACEANI(NONE_6085_LIMAN);
        AI_RESETFACEANI(NONE_6346_ZACHARY);
        SQ123_FISHINGCONTESTCUTSCENE_END_COUNT = 0;
        SQ123_FISHINGCONTEST = 4;
        WLD_SENDUNTRIGGER("SQ123_CONTEST_01");
        WLD_SENDUNTRIGGER("SQ123_CONTEST_02");
        WLD_SENDUNTRIGGER("SQ123_CONTEST_03");
        SQ123_AFTERCONTEST();
        B_PASSTIME(1);
        FADESCREENFROMBLACK(1);
        HERO.AIVAR[4] = FALSE;
        if ((SQ123_DESTROYEDBOAT) == (1)) {
            B_LOGENTRY(TOPIC_SQ123, LOG_SQ123_CONTEST_HAROLDWON);
        } else if ((SQ123_DESTROYEDBOAT) == (2)) {
            B_LOGENTRY(TOPIC_SQ123, LOG_SQ123_CONTEST_SVENWON);
        };
        FF_REMOVE(0xf29a);
        SQ123_FISHINGCONTESTCUTSCENE_END_COUNT = 0;
    };
}

var int SQ123_FISHINGCONTESTCUTSCENE_END_APPLY.SQ123_FISHINGCONTESTCUTSCENE_END_COUNT = 0;
instance SQ123_FISHINGCONTESTCUTSCENE_END_APPLY.MOVER1(ZCMOVER)
instance SQ123_FISHINGCONTESTCUTSCENE_END_APPLY.MOVER2(ZCMOVER)
instance SQ123_FISHINGCONTESTCUTSCENE_END_APPLY.MOVER3(ZCMOVER)
var int SQ123_FISHINGCONTESTCUTSCENE_END_APPLY.MOVPTR1 = 0;
var int SQ123_FISHINGCONTESTCUTSCENE_END_APPLY.MOVPTR2 = 0;
var int SQ123_FISHINGCONTESTCUTSCENE_END_APPLY.MOVPTR3 = 0;
func void SQ123_AFTERCONTEST_BRINGBACKRTN() {
    if ((LOG_GETSTATUS(MIS_Q401)) == (LOG_RUNNING)) {
        B_STARTOTHERROUTINE(NONE_6086_FISHERMAN, "QA401_WAIT");
    };
    B_STARTOTHERROUTINE(NONE_6086_FISHERMAN, START);
    NPC_REFRESH(NONE_6086_FISHERMAN);
    B_STARTOTHERROUTINE(NONE_6087_FISHERMAN, START);
    NPC_REFRESH(NONE_6087_FISHERMAN);
    B_STARTOTHERROUTINE(NONE_6088_FISHERMAN, START);
    NPC_REFRESH(NONE_6088_FISHERMAN);
    B_STARTOTHERROUTINE(NONE_6085_LIMAN, START);
    NPC_REFRESH(NONE_6085_LIMAN);
    B_STARTOTHERROUTINE(NONE_6346_ZACHARY, START);
    NPC_REFRESH(NONE_6346_ZACHARY);
    if ((SQ123_DESTROYEDBOAT) == (2)) {
        FF_APPLYONCEEXTGT(0xf2a3, 0, -(1));
    };
}

func void SQ123_REMOVEHAROLDCORPSE_APPLY() {
    if ((SQ123_REMOVEHAROLDCORPSE_COUNT) == (0)) {
        PRINTD("Rozpoczynam - SQ123_RemoveHaroldCorpse_Apply");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("SQ123_MOVER_CORPSE_HAROLD");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        CHANGEVOBCOLLISION("SQ123_CORPSE_HAROLD", FALSE, FALSE, FALSE, FALSE);
        WLD_SENDTRIGGER("SQ123_MOVER_CORPSE_HAROLD");
        SQ123_REMOVEHAROLDCORPSE_COUNT = 1;
    };
    if (((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Sko刃zy쓴m - SQ123_RemoveHaroldCorpse_Apply");
        CHANGEVOBCOLLISION("SQ123_CORPSE_HAROLD", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0xf2a3);
        SQ123_REMOVEHAROLDCORPSE_COUNT = 0;
    };
}

var int SQ123_REMOVEHAROLDCORPSE_APPLY.SQ123_REMOVEHAROLDCORPSE_COUNT = 0;
instance SQ123_REMOVEHAROLDCORPSE_APPLY.MOVER1(ZCMOVER)
var int SQ123_REMOVEHAROLDCORPSE_APPLY.MOVPTR1 = 0;
func void SQ123_REMOVESVEN() {
    B_REMOVENPC(0xda78);
    WLD_INSERTITEM(0x9095, "FP_SVEN_CORPSE_LETTER");
    FF_APPLYONCEEXTGT(0xf2a8, 0, -(1));
}

func void SQ123_REMOVESVEN_APPLY() {
    if ((SQ123_REMOVESVEN_COUNT) == (0)) {
        PRINTD("Rozpoczynam - SQ123_RemoveSven_Apply");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("SQ123_MOVER_BOATTODESTROY_SVEN");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("SQ123_MOVER_CORPSE_SVEN");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        MOVPTR3 = MEM_SEARCHVOBBYNAME("SQ123_MOVER_CORPSE_HAROLD");
        MOVER3 = MEM_PTRTOINST(MOVPTR3);
        CHANGEVOBCOLLISION("SQ123_BOATTODESTROY_SVEN", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ123_CORPSE_SVEN", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ123_CORPSE_HAROLD", FALSE, FALSE, FALSE, FALSE);
        WLD_SENDTRIGGER("SQ123_MOVER_BOATTODESTROY_SVEN");
        WLD_SENDTRIGGER("SQ123_MOVER_CORPSE_SVEN");
        WLD_SENDTRIGGER("SQ123_MOVER_CORPSE_HAROLD");
        SQ123_REMOVESVEN_COUNT = 1;
    };
    if (((((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER3.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER3.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Sko刃zy쓴m - SQ123_RemoveSven_Apply");
        CHANGEVOBCOLLISION("SQ123_BOATTODESTROY_SVEN", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ123_CORPSE_SVEN", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ123_CORPSE_HAROLD", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0xf2a8);
        SQ123_REMOVESVEN_COUNT = 0;
    };
}

var int SQ123_REMOVESVEN_APPLY.SQ123_REMOVESVEN_COUNT = 0;
instance SQ123_REMOVESVEN_APPLY.MOVER1(ZCMOVER)
instance SQ123_REMOVESVEN_APPLY.MOVER2(ZCMOVER)
instance SQ123_REMOVESVEN_APPLY.MOVER3(ZCMOVER)
var int SQ123_REMOVESVEN_APPLY.MOVPTR1 = 0;
var int SQ123_REMOVESVEN_APPLY.MOVPTR2 = 0;
var int SQ123_REMOVESVEN_APPLY.MOVPTR3 = 0;
