instance SQ116_GUMBERT(CUTSCENE) {
    ONSTART = FUNCTION(0x16887);
}

func void SQ116_GUMBERT_WAIT() {
    AI_WAITTILLEND(BAU_2242_DENNIS, BAU_2243_GUMBERT);
    AI_WAITTILLEND(BAU_2242_DENNIS, HERO);
    AI_WAITTILLEND(BAU_2243_GUMBERT, BAU_2242_DENNIS);
    AI_WAITTILLEND(BAU_2243_GUMBERT, HERO);
    AI_WAITTILLEND(HERO, BAU_2243_GUMBERT);
    AI_WAITTILLEND(HERO, BAU_2242_DENNIS);
}

func void SQ116_GUMBERT_START() {
    SQ116_GUMBERTWAY_BLOCK = TRUE;
    WLD_SENDTRIGGER("SQ116_GUMBERT_01");
    HERO.AIVAR[4] = FALSE;
    TELEPORTNPCTOWP(0x71b, "PART9_SQ116_CUTSCENE_HERO_04");
    TELEPORTNPCTOWP(0xded0, "PART9_SQ116_CUTSCENE_DENNIS_03");
    AI_TURNTONPC(HERO, BAU_2243_GUMBERT);
    AI_TURNTONPC(BAU_2242_DENNIS, BAU_2243_GUMBERT);
    AI_SETWALKMODE(BAU_2243_GUMBERT, NPC_RUN);
    AI_GOTOWP(BAU_2243_GUMBERT, "PART9_PATH_02");
    AI_TURNTONPC(BAU_2243_GUMBERT, BAU_2242_DENNIS);
    BAU_2242_DENNIS.AIVAR[92] = TRUE;
    BAU_2243_GUMBERT.AIVAR[92] = TRUE;
    AI_OUTPUT(BAU_2243_GUMBERT, HERO, "DIA_Gumbert_SQ116_Gumbert_13_01");
    SQ116_GUMBERT_WAIT();
    AI_FUNCTION(BAU_2243_GUMBERT, 0x16888);
    SQ116_TERRYDEAD_HOLDWIGBETTER_PART1();
    SQ116_GUMBERT_WAIT();
    AI_FUNCTION(BAU_2242_DENNIS, 0x16889);
    SQ116_TERRYDEAD_HOLDWIGBETTER_PART2();
    SQ116_GUMBERT_WAIT();
    AI_SETWALKMODE(BAU_2242_DENNIS, NPC_RUN);
    AI_TURNTONPC(BAU_2242_DENNIS, BAU_2243_GUMBERT);
    AI_WAIT(HERO, 0x3f333333);
    AI_PLAYANI(HERO, "T_FACEPALM");
    AI_GOTOWP(BAU_2242_DENNIS, "PART9_DENNIS_TELEPORT_01");
    AI_FUNCTION(HERO, 0x1688a);
}

func void SQ116_GUMBERT_CHANGECAMERA_01() {
    WLD_SENDTRIGGER("SQ116_GUMBERT_02");
    WLD_SENDUNTRIGGER("SQ116_GUMBERT_01");
}

func void SQ116_GUMBERT_CHANGECAMERA_02() {
    WLD_SENDTRIGGER("SQ116_GUMBERT_03");
    WLD_SENDUNTRIGGER("SQ116_GUMBERT_02");
}

func void SQ116_GUMBERT_END() {
    SQ116_GUMBERTCUTSCENE = 3;
    SQ116_CANTALKWITHHOLDWIG = 1;
    if ((SQ116_KNOWTERRYNAME) == (FALSE)) {
        B_LOGENTRY(TOPIC_SQ116, LOG_SQ116_TERRY_NOTGUILTY_V1);
    };
    B_LOGENTRY(TOPIC_SQ116, LOG_SQ116_TERRY_NOTGUILTY_V2);
    WLD_SENDUNTRIGGER("SQ116_GUMBERT_01");
    WLD_SENDUNTRIGGER("SQ116_GUMBERT_02");
    WLD_SENDUNTRIGGER("SQ116_GUMBERT_03");
    BAU_2242_DENNIS.AIVAR[92] = FALSE;
    BAU_2243_GUMBERT.AIVAR[92] = FALSE;
    B_STARTOTHERROUTINE(BAU_2242_DENNIS, START);
    NPC_REFRESH(BAU_2242_DENNIS);
    TELEPORTNPCTOWP(0xded0, BAU_2242_DENNIS.WP);
    B_STARTOTHERROUTINE(BAU_2243_GUMBERT, START);
    NPC_REFRESH(BAU_2243_GUMBERT);
    TELEPORTNPCTOWP(0xdedd, BAU_2243_GUMBERT.WP);
    TELEPORTNPCTOWP(0xdeea, BAU_2244_TERRY.WP);
    HERO.AIVAR[4] = FALSE;
    SQ116_BLOCKGUMBERTWAY();
}

