instance DIA_INGOR_EXIT(C_INFO) {
    NPC = 0xcb47;
    NR = 999;
    CONDITION = DIA_INGOR_EXIT_CONDITION;
    INFORMATION = DIA_INGOR_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_INGOR_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_INGOR_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_INGOR_TRADE(C_INFO) {
    NPC = 0xcb47;
    NR = 10;
    CONDITION = DIA_INGOR_TRADE_CONDITION;
    INFORMATION = DIA_INGOR_TRADE_INFO;
    PERMANENT = TRUE;
    TRADE = TRUE;
    DESCRIPTION = "Let's deal.";
}

func int DIA_INGOR_TRADE_CONDITION() {
    if ((HERO.GUILD) == (GIL_SLD)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INGOR_TRADE_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_LetsTrade");
    B_GIVETRADEINV(SELF);
    if ((INGOR_TRADE_CHECKINFO) == (FALSE)) {
        INGOR_TRADE_CHECKINFO = TRUE;
        LOG_CREATETOPIC(TOPIC_ARAXOSTRADER, LOG_NOTE);
        AI_LOGENTRY(TOPIC_ARAXOSTRADER, LOG_TRADER_ARAXOS_INGOR);
    };
}

var int DIA_INGOR_TRADE_INFO.INGOR_TRADE_CHECKINFO = 0;
instance DIA_INGOR_NEEDARMOR(C_INFO) {
    NPC = 0xcb47;
    NR = 1;
    CONDITION = DIA_INGOR_NEEDARMOR_CONDITION;
    INFORMATION = DIA_INGOR_NEEDARMOR_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I need an armor.";
}

func int DIA_INGOR_NEEDARMOR_CONDITION() {
    if ((HERO.GUILD) == (GIL_SLD)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INGOR_ARMORS_CHOICE() {
    INFO_CLEARCHOICES(0x1132c);
    INFO_ADDCHOICE(0x1132c, TXT_ARMORTRADE_25, 0x11330);
    INFO_ADDCHOICE(0x1132c, TXT_ARMORTRADE_26, 0x11331);
    if (NPC_KNOWSINFO(OTHER, 0x11648)) {
        INFO_ADDCHOICE(0x1132c, TXT_ARMORTRADE_27, 0x11332);
    };
    INFO_ADDCHOICE(0x1132c, DIALOG_BACK, 0x1132f);
}

func void DIA_INGOR_NEEDARMOR_BACK() {
    INFO_CLEARCHOICES(0x1132c);
}

func void DIA_INGOR_NEEDARMOR_LEATHER() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_KM_LEATHER_M) / (2))) {
        B_GIVEINVITEMS(OTHER, SELF, 0x859b, (VALUE_ITAR_KM_LEATHER_M) / (2));
        CREATEINVITEMS(SELF, 0x8a59, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a59, 1);
        AI_EQUIPARMOR(OTHER, 0x8a59);
        DIA_INGOR_ARMORS_CHOICE();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_INGOR_ARMORS_CHOICE();
}

func void DIA_INGOR_NEEDARMOR_CHAIN() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_CHAIN_M) / (2))) {
        B_GIVEINVITEMS(OTHER, SELF, 0x859b, (VALUE_ITAR_CHAIN_M) / (2));
        CREATEINVITEMS(SELF, 0x8a4b, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a4b, 1);
        AI_EQUIPARMOR(OTHER, 0x8a4b);
        DIA_INGOR_ARMORS_CHOICE();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_INGOR_ARMORS_CHOICE();
}

func void DIA_INGOR_NEEDARMOR_ARAXOS_TIER1() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (VALUE_ITAR_ARX_B)) {
        B_GIVEINVITEMS(OTHER, SELF, 0x859b, VALUE_ITAR_ARX_B);
        CREATEINVITEMS(SELF, 0x8a89, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a89, 1);
        AI_EQUIPARMOR(OTHER, 0x8a89);
        DIA_INGOR_ARMORS_CHOICE();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_INGOR_ARMORS_CHOICE();
}

func void DIA_INGOR_NEEDARMOR_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_NeedArmor_15_01");
    if ((((MARVIN_ARAXOSSPECIALIZATION) > (ARAXOS_SPECIALIZATION_NONE)) && ((INGOR_FIRSTDIALOGUEABOUTARMORS_TIER2) == (FALSE))) || ((NPC_KNOWSINFO(OTHER, 0x11648)) && ((INGOR_FIRSTDIALOGUEABOUTARMORS_TIER1) == (FALSE)))) {
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        if (((MARVIN_ARAXOSSPECIALIZATION) > (ARAXOS_SPECIALIZATION_NONE)) && ((INGOR_FIRSTDIALOGUEABOUTARMORS_TIER2) == (FALSE))) {
            AI_OUTPUT(SELF, OTHER, "DIA_Ingor_NeedArmor_03_04");
            if ((MARVIN_ARAXOSSPECIALIZATION) == (ARAXOS_SPECIALIZATION_FIGHTER)) {
                CREATEINVITEMS(SELF, 0x8a7e, 1);
                B_GIVEINVITEMS(SELF, OTHER, 0x8a7e, 1);
                AI_EQUIPARMOR(OTHER, 0x8a7e);
            } else if ((MARVIN_ARAXOSSPECIALIZATION) == (ARAXOS_SPECIALIZATION_ARCHER)) {
                CREATEINVITEMS(SELF, 0x8a8e, 1);
                B_GIVEINVITEMS(SELF, OTHER, 0x8a8e, 1);
                AI_EQUIPARMOR(OTHER, 0x8a8e);
            };
        } else if ((NPC_KNOWSINFO(OTHER, 0x11648)) && ((INGOR_FIRSTDIALOGUEABOUTARMORS_TIER1) == (FALSE))) {
            AI_OUTPUT(SELF, OTHER, "DIA_Ingor_NeedArmor_03_03");
        };
    };
    if (((INGOR_FIRSTDIALOGUEABOUTARMORS) == (FALSE)) && ((LOG_GETSTATUS(MIS_Q206)) != (LOG_SUCCESS))) {
        INGOR_FIRSTDIALOGUEABOUTARMORS = TRUE;
        AI_OUTPUT(SELF, OTHER, "DIA_Ingor_NeedArmor_03_02");
    };
    if (((MARVIN_ARAXOSSPECIALIZATION) > (ARAXOS_SPECIALIZATION_NONE)) && ((INGOR_FIRSTDIALOGUEABOUTARMORS_TIER2) == (FALSE))) {
        INGOR_FIRSTDIALOGUEABOUTARMORS_TIER2 = TRUE;
    };
    if ((NPC_KNOWSINFO(OTHER, 0x11648)) && ((INGOR_FIRSTDIALOGUEABOUTARMORS_TIER1) == (FALSE))) {
        INGOR_FIRSTDIALOGUEABOUTARMORS_TIER1 = TRUE;
        DIA_INGOR_ARMORS_CHOICE();
    };
    DIA_INGOR_ARMORS_CHOICE();
}

var int DIA_INGOR_NEEDARMOR_INFO.INGOR_FIRSTDIALOGUEABOUTARMORS = 0;
var int DIA_INGOR_NEEDARMOR_INFO.INGOR_FIRSTDIALOGUEABOUTARMORS_TIER1 = 0;
var int DIA_INGOR_NEEDARMOR_INFO.INGOR_FIRSTDIALOGUEABOUTARMORS_TIER2 = 0;
instance DIA_INGOR_Q309_BOLT(C_INFO) {
    NPC = 0xcb47;
    NR = 1;
    CONDITION = DIA_INGOR_Q309_BOLT_CONDITION;
    INFORMATION = DIA_INGOR_Q309_BOLT_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What do you know about this bolthead?";
}

func int DIA_INGOR_Q309_BOLT_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q309)) == (LOG_RUNNING)) && ((NPC_HASITEMS(OTHER, 0x91ad)) >= (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INGOR_Q309_BOLT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_Q309_Bolt_15_01");
    if ((NPC_HASITEMS(SELF, 0x8ce3)) == (0)) {
        AI_STOPLOOKAT(SELF);
        CREATEINVITEM(SELF, 0x8ce3);
        AI_USEITEMTOSTATE(SELF, 0x8ce3, 1);
        AI_WAIT(SELF, 0x40400000);
        AI_USEITEMTOSTATE(SELF, 0x8ce3, -(1));
        AI_LOOKATNPC(SELF, OTHER);
    };
    if (NPC_KNOWSINFO(OTHER, 0x10f4b)) {
        AI_OUTPUT(OTHER, SELF, "DIA_Ingor_Q309_Bolt_15_02");
        AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Q309_Bolt_03_03");
    };
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_Q309_Bolt_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Q309_Bolt_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Q309_Bolt_03_06");
}

instance DIA_INGOR_Q309_WHOBOLT(C_INFO) {
    NPC = 0xcb47;
    NR = 1;
    CONDITION = DIA_INGOR_Q309_WHOBOLT_CONDITION;
    INFORMATION = DIA_INGOR_Q309_WHOBOLT_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Who ordered that?";
}

func int DIA_INGOR_Q309_WHOBOLT_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x11337)) && ((LOG_GETSTATUS(MIS_Q309)) == (LOG_RUNNING))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INGOR_Q309_WHOBOLT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_Q309_WhoBolt_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Q309_WhoBolt_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_Q309_WhoBolt_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Q309_WhoBolt_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Q309_WhoBolt_03_05");
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_Q309_WhoBolt_15_06");
    if (NPC_KNOWSINFO(OTHER, 0x10f4b)) {
        AI_LOGENTRY(TOPIC_Q309, LOG_Q309_INGOR_BOLT_V1);
    };
    AI_LOGENTRY(TOPIC_Q309, LOG_Q309_INGOR_BOLT_V2);
    LOG_SETSTATUS(_@(MIS_Q309), TOPIC_Q309, LOG_SUCCESS);
    B_GIVEPLAYERXP(XP_Q309_FINISH);
}

instance DIA_INGOR_QM305_BOOK(C_INFO) {
    NPC = 0xcb47;
    NR = 1;
    CONDITION = DIA_INGOR_QM305_BOOK_CONDITION;
    INFORMATION = DIA_INGOR_QM305_BOOK_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I've come to pick up a book called 'Nordmarians' Mastery'.";
}

func int DIA_INGOR_QM305_BOOK_CONDITION() {
    if ((LOG_GETSTATUS(MIS_QM305)) == (LOG_RUNNING)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int INGOR_QM305_BOOK_PRICEDECISION = 0;
var int INGOR_QM305_BOOK_PRICE = 0;
func void DIA_INGOR_QM305_BOOK_CHOICES() {
    INFO_CLEARCHOICES(0x1133d);
    if ((INGOR_QM305_BOOK_PRICEDECISION) == (FALSE)) {
        INFO_ADDCHOICE(0x1133d, "I'm an authority figure. You'll give it to me cheaper.", 0x11343);
        INFO_ADDCHOICE(0x1133d, "And why would a blacksmith like you need a book like this?", 0x11344);
    };
    INFO_ADDCHOICE(0x1133d, "Maybe so, but how long will I be unable to eat?", 0x11345);
}

func void DIA_INGOR_QM305_BOOK_INFO() {
    INGOR_QM305_BOOK_PRICE = 2;
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_QM305_Book_15_01");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_QM305_Book_03_02");
    AI_STARTFACEANI(OTHER, S_SMUG, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_QM305_Book_15_03");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_QM305_Book_03_04");
    DIA_INGOR_QM305_BOOK_CHOICES();
}

func void DIA_INGOR_QM305_BOOK_MILITIA() {
    INGOR_QM305_BOOK_PRICE = 3;
    INGOR_QM305_BOOK_PRICEDECISION = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_QM305_Book_Militia_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_QM305_Book_Militia_03_02");
    AI_RESETFACEANI(SELF);
    DIA_INGOR_QM305_BOOK_CHOICES();
}

func void DIA_INGOR_QM305_BOOK_WHY() {
    INGOR_QM305_BOOK_PRICE = 1;
    INGOR_QM305_BOOK_PRICEDECISION = TRUE;
    AI_STARTFACEANI(OTHER, S_SMUG, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_QM305_Book_Why_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_QM305_Book_Why_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_QM305_Book_Why_03_03");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    DIA_INGOR_QM305_BOOK_CHOICES();
}

func void DIA_INGOR_QM305_BOOK_SMUG() {
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_QM305_Book_Smug_15_01");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_QM305_Book_Smug_03_02");
    AI_RESETFACEANI(SELF);
    INFO_CLEARCHOICES(0x1133d);
}

instance DIA_INGOR_QM305_BUYBOOK(C_INFO) {
    NPC = 0xcb47;
    NR = 1;
    CONDITION = DIA_INGOR_QM305_BUYBOOK_CONDITION;
    INFORMATION = DIA_INGOR_QM305_BUYBOOK_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "(Buy a book)";
}

func int DIA_INGOR_QM305_BUYBOOK_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_QM305)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x1133d))) && ((QM305_GOTARAXOSBOOK) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INGOR_QM305_BUYBOOK_BACK() {
    INFO_CLEARCHOICES(0x11346);
}

func void DIA_INGOR_QM305_BUYBOOK_INFO() {
    INFO_CLEARCHOICES(0x11346);
    INFO_ADDCHOICE(0x11346, DIALOG_BACK, 0x11348);
    if ((INGOR_QM305_BOOK_PRICE) == (3)) {
        INFO_ADDCHOICE(0x11346, DIALOG_PAY200G, 0x1134b);
    };
    if ((INGOR_QM305_BOOK_PRICE) == (2)) {
        INFO_ADDCHOICE(0x11346, DIALOG_GIVE150G, 0x1134c);
    };
    if ((INGOR_QM305_BOOK_PRICE) == (1)) {
        INFO_ADDCHOICE(0x11346, DIALOG_GIVE100G, 0x1134d);
    };
}

func void DIA_INGOR_QM305_BUYBOOK_PAY() {
    QM305_GOTARAXOSBOOK = 1;
    QM305_GOTARAXOSBOOK_DAY = WLD_GETDAY();
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_QM305_BuyBook_100_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_QM305_BuyBook_100_03_02");
    AI_STARTFACEANI(OTHER, S_SERIOUS, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_QM305_BuyBook_100_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_QM305_BuyBook_100_03_04");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    AI_LOGENTRY(TOPIC_QM305, LOG_QM305_INGOR_BUYBOOK);
    INFO_CLEARCHOICES(0x11346);
}

func void DIA_INGOR_QM305_BUYBOOK_200() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (QM305_BUYARAXOSBOOK_V3)) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, QM305_BUYARAXOSBOOK_V3);
        DIA_INGOR_QM305_BUYBOOK_PAY();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_INGOR_QM305_BUYBOOK_INFO();
}

func void DIA_INGOR_QM305_BUYBOOK_150() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (QM305_BUYARAXOSBOOK_V2)) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, QM305_BUYARAXOSBOOK_V2);
        DIA_INGOR_QM305_BUYBOOK_PAY();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_INGOR_QM305_BUYBOOK_INFO();
}

func void DIA_INGOR_QM305_BUYBOOK_100() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (QM305_BUYARAXOSBOOK_V1)) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, QM305_BUYARAXOSBOOK_V1);
        DIA_INGOR_QM305_BUYBOOK_PAY();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_INGOR_QM305_BUYBOOK_INFO();
}

instance DIA_INGOR_QM305_BOOKREADY(C_INFO) {
    NPC = 0xcb47;
    NR = 1;
    CONDITION = DIA_INGOR_QM305_BOOKREADY_CONDITION;
    INFORMATION = DIA_INGOR_QM305_BOOKREADY_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "Is the book ready?";
}

func int DIA_INGOR_QM305_BOOKREADY_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QM305)) == (LOG_RUNNING)) && ((QM305_GOTARAXOSBOOK) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INGOR_QM305_BOOKREADY_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_QM305_BookReady_15_01");
    if ((QM305_GOTARAXOSBOOK_DAY) <= ((WLD_GETDAY()) - (1))) {
        QM305_GOTARAXOSBOOK = 2;
        CREATEINVITEMS(SELF, 0x9172, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x9172, 1);
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Ingor_QM305_BookReady_03_02");
        AI_OUTPUT(OTHER, SELF, "DIA_Ingor_QM305_BookReady_15_03");
        if ((QM305_GOTWOLFSDENBOOK) == (FALSE)) {
            AI_LOGENTRY(TOPIC_QM305, LOG_QM305_INGOR_GOTBOOK_V1);
        } else {
            AI_LOGENTRY(TOPIC_QM305, LOG_QM305_INGOR_GOTBOOK_V2);
        } else {
            /* set_instance(0) */;
        };
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_QM305_BookReady_03_04");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

instance DIA_INGOR_CANYOUTRAIN(C_INFO) {
    NPC = 0xcb47;
    NR = 20;
    CONDITION = DIA_INGOR_CANYOUTRAIN_CONDITION;
    INFORMATION = DIA_INGOR_CANYOUTRAIN_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Could I train with you?";
}

func int DIA_INGOR_CANYOUTRAIN_CONDITION() {
    if (((OTHER.GUILD) == (GIL_SLD)) && ((LOG_GETSTATUS(MIS_Q204)) == (LOG_SUCCESS))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INGOR_CANYOUTRAIN_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_Canyoutrain_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Canyoutrain_03_02");
    LOG_CREATETOPIC(TOPIC_ARAXOSTEACHER, LOG_NOTE);
    AI_LOGENTRY(TOPIC_ARAXOSTEACHER, LOG_ARAXOSTEACHER_INGOR);
}

var int INGOR_NOMORE = 0;
var int INGOR_CURRENT2HLEVEL = 0;
var int INGOR_CURRENTSTRLEVEL = 0;
const int INGOR_RLEVEL = 120;
var string INGOR_PRINTS = "";
instance DIA_INGOR_TRAIN(C_INFO) {
    NPC = 0xcb47;
    NR = 20;
    CONDITION = DIA_INGOR_TRAIN_CONDITION;
    INFORMATION = DIA_INGOR_TRAIN_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "Let's train.";
}

func int DIA_INGOR_TRAIN_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x11351)) && ((INGOR_NOMORE) == (FALSE))) && ((OTHER.GUILD) == (GIL_SLD))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INGOR_TRAIN_CHOICES() {
    INGOR_CURRENT2HLEVEL = OTHER.AIVAR[85];
    INGOR_CURRENTSTRLEVEL = OTHER.AIVAR[81];
    INGOR_GOLDCOST = 0;
    INFO_CLEARCHOICES(0x11359);
    INFO_ADDCHOICE(0x11359, DIALOG_BACK, 0x1135f);
    INFO_ADDCHOICE(0x11359, B_BUILDLEARNSTRING2(PRINT_LEARN2H1, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_2H, 1), INGOR_GOLDCOST), 0x11361);
    INFO_ADDCHOICE(0x11359, B_BUILDLEARNSTRING2(PRINT_LEARN2H5, (B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_2H, 1)) * (5), (INGOR_GOLDCOST) * (5)), 0x11363);
    if (((MARVIN_ARAXOSSPECIALIZATION) == (ARAXOS_SPECIALIZATION_MASTERFIGHTER)) || ((MARVIN_ARAXOSSPECIALIZATION) == (ARAXOS_SPECIALIZATION_MASTERARCHER))) {
        INFO_ADDCHOICE(0x11359, B_BUILDLEARNSTRING2(PRINT_LEARNSTR1, B_GETLEARNCOSTATTRIBUTE(OTHER, ATR_STRENGTH, 1), INGOR_GOLDCOST), 0x11364);
        INFO_ADDCHOICE(0x11359, B_BUILDLEARNSTRING2(PRINT_LEARNSTR5, B_GETLEARNCOSTATTRIBUTE(OTHER, ATR_STRENGTH, 5), (INGOR_GOLDCOST) * (5)), 0x11365);
    };
}

var int DIA_INGOR_TRAIN_CHOICES.INGOR_GOLDCOST = 0;
func void DIA_INGOR_TRAIN_LETSGO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Train_03_02");
    DIA_INGOR_TRAIN_CHOICES();
}

func void DIA_INGOR_TRAIN_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_Train_15_00");
    if (!(NPC_KNOWSINFO(OTHER, 0x11648))) {
        if ((OTHER.AIVAR[85]) >= (40)) {
            B_SAY(SELF, OTHER, "$NoLearnOverPersonalMAX");
            INGOR_PRINTS = PRINT_ARXPROMOTIONNEEDED;
        } else {
            DIA_INGOR_TRAIN_LETSGO();
        } else {
            /* set_instance(0) */;
        };
    };
    if (NPC_KNOWSINFO(OTHER, 0x11648)) {
        if (((MARVIN_ARAXOSSPECIALIZATION) < (3)) && ((OTHER.AIVAR[85]) >= (60))) {
            B_SAY(SELF, OTHER, "$NoLearnOverPersonalMAX");
            INGOR_PRINTS = PRINT_ARXPROMOTIONNEEDED;
        } else if ((((MARVIN_ARAXOSSPECIALIZATION) >= (3)) && ((OTHER.AIVAR[85]) >= (60))) && ((OTHER.AIVAR[81]) >= (160))) {
            AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Train_03_01");
            INGOR_NOMORE = TRUE;
        } else {
            DIA_INGOR_TRAIN_LETSGO();
        };
    };
}

func void DIA_INGOR_TRAIN_BACK() {
    INFO_CLEARCHOICES(0x11359);
}

func void DIA_INGOR_TRAIN_2H_1_GOODJOB() {
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Train_2H1_03_01");
    DIA_INGOR_TRAIN_CHOICES();
}

func void DIA_INGOR_TRAIN_2H_1() {
    if (!(NPC_KNOWSINFO(OTHER, 0x11648))) {
        if ((INGOR_CURRENT2HLEVEL) < (OTHER.AIVAR[85])) {
            DIA_INGOR_TRAIN_2H_1_GOODJOB();
        } else if (((OTHER.AIVAR[85]) >= (40)) && ((INGOR_CURRENT2HLEVEL) == (OTHER.AIVAR[85]))) {
            B_SAY(SELF, OTHER, "$NoLearnOverPersonalMAX");
            INGOR_PRINTS = PRINT_ARXPROMOTIONNEEDED;
            PRINTSCREEN(INGOR_PRINTS, -(1), YPOS_LEVELUP, FONT_SCREEN, 2);
            DIA_INGOR_TRAIN_CHOICES();
        };
    };
    if (NPC_KNOWSINFO(OTHER, 0x11648)) {
        if ((INGOR_CURRENT2HLEVEL) < (OTHER.AIVAR[85])) {
            DIA_INGOR_TRAIN_2H_1_GOODJOB();
        };
    };
    DIA_INGOR_TRAIN_CHOICES();
}

func void DIA_INGOR_TRAIN_2H_5_GOODJOB() {
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Train_2H5_03_01");
    DIA_INGOR_TRAIN_CHOICES();
}

func void DIA_INGOR_TRAIN_2H_5() {
    if (!(NPC_KNOWSINFO(OTHER, 0x11648))) {
        if ((INGOR_CURRENT2HLEVEL) < (OTHER.AIVAR[85])) {
            DIA_INGOR_TRAIN_2H_5_GOODJOB();
        } else if (((OTHER.AIVAR[85]) >= (40)) && ((INGOR_CURRENT2HLEVEL) == (OTHER.AIVAR[85]))) {
            B_SAY(SELF, OTHER, "$NoLearnOverPersonalMAX");
            INGOR_PRINTS = PRINT_ARXPROMOTIONNEEDED;
            PRINTSCREEN(INGOR_PRINTS, -(1), YPOS_LEVELUP, FONT_SCREEN, 2);
            DIA_INGOR_TRAIN_CHOICES();
        };
    };
    if (NPC_KNOWSINFO(OTHER, 0x11648)) {
        if ((INGOR_CURRENT2HLEVEL) < (OTHER.AIVAR[85])) {
            DIA_INGOR_TRAIN_2H_5_GOODJOB();
        };
    };
    DIA_INGOR_TRAIN_CHOICES();
}

func void DIA_INGOR_TRAINSTR_1() {
    if ((OTHER.AIVAR[81]) < (INGOR_RLEVEL)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Ingor_TrainSTR1_03_00");
        INGOR_PRINTS = CONCATSTRINGS(PRINT_MINATR, INTTOSTRING(INGOR_RLEVEL));
    };
    if ((INGOR_CURRENTSTRLEVEL) < (OTHER.AIVAR[81])) {
        AI_OUTPUT(SELF, OTHER, "DIA_Ingor_TrainSTR1_03_01");
    };
    B_TEACHATTRIBUTEPOINTS(SELF, OTHER, ATR_STRENGTH, 1, 160);
    DIA_INGOR_TRAIN_CHOICES();
}

func void DIA_INGOR_TRAINSTR_5() {
    if ((OTHER.AIVAR[81]) < (INGOR_RLEVEL)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Ingor_TrainSTR5_03_00");
        INGOR_PRINTS = CONCATSTRINGS(PRINT_MINATR, INTTOSTRING(INGOR_RLEVEL));
    };
    if ((INGOR_CURRENTSTRLEVEL) < (OTHER.AIVAR[81])) {
        AI_OUTPUT(SELF, OTHER, "DIA_Ingor_TrainSTR5_03_01");
    };
    B_TEACHATTRIBUTEPOINTS(SELF, OTHER, ATR_STRENGTH, 5, 160);
    DIA_INGOR_TRAIN_CHOICES();
}

instance DIA_INGOR_TEACH_SMITH(C_INFO) {
    NPC = 0xcb47;
    NR = 7;
    CONDITION = DIA_INGOR_TEACH_SMITH_CONDITION;
    INFORMATION = DIA_INGOR_TEACH_SMITH_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = B_BUILDLEARNSTRING2(PRINT_LEARN_SMITH1, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_SMITH, 1), INGOR_SMITH);
}

func int DIA_INGOR_TEACH_SMITH_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x11351)) && ((OTHER.GUILD) == (GIL_SLD))) && ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_SMITH)) == (0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INGOR_TEACH_SMITH_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_Teach_Smith_15_00");
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (INGOR_SMITH)) {
        if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_SMITH)) == (1)) {
            NPC_REMOVEINVITEMS(SELF, 0x859b, INGOR_SMITH);
            AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Teach_Smith_03_01");
            B_GIVEINVITEMS(SELF, OTHER, 0x8c8c, 4);
            AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Teach_Smith_03_02");
        };
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Teach_Smith_03_03");
}

instance DIA_INGOR_TEACH_SMITH2(C_INFO) {
    NPC = 0xcb47;
    NR = 7;
    CONDITION = DIA_INGOR_TEACH_SMITH2_CONDITION;
    INFORMATION = DIA_INGOR_TEACH_SMITH2_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = B_BUILDLEARNSTRING2(PRINT_LEARN_SMITH2, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_SMITH, 2), INGOR_SMITH2);
}

func int DIA_INGOR_TEACH_SMITH2_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x11351)) && ((OTHER.GUILD) == (GIL_SLD))) && ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_SMITH)) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INGOR_TEACH_SMITH2_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Ingor_Teach_Smith2_15_00");
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (INGOR_SMITH2)) {
        if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_SMITH)) == (2)) {
            NPC_REMOVEINVITEMS(SELF, 0x859b, INGOR_SMITH2);
            AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Teach_Smith2_03_01");
            B_GIVEINVITEMS(OTHER, SELF, 0x859b, INGOR_SMITH2);
            AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Teach_Smith2_03_02");
        };
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Ingor_Teach_Smith2_03_03");
}

instance DIA_INGOR_AMBIENT(C_INFO) {
    NPC = 0xcb47;
    NR = 890;
    CONDITION = DIA_INGOR_AMBIENT_CONDITION;
    INFORMATION = DIA_INGOR_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How are you doing?";
}

func int DIA_INGOR_AMBIENT_CONDITION() {
    return TRUE;
}

func void DIA_INGOR_AMBIENT_INFO() {
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    B_SAY(OTHER, SELF, "$MARVIN_WhatNew2");
    if (((MARVIN_LOSTGUILDARAXOS) == (TRUE)) || ((HERO.GUILD) == (GIL_SLD))) {
        B_SAY(SELF, OTHER, "$IMBUSY_CALM");
    };
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    NPC_INITAMBIENTS(SELF, 2);
    if ((NPC_GETLASTAMBIENT(SELF)) == (1)) {
        B_SAY(SELF, OTHER, "$IMBUSY_ANGRY");
    };
    if ((NPC_GETLASTAMBIENT(SELF)) == (2)) {
        B_SAY(SELF, OTHER, "$RUDE_GOODBYE");
    };
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

instance DIA_INGOR_PICKPOCKET(C_INFO) {
    NPC = 0xcb47;
    NR = 900;
    CONDITION = DIA_INGOR_PICKPOCKET_CONDITION;
    INFORMATION = DIA_INGOR_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_80;
}

func int DIA_INGOR_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_INGOR_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(0x1136f);
    INFO_ADDCHOICE(0x1136f, DIALOG_BACK, 0x11373);
    INFO_ADDCHOICE(0x1136f, DIALOG_PICKPOCKET, 0x11372);
}

func void DIA_INGOR_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (2)) {
        CREATEINVITEMS(SELF, 0x9030, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x9030, 1);
        B_PICKPOCKET_AMBIENT_TIER_2();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(0x1136f);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(0x1136f);
}

func void DIA_INGOR_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(0x1136f);
}

