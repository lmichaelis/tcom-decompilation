func void SQ101_KILLTHIEF() {
    B_IMMEDIATEATTACKPLAYER(MIL_4028_KLAUS, AR_KILL);
    CREATEINVITEMS(MIL_4029_JOHAN, 0x84e5, 1);
    B_IMMEDIATEATTACKPLAYER(MIL_4029_JOHAN, AR_KILL);
}

func void SQ101_GIVEWISPJOHAN() {
    B_GIVEINVITEMS(OTHER, SELF, 0x8e23, 1);
    B_GIVEPLAYERXP(XP_SQ101_JOHANWISP);
    AI_STOPLOOKAT(SELF);
    AI_USEITEM(SELF, 0x8e23);
}

func void SQ101_KNUT_GIVESAW() {
    if ((NPC_HASITEMS(OTHER, 0x8585)) == (0)) {
        CREATEINVITEMS(SELF, 0x8585, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8585, 1);
        AI_OUTPUT(SELF, OTHER, "DIA_Knut_SQ101_Wood_Work_03_03");
    };
}

func void SQ101_NIRKO_GOBACKTOWORK() {
    SQ101_NIRKOCOMEBACKTOWORK = TRUE;
    NPC_EXCHANGEROUTINE(BAU_2279_NIRKO, "WORK");
}

func void SQ101_CALMDOWNGUARDS() {
    NPC_SETATTITUDE(MIL_4028_KLAUS, ATT_NEUTRAL);
    NPC_SETTEMPATTITUDE(MIL_4028_KLAUS, ATT_NEUTRAL);
    MIL_4028_KLAUS.AIVAR[1] = CRIME_NONE;
    MDL_STARTFACEANI(MIL_4028_KLAUS, S_NEUTRAL, 0x3f800000, -1082130432);
    NPC_SETATTITUDE(MIL_4029_JOHAN, ATT_NEUTRAL);
    NPC_SETTEMPATTITUDE(MIL_4029_JOHAN, ATT_NEUTRAL);
    MIL_4029_JOHAN.AIVAR[1] = CRIME_NONE;
    MDL_STARTFACEANI(MIL_4029_JOHAN, S_NEUTRAL, 0x3f800000, -1082130432);
}

func void SQ101_PREPARECORPSE() {
    FF_APPLYONCEEXTGT(0xf382, 0, -(1));
}

func void SQ101_PREPARECORPSE_APPLY() {
    if ((SQ101_PREPARECORPSE_COUNT) == (0)) {
        PRINTD("Rozpoczynam - SQ101_PrepareCorpse_Apply");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("SQ101_MOVER_FARMERCORPSE");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        CHANGEVOBCOLLISION("SQ101_FARMERCORPSE", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("SQ101_MOVER_FARMERCORPSE");
        SQ101_PREPARECORPSE_COUNT = 1;
    };
    if (((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ101_PrepareCorpse_Apply");
        CHANGEVOBCOLLISION("SQ101_FARMERCORPSE", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0xf382);
        SQ101_PREPARECORPSE_COUNT = 0;
    };
}

instance SQ101_PREPARECORPSE_APPLY.MOVER1(ZCMOVER)
var int SQ101_PREPARECORPSE_APPLY.SQ101_PREPARECORPSE_COUNT = 0;
var int SQ101_PREPARECORPSE_APPLY.MOVPTR1 = 0;
