instance DIA_SLD_FASTTRAVEL_EXIT(C_INFO) {
    NR = 999;
    CONDITION = DIA_SLD_FASTTRAVEL_EXIT_CONDITION;
    INFORMATION = DIA_SLD_FASTTRAVEL_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_SLD_FASTTRAVEL_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_SLD_FASTTRAVEL_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_SLD_FASTTRAVEL_TAKETHIS(C_INFO) {
    NR = 1;
    CONDITION = DIA_SLD_FASTTRAVEL_TAKETHIS_CONDITION;
    INFORMATION = DIA_SLD_FASTTRAVEL_TAKETHIS_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_SLD_FASTTRAVEL_TAKETHIS_CONDITION() {
    if (((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(SLD_7705_FASTTRAVEL))) && ((Q201_SPAWNEARAXOSFASTTRAVEL) != (4))) {
        return FALSE;
    };
    return TRUE;
}

func void DIA_SLD_FASTTRAVEL_TAKETHIS_INFO() {
    B_SAY(SELF, OTHER, "$REWARD_CALM");
    CREATEINVITEMS(SELF, 0x9c00, 1);
    B_GIVEINVITEMS(SELF, OTHER, 0x9c00, 1);
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_SLD_FASTTRAVEL_TRAVEL(C_INFO) {
    NR = 1;
    CONDITION = DIA_SLD_FASTTRAVEL_TRAVEL_CONDITION;
    INFORMATION = DIA_SLD_FASTTRAVEL_TRAVEL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_TAKEMETO;
}

func int DIA_SLD_FASTTRAVEL_TRAVEL_CONDITION() {
    if (((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(SLD_7705_FASTTRAVEL))) && ((Q201_SPAWNEARAXOSFASTTRAVEL) != (4))) {
        return FALSE;
    };
    return TRUE;
}

var int FASTTRAVEL_PLACE_MINE = 0;
var int FASTTRAVEL_PLACE_SILBACH = 0;
var int FASTTRAVEL_PLACE_CITY = 0;
var int FASTTRAVEL_PLACE_CITY_WHERE = 0;
var int FASTTRAVEL_PLACE_COAL = 0;
var int FASTTRAVEL_PLACE_BERMAR = 0;
var int FASTTRAVEL_PLACE_GASPAR = 0;
var int FASTTRAVEL_PLACE_VALERIO = 0;
var int FASTTRAVEL_PLACE_MILITIAMINE_ARX = 0;
const int FASTTRAVEL_DISTANCETOWP = 10000;
var int FASTTRAVE_BLOCKPLACE_BERMAR = 0;
func void DIA_SLD_FASTTRAVEL_TRAVEL_CHOICES() {
    FASTTRAVEL_PLACE_CITY_WHERE = 0;
    INFO_CLEARCHOICES(0xa5eb);
    if ((NPC_GETDISTTOWP(SELF, "PART7_FASTTRAVEL_HERO")) >= (FASTTRAVEL_DISTANCETOWP)) {
        INFO_ADDCHOICE(0xa5eb, CHOICE_FASTTRAVEL_SLD_MINE, 0xa605);
    };
    if ((NPC_GETDISTTOWP(SELF, "PART11_FASTTRAVEL_HERO")) >= (FASTTRAVEL_DISTANCETOWP)) {
        INFO_ADDCHOICE(0xa5eb, CHOICE_FASTTRAVEL_SLD_COAL, 0xa607);
    };
    if ((NPC_GETDISTTOWP(SELF, "PART6_ARAXOS_FASTTRAVEL")) >= (FASTTRAVEL_DISTANCETOWP)) {
        if ((FASTTRAVE_BLOCKPLACE_BERMAR) == (FALSE)) {
            INFO_ADDCHOICE(0xa5eb, CHOICE_FASTTRAVEL_SLD_BERMAR, 0xa603);
        };
    };
    if ((NPC_GETDISTTOWP(SELF, "PART15_FASTTRAVEL_HERO")) >= (FASTTRAVEL_DISTANCETOWP)) {
        INFO_ADDCHOICE(0xa5eb, CHOICE_FASTTRAVEL_SLD_GASPAR, 0xa608);
    };
    if ((NPC_GETDISTTOWP(SELF, "PART9_FASTTRAVEL_HERO")) >= (FASTTRAVEL_DISTANCETOWP)) {
        INFO_ADDCHOICE(0xa5eb, CHOICE_FASTTRAVEL_SLD_VALERIO, 0xa604);
    };
    if ((CITYENTERED) == (TRUE)) {
        if (((((NPC_GETDISTTOWP(SELF, "PARTM1_FASTTRAVEL_HERO")) >= (FASTTRAVEL_DISTANCETOWP)) && ((NPC_GETDISTTOWP(SELF, "PARTM4_FASTTRAVEL_HERO")) >= (FASTTRAVEL_DISTANCETOWP))) && ((NPC_GETDISTTOWP(SELF, "PARTM7_FASTTRAVEL_HERO")) >= (FASTTRAVEL_DISTANCETOWP))) && ((NPC_GETDISTTOWP(SELF, "PARTM5_FASTTRAVEL_HERO")) >= (FASTTRAVEL_DISTANCETOWP))) {
            INFO_ADDCHOICE(0xa5eb, CHOICE_FASTTRAVEL_SLD_CITY, 0xa5fb);
        };
    };
    if ((NPC_GETDISTTOWP(SELF, "VILLAGE_FASTTRAVEL_HERO")) >= (FASTTRAVEL_DISTANCETOWP)) {
        INFO_ADDCHOICE(0xa5eb, CHOICE_FASTTRAVEL_SLD_SILBACH, 0xa606);
    };
    if ((NPC_GETDISTTOWP(SELF, "PART10_FASTTRAVEL_HERO_02")) >= (FASTTRAVEL_DISTANCETOWP)) {
        INFO_ADDCHOICE(0xa5eb, CHOICE_FASTTRAVEL_SLD_MILITIAMINE, 0xa609);
    };
    INFO_ADDCHOICE(0xa5eb, DIALOG_BACK, 0xa60a);
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_INFO() {
    B_SAY(OTHER, SELF, "$FASTTRAVEL_TAKEME");
    DIA_SLD_FASTTRAVEL_TRAVEL_CHOICES();
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_LETSGO() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (FASTTRAVEL_SLD)) {
        B_SAY(SELF, OTHER, "$SURE_V3");
        B_GIVEINVITEMS(OTHER, SELF, 0x859b, FASTTRAVEL_SLD);
        INFO_CLEARCHOICES(0xa5eb);
        AI_STOPPROCESSINFOS(SELF);
        AI_FUNCTION(SELF, 0xa60b);
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    INFO_CLEARCHOICES(0xa5eb);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_CITY() {
    INFO_CLEARCHOICES(0xa5eb);
    INFO_ADDCHOICE(0xa5eb, CHOICE_FASTTRAVEL_SLD_CITY_01, 0xa5fe);
    INFO_ADDCHOICE(0xa5eb, CHOICE_FASTTRAVEL_SLD_CITY_02, 0xa5ff);
    INFO_ADDCHOICE(0xa5eb, CHOICE_FASTTRAVEL_SLD_CITY_03, 0xa600);
    if ((PLAYERHOUSE_BOUGHTFASTTRAVEL) == (TRUE)) {
        INFO_ADDCHOICE(0xa5eb, CHOICE_FASTTRAVEL_SLD_CITY_04, 0xa601);
    };
    INFO_ADDCHOICE(0xa5eb, DIALOG_BACK, 0xa602);
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_CITY_GO() {
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_FastTravel_Travel_City_15_01");
    if (((LOG_GETSTATUS(MIS_Q312)) == (LOG_RUNNING)) || ((LOG_GETSTATUS(MIS_Q308)) == (LOG_RUNNING))) {
        B_SAY(SELF, OTHER, "$FastTravel_Q312_NoCity_v1");
        B_SAY(SELF, OTHER, "$FastTravel_Q312_NoCity_v2");
        INFO_CLEARCHOICES(0xa5eb);
        FASTTRAVEL_PLACE_CITY_WHERE = 0;
        if ((LOG_GETSTATUS(MIS_Q312)) == (LOG_RUNNING)) {
            if ((Q312_FASTTRAVEL_SLD_LOGENTRY) == (FALSE)) {
                Q312_FASTTRAVEL_SLD_LOGENTRY = TRUE;
                AI_LOGENTRY(TOPIC_Q312, LOG_Q312_FASTTRAVEL_SLD);
            };
        };
    };
    FASTTRAVEL_PLACE_CITY = 1;
    DIA_SLD_FASTTRAVEL_TRAVEL_LETSGO();
}

var int DIA_SLD_FASTTRAVEL_TRAVEL_CITY_GO.Q312_FASTTRAVEL_SLD_LOGENTRY = 0;
func void DIA_SLD_FASTTRAVEL_TRAVEL_CITY_01() {
    FASTTRAVEL_PLACE_CITY_WHERE = 1;
    DIA_SLD_FASTTRAVEL_TRAVEL_CITY_GO();
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_CITY_02() {
    FASTTRAVEL_PLACE_CITY_WHERE = 2;
    DIA_SLD_FASTTRAVEL_TRAVEL_CITY_GO();
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_CITY_03() {
    FASTTRAVEL_PLACE_CITY_WHERE = 3;
    DIA_SLD_FASTTRAVEL_TRAVEL_CITY_GO();
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_CITY_04() {
    FASTTRAVEL_PLACE_CITY_WHERE = 4;
    DIA_SLD_FASTTRAVEL_TRAVEL_CITY_GO();
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_CITY_BACK() {
    DIA_SLD_FASTTRAVEL_TRAVEL_CHOICES();
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_BERMAR() {
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_FastTravel_Travel_Bermar_15_01");
    if ((KAPITEL) == (5)) {
        FASTTRAVE_BLOCKPLACE_BERMAR = TRUE;
        B_SAY(SELF, OTHER, "$FastTravel_NoBermar_v1");
        INFO_CLEARCHOICES(0xa5eb);
    };
    FASTTRAVEL_PLACE_BERMAR = 1;
    DIA_SLD_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_VALERIO() {
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_FastTravel_Travel_Valerio_15_01");
    if ((SQ225_FIGHTINVINEYARD_BLOCKFASTTRAVEL) == (TRUE)) {
        B_SAY(SELF, OTHER, "$FastTravel_SQ225_NoValerio_v1");
        INFO_CLEARCHOICES(0xa5eb);
    };
    FASTTRAVEL_PLACE_VALERIO = 1;
    DIA_SLD_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_MINE() {
    FASTTRAVEL_PLACE_MINE = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_FastTravel_Travel_Mine_15_01");
    DIA_SLD_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_SILBACH() {
    FASTTRAVEL_PLACE_SILBACH = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_FastTravel_Travel_Silbach_15_01");
    DIA_SLD_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_COAL() {
    FASTTRAVEL_PLACE_COAL = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_FastTravel_Travel_Coal_15_01");
    DIA_SLD_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_GASPAR() {
    FASTTRAVEL_PLACE_GASPAR = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_FastTravel_Travel_Gaspar_15_01");
    DIA_SLD_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_MILITIAMINE() {
    FASTTRAVEL_PLACE_MILITIAMINE_ARX = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_FastTravel_Travel_MilitiaMine_15_01");
    DIA_SLD_FASTTRAVEL_TRAVEL_LETSGO();
}

func void DIA_SLD_FASTTRAVEL_TRAVEL_BACK() {
    B_SAY(OTHER, SELF, "$FASTTRAVEL_NEVERMIND");
    INFO_CLEARCHOICES(0xa5eb);
}

func void ARAXOS_FASTTRAVEL() {
    ACH_7_SLD_FASTTRAVEL = TRUE;
    FADESCREENTOBLACKF(1, 0xa60c, 1000);
}

func void ARAXOS_FASTTRAVEL_FADESCREEN() {
    if ((FASTTRAVEL_PLACE_CITY) == (1)) {
        if ((FASTTRAVEL_PLACE_CITY_WHERE) == (1)) {
            FASTTRAVEL_PLACE_CITY = 0;
            FASTTRAVEL_PLACE_CITY_WHERE = 0;
            TELEPORTNPCTOWP(0x71b, "PARTM1_FASTTRAVEL_HERO");
            TELEMETRY_FASTTRAVEL(2, "PARTM1_FASTTRAVEL_HERO");
        } else if ((FASTTRAVEL_PLACE_CITY_WHERE) == (2)) {
            FASTTRAVEL_PLACE_CITY = 0;
            FASTTRAVEL_PLACE_CITY_WHERE = 0;
            TELEPORTNPCTOWP(0x71b, "PARTM4_FASTTRAVEL_HERO");
            TELEMETRY_FASTTRAVEL(2, "PARTM4_FASTTRAVEL_HERO");
        } else if ((FASTTRAVEL_PLACE_CITY_WHERE) == (3)) {
            FASTTRAVEL_PLACE_CITY = 0;
            FASTTRAVEL_PLACE_CITY_WHERE = 0;
            TELEPORTNPCTOWP(0x71b, "PARTM7_FASTTRAVEL_HERO");
            TELEMETRY_FASTTRAVEL(2, "PARTM7_FASTTRAVEL_HERO");
        } else if ((FASTTRAVEL_PLACE_CITY_WHERE) == (4)) {
            FASTTRAVEL_PLACE_CITY = 0;
            FASTTRAVEL_PLACE_CITY_WHERE = 0;
            TELEPORTNPCTOWP(0x71b, "PARTM5_FASTTRAVEL_HERO");
            TELEMETRY_FASTTRAVEL(2, "PARTM5_FASTTRAVEL_HERO");
        };
    };
    if ((FASTTRAVEL_PLACE_BERMAR) == (1)) {
        FASTTRAVEL_PLACE_BERMAR = 0;
        TELEPORTNPCTOWP(0x71b, "PART6_FASTTRAVEL_HERO");
        TELEMETRY_FASTTRAVEL(2, "PART6_FASTTRAVEL_HERO");
    };
    if ((FASTTRAVEL_PLACE_COAL) == (1)) {
        FASTTRAVEL_PLACE_COAL = 0;
        TELEPORTNPCTOWP(0x71b, "PART11_FASTTRAVEL_HERO");
        TELEMETRY_FASTTRAVEL(2, "PART11_FASTTRAVEL_HERO");
    };
    if ((FASTTRAVEL_PLACE_GASPAR) == (1)) {
        FASTTRAVEL_PLACE_GASPAR = 0;
        TELEPORTNPCTOWP(0x71b, "PART15_FASTTRAVEL_HERO");
        TELEMETRY_FASTTRAVEL(2, "PART15_FASTTRAVEL_HERO");
    };
    if ((FASTTRAVEL_PLACE_MINE) == (1)) {
        FASTTRAVEL_PLACE_MINE = 0;
        TELEPORTNPCTOWP(0x71b, "PART7_FASTTRAVEL_HERO");
        TELEMETRY_FASTTRAVEL(2, "PART7_FASTTRAVEL_HERO");
    };
    if ((FASTTRAVEL_PLACE_SILBACH) == (1)) {
        FASTTRAVEL_PLACE_SILBACH = 0;
        TELEPORTNPCTOWP(0x71b, "VILLAGE_FASTTRAVEL_HERO");
        TELEMETRY_FASTTRAVEL(2, "VILLAGE_FASTTRAVEL_HERO");
    };
    if ((FASTTRAVEL_PLACE_VALERIO) == (1)) {
        FASTTRAVEL_PLACE_VALERIO = 0;
        TELEPORTNPCTOWP(0x71b, "PART9_FASTTRAVEL_HERO");
        TELEMETRY_FASTTRAVEL(2, "PART9_FASTTRAVEL_HERO");
    };
    if ((FASTTRAVEL_PLACE_MILITIAMINE_ARX) == (1)) {
        FASTTRAVEL_PLACE_MILITIAMINE_ARX = 0;
        TELEPORTNPCTOWP(0x71b, "PART10_FASTTRAVEL_HERO_02");
        TELEMETRY_FASTTRAVEL(2, "PART10_FASTTRAVEL_HERO_02");
    };
    if ((Q201_SPAWNEARAXOSFASTTRAVEL) == (3)) {
        Q201_SPAWNEARAXOSFASTTRAVEL = 4;
        NPC_EXCHANGEROUTINE(SLD_7705_FASTTRAVEL, "FASTTRAVEL");
        FF_APPLYONCEEXTGT(0xf209, 0, -(1));
        if ((NPC_ISINSTATE(SLD_7705_FASTTRAVEL, 0xf09f)) == (FALSE)) {
            NPC_CLEARAIQUEUE(SLD_7705_FASTTRAVEL);
            AI_WAIT(SLD_7705_FASTTRAVEL, 0x3f800000);
            AI_SETWALKMODE(SLD_7705_FASTTRAVEL, NPC_RUN);
            AI_TURNTONPC(SLD_7705_FASTTRAVEL, HERO);
            AI_GOTONPC(SLD_7705_FASTTRAVEL, HERO);
        };
    };
    B_PASSTIME(2);
    FADESCREENFROMBLACK(1);
    HERO.AIVAR[4] = FALSE;
}

func void B_ASSIGNAMBIENTINFOS_SLD_FASTRAVEL(var C_NPC SLF) {
    DIA_SLD_FASTTRAVEL_EXIT.NPC = HLP_GETINSTANCEID(SLF);
    DIA_SLD_FASTTRAVEL_TRAVEL.NPC = HLP_GETINSTANCEID(SLF);
    DIA_SLD_FASTTRAVEL_TAKETHIS.NPC = HLP_GETINSTANCEID(SLF);
}

