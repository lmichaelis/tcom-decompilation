func void QM301_CLEANUPMOVERS() {
    PRINTD("Mover");
    WLD_SENDTRIGGER("QM301_PUDDLE_01");
    WLD_SENDTRIGGER("QM301_PUDDLE_02");
    WLD_SENDTRIGGER("QM301_PUDDLE_03");
    WLD_SENDTRIGGER("QM301_PUDDLE_04");
    WLD_SENDTRIGGER("QM301_PUDDLE_05");
    WLD_SENDTRIGGER("QM301_PUDDLE_06");
}

func void QM301_CHASE() {
    B_STARTOTHERROUTINE(BDT_11096_THIEF, "QM301_CHASE");
    NPC_REFRESH(BDT_11096_THIEF);
    B_STARTOTHERROUTINE(MIL_4017_ARWID, "QM301_CHASE");
    QM301_ARWID_RTNCHECK = 3;
    NPC_REFRESH(MIL_4017_ARWID);
    B_STARTOTHERROUTINE(NONE_826_ELID, START);
    NPC_REFRESH(NONE_826_ELID);
    if (HLP_ISVALIDNPC(VLK_11081_HOBO)) {
        if (!(NPC_ISDEAD(VLK_11081_HOBO))) {
            B_STARTOTHERROUTINE(VLK_11081_HOBO, TOT);
            NPC_REFRESH(VLK_11081_HOBO);
        };
    };
    if (HLP_ISVALIDNPC(VLK_11082_HOBO)) {
        if (!(NPC_ISDEAD(VLK_11082_HOBO))) {
            B_STARTOTHERROUTINE(VLK_11082_HOBO, TOT);
            NPC_REFRESH(VLK_11082_HOBO);
        };
    };
    if (HLP_ISVALIDNPC(VLK_11083_HOBO)) {
        if (!(NPC_ISDEAD(VLK_11083_HOBO))) {
            B_STARTOTHERROUTINE(VLK_11083_HOBO, TOT);
            NPC_REFRESH(VLK_11083_HOBO);
        };
    };
    if (HLP_ISVALIDNPC(VLK_11084_HOBO)) {
        if (!(NPC_ISDEAD(VLK_11084_HOBO))) {
            B_STARTOTHERROUTINE(VLK_11084_HOBO, TOT);
            NPC_REFRESH(VLK_11084_HOBO);
        };
    };
    if (HLP_ISVALIDNPC(VLK_11085_HOBO)) {
        if (!(NPC_ISDEAD(VLK_11085_HOBO))) {
            B_STARTOTHERROUTINE(VLK_11085_HOBO, TOT);
            NPC_REFRESH(VLK_11085_HOBO);
        };
    };
    if (HLP_ISVALIDNPC(VLK_11086_HOBO)) {
        if (!(NPC_ISDEAD(VLK_11086_HOBO))) {
            B_STARTOTHERROUTINE(VLK_11086_HOBO, TOT);
            NPC_REFRESH(VLK_11086_HOBO);
        };
    };
    WLD_INSERTNPC(0xcd94, "PARTM3_HOBO_06");
}

func void QM301_THIEFFIGHT() {
    QM301_FIGHTWITHTHIEFS = 1;
    BDT_11096_THIEF.GUILD = GIL_BDT;
    NPC_SETTRUEGUILD(BDT_11096_THIEF, GIL_BDT);
    B_IMMEDIATEATTACKPLAYER(BDT_11096_THIEF, AR_KILL);
    BDT_11096_THIEF.FLAGS = 0;
    BDT_11097_THIEF.GUILD = GIL_BDT;
    NPC_SETTRUEGUILD(BDT_11097_THIEF, GIL_BDT);
    B_IMMEDIATEATTACKPLAYER(BDT_11097_THIEF, AR_KILL);
    BDT_11097_THIEF.FLAGS = 0;
    NPC_SETTRUEGUILD(HERO, HERO.GUILD);
}

func void B_QM301_BRINGBACKHOMELESS() {
    if (HLP_ISVALIDNPC(VLK_11081_HOBO)) {
        if (!(NPC_ISDEAD(VLK_11081_HOBO))) {
            B_STARTOTHERROUTINE(VLK_11081_HOBO, START);
            NPC_REFRESH(VLK_11081_HOBO);
        };
    };
    if (HLP_ISVALIDNPC(VLK_11082_HOBO)) {
        if (!(NPC_ISDEAD(VLK_11082_HOBO))) {
            B_STARTOTHERROUTINE(VLK_11082_HOBO, START);
            NPC_REFRESH(VLK_11082_HOBO);
        };
    };
    if (HLP_ISVALIDNPC(VLK_11083_HOBO)) {
        if (!(NPC_ISDEAD(VLK_11083_HOBO))) {
            B_STARTOTHERROUTINE(VLK_11083_HOBO, START);
            NPC_REFRESH(VLK_11083_HOBO);
        };
    };
    if (HLP_ISVALIDNPC(VLK_11084_HOBO)) {
        if (!(NPC_ISDEAD(VLK_11084_HOBO))) {
            B_STARTOTHERROUTINE(VLK_11084_HOBO, START);
            NPC_REFRESH(VLK_11084_HOBO);
        };
    };
    if (HLP_ISVALIDNPC(VLK_11085_HOBO)) {
        if (!(NPC_ISDEAD(VLK_11085_HOBO))) {
            B_STARTOTHERROUTINE(VLK_11085_HOBO, START);
            NPC_REFRESH(VLK_11085_HOBO);
        };
    };
    if (HLP_ISVALIDNPC(VLK_11086_HOBO)) {
        if (!(NPC_ISDEAD(VLK_11086_HOBO))) {
            B_STARTOTHERROUTINE(VLK_11086_HOBO, START);
            NPC_REFRESH(VLK_11086_HOBO);
        };
    };
}

func void QM301_PREPARETARGETS() {
    HERO.AIVAR[95] = TRUE;
    HERO.AIVAR[94] = TRUE;
    CHANGEVOBCOLLISION("QM301_TARGET_01", FALSE, FALSE, FALSE, TRUE);
    CHANGEVOBCOLLISION("QM301_TARGET_02", FALSE, FALSE, FALSE, TRUE);
    CHANGEVOBCOLLISION("QM301_TARGET_03", FALSE, FALSE, FALSE, TRUE);
    WLD_SENDTRIGGER("QM301_MOVER_SHOOTTARGER_01_A");
    WLD_SENDTRIGGER("QM301_MOVER_SHOOTTARGER_02_A");
    WLD_SENDTRIGGER("QM301_MOVER_SHOOTTARGER_03_A");
    WLD_SENDTRIGGER("QM301_ALPHAWALL");
    if (HLP_ISVALIDNPC(VLK_11075_HOBO)) {
        if ((NPC_ISDEAD(VLK_11075_HOBO)) == (FALSE)) {
            VLK_11075_HOBO.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(VLK_11076_HOBO)) {
        if ((NPC_ISDEAD(VLK_11076_HOBO)) == (FALSE)) {
            VLK_11076_HOBO.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(VLK_11077_HOBO)) {
        if ((NPC_ISDEAD(VLK_11077_HOBO)) == (FALSE)) {
            VLK_11077_HOBO.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(NOV_13818_NOVIZE)) {
        if ((NPC_ISDEAD(NOV_13818_NOVIZE)) == (FALSE)) {
            NOV_13818_NOVIZE.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(NOV_13817_NOVIZE)) {
        if ((NPC_ISDEAD(NOV_13817_NOVIZE)) == (FALSE)) {
            NOV_13817_NOVIZE.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_13840_MILITIA)) {
        if ((NPC_ISDEAD(MIL_13840_MILITIA)) == (FALSE)) {
            MIL_13840_MILITIA.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_13816_MILITIA)) {
        if ((NPC_ISDEAD(MIL_13816_MILITIA)) == (FALSE)) {
            MIL_13816_MILITIA.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(VLK_6011_GUY)) {
        if ((NPC_ISDEAD(VLK_6011_GUY)) == (FALSE)) {
            VLK_6011_GUY.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_6385_SAMBOR)) {
        if ((NPC_ISDEAD(MIL_6385_SAMBOR)) == (FALSE)) {
            MIL_6385_SAMBOR.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_924_WINSTAN)) {
        if ((NPC_ISDEAD(MIL_924_WINSTAN)) == (FALSE)) {
            MIL_924_WINSTAN.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_4044_SALL)) {
        if ((NPC_ISDEAD(MIL_4044_SALL)) == (FALSE)) {
            MIL_4044_SALL.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_4017_ARWID)) {
        if ((NPC_ISDEAD(MIL_4017_ARWID)) == (FALSE)) {
            MIL_4017_ARWID.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_4001_OKTAV)) {
        if ((NPC_ISDEAD(MIL_4001_OKTAV)) == (FALSE)) {
            MIL_4001_OKTAV.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_4040_CABI)) {
        if ((NPC_ISDEAD(MIL_4040_CABI)) == (FALSE)) {
            MIL_4040_CABI.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_4041_LEVE)) {
        if ((NPC_ISDEAD(MIL_4041_LEVE)) == (FALSE)) {
            MIL_4041_LEVE.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_4042_NEIR)) {
        if ((NPC_ISDEAD(MIL_4042_NEIR)) == (FALSE)) {
            MIL_4042_NEIR.AIVAR[15] = TRUE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_4016_WEGAR)) {
        if ((NPC_ISDEAD(MIL_4016_WEGAR)) == (FALSE)) {
            MIL_4016_WEGAR.AIVAR[15] = TRUE;
        };
    };
}

func void QM301_NEXTTARGETS() {
    WLD_SENDTRIGGER("QM301_MOVER_SHOOTTARGER_01_B");
    WLD_SENDTRIGGER("QM301_MOVER_SHOOTTARGER_02_B");
    WLD_SENDTRIGGER("QM301_MOVER_SHOOTTARGER_03_B");
}

func void QM301_HIDETARGETS() {
    HERO.AIVAR[95] = FALSE;
    HERO.AIVAR[94] = FALSE;
    CHANGEVOBCOLLISION("QM301_TARGET_01", FALSE, FALSE, FALSE, FALSE);
    CHANGEVOBCOLLISION("QM301_TARGET_02", FALSE, FALSE, FALSE, FALSE);
    CHANGEVOBCOLLISION("QM301_TARGET_03", FALSE, FALSE, FALSE, FALSE);
    WLD_SENDTRIGGER("QM301_ALPHAWALL");
    if (HLP_ISVALIDNPC(VLK_11075_HOBO)) {
        if ((NPC_ISDEAD(VLK_11075_HOBO)) == (FALSE)) {
            VLK_11075_HOBO.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(VLK_11076_HOBO)) {
        if ((NPC_ISDEAD(VLK_11076_HOBO)) == (FALSE)) {
            VLK_11076_HOBO.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(VLK_11077_HOBO)) {
        if ((NPC_ISDEAD(VLK_11077_HOBO)) == (FALSE)) {
            VLK_11077_HOBO.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(NOV_13818_NOVIZE)) {
        if ((NPC_ISDEAD(NOV_13818_NOVIZE)) == (FALSE)) {
            NOV_13818_NOVIZE.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(NOV_13817_NOVIZE)) {
        if ((NPC_ISDEAD(NOV_13817_NOVIZE)) == (FALSE)) {
            NOV_13817_NOVIZE.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_13840_MILITIA)) {
        if ((NPC_ISDEAD(MIL_13840_MILITIA)) == (FALSE)) {
            MIL_13840_MILITIA.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_13816_MILITIA)) {
        if ((NPC_ISDEAD(MIL_13816_MILITIA)) == (FALSE)) {
            MIL_13816_MILITIA.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(VLK_6011_GUY)) {
        if ((NPC_ISDEAD(VLK_6011_GUY)) == (FALSE)) {
            VLK_6011_GUY.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_6385_SAMBOR)) {
        if ((NPC_ISDEAD(MIL_6385_SAMBOR)) == (FALSE)) {
            MIL_6385_SAMBOR.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_924_WINSTAN)) {
        if ((NPC_ISDEAD(MIL_924_WINSTAN)) == (FALSE)) {
            MIL_924_WINSTAN.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_4044_SALL)) {
        if ((NPC_ISDEAD(MIL_4044_SALL)) == (FALSE)) {
            MIL_4044_SALL.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_4017_ARWID)) {
        if ((NPC_ISDEAD(MIL_4017_ARWID)) == (FALSE)) {
            MIL_4017_ARWID.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_4001_OKTAV)) {
        if ((NPC_ISDEAD(MIL_4001_OKTAV)) == (FALSE)) {
            MIL_4001_OKTAV.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_4040_CABI)) {
        if ((NPC_ISDEAD(MIL_4040_CABI)) == (FALSE)) {
            MIL_4040_CABI.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_4041_LEVE)) {
        if ((NPC_ISDEAD(MIL_4041_LEVE)) == (FALSE)) {
            MIL_4041_LEVE.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_4042_NEIR)) {
        if ((NPC_ISDEAD(MIL_4042_NEIR)) == (FALSE)) {
            MIL_4042_NEIR.AIVAR[15] = FALSE;
        };
    };
    if (HLP_ISVALIDNPC(MIL_4016_WEGAR)) {
        if ((NPC_ISDEAD(MIL_4016_WEGAR)) == (FALSE)) {
            MIL_4016_WEGAR.AIVAR[15] = FALSE;
        };
    };
}

