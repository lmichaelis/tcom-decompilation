instance DIA_DICKON_EXIT(C_INFO) {
    NPC = 0xe143;
    NR = 999;
    CONDITION = DIA_DICKON_EXIT_CONDITION;
    INFORMATION = DIA_DICKON_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_DICKON_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_DICKON_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_DICKON_SQ118_NEEDHELP(C_INFO) {
    NPC = 0xe143;
    NR = 1;
    CONDITION = DIA_DICKON_SQ118_NEEDHELP_CONDITION;
    INFORMATION = DIA_DICKON_SQ118_NEEDHELP_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Are you a sentry?";
}

func int DIA_DICKON_SQ118_NEEDHELP_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ118)) == (LOG_RUNNING)) && ((SQ118_EZEKIEL_GUARDHELP) == (1))) && ((SQ118_GUARDSCOUNT) < (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_DICKON_SQ118_NEEDHELP_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_SQ118_NeedHelp_15_01");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_SQ118_NeedHelp_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_SQ118_NeedHelp_15_03");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_SQ118_NeedHelp_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_SQ118_NeedHelp_15_05");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_SQ118_NeedHelp_03_06");
    INFO_CLEARCHOICES(0x15cfd);
    INFO_ADDCHOICE(0x15cfd, "You're a sentry. You're supposed to help people.", 0x15d02);
    INFO_ADDCHOICE(0x15cfd, "What's a break without a pint of beer?", 0x15d01);
}

var int DICKON_SQ118_NEEDBEER = 0;
func void DIA_DICKON_SQ118_NEEDHELP_WANTSOMEBEER() {
    DICKON_SQ118_NEEDBEER = 1;
    RESERVED_VAR_INT_47 = WLD_GETDAY();
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_SQ118_NeedHelp_WantSomeBeer_15_01");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_SQ118_NeedHelp_WantSomeBeer_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_SQ118_NeedHelp_WantSomeBeer_03_03");
    AI_LOGENTRY(TOPIC_SQ118, LOG_SQ118_DICKON_BEER);
    INFO_CLEARCHOICES(0x15cfd);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_DICKON_SQ118_NEEDHELP_YOUMUSTHELPME() {
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_SQ118_NeedHelp_YouMustHelpMe_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_SQ118_NeedHelp_YouMustHelpMe_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_SQ118_NeedHelp_YouMustHelpMe_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_SQ118_NeedHelp_YouMustHelpMe_03_04");
    AI_PLAYANI(SELF, "T_GETLOST");
    INFO_CLEARCHOICES(0x15cfd);
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_DICKON_SQ118_GOTBEER(C_INFO) {
    NPC = 0xe143;
    NR = 10;
    CONDITION = DIA_DICKON_SQ118_GOTBEER_CONDITION;
    INFORMATION = DIA_DICKON_SQ118_GOTBEER_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Here, I brought you a beer.";
}

func int DIA_DICKON_SQ118_GOTBEER_CONDITION() {
    if ((((DICKON_SQ118_NEEDBEER) == (1)) && ((LOG_GETSTATUS(MIS_SQ118)) == (LOG_RUNNING))) && ((SQ118_GUARDSCOUNT) < (2))) {
        if (C_GOTANYKINDOFBEER(HERO)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_DICKON_SQ118_GOTBEER_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_SQ118_GotBeer_15_01");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    if ((RESERVED_VAR_INT_47) != (WLD_GETDAY())) {
        AI_OUTPUT(SELF, OTHER, "DIA_Dickon_SQ118_GotBeer_03_02");
    };
    B_GIVEANYBEER_USEIT();
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_SQ118_GotBeer_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_SQ118_GotBeer_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_SQ118_GotBeer_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_SQ118_GotBeer_03_06");
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_SQ118_GotBeer_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_SQ118_GotBeer_03_08");
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_SQ118_GotBeer_03_09");
    AI_LOGENTRY(TOPIC_SQ118, LOG_SQ118_DICKON_READY);
    SQ118_COUNTGUARDS();
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "SQ118_GUARD");
}

instance DIA_DICKON_GQ001_JORN(C_INFO) {
    NPC = 0xe143;
    NR = 1;
    CONDITION = DIA_DICKON_GQ001_JORN_CONDITION;
    INFORMATION = DIA_DICKON_GQ001_JORN_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Did a man named Jorn come through here?";
}

func int DIA_DICKON_GQ001_JORN_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x1575a)) && ((LOG_GETSTATUS(MIS_GQ001)) == (LOG_RUNNING))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_DICKON_GQ001_JORN_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_GQ001_Jorn_15_01");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Jorn_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_GQ001_Jorn_15_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_GQ001_Jorn_15_04");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Jorn_03_05");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Jorn_03_06");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_GQ001_Jorn_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Jorn_03_08");
    INFO_CLEARCHOICES(0x15d06);
    INFO_ADDCHOICE(0x15d06, "Many citizens visit Silbach?", 0x15d09);
    INFO_ADDCHOICE(0x15d06, "Did you see anyone suspicious?", 0x15d0b);
}

func void DIA_DICKON_GQ001_JORN_CITY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_GQ001_Jorn_City_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Jorn_City_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_GQ001_Jorn_City_15_03");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Jorn_City_03_04");
    AI_RESETFACEANI(SELF);
}

var int DICKON_GQ001_WANTSBEER = 0;
func void DIA_DICKON_GQ001_JORN_SOMEONE() {
    DICKON_GQ001_WANTSBEER = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_GQ001_Jorn_Someone_15_01");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Jorn_Someone_03_02");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Jorn_Someone_03_03");
    AI_RESETFACEANI(SELF);
    AI_LOGENTRY(TOPIC_GQ001, LOG_GQ001_DICKON_WANTSBEER);
}

instance DIA_DICKON_GQ001_BEER(C_INFO) {
    NPC = 0xe143;
    NR = 2;
    CONDITION = DIA_DICKON_GQ001_BEER_CONDITION;
    INFORMATION = DIA_DICKON_GQ001_BEER_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = DIALOG_BEERPROPOSE;
}

func int DIA_DICKON_GQ001_BEER_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x15d06)) && ((LOG_GETSTATUS(MIS_GQ001)) == (LOG_RUNNING))) && (C_GOTANYKINDOFBEER(HERO))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_DICKON_GQ001_BEER_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_GQ001_Beer_15_01");
    B_GIVEANYBEER_USEIT();
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Beer_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Beer_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_GQ001_Beer_15_04");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Beer_03_05");
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_GQ001_Beer_15_06");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Beer_03_08");
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Beer_03_09");
    INFO_CLEARCHOICES(0x15d0c);
    INFO_ADDCHOICE(0x15d0c, "What did the wretch look like?", 0x15d11);
    INFO_ADDCHOICE(0x15d0c, "Which way did they go?", 0x15d12);
}

func void DIA_DICKON_GQ001_BEER_BYE() {
    GQ001_KURTSECONDTALK = TRUE;
    GQ001_INFOFROMDICKON = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_GQ001_Beer_Victim_15_04");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Beer_Victim_03_05");
    INFO_CLEARCHOICES(0x15d06);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_GQ001, LOG_GQ001_DICKON_JORN);
    AI_STOPLOOKAT(SELF);
}

func void DIA_DICKON_GQ001_BEER_COUNT() {
    GQ001_DICKONINFORMATIONJORN = (GQ001_DICKONINFORMATIONJORN) + (1);
    if ((GQ001_DICKONINFORMATIONJORN) >= (2)) {
        DIA_DICKON_GQ001_BEER_BYE();
    };
}

func void DIA_DICKON_GQ001_JORN_SOMEONE_DRINK_VICTIM() {
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_GQ001_Beer_Victim_15_01");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Beer_Victim_03_02");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Beer_Victim_03_03");
    DIA_DICKON_GQ001_BEER_COUNT();
}

func void DIA_DICKON_GQ001_JORN_SOMEONE_DRINK_WHERE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Dickon_GQ001_Beer_Where_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Dickon_GQ001_Beer_Where_03_02");
    DIA_DICKON_GQ001_BEER_COUNT();
}

instance DIA_DICKON_AMBIENT(C_INFO) {
    NPC = 0xe143;
    NR = 870;
    CONDITION = DIA_DICKON_AMBIENT_CONDITION;
    INFORMATION = DIA_DICKON_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How are you doing?";
}

func int DIA_DICKON_AMBIENT_CONDITION() {
    return TRUE;
}

func void DIA_DICKON_AMBIENT_INFO() {
    NPC_INITAMBIENTS(SELF, 3);
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    B_SAY(OTHER, SELF, "$MARVIN_WhatNew2");
    if ((NPC_GETLASTAMBIENT(SELF)) == (1)) {
        AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
        B_SAY(SELF, OTHER, "$SQ311_MilitiaMiner_LeaveMeV4");
    };
    if ((NPC_GETLASTAMBIENT(SELF)) == (2)) {
        AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
        B_SAY(SELF, OTHER, "$SQ311_MilitiaMiner_LeaveMeV2");
    };
    if ((NPC_GETLASTAMBIENT(SELF)) == (3)) {
        AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
        B_SAY(SELF, OTHER, "$IMBUSY_ANGRY");
    };
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

instance DIA_DICKON_PICKPOCKET(C_INFO) {
    NPC = 0xe143;
    NR = 900;
    CONDITION = DIA_DICKON_PICKPOCKET_CONDITION;
    INFORMATION = DIA_DICKON_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_80;
}

func int DIA_DICKON_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_DICKON_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(0x15d16);
    INFO_ADDCHOICE(0x15d16, DIALOG_BACK, 0x15d1a);
    INFO_ADDCHOICE(0x15d16, DIALOG_PICKPOCKET, 0x15d19);
}

func void DIA_DICKON_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (2)) {
        CREATEINVITEMS(SELF, 0x8e10, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8e10, 1);
        B_PICKPOCKET_AMBIENT_TIER_2();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(0x15d16);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(0x15d16);
}

func void DIA_DICKON_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(0x15d16);
}

