instance DIA_MARTHA_EXIT(C_INFO) {
    NPC = 0xe0c6;
    NR = 999;
    CONDITION = DIA_MARTHA_EXIT_CONDITION;
    INFORMATION = DIA_MARTHA_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_MARTHA_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_MARTHA_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_MARTHA_Q103_HELLO(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_Q103_HELLO_CONDITION;
    INFORMATION = DIA_MARTHA_Q103_HELLO_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_MARTHA_Q103_HELLO_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x16323)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_Q103_HELLO_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Hello_16_00");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_Q103_Hello_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Hello_16_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Hello_16_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Hello_16_04");
    INFO_CLEARCHOICES(0x1583f);
    INFO_ADDCHOICE(0x1583f, "I don't think anyone taught you manners, woman.", 0x15842);
    INFO_ADDCHOICE(0x1583f, "Can we get something to eat and a place to sleep?", 0x15843);
}

func void DIA_MARTHA_Q103_HELLO_MANNERS() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_Q103_Hello_manners_15_00");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Hello_manners_16_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Hello_manners_16_02");
    AI_DRAWWEAPON(SELF);
    NPC_EXCHANGEROUTINE(BAU_702_VIKTOR, "MarthaTrialog2");
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_MARTHA_Q103_HELLO_FOOD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_Q103_Hello_food_15_00");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_Q103_Hello_food_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Hello_food_16_02");
    NPC_EXCHANGEROUTINE(BAU_702_VIKTOR, "MarthaTrialog2");
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_MARTHA_Q103_TRIALOG_FABIOWAY(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_Q103_TRIALOG_FABIOWAY_CONDITION;
    INFORMATION = DIA_MARTHA_Q103_TRIALOG_FABIOWAY_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_MARTHA_Q103_TRIALOG_FABIOWAY_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q103)) == (LOG_RUNNING)) && ((Q102_FABIOCHOSEN) == (TRUE))) {
        if (((NPC_GETDISTTOWP(BAU_703_MARTHA, BAU_703_MARTHA.WP)) <= (300)) && ((NPC_GETDISTTOWP(BAU_702_VIKTOR, BAU_702_VIKTOR.WP)) <= (300))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_Q103_TRIALOG_FABIOWAY_INFO() {
    TRIA_INVITE(BAU_702_VIKTOR);
    TRIA_START();
    AI_LOOKATNPC(OTHER, SELF);
    TRIA_WAIT();
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Trialog_FabioWay_03_01");
    TRIA_WAIT();
    TRIA_NEXT(BAU_702_VIKTOR);
    AI_TURNTONPC(BAU_702_VIKTOR, BAU_703_MARTHA);
    AI_TURNTONPC(BAU_703_MARTHA, BAU_702_VIKTOR);
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Trialog_FabioWay_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Trialog_FabioWay_03_03");
    TRIA_WAIT();
    TRIA_NEXT(BAU_703_MARTHA);
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Trialog_FabioWay_03_04");
    AI_TURNTONPC(SELF, HERO);
    TRIA_WAIT();
    TRIA_NEXT(BAU_702_VIKTOR);
    AI_TURNTONPC(SELF, HERO);
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Trialog_FabioWay_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Trialog_FabioWay_03_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Trialog_FabioWay_03_07");
    INFO_CLEARCHOICES(0x15844);
    INFO_ADDCHOICE(0x15844, "We split up, they are just heading towards the village.", 0x15847);
}

func void DIA_MARTHA_Q103_TRIALOG_FABIOWAY_SPLITUP() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_Q103_Trialog_FabioWay_SplitUp_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Trialog_FabioWay_SplitUp_03_02");
    CREATEINVITEMS(SELF, 0x8f30, 1);
    B_GIVEINVITEMS(SELF, OTHER, 0x8f30, 1);
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Q103_Trialog_FabioWay_SplitUp_03_03");
    Q103_GIVEKEY();
    AI_LOGENTRY(TOPIC_Q103, LOG_Q103_FABIOWAY_VIKTOR);
    INFO_CLEARCHOICES(0x15844);
    TRIA_FINISH();
    AI_STOPLOOKAT(SELF);
    AI_STOPLOOKAT(OTHER);
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 0x15848);
}

func void MARTHA_Q103_TRIALOG_CHANGERTN() {
    NPC_EXCHANGEROUTINE(BAU_702_VIKTOR, "Pub");
    B_STARTOTHERROUTINE(NONE_1_JORN, "Q104_TAVERN");
    NPC_REFRESH(NONE_1_JORN);
    TELEPORTNPCTOWP(0xc8ef, NONE_1_JORN.WP);
}

instance DIA_MARTHA_HOWAREYOU(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_HOWAREYOU_CONDITION;
    INFORMATION = DIA_MARTHA_HOWAREYOU_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I guarantee we won't cause any problems.";
}

func int DIA_MARTHA_HOWAREYOU_CONDITION() {
    if ((KAPITEL) == (1)) {
        if ((NPC_KNOWSINFO(OTHER, 0x1583f)) && (NPC_KNOWSINFO(OTHER, 0x157c0))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_HOWAREYOU_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_Howareyou_15_00");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Howareyou_16_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Howareyou_16_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_Howareyou_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Howareyou_16_04");
    if (WLD_ISTIME(20, 0, 4, 0)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Martha_Howareyou_16_05");
    };
}

instance DIA_MARTHA_BIGPORTION(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_BIGPORTION_CONDITION;
    INFORMATION = DIA_MARTHA_BIGPORTION_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_MARTHA_BIGPORTION_CONDITION() {
    if ((NPC_HASITEMS(OTHER, 0x90c1)) >= (1)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_BIGPORTION_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Bigportion_16_00");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Bigportion_16_01");
    INFO_CLEARCHOICES(0x1584c);
    if ((LOG_GETSTATUS(MIS_SQ105)) == (LOG_RUNNING)) {
        INFO_ADDCHOICE(0x1584c, "Actually, I didn't take it for myself, but for Lokvar.", 0x1584f);
    };
    if ((MARTHA_BLACKTAKESTEW) == (TRUE)) {
        INFO_ADDCHOICE(0x1584c, "Can I have some more of your stew?", 0x15850);
    };
    INFO_ADDCHOICE(0x1584c, "(Give back the stew)", 0x15851);
}

func void DIA_MARTHA_BIGPORTION_PROPERLY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_Bigportion_properly_15_00");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Bigportion_properly_16_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_Bigportion_properly_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Bigportion_properly_16_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Bigportion_properly_16_04");
    SILBACHREPUTATION = (SILBACHREPUTATION) - (1);
    if ((LOG_GETSTATUS(MIS_SQ105)) == (LOG_RUNNING)) {
        AI_LOGENTRY(TOPIC_SQ105, LOG_SQ105_MARTHACAUGHT);
    };
    B_GIVEINVITEMS(OTHER, SELF, 0x90c1, 1);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_MARTHA_BIGPORTION_MAKEWEIGHT() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_Bigportion_makeweight_15_00");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Bigportion_makeweight_16_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Bigportion_makeweight_16_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Bigportion_makeweight_16_03");
    if ((LOG_GETSTATUS(MIS_SQ105)) == (LOG_RUNNING)) {
        AI_LOGENTRY(TOPIC_SQ105, LOG_SQ105_MARTHACAUGHT);
    };
    B_GIVEINVITEMS(OTHER, SELF, 0x90c1, 1);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_MARTHA_BIGPORTION_GIVEBACK() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_Bigportion_giveback_15_00");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Bigportion_giveback_16_01");
    B_GIVEINVITEMS(OTHER, SELF, 0x90c1, 1);
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_MARTHA_SQ105_STEW(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_SQ105_STEW_CONDITION;
    INFORMATION = DIA_MARTHA_SQ105_STEW_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "Could I have some of that delicious stew?";
}

func int DIA_MARTHA_SQ105_STEW_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x1595d)) && ((LOG_GETSTATUS(MIS_SQ105)) == (LOG_RUNNING))) {
        if ((NPC_KNOWSINFO(OTHER, 0x1584c)) == (FALSE)) {
            if ((MARTHA_BLACKTAKESTEW) == (FALSE)) {
                return TRUE;
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_SQ105_STEW_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ105_Stew_15_00");
    if ((SILBACHREPUTATION) >= (3)) {
        MARTHA_BLACKTAKESTEW = TRUE;
        AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ105_Stew_16_01");
        B_GIVEINVITEMS(SELF, OTHER, 0x90bf, 1);
        AI_LOGENTRY(TOPIC_SQ105, LOG_SQ105_MARTHAGAVESOUP);
    };
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    B_SAY(SELF, OTHER, "$NO");
    B_SAY(SELF, OTHER, "$IMBUSY_ANGRY");
    if ((SQ105_MARTHALOGENTRY) == (FALSE)) {
        SQ105_MARTHALOGENTRY = TRUE;
        AI_LOGENTRY(TOPIC_SQ105, LOG_SQ105_MARTHADONTGAVESOUP);
    };
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

var int DIA_MARTHA_SQ105_STEW_INFO.SQ105_MARTHALOGENTRY = 0;
instance DIA_MARTHA_GQ001_WHEREISJORN(C_INFO) {
    NPC = 0xe0c6;
    NR = 20;
    CONDITION = DIA_MARTHA_GQ001_WHEREISJORN_CONDITION;
    INFORMATION = DIA_MARTHA_GQ001_WHEREISJORN_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I have some questions for you.";
}

func int DIA_MARTHA_GQ001_WHEREISJORN_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x1575a)) && ((LOG_GETSTATUS(MIS_GQ001)) == (LOG_RUNNING))) && (!(NPC_KNOWSINFO(OTHER, 0x1577f)))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_GQ001_WHEREISJORN_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_GQ001_WhereIsJorn_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_16_02");
    INFO_CLEARCHOICES(0x15856);
    INFO_ADDCHOICE(0x15856, "It's about Jorn.", 0x15859);
    INFO_ADDCHOICE(0x15856, "In that case, I'll ask someone else.", 0x1585a);
    INFO_ADDCHOICE(0x15856, "If you help me, I promise to help you with your work.", 0x1585b);
}

func void DIA_MARTHA_GQ001_WHEREISJORN_JORN() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_GQ001_WhereIsJorn_Jorn_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_Jorn_16_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_Jorn_16_03");
    INFO_CLEARCHOICES(0x15856);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_MARTHA_GQ001_WHEREISJORN_GOODBYE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_GQ001_WhereIsJorn_GoodBye_15_01");
    INFO_CLEARCHOICES(0x15856);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_MARTHA_GQ001_WHEREISJORN_WANTSOMEHELP() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_16_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_16_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_16_05");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_15_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_16_07");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_15_08");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_16_09");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_15_10");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_16_11");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_16_12");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_16_13");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_16_14");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_15_15");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_16_16");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_15_17");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_16_18");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_15_19");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_GQ001_WhereIsJorn_WantSomeHelp_16_20");
    INFO_CLEARCHOICES(0x15856);
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_MARTHA_SQ202(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_SQ202_CONDITION;
    INFORMATION = DIA_MARTHA_SQ202_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Don't you need spices in your dishes?";
}

func int DIA_MARTHA_SQ202_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ202)) == (LOG_RUNNING)) && ((NPC_HASITEMS(OTHER, 0x9105)) >= (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_SQ202_INFO() {
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ202_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ202_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ202_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ202_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ202_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ202_03_06");
    AI_RESETFACEANI(SELF);
    AI_LOGENTRY(TOPIC_SQ202, LOG_SQ202_MARTHA_SPICES);
}

instance DIA_MARTHA_LUTZ(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_LUTZ_CONDITION;
    INFORMATION = DIA_MARTHA_LUTZ_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Martha, I have a delicate matter for you.";
}

func int DIA_MARTHA_LUTZ_CONDITION() {
    if ((LOG_GETSTATUS(MIS_SQ213)) == (LOG_RUNNING)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_LUTZ_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_Lutz_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Lutz_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_Lutz_15_03");
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Lutz_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_Lutz_15_05");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Lutz_03_06");
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "SQ213TAVERN");
}

instance DIA_MARTHA_SQ213TAVERN(C_INFO) {
    NPC = 0xe0c6;
    NR = 2;
    CONDITION = DIA_MARTHA_SQ213TAVERN_CONDITION;
    INFORMATION = DIA_MARTHA_SQ213TAVERN_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_MARTHA_SQ213TAVERN_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x1585f)) && ((NPC_GETDISTTOWP(SELF, "VILLAGE_PATH_92")) <= (500))) && ((LOG_GETSTATUS(MIS_SQ213)) == (LOG_RUNNING))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_SQ213TAVERN_INFO() {
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Tavern_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Tavern_15_02");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Tavern_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Tavern_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Tavern_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Tavern_03_06");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Tavern_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Tavern_03_08");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Tavern_03_09");
    AI_RESETFACEANI(SELF);
    AI_LOGENTRY(TOPIC_SQ213, LOG_SQ213_MARTHAISANGRY);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, START);
}

instance DIA_MARTHA_LUTZDEBT(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_LUTZDEBT_CONDITION;
    INFORMATION = DIA_MARTHA_LUTZDEBT_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I have something for you.";
}

func int DIA_MARTHA_LUTZDEBT_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_SQ213)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x10624))) && ((SQ213_LUTZDEBTGIVEN) == (1))) && ((NPC_HASITEMS(OTHER, 0x859b)) >= (MIST_LUTZDEBT))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_LUTZDEBT_INFO() {
    SQ213_LUTZDEBTGIVEN = 2;
    SQ213_LUTZANGRY = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_LutzDebt_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_LutzDebt_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_LutzDebt_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_LutzDebt_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_LutzDebt_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_LutzDebt_03_06");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_LutzDebt_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_LutzDebt_03_08");
    B_GIVEINVITEMS(OTHER, SELF, 0x859b, MIST_LUTZDEBT);
    AI_RESETFACEANI(SELF);
    AI_LOGENTRY(TOPIC_SQ213, LOG_SQ213_MARTHAANDLUTZDEBT);
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_MARTHA_SQ213FINISH(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_SQ213FINISH_CONDITION;
    INFORMATION = DIA_MARTHA_SQ213FINISH_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "It's me again.";
}

func int DIA_MARTHA_SQ213FINISH_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x10639)) && ((LOG_GETSTATUS(MIS_SQ213)) == (LOG_RUNNING))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_SQ213FINISH_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Finish_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Finish_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Finish_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Finish_03_04");
    INFO_CLEARCHOICES(0x15868);
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (MIST_MARTHACORRUPT)) {
        INFO_ADDCHOICE(0x15868, "Maybe a pouch will solve the problem? (200 GP)", 0x1586b);
    };
    INFO_ADDCHOICE(0x15868, "Enough!", 0x1586c);
}

func void DIA_MARTHA_SQ213FINISH_GOLD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Finish_Gold_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Finish_Gold_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Finish_Gold_15_03");
    AI_WAITTILLEND(SELF, OTHER);
    AI_RESETFACEANI(SELF);
    AI_PLAYANI(SELF, T_SEARCH);
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Finish_Gold_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Finish_Gold_15_05");
    B_GIVEINVITEMS(OTHER, SELF, 0x859b, MIST_MARTHACORRUPT);
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Finish_Gold_03_06");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Finish_Gold_15_07");
    AI_LOGENTRY(TOPIC_SQ213, LOG_SQ213_MARTHAGOLD);
    INFO_CLEARCHOICES(0x15868);
    NPC_EXCHANGEROUTINE(SELF, ORCHARD);
    SQ213_EVERYTHINGREADY = 2;
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_MARTHA_SQ213FINISH_ENOUGH() {
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Finish_Enough_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Finish_Enough_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Finish_Enough_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Finish_Enough_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Finish_Enough_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Finish_Enough_03_06");
    AI_LOGENTRY(TOPIC_SQ213, LOG_SQ213_MARTHAWHYAREWESCREAMING);
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
    INFO_CLEARCHOICES(0x15868);
    NPC_EXCHANGEROUTINE(SELF, ORCHARD);
    SQ213_EVERYTHINGREADY = 2;
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_MARTHA_SQ213ANGRY(C_INFO) {
    NPC = 0xe0c6;
    NR = 2;
    CONDITION = DIA_MARTHA_SQ213ANGRY_CONDITION;
    INFORMATION = DIA_MARTHA_SQ213ANGRY_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_MARTHA_SQ213ANGRY_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ213)) == (LOG_SUCCESS)) && ((SQ213_SONGRESULT) == (7))) && (NPC_ISINSTATE(SELF, 0xf09f))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_SQ213ANGRY_INFO() {
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Angry_03_01");
    AI_STOPPROCESSINFOS(SELF);
    AI_RESETFACEANI(SELF);
}

instance DIA_MARTHA_SQ213DONE(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_SQ213DONE_CONDITION;
    INFORMATION = DIA_MARTHA_SQ213DONE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "You wanted to see me?";
}

func int DIA_MARTHA_SQ213DONE_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ213)) == (LOG_RUNNING)) && ((SQ213_SONGRESULT) == (8))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_SQ213DONE_INFO() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Done_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Done_03_02");
    AI_STARTFACEANI(OTHER, S_SURPRISE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Done_15_03");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Done_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Done_03_05");
    CREATEINVITEMS(SELF, 0x8c7b, 1);
    B_GIVEINVITEMS(SELF, OTHER, 0x8c7b, 1);
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Done_03_08");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ213Done_15_09");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ213Done_03_10");
    AI_LOGENTRY(TOPIC_SQ213, LOG_SQ213_MARTHAFINISH);
    LOG_SETSTATUS(_@(MIS_SQ213), TOPIC_SQ213, LOG_SUCCESS);
    B_GIVEPLAYERXP(XP_SQ213_GOODENDING);
    AI_STOPPROCESSINFOS(SELF);
    AI_RESETFACEANI(SELF);
}

instance DIA_MARTHA_SQ410_ABOUTLUTZ(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_SQ410_ABOUTLUTZ_CONDITION;
    INFORMATION = DIA_MARTHA_SQ410_ABOUTLUTZ_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Love is blooming, isn't it?";
}

func int DIA_MARTHA_SQ410_ABOUTLUTZ_CONDITION() {
    if ((((SQ213_WAITTONEXTQUEST_DAY) <= ((WLD_GETDAY()) - (2))) && ((LOG_GETSTATUS(MIS_SQ213)) == (LOG_SUCCESS))) && ((KAPITEL) >= (4))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_SQ410_ABOUTLUTZ_INFO() {
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_AboutLutz_15_01");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_AboutLutz_03_02");
    AI_RESETFACEANI(OTHER);
    INFO_CLEARCHOICES(0x15873);
    INFO_ADDCHOICE(0x15873, "I haven't seen him.", 0x15878);
    INFO_ADDCHOICE(0x15873, "He is sitting outside the inn.", 0x15877);
}

func void DIA_MARTHA_SQ410_ABOUTLUTZ_NEXT() {
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_AboutLutz_Next_03_01");
    INFO_CLEARCHOICES(0x15873);
}

func void DIA_MARTHA_SQ410_ABOUTLUTZ_YES() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_AboutLutz_Yes_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_AboutLutz_Yes_03_02");
    DIA_MARTHA_SQ410_ABOUTLUTZ_NEXT();
}

func void DIA_MARTHA_SQ410_ABOUTLUTZ_NO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_AboutLutz_No_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_AboutLutz_No_03_02");
    DIA_MARTHA_SQ410_ABOUTLUTZ_NEXT();
}

instance DIA_MARTHA_SQ410_WHATNOW(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_SQ410_WHATNOW_CONDITION;
    INFORMATION = DIA_MARTHA_SQ410_WHATNOW_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What did I do again?";
}

func int DIA_MARTHA_SQ410_WHATNOW_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x15873)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_SQ410_WHATNOW_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_WhatNow_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_WhatNow_03_02");
    AI_STARTFACEANI(OTHER, S_SURPRISE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_WhatNow_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_WhatNow_03_04");
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_WhatNow_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_WhatNow_03_06");
    AI_RESETFACEANI(OTHER);
    if (((LOG_GETSTATUS(MIS_SQ410)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x10654))) {
        AI_LOGENTRY(TOPIC_SQ410, LOG_SQ410_BADIDEA);
    };
    LOG_CREATETOPIC(TOPIC_SQ410, LOG_MISSION);
    LOG_SETSTATUS(_@(MIS_SQ410), TOPIC_SQ410, LOG_RUNNING);
    AI_LOGENTRY(TOPIC_SQ410, LOG_SQ410_START_V2);
}

instance DIA_MARTHA_SQ410_TELLHIM(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_SQ410_TELLHIM_CONDITION;
    INFORMATION = DIA_MARTHA_SQ410_TELLHIM_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_MARTHA_SQ410_TELLHIM_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ410)) == (LOG_RUNNING)) && ((SQ410_ENDING_V1) == (3))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_SQ410_TELLHIM_INFO() {
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_TellHim_03_03");
    AI_STARTFACEANI(OTHER, S_SURPRISE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_TellHim_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_TellHim_03_05");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_TellHim_15_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_TellHim_03_07");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_TellHim_15_08");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

instance DIA_MARTHA_SQ410_LUTZGONE(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_SQ410_LUTZGONE_CONDITION;
    INFORMATION = DIA_MARTHA_SQ410_LUTZGONE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Lutz has left.";
}

func int DIA_MARTHA_SQ410_LUTZGONE_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ410)) == (LOG_SUCCESS)) && (NPC_KNOWSINFO(OTHER, 0x10660))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_SQ410_VIKTORFRIENDZONE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_LutzGone_15_03");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_LutzGone_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_LutzGone_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_LutzGone_03_06");
    AI_RESETFACEANI(SELF);
    if (((SQ410_ENDING_V2) >= (1)) && ((LOG_GETSTATUS(MIS_SQ410)) == (LOG_RUNNING))) {
        AI_LOGENTRY(TOPIC_SQ410, LOG_SQ410_MARTHA_ABOUTLUTZ);
    };
    NPC_EXCHANGEROUTINE(SELF, START);
}

func void DIA_MARTHA_SQ410_LUTZGONE_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_LutzGone_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_LutzGone_03_02");
    DIA_MARTHA_SQ410_VIKTORFRIENDZONE();
}

instance DIA_MARTHA_SQ410_FINISH(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_SQ410_FINISH_CONDITION;
    INFORMATION = DIA_MARTHA_SQ410_FINISH_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_MARTHA_SQ410_FINISH_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ410)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x10664))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_SQ410_FINISH_INFO() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_Finish_03_01");
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_Finish_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_Finish_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_Finish_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_Finish_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_Finish_03_06");
    CREATEINVITEMS(SELF, 0x8c7d, 1);
    B_GIVEINVITEMS(SELF, OTHER, 0x8c7d, 1);
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ410_Finish_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ410_Finish_03_08");
    NPC_EXCHANGEROUTINE(SELF, START);
    DIA_MARTHA_SQ410_VIKTORFRIENDZONE();
}

instance DIA_MARTHA_SQ416_DRINK(C_INFO) {
    NPC = 0xe0c6;
    NR = 1;
    CONDITION = DIA_MARTHA_SQ416_DRINK_CONDITION;
    INFORMATION = DIA_MARTHA_SQ416_DRINK_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I hear you have a delicious grain nogginfog. (25 GP)";
}

func int DIA_MARTHA_SQ416_DRINK_CONDITION() {
    if ((LOG_GETSTATUS(MIS_SQ416)) == (LOG_SUCCESS)) {
        if (((SQ416_RAMSEYPARTY) != (2)) && ((SHIELD_EQUIP) == (FALSE))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_SQ416_DRINK_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Martha_SQ416_Drink_15_01");
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (VALUE_STARKA)) {
        SHIELD_EQUIP = TRUE;
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ416_Drink_03_02");
        AI_OUTPUT(SELF, OTHER, "DIA_Martha_SQ416_Drink_03_03");
        CREATEINVITEMS(SELF, 0x8e03, 1);
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
}

instance DIA_MARTHA_AMBIENT(C_INFO) {
    NPC = 0xe0c6;
    NR = 870;
    CONDITION = DIA_MARTHA_AMBIENT_CONDITION;
    INFORMATION = DIA_MARTHA_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "What's new?";
}

func int DIA_MARTHA_AMBIENT_CONDITION() {
    if (((NPC_GETDISTTOWP(SELF, "VILLAGE_PUB_21")) <= (0x157c)) && ((SILBACHSLEEP) == (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_AMBIENT_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_WhatNew");
    if ((KAPITEL) == (1)) {
        AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Martha_Ambient_03_01");
    };
    if ((KAPITEL) == (5)) {
        AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Martha_Ambient_03_03");
    };
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Martha_Ambient_03_02");
    AI_RESETFACEANI(SELF);
}

instance DIA_MARTHA_PICKPOCKET(C_INFO) {
    NPC = 0xe0c6;
    NR = 900;
    CONDITION = DIA_MARTHA_PICKPOCKET_CONDITION;
    INFORMATION = DIA_MARTHA_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_120_FEMALE;
}

func int DIA_MARTHA_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARTHA_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(0x1588c);
    INFO_ADDCHOICE(0x1588c, DIALOG_BACK, 0x15890);
    INFO_ADDCHOICE(0x1588c, DIALOG_PICKPOCKET, 0x1588f);
}

func void DIA_MARTHA_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (3)) {
        CREATEINVITEMS(SELF, 0x8f82, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8f82, 1);
        B_PICKPOCKET_AMBIENT_TIER_3();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(0x1588c);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(0x1588c);
}

func void DIA_MARTHA_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(0x1588c);
}

