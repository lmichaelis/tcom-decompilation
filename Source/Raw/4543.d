instance FMQ003_VOLKER(CUTSCENE) {
    ONSTART = FUNCTION(0x16895);
}

func void FMQ003_VOLKER_WAIT() {
    AI_WAITTILLEND(HERO, MIL_4016_WEGAR);
    AI_WAITTILLEND(HERO, VLK_6241_ANGRYCITIZEN01);
    AI_WAITTILLEND(HERO, VLK_6242_ARS_FMQ003);
    AI_WAITTILLEND(MIL_4016_WEGAR, HERO);
    AI_WAITTILLEND(MIL_4016_WEGAR, VLK_6241_ANGRYCITIZEN01);
    AI_WAITTILLEND(MIL_4016_WEGAR, VLK_6242_ARS_FMQ003);
    AI_WAITTILLEND(VLK_6241_ANGRYCITIZEN01, MIL_4016_WEGAR);
    AI_WAITTILLEND(VLK_6241_ANGRYCITIZEN01, HERO);
    AI_WAITTILLEND(VLK_6241_ANGRYCITIZEN01, VLK_6242_ARS_FMQ003);
    AI_WAITTILLEND(VLK_6242_ARS_FMQ003, MIL_4016_WEGAR);
    AI_WAITTILLEND(VLK_6242_ARS_FMQ003, VLK_6241_ANGRYCITIZEN01);
    AI_WAITTILLEND(VLK_6242_ARS_FMQ003, HERO);
}

func void FMQ003_VOLKER_START() {
    DIACAM_DISABLE();
    WLD_SENDTRIGGER("FMQ003_ARS_01");
    NPC_CLEARAIQUEUE(VLK_6241_ANGRYCITIZEN01);
    NPC_CLEARAIQUEUE(VLK_6242_ARS_FMQ003);
    NPC_CLEARAIQUEUE(MIL_4016_WEGAR);
    VLK_6241_ANGRYCITIZEN01.AIVAR[92] = TRUE;
    VLK_6242_ARS_FMQ003.AIVAR[92] = TRUE;
    MIL_4016_WEGAR.AIVAR[92] = TRUE;
    TELEPORTNPCTOWP(0xce6f, MIL_4016_WEGAR.WP);
    TELEPORTNPCTOWP(0xcff1, VLK_6241_ANGRYCITIZEN01.WP);
    TELEPORTNPCTOWP(0xcff6, VLK_6242_ARS_FMQ003.WP);
    TELEPORTNPCTOWP(0x71b, "PARTM4_ATTEMPT_VLK_01");
    AI_TURNAWAY(VLK_6241_ANGRYCITIZEN01, HERO);
    AI_TURNAWAY(VLK_6242_ARS_FMQ003, HERO);
    AI_TURNTONPC(HERO, VLK_6242_ARS_FMQ003);
    AI_TURNTONPC(MIL_4016_WEGAR, VLK_6242_ARS_FMQ003);
    AI_OUTPUT(VLK_6242_ARS_FMQ003, HERO, "DIA_ARS_VillaTrialog_03_01");
    AI_OUTPUT(VLK_6242_ARS_FMQ003, HERO, "DIA_ARS_VillaTrialog_03_02");
    AI_OUTPUT(VLK_6242_ARS_FMQ003, HERO, "DIA_ARS_VillaTrialog_03_03");
    FMQ003_VOLKER_WAIT();
    AI_TURNTONPC(VLK_6241_ANGRYCITIZEN01, HERO);
    AI_TURNTONPC(VLK_6242_ARS_FMQ003, HERO);
    AI_TURNTONPC(MIL_4016_WEGAR, HERO);
    FMQ003_VOLKER_WAIT();
    AI_FUNCTION(VLK_6242_ARS_FMQ003, 0x16897);
}

func void FMQ003_VOLKER_CAMERA_01() {
    WLD_SENDTRIGGER("FMQ003_ARS_02");
    WLD_SENDUNTRIGGER("FMQ003_ARS_01");
    TELEPORTNPCTOWP(0x71b, "PARTM4_PATH_101");
}

func void FMQ003_VOLKER_END() {
    FMQ003_CUTSCENEVOLKER = 2;
    VLK_6241_ANGRYCITIZEN01.AIVAR[92] = FALSE;
    VLK_6242_ARS_FMQ003.AIVAR[92] = FALSE;
    MIL_4016_WEGAR.AIVAR[92] = FALSE;
    HERO.AIVAR[4] = FALSE;
    B_STARTOTHERROUTINE(VLK_6241_ANGRYCITIZEN01, "FMQ003_OBSERVE");
    NPC_REFRESH(VLK_6241_ANGRYCITIZEN01);
    B_STARTOTHERROUTINE(MIL_4016_WEGAR, "FMQ003_OBSERVE");
    NPC_REFRESH(MIL_4016_WEGAR);
    AI_STARTSTATE(VLK_6242_ARS_FMQ003, 0xf09f, 1, "");
    AI_STARTSTATE(HERO, 0xf09f, 1, "");
}

