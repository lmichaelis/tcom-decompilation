instance DIA_BEATENCITIZEN_EXIT(C_INFO) {
    NPC = 0xe1d2;
    NR = 999;
    CONDITION = DIA_BEATENCITIZEN_EXIT_CONDITION;
    INFORMATION = DIA_BEATENCITIZEN_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_BEATENCITIZEN_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_BEATENCITIZEN_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_BEATENCITIZEN_HELLO(C_INFO) {
    NPC = 0xe1d2;
    NR = 1;
    CONDITION = DIA_BEATENCITIZEN_HELLO_CONDITION;
    INFORMATION = DIA_BEATENCITIZEN_HELLO_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_BEATENCITIZEN_HELLO_CONDITION() {
    if (((TRAP03_SPAWNED) == (1)) && (NPC_ISDEAD(VLK_11092_HOBO))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BEATENCITIZEN_HELLO_INFO() {
    VLK_11095_BEATENCITIZEN.FLAGS = 2;
    VLK_11095_BEATENCITIZEN.ATTRIBUTE[0] = VLK_11095_BEATENCITIZEN.ATTRIBUTE[1];
    AI_OUTPUT(SELF, OTHER, "DIA_BeatenCitizen_HELLO_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_BeatenCitizen_HELLO_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_BeatenCitizen_HELLO_03_03");
    INFO_CLEARCHOICES(0x11911);
    INFO_ADDCHOICE(0x11911, DIALOG_DONOTTALK, 0x11914);
    INFO_ADDCHOICE(0x11911, "Keep that gold.", 0x11915);
}

func void DIA_BEATENCITIZEN_EGOIST() {
    B_GIVEPLAYERXP(XP_EVENT_BEATENCITIZENV1);
    CREATEINVITEMS(SELF, 0x859b, EVENT_BEATENCITIZEN);
    B_GIVEINVITEMS(SELF, OTHER, 0x859b, EVENT_BEATENCITIZEN);
    AI_OUTPUT(SELF, OTHER, "DIA_BeatenCitizen_Egoist_03_01");
    NPC_EXCHANGEROUTINE(SELF, "AFTEREVENT");
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_BEATENCITIZEN_ALTRUIST() {
    AI_OUTPUT(OTHER, SELF, "DIA_BeatenCitizen_Altruist_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_BeatenCitizen_Altruist_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_BeatenCitizen_Altruist_03_05");
    B_GIVEPLAYERXP(XP_EVENT_BEATENCITIZENV2);
    NPC_EXCHANGEROUTINE(SELF, "AFTEREVENT");
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_BEATENCITIZEN_AFTEREVENT(C_INFO) {
    NPC = 0xe1d2;
    NR = 4;
    CONDITION = DIA_BEATENCITIZEN_AFTEREVENT_CONDITION;
    INFORMATION = DIA_BEATENCITIZEN_AFTEREVENT_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_BEATENCITIZEN_AFTEREVENT_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x11911)) && (NPC_ISINSTATE(SELF, 0xf09f))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_BEATENCITIZEN_AFTEREVENT_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_BeatenCitizen_AfterEvent_03_01");
    AI_STOPPROCESSINFOS(SELF);
}

