instance DIA_LAUDUS_EXIT(C_INFO) {
    NPC = 0xd491;
    NR = 999;
    CONDITION = DIA_LAUDUS_EXIT_CONDITION;
    INFORMATION = DIA_LAUDUS_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_LAUDUS_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_LAUDUS_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

var int SQ412_MYSOUP = 0;
var int SQ412_ERNESTOSOUP = 0;
instance DIA_LAUDUS_SQ412_SOUP(C_INFO) {
    NPC = 0xd491;
    NR = 1;
    CONDITION = DIA_LAUDUS_SQ412_SOUP_CONDITION;
    INFORMATION = DIA_LAUDUS_SQ412_SOUP_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Ernesto asked me to give you a pot of soup.";
}

func int DIA_LAUDUS_SQ412_SOUP_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ412)) == (LOG_RUNNING)) && ((NPC_HASITEMS(OTHER, 0x8f2e)) >= (1))) && (NPC_KNOWSINFO(OTHER, 0x10025))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_ABOUTERNESTO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_Ambient_03_02");
}

func void DIA_LAUDUS_SQ412_SOUP_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Laudus_SQ412_Soup_15_01");
    B_GIVEINVITEMS(OTHER, SELF, 0x8f2e, 1);
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_SQ412_Soup_03_02");
    INFO_CLEARCHOICES(0xfff2);
    INFO_ADDCHOICE(0xfff2, "I cooked the soup, Ernesto paid me to do it.", 0xfff8);
    INFO_ADDCHOICE(0xfff2, "Yes, I personally saw him cooking the soup.", 0xfff7);
}

func void DIA_LAUDUS_SQ412_SOUP_NEXT() {
    if ((SQ412_MYSOUP) == (FALSE)) {
        DIA_LAUDUS_ABOUTERNESTO();
    };
    INFO_CLEARCHOICES(0xfff2);
    AI_LOGENTRY(TOPIC_SQ412, LOG_SQ412_LAUDUS_GIVESOUP);
}

func void DIA_LAUDUS_SQ412_SOUP_YES() {
    AI_OUTPUT(OTHER, SELF, "DIA_Laudus_SQ412_Soup_Yes_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_SQ412_Soup_Yes_03_02");
    SQ412_ERNESTOSOUP = TRUE;
    DIA_LAUDUS_SQ412_SOUP_NEXT();
}

func void DIA_LAUDUS_SQ412_SOUP_NO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Laudus_SQ412_Soup_No_15_01");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_SQ412_Soup_No_03_02");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_SQ412_Soup_No_03_03");
    SQ412_MYSOUP = TRUE;
    CREATEINVITEMS(SELF, 0x878d, 2);
    B_GIVEINVITEMS(SELF, OTHER, 0x878d, 2);
    DIA_LAUDUS_SQ412_SOUP_NEXT();
}

instance DIA_LAUDUS_MAGICRUNE(C_INFO) {
    NPC = 0xd491;
    NR = 50;
    CONDITION = DIA_LAUDUS_MAGICRUNE_CONDITION;
    INFORMATION = DIA_LAUDUS_MAGICRUNE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Can you tell me anything about this stone?";
}

func int DIA_LAUDUS_MAGICRUNE_CONDITION() {
    if (((C_GOTANYKINDOFRUNE(HERO)) && ((SELLINGRUNES_INFO) == (FALSE))) && (NPC_KNOWSINFO(OTHER, 0x10025))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int LAUDUS_CANBUYRUNES = 0;
func void DIA_LAUDUS_MAGICRUNE_NEXT() {
    LAUDUS_CANBUYRUNES = TRUE;
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_MagicRune_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_MagicRune_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_MagicRune_03_05");
    if ((SELLINGRUNES_INFO) == (FALSE)) {
        SELLINGRUNES_INFO = TRUE;
        LOG_CREATETOPIC(TOPIC_BARTER, LOG_NOTE);
        AI_LOGENTRY(TOPIC_BARTER, LOG_CITYBARTER_LAUDUS);
    };
}

func void DIA_LAUDUS_MAGICRUNE_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_AskMagicRune");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_MagicRune_03_02");
    DIA_LAUDUS_MAGICRUNE_NEXT();
}

instance DIA_LAUDUS_YOUWANTMAGICRUNES(C_INFO) {
    NPC = 0xd491;
    NR = 50;
    CONDITION = DIA_LAUDUS_YOUWANTMAGICRUNES_CONDITION;
    INFORMATION = DIA_LAUDUS_YOUWANTMAGICRUNES_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I was told that you deal in runes.";
}

func int DIA_LAUDUS_YOUWANTMAGICRUNES_CONDITION() {
    if ((((SELLINGRUNES_INFO) == (TRUE)) && ((LAUDUS_CANBUYRUNES) == (FALSE))) && (NPC_KNOWSINFO(OTHER, 0x10025))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_YOUWANTMAGICRUNES_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Laudus_YouWantMagicRunes_15_01");
    DIA_LAUDUS_MAGICRUNE_NEXT();
}

instance DIA_LAUDUS_RUNEWHY(C_INFO) {
    NPC = 0xd491;
    NR = 50;
    CONDITION = DIA_LAUDUS_RUNEWHY_CONDITION;
    INFORMATION = DIA_LAUDUS_RUNEWHY_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Why are runes found in such different places?";
}

func int DIA_LAUDUS_RUNEWHY_CONDITION() {
    if ((LAUDUS_CANBUYRUNES) == (TRUE)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_RUNEWHY_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Laudus_RuneWhy_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_RuneWhy_03_02");
    AI_STARTFACEANI(SELF, "S_TIRED", 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_RuneWhy_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_RuneWhy_03_04");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_RuneWhy_03_05");
    AI_STARTFACEANI(SELF, "S_TIRED", 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_RuneWhy_03_06");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

instance DIA_LAUDUS_SELLRUNE(C_INFO) {
    NPC = 0xd491;
    NR = 900;
    CONDITION = DIA_LAUDUS_SELLRUNE_CONDITION;
    INFORMATION = DIA_LAUDUS_SELLRUNE_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I have a magic rune for you.";
}

func int DIA_LAUDUS_SELLRUNE_CONDITION() {
    if (((LAUDUS_CANBUYRUNES) == (TRUE)) && (C_GOTANYKINDOFRUNE(HERO))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_SELLRUNE_CHOICES() {
    INFO_CLEARCHOICES(0x10004);
    if ((NPC_HASITEMS(OTHER, 0x83a9)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_SKULL, 0x10024);
    };
    if ((NPC_HASITEMS(OTHER, 0x94ac)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_SLOWDOWN, 0x1000d);
    };
    if ((NPC_HASITEMS(OTHER, 0x94ad)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_ACID, 0x1000e);
    };
    if ((NPC_HASITEMS(OTHER, 0x94ae)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_PICKLOCK, 0x1000f);
    };
    if ((NPC_HASITEMS(OTHER, 0x8723)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_LIGHT, 0x10010);
    };
    if ((NPC_HASITEMS(OTHER, 0x8725)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_ZAP, 0x10011);
    };
    if ((NPC_HASITEMS(OTHER, 0x8726)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_LIGHTHEAL, 0x10012);
    };
    if ((NPC_HASITEMS(OTHER, 0x8729)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_ICEBOLT, 0x10013);
    };
    if ((NPC_HASITEMS(OTHER, 0x872a)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_SUMMONWOLF, 0x10014);
    };
    if ((NPC_HASITEMS(OTHER, 0x83a1)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_WHIRLWIND, 0x10015);
    };
    if ((NPC_HASITEMS(OTHER, 0x83a4)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_ICELANCE, 0x10016);
    };
    if ((NPC_HASITEMS(OTHER, 0x872d)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_MEDIUMHEAL, 0x10017);
    };
    if ((NPC_HASITEMS(OTHER, 0x8732)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_ICECUBE, 0x10018);
    };
    if ((NPC_HASITEMS(OTHER, 0x8733)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_CHARGEZAP, 0x10019);
    };
    if ((NPC_HASITEMS(OTHER, 0x83a2)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_GEYSER, 0x1001a);
    };
    if ((NPC_HASITEMS(OTHER, 0x83a0)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_THUNDERSTORM, 0x1001b);
    };
    if ((NPC_HASITEMS(OTHER, 0x872e)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_LIGHTNINGFLASH, 0x1001c);
    };
    if ((NPC_HASITEMS(OTHER, 0x8734)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_SUMMONGOLEM, 0x1001d);
    };
    if ((NPC_HASITEMS(OTHER, 0x83a3)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_WATERFIST, 0x1001e);
    };
    if ((NPC_HASITEMS(OTHER, 0x873a)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_FULLHEAL, 0x1001f);
    };
    if ((NPC_HASITEMS(OTHER, 0x872b)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_WINDFIST, 0x10020);
    };
    if ((NPC_HASITEMS(OTHER, 0x94b1)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_SUMMONSNAPPER, 0x10021);
    };
    if ((NPC_HASITEMS(OTHER, 0x94b2)) >= (1)) {
        INFO_ADDCHOICE(0x10004, NAME_SPL_SUMMONBEAR, 0x10022);
    };
    if (((NPC_HASITEMS(OTHER, 0x857f)) >= (1)) && ((RESERVED_VAR_INT_36) == (FALSE))) {
        INFO_ADDCHOICE(0x10004, MISCNAME_BLANKRUNE, 0x10023);
    };
    INFO_ADDCHOICE(0x10004, DIALOG_BACK, 0x10008);
}

func void DIA_LAUDUS_SELLRUNE_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Laudus_SellRune_15_01");
    DIA_LAUDUS_SELLRUNE_CHOICES();
}

func void DIA_LAUDUS_SELLRUNE_BACK() {
    INFO_CLEARCHOICES(0x10004);
}

func void DIA_LAUDUS_SELLRUNE_THANKYOU() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_SellRune_03_01");
    B_GIVEPLAYERXP(XP_LAUDUS_RUNE);
    AI_RESETFACEANI(SELF);
    DIA_LAUDUS_SELLRUNE_CHOICES();
}

const int LAUDUS_HOWMANYSCROLLS = 5;
const int LAUDUS_HOWMANYSCROLLSMEDIUM = 2;
const int LAUDUS_HOWMANYSCROLLSLOW = 1;
func void DIA_LAUDUS_SELLRUNE_SLOWDOWN() {
    NPC_REMOVEINVITEMS(SELF, 0x94ac, 1);
    CREATEINVITEMS(SELF, 0x9527, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 0x9527, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x94ac, 1);
}

func void DIA_LAUDUS_SELLRUNE_ACID() {
    NPC_REMOVEINVITEMS(SELF, 0x94ad, 1);
    CREATEINVITEMS(SELF, 0x952b, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 0x952b, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x94ad, 1);
}

func void DIA_LAUDUS_SELLRUNE_PICKLOCK() {
    NPC_REMOVEINVITEMS(SELF, 0x94ae, 1);
    CREATEINVITEMS(SELF, 0x952a, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 0x952a, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x94ae, 1);
}

func void DIA_LAUDUS_SELLRUNE_LIGHT() {
    NPC_REMOVEINVITEMS(SELF, 0x8723, 1);
    CREATEINVITEMS(SELF, 0x877e, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 0x877e, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x8723, 1);
}

func void DIA_LAUDUS_SELLRUNE_ZAP() {
    NPC_REMOVEINVITEMS(SELF, 0x8725, 1);
    CREATEINVITEMS(SELF, 0x8784, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 0x8784, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x8725, 1);
}

func void DIA_LAUDUS_SELLRUNE_LIGHTHEAL() {
    NPC_REMOVEINVITEMS(SELF, 0x8726, 1);
    CREATEINVITEMS(SELF, 0x8781, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 0x8781, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x8726, 1);
}

func void DIA_LAUDUS_SELLRUNE_ICEBOLT() {
    NPC_REMOVEINVITEMS(SELF, 0x8729, 1);
    CREATEINVITEMS(SELF, 0x8780, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 0x8780, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x8729, 1);
}

func void DIA_LAUDUS_SELLRUNE_SUMWOLF() {
    NPC_REMOVEINVITEMS(SELF, 0x872a, 1);
    CREATEINVITEMS(SELF, 0x8785, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 0x8785, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x872a, 1);
}

func void DIA_LAUDUS_SELLRUNE_WHIRLWIND() {
    NPC_REMOVEINVITEMS(SELF, 0x83a1, 1);
    CREATEINVITEMS(SELF, 0x83b6, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 0x83b6, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x83a1, 1);
}

func void DIA_LAUDUS_SELLRUNE_ICELANCE() {
    NPC_REMOVEINVITEMS(SELF, 0x83a4, 1);
    CREATEINVITEMS(SELF, 0x83b3, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 0x83b3, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x83a4, 1);
}

func void DIA_LAUDUS_SELLRUNE_MEDIUMHEAL() {
    NPC_REMOVEINVITEMS(SELF, 0x872d, 1);
    CREATEINVITEMS(SELF, 0x8788, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 0x8788, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x872d, 1);
}

func void DIA_LAUDUS_SELLRUNE_ICECUBE() {
    NPC_REMOVEINVITEMS(SELF, 0x8732, 1);
    CREATEINVITEMS(SELF, 0x878d, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 0x878d, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x8732, 1);
}

func void DIA_LAUDUS_SELLRUNE_THUNDERBALL() {
    NPC_REMOVEINVITEMS(SELF, 0x8733, 1);
    CREATEINVITEMS(SELF, 0x878e, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 0x878e, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x8733, 1);
}

func void DIA_LAUDUS_SELLRUNE_GEYSER() {
    NPC_REMOVEINVITEMS(SELF, 0x83a2, 1);
    CREATEINVITEMS(SELF, 0x83b2, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 0x83b2, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x83a2, 1);
}

func void DIA_LAUDUS_SELLRUNE_THUNDERSTORM() {
    NPC_REMOVEINVITEMS(SELF, 0x83a0, 1);
    CREATEINVITEMS(SELF, 0x83b5, LAUDUS_HOWMANYSCROLLSLOW);
    B_GIVEINVITEMS(SELF, OTHER, 0x83b5, LAUDUS_HOWMANYSCROLLSLOW);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x83a0, 1);
}

func void DIA_LAUDUS_SELLRUNE_LIGHTNINGFLASH() {
    NPC_REMOVEINVITEMS(SELF, 0x872e, 1);
    CREATEINVITEMS(SELF, 0x8789, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 0x8789, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x872e, 1);
}

func void DIA_LAUDUS_SELLRUNE_SUMGOL() {
    NPC_REMOVEINVITEMS(SELF, 0x8734, 1);
    CREATEINVITEMS(SELF, 0x878f, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 0x878f, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x8734, 1);
}

func void DIA_LAUDUS_SELLRUNE_WATERFIST() {
    NPC_REMOVEINVITEMS(SELF, 0x83a3, 1);
    CREATEINVITEMS(SELF, 0x83b4, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 0x83b4, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x83a3, 1);
}

func void DIA_LAUDUS_SELLRUNE_FULLHEAL() {
    NPC_REMOVEINVITEMS(SELF, 0x873a, 1);
    CREATEINVITEMS(SELF, 0x8795, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 0x8795, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x873a, 1);
}

func void DIA_LAUDUS_SELLRUNE_WINDFIST() {
    NPC_REMOVEINVITEMS(SELF, 0x872b, 1);
    CREATEINVITEMS(SELF, 0x8786, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 0x8786, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x872b, 1);
}

func void DIA_LAUDUS_SELLRUNE_SUMSNAPPER() {
    NPC_REMOVEINVITEMS(SELF, 0x94b1, 1);
    CREATEINVITEMS(SELF, 0x9525, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 0x9525, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x94b1, 1);
}

func void DIA_LAUDUS_SELLRUNE_SUMBEAR() {
    NPC_REMOVEINVITEMS(SELF, 0x94b2, 1);
    CREATEINVITEMS(SELF, 0x9524, LAUDUS_HOWMANYSCROLLSMEDIUM);
    B_GIVEINVITEMS(SELF, OTHER, 0x9524, LAUDUS_HOWMANYSCROLLSMEDIUM);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x94b2, 1);
}

func void DIA_LAUDUS_SELLRUNE_BLANK() {
    NPC_REMOVEINVITEMS(SELF, 0x857f, 1);
    CREATEINVITEMS(SELF, 0x8c94, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 0x8c94, LAUDUS_HOWMANYSCROLLS);
    RESERVED_VAR_INT_36 = TRUE;
    B_GIVEINVITEMS(OTHER, SELF, 0x857f, 1);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
}

func void DIA_LAUDUS_SELLRUNE_SKULL() {
    NPC_REMOVEINVITEMS(SELF, 0x83a9, 1);
    CREATEINVITEMS(SELF, 0x952d, LAUDUS_HOWMANYSCROLLS);
    B_GIVEINVITEMS(SELF, OTHER, 0x952d, LAUDUS_HOWMANYSCROLLS);
    DIA_LAUDUS_SELLRUNE_THANKYOU();
    B_GIVEINVITEMS(OTHER, SELF, 0x83a9, 1);
}

instance DIA_LAUDUS_HELLO(C_INFO) {
    NPC = 0xd491;
    NR = 1;
    CONDITION = DIA_LAUDUS_HELLO_CONDITION;
    INFORMATION = DIA_LAUDUS_HELLO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Hello.";
}

func int DIA_LAUDUS_HELLO_CONDITION() {
    return TRUE;
}

func void DIA_LAUDUS_HELLO_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_Hello2");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_Hello_03_01");
}

instance DIA_LAUDUS_AMBIENT(C_INFO) {
    NPC = 0xd491;
    NR = 998;
    CONDITION = DIA_LAUDUS_AMBIENT_CONDITION;
    INFORMATION = DIA_LAUDUS_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How are you doing?";
}

func int DIA_LAUDUS_AMBIENT_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x10025)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_AMBIENT_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_WhatNew2");
    if (((SQ412_ERNESTOSOUP) == (FALSE)) && ((SQ412_MYSOUP) == (FALSE))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Laudus_Ambient_03_01");
    };
    if ((SQ412_ERNESTOSOUP) == (TRUE)) {
        DIA_LAUDUS_ABOUTERNESTO();
    };
    if ((SQ412_MYSOUP) == (TRUE)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Laudus_Ambient_03_03");
    };
}

instance DIA_LAUDUS_ABOUTMAGES(C_INFO) {
    NPC = 0xd491;
    NR = 1;
    CONDITION = DIA_LAUDUS_ABOUTMAGES_CONDITION;
    INFORMATION = DIA_LAUDUS_ABOUTMAGES_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What can you tell me about the Water Mages?";
}

func int DIA_LAUDUS_ABOUTMAGES_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x10025)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_ABOUTMAGES_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_TellMeAboutWaterMages");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_AboutMages_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_AboutMages_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_AboutMages_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_AboutMages_03_04");
}

instance DIA_LAUDUS_ABOUTARCHOLOS(C_INFO) {
    NPC = 0xd491;
    NR = 1;
    CONDITION = DIA_LAUDUS_ABOUTARCHOLOS_CONDITION;
    INFORMATION = DIA_LAUDUS_ABOUTARCHOLOS_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What can you tell me about Archolos?";
}

func int DIA_LAUDUS_ABOUTARCHOLOS_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x10025)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_ABOUTARCHOLOS_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_AboutThisArcholos");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_AboutArcholos_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_AboutArcholos_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_AboutArcholos_03_03");
}

instance DIA_LAUDUS_CANYOUTEACH(C_INFO) {
    NPC = 0xd491;
    NR = 1;
    CONDITION = DIA_LAUDUS_CANYOUTEACH_CONDITION;
    INFORMATION = DIA_LAUDUS_CANYOUTEACH_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Can you teach me something about magic?";
}

func int DIA_LAUDUS_CANYOUTEACH_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x10025)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_CANYOUTEACH_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_CanYouTeachMeMagic");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_CanYouTeach_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Laudus_CanYouTeach_03_02");
    if (((OTHER.GUILD) != (GIL_MIL)) && ((OTHER.GUILD) != (GIL_SLD))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Laudus_CanYouTeach_03_03");
    };
    if ((OTHER.GUILD) == (GIL_MIL)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Laudus_CanYouTeach_03_04");
    };
    if ((OTHER.GUILD) == (GIL_SLD)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Laudus_CanYouTeach_03_05");
    };
}

instance DIA_LAUDUS_TRADE(C_INFO) {
    NPC = 0xd491;
    NR = 850;
    CONDITION = DIA_LAUDUS_TRADE_CONDITION;
    INFORMATION = DIA_LAUDUS_TRADE_INFO;
    PERMANENT = TRUE;
    TRADE = TRUE;
    DESCRIPTION = "Show me your wares.";
}

func int DIA_LAUDUS_TRADE_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x10025)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_TRADE_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_LetsTrade2");
    B_GIVETRADEINV(SELF);
    if ((LAUDUS_TRADE_CHECKINFO) == (FALSE)) {
        LAUDUS_TRADE_CHECKINFO = TRUE;
        LOG_CREATETOPIC(TOPIC_CITYTRADER, LOG_NOTE);
        AI_LOGENTRY(TOPIC_CITYTRADER, LOG_TRADER_CITY_LAUDUS);
    };
}

var int DIA_LAUDUS_TRADE_INFO.LAUDUS_TRADE_CHECKINFO = 0;
instance DIA_LAUDUS_PICKPOCKET(C_INFO) {
    NPC = 0xd491;
    NR = 900;
    CONDITION = DIA_LAUDUS_PICKPOCKET_CONDITION;
    INFORMATION = DIA_LAUDUS_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_80;
}

func int DIA_LAUDUS_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LAUDUS_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(0x10038);
    INFO_ADDCHOICE(0x10038, DIALOG_BACK, 0x1003c);
    INFO_ADDCHOICE(0x10038, DIALOG_PICKPOCKET, 0x1003b);
}

func void DIA_LAUDUS_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (2)) {
        CREATEINVITEMS(SELF, 0x9568, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x9568, 1);
        B_PICKPOCKET_AMBIENT_TIER_2();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(0x10038);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(0x10038);
}

func void DIA_LAUDUS_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(0x10038);
}

