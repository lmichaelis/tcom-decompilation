instance DIA_ROLF_EXIT(C_INFO) {
    NPC = 0xe29a;
    NR = 999;
    CONDITION = DIA_ROLF_EXIT_CONDITION;
    INFORMATION = DIA_ROLF_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_ROLF_EXIT_CONDITION() {
    return TRUE;
}

var int SQ109_MONEYFROMGOLD = 0;
func void DIA_ROLF_EXIT_INFO() {
    if ((NPC_KNOWSINFO(OTHER, 0x14ff0)) && ((SQ109_ROLFPARTY) == (TRUE))) {
        AI_OUTPUT(OTHER, SELF, "DIA_ROLF_EXIT_15_01");
        AI_OUTPUT(SELF, OTHER, "DIA_ROLF_EXIT_03_02");
    };
    if ((SQ109_MONEYFROMGOLD) == (1)) {
        SQ109_MONEYFROMGOLD = 2;
        AI_OUTPUT(OTHER, SELF, "DIA_ROLF_EXIT_15_02");
        AI_OUTPUT(SELF, OTHER, "DIA_ROLF_EXIT_03_03");
        CREATEINVITEMS(SELF, 0x87af, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x87af, 1);
    };
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_ROLF_SQ109_HELLO(C_INFO) {
    NPC = 0xe29a;
    NR = 1;
    CONDITION = DIA_ROLF_SQ109_HELLO_CONDITION;
    INFORMATION = DIA_ROLF_SQ109_HELLO_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ROLF_SQ109_HELLO_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ109)) == (LOG_RUNNING)) && ((SQ109_ROLFISSAFE) == (TRUE))) {
        if (((NPC_GETDISTTONPC(SELF, OTHER)) <= (150)) || (NPC_ISINSTATE(SELF, 0xf09f))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_ROLF_SQ109_HELLO_INFO() {
    AI_STARTFACEANI(SELF, S_FRIGHTENED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Rolf_SQ109_Hello_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Rolf_SQ109_Hello_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Rolf_SQ109_Hello_03_05");
    AI_OUTPUT(OTHER, SELF, "DIA_Rolf_SQ109_Hello_15_06");
    INFO_CLEARCHOICES(0x14fe6);
    INFO_ADDCHOICE(0x14fe6, "I would have preferred a purse instead of children.", 0x14fec);
    INFO_ADDCHOICE(0x14fe6, "How long have you been here?", 0x14feb);
}

var int ROLF_SQ109_INFORMATIONS_COUNT = 0;
func void DIA_ROLF_SQ109_HELLO_COUNT() {
    ROLF_SQ109_INFORMATIONS_COUNT = (ROLF_SQ109_INFORMATIONS_COUNT) + (1);
    if ((ROLF_SQ109_INFORMATIONS_COUNT) == (1)) {
        INFO_ADDCHOICE(0x14fe6, "What happened?", 0x14fed);
    };
}

func void DIA_ROLF_SQ109_HELLO_HOWLONG() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rolf_SQ109_Hello_HowLong_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rolf_SQ109_Hello_HowLong_03_02");
    DIA_ROLF_SQ109_HELLO_COUNT();
}

func void DIA_ROLF_SQ109_HELLO_GIVEMEGOLD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rolf_SQ109_Hello_GiveMeGold_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rolf_SQ109_Hello_GiveMeGold_03_02");
    SQ109_MONEYFROMGOLD = TRUE;
}

func void DIA_ROLF_SQ109_HELLO_GOWITHME() {
    AI_STARTFACEANI(SELF, S_FRIGHTENED, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Rolf_SQ109_Hello_GoWithMe_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Rolf_SQ109_Hello_GoWithMe_03_05");
    AI_OUTPUT(OTHER, SELF, "DIA_Rolf_SQ109_Hello_GoWithMe_15_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Rolf_SQ109_Hello_GoWithMe_03_07");
    INFO_CLEARCHOICES(0x14fe6);
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 0x14fee);
}

func void DIA_ROLF_SQ109_HELLO_GOWITHME_FADESCREEN() {
    FADESCREENTOBLACKF(1, 0x14fef, 1000);
}

func void ROLF_SQ109_FADESCREEN() {
    TELEPORTNPCTOWP(0x71b, "PART15_PATH_ROLF_02");
    NPC_EXCHANGEROUTINE(BAU_11044_ROLF, "READYTOGO");
    NPC_REFRESH(BAU_11044_ROLF);
    TELEPORTNPCTOWP(0xe29a, BAU_11044_ROLF.WP);
    HERO.AIVAR[4] = FALSE;
    FADESCREENFROMBLACK(1);
}

instance DIA_ROLF_SQ109_LETSGO(C_INFO) {
    NPC = 0xe29a;
    NR = 2;
    CONDITION = DIA_ROLF_SQ109_LETSGO_CONDITION;
    INFORMATION = DIA_ROLF_SQ109_LETSGO_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ROLF_SQ109_LETSGO_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ109)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x14fe6))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ROLF_SQ109_LETSGO_INFO() {
    SQ109_ROLFPARTY = TRUE;
    SELF.AIVAR[15] = TRUE;
    SELF.FLAGS = 0;
    AI_STARTFACEANI(SELF, S_FRIGHTENED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Rolf_SQ109_LetsGo_03_01");
    NPC_EXCHANGEROUTINE(BAU_11044_ROLF, FOLLOW);
    AI_LOGENTRY(TOPIC_SQ109, LOG_SQ109_ROLF_LETSGO);
    SQ109_SPAWNNEWWOLFES();
}

instance DIA_ROLF_SQ109_BEAST(C_INFO) {
    NPC = 0xe29a;
    NR = 1;
    CONDITION = DIA_ROLF_SQ109_BEAST_CONDITION;
    INFORMATION = DIA_ROLF_SQ109_BEAST_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "You mentioned the Beast. What did it look like?";
}

func int DIA_ROLF_SQ109_BEAST_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x14ff0)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ROLF_SQ109_BEAST_INFO() {
    AI_STARTFACEANI(SELF, S_FRIGHTENED, 1, -(1));
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Rolf_SQ109_Beast_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rolf_SQ109_Beast_03_02");
    AI_RESETFACEANI(OTHER);
}

instance DIA_ROLF_SQ109_FOLKARDMISSION(C_INFO) {
    NPC = 0xe29a;
    NR = 2;
    CONDITION = DIA_ROLF_SQ109_FOLKARDMISSION_CONDITION;
    INFORMATION = DIA_ROLF_SQ109_FOLKARDMISSION_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Folkard sent me. He said you went to get some supplies.";
}

func int DIA_ROLF_SQ109_FOLKARDMISSION_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x14ff0)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ROLF_SQ109_FOLKARDMISSION_INFO() {
    AI_STARTFACEANI(SELF, S_FRIGHTENED, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Rolf_SQ109_FolkardMission_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rolf_SQ109_FolkardMission_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rolf_SQ109_FolkardMission_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Rolf_SQ109_FolkardMission_03_04");
}

instance DIA_ROLF_SQ109_HOME(C_INFO) {
    NPC = 0xe29a;
    NR = 1;
    CONDITION = DIA_ROLF_SQ109_HOME_CONDITION;
    INFORMATION = DIA_ROLF_SQ109_HOME_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ROLF_SQ109_HOME_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x14ff0)) {
        if (((NPC_GETDISTTOWP(SELF, "VILLAGE_PATH_41")) <= (0x1388)) || ((NPC_GETDISTTOWP(SELF, "VILLAGE_PATH_34")) <= (0x1388))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_ROLF_SQ109_HOME_INFO() {
    SQ109_ROLFPARTY = FALSE;
    SELF.AIVAR[15] = FALSE;
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Rolf_SQ109_Home_03_01");
    NPC_EXCHANGEROUTINE(BAU_11044_ROLF, "VILLAGE");
    AI_LOGENTRY(TOPIC_SQ109, LOG_SQ109_ROLF_HOME);
}

