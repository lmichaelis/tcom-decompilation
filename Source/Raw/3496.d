var int SQ227_MARVINCURRENT_BEER = 0;
var int SQ227_MARVINCURRENT_OWBEER = 0;
var int SQ227_MARVINCURRENT_BEER_02 = 0;
var int SQ227_MARVINCURRENT_BEER_03 = 0;
var int SQ227_MARVINCURRENT_DARKBEER = 0;
var int SQ227_EZEKIELBEERCOUNT = 0;
var int SQ227_EZEKIELBEEROWCOUNT = 0;
var int SQ227_EZEKIELBEER02COUNT = 0;
var int SQ227_EZEKIELBEER03COUNT = 0;
var int SQ227_EZEKIELDARKBEERCOUNT = 0;
var int EZEKIEL_SQ227_GOTBEER = 0;
var int EZEKIEL_SQ227_GOTPARSLEY = 0;
func void DIA_EZEKIEL_SQ227_GOTEVERYTHING() {
    if (((EZEKIEL_SQ227_GOTBEER) == (TRUE)) && ((EZEKIEL_SQ227_GOTPARSLEY) == (TRUE))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Ezekiel_SQ227_GotParsley_GotEverything_03_01");
        AI_OUTPUT(SELF, OTHER, "DIA_Ezekiel_SQ227_GotParsley_GotEverything_03_02");
        AI_LOGENTRY(TOPIC_SQ227, LOG_SQ227_EZEKIEL_GOTEVERYTHING);
        AI_FUNCTION(SELF, 0xf4a4);
    };
}

func void DIA_EZEKIEL_SQ227_NOBEER() {
    AI_STARTFACEANI(SELF, S_THINK, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Ezekiel_SQ227_GotBeer_03_03");
    AI_RESETFACEANI(SELF);
}

func void DIA_EZEKIEL_SQ227_GIVEBEER() {
    EZEKIEL_SQ227_GOTBEER = TRUE;
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Ezekiel_SQ227_GotBeer_03_02");
    AI_LOGENTRY(TOPIC_SQ227, LOG_SQ227_EZEKIEL_GOTBEER);
    DIA_EZEKIEL_SQ227_GOTEVERYTHING();
}

func void SQ227_MARVIN_GIVEDARK() {
    SQ227_MARVINCURRENT_DARKBEER = NPC_HASITEMS(OTHER, 0x8e0c);
    SQ227_EZEKIELDARKBEERCOUNT = NPC_HASITEMS(SELF, 0x8e0c);
    if ((NPC_HASITEMS(OTHER, 0x8e0c)) >= (1)) {
        if ((NPC_HASITEMS(OTHER, 0x8e0c)) < ((10) - (SQ227_EZEKIELBEERCOUNT))) {
        } else {
            SQ227_EZEKIELBEERCOUNT = (SQ227_EZEKIELBEERCOUNT) + (SQ227_MARVINCURRENT_DARKBEER);
        };
    };
    DIA_EZEKIEL_SQ227_GIVEBEER();
}

func void SQ227_MARVIN_GIVEBEER03() {
    SQ227_MARVINCURRENT_BEER_03 = NPC_HASITEMS(OTHER, 0x8e17);
    SQ227_EZEKIELBEER03COUNT = NPC_HASITEMS(SELF, 0x8e17);
    if ((NPC_HASITEMS(OTHER, 0x8e17)) >= (1)) {
        if ((NPC_HASITEMS(OTHER, 0x8e17)) < ((10) - (SQ227_EZEKIELBEERCOUNT))) {
        } else {
            SQ227_EZEKIELBEERCOUNT = (SQ227_EZEKIELBEERCOUNT) + (SQ227_MARVINCURRENT_BEER_03);
        };
    };
    if ((SQ227_EZEKIELBEERCOUNT) < (10)) {
        SQ227_MARVIN_GIVEDARK();
    };
    DIA_EZEKIEL_SQ227_GIVEBEER();
}

func void SQ227_MARVIN_GIVEBEER02() {
    SQ227_MARVINCURRENT_BEER_02 = NPC_HASITEMS(OTHER, 0x8e10);
    SQ227_EZEKIELBEER02COUNT = NPC_HASITEMS(SELF, 0x8e10);
    if ((NPC_HASITEMS(OTHER, 0x8e10)) >= (1)) {
        if ((NPC_HASITEMS(OTHER, 0x8e10)) < ((10) - (SQ227_EZEKIELBEERCOUNT))) {
        } else {
            SQ227_EZEKIELBEERCOUNT = (SQ227_EZEKIELBEERCOUNT) + (SQ227_MARVINCURRENT_BEER_02);
        };
    };
    if ((SQ227_EZEKIELBEERCOUNT) < (10)) {
        SQ227_MARVIN_GIVEBEER03();
    };
    DIA_EZEKIEL_SQ227_GIVEBEER();
}

func void SQ227_MARVIN_GIVEOWBEER() {
    SQ227_MARVINCURRENT_OWBEER = NPC_HASITEMS(OTHER, 0x8e0b);
    SQ227_EZEKIELBEEROWCOUNT = NPC_HASITEMS(SELF, 0x8e0b);
    if ((NPC_HASITEMS(OTHER, 0x8e0b)) >= (1)) {
        if ((NPC_HASITEMS(OTHER, 0x8e0b)) < ((10) - (SQ227_EZEKIELBEERCOUNT))) {
        } else {
            SQ227_EZEKIELBEERCOUNT = (SQ227_EZEKIELBEERCOUNT) + (SQ227_MARVINCURRENT_OWBEER);
        };
    };
    if ((SQ227_EZEKIELBEERCOUNT) < (10)) {
        SQ227_MARVIN_GIVEBEER02();
    };
    DIA_EZEKIEL_SQ227_GIVEBEER();
}

func void SQ227_MARVIN_GIVEBEER() {
    SQ227_MARVINCURRENT_BEER = NPC_HASITEMS(OTHER, 0x84c0);
    if ((NPC_HASITEMS(OTHER, 0x84c0)) >= (10)) {
        B_GIVEINVITEMS(OTHER, SELF, 0x84c0, 10);
        SQ227_EZEKIELBEERCOUNT = 10;
        DIA_EZEKIEL_SQ227_GIVEBEER();
    };
    B_GIVEINVITEMS(OTHER, SELF, 0x84c0, SQ227_MARVINCURRENT_BEER);
    SQ227_EZEKIELBEERCOUNT = (SQ227_EZEKIELBEERCOUNT) + (SQ227_MARVINCURRENT_BEER);
    SQ227_MARVIN_GIVEOWBEER();
}

func void SQ227_CHECKMARVINBEER() {
    SQ227_MARVINCURRENT_BEER = NPC_HASITEMS(OTHER, 0x84c0);
    SQ227_MARVINCURRENT_OWBEER = NPC_HASITEMS(OTHER, 0x8e0b);
    SQ227_MARVINCURRENT_BEER_02 = NPC_HASITEMS(OTHER, 0x8e10);
    SQ227_MARVINCURRENT_BEER_03 = NPC_HASITEMS(OTHER, 0x8e17);
    SQ227_MARVINCURRENT_DARKBEER = NPC_HASITEMS(OTHER, 0x8e0c);
    if ((((((SQ227_MARVINCURRENT_BEER) + (SQ227_MARVINCURRENT_OWBEER)) + (SQ227_MARVINCURRENT_BEER_02)) + (SQ227_MARVINCURRENT_BEER_03)) + (SQ227_MARVINCURRENT_DARKBEER)) >= (10)) {
        SQ227_MARVIN_GIVEBEER();
    };
    DIA_EZEKIEL_SQ227_NOBEER();
}

func void SQ227_TELEPORTALBYN() {
    B_STARTOTHERROUTINE(BAU_700_ALBYN, "SQ227_FOLLOW");
    NPC_REFRESH(BAU_700_ALBYN);
    TELEPORTNPCTOWP(0xe09d, BAU_700_ALBYN.WP);
}

func void SQ227_EZEKIELMARKET_APPLY() {
    if ((SQ227_EZEKIELMARKET_COLLISION) == (0)) {
        PRINTD("Rozpoczynam - SQ227_EzekielMarket_Apply");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("SQ227_MOVER_EZEKIELMARKET");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_02", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_03", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_03", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_TABLE_01", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("SQ227_MOVER_EZEKIELMARKET");
        SQ227_EZEKIELMARKET_COLLISION = 1;
    };
    if (((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ227_EzekielMarket_Apply");
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_02", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_03", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_03", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_TABLE_01", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0xf4a5);
        SQ227_EZEKIELMARKET_COLLISION = 0;
    };
}

var int SQ227_EZEKIELMARKET_APPLY.SQ227_EZEKIELMARKET_COLLISION = 0;
instance SQ227_EZEKIELMARKET_APPLY.MOVER1(ZCMOVER)
var int SQ227_EZEKIELMARKET_APPLY.MOVPTR1 = 0;
func void SQ227_REMOVEVEIT() {
    if ((SQ227_VEITMARKET) == (0)) {
        SQ227_VEITMARKET = 1;
        SQ227_VEITMARKET_DAY = WLD_GETDAY();
    };
}

func void SQ227_VEITMARKET_APPLY() {
    if ((SQ227_VEITMARKET_COLLISION) == (0)) {
        PRINTD("Rozpoczynam - SQ227_VeitMarket_Apply");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("SQ227_MOVER_VEITMARKET");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("SQ227_MOVER_VEITMARKET_CITY");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BENCH_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_CART_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BOX_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BOX_02", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BOX_03", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_MARKET_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_MARKET_02", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_BOX_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_BOX_02", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("SQ227_MOVER_VEITMARKET");
        WLD_SENDTRIGGER("SQ227_MOVER_VEITMARKET_CITY");
        SQ227_VEITMARKET_COLLISION = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ227_VeitMarket_Apply");
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BENCH_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_CART_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BOX_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BOX_02", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BOX_03", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_MARKET_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_MARKET_02", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_BOX_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_BOX_02", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0xf4aa);
        SQ227_VEITMARKET_COLLISION = 0;
    };
}

var int SQ227_VEITMARKET_APPLY.SQ227_VEITMARKET_COLLISION = 0;
instance SQ227_VEITMARKET_APPLY.MOVER1(ZCMOVER)
instance SQ227_VEITMARKET_APPLY.MOVER2(ZCMOVER)
var int SQ227_VEITMARKET_APPLY.MOVPTR1 = 0;
var int SQ227_VEITMARKET_APPLY.MOVPTR2 = 0;
