instance DIA_ARAXOSMINEWORKER_02_EXIT(C_INFO) {
    NPC = 0xdc28;
    NR = 999;
    CONDITION = DIA_ARAXOSMINEWORKER_02_EXIT_CONDITION;
    INFORMATION = DIA_ARAXOSMINEWORKER_02_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_ARAXOSMINEWORKER_02_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_ARAXOSMINEWORKER_02_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_WORKER_ARAXOSMINE_02_HELLO(C_INFO) {
    NPC = 0xdc28;
    NR = 1;
    CONDITION = DIA_WORKER_ARAXOSMINE_02_HELLO_CONDITION;
    INFORMATION = DIA_WORKER_ARAXOSMINE_02_HELLO_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_WORKER_ARAXOSMINE_02_HELLO_CONDITION() {
    if ((QA306_GOTOARAXOSMINE) == (0)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int WORKER_ARAXOSMINE_02_WANTORE = 0;
func void DIA_WORKER_ARAXOSMINE_02_HELLO_INFO() {
    WORKER_ARAXOSMINE_02_WANTORE = TRUE;
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Worker_AraxosMine_02_HELLO_03_01");
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Worker_AraxosMine_02_HELLO_03_02");
    AI_STARTFACEANI(SELF, S_FRIGHTENED, 1, -(1));
    AI_STOPLOOKAT(SELF);
    AI_PLAYANI(SELF, T_SEARCH_SCARED);
    AI_OUTPUT(SELF, OTHER, "DIA_Worker_AraxosMine_02_HELLO_03_03");
}

instance DIA_WORKER_ARAXOSMINE_02_GIVEORE(C_INFO) {
    NPC = 0xdc28;
    NR = 1;
    CONDITION = DIA_WORKER_ARAXOSMINE_02_GIVEORE_CONDITION;
    INFORMATION = DIA_WORKER_ARAXOSMINE_02_GIVEORE_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "Here, I've managed to dig a few out already.";
}

func int DIA_WORKER_ARAXOSMINE_02_GIVEORE_CONDITION() {
    if (((WORKER_ARAXOSMINE_02_WANTORE) == (TRUE)) && ((QA306_GOTOARAXOSMINE) == (0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int WORKER_ARAXOSMINE_02_GIVENORE = 0;
func void DIA_WORKER_ARAXOSMINE_02_GIVEORE_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Worker_AraxosMine_02_GiveOre_15_01");
    if ((NPC_HASITEMS(OTHER, 0x837c)) >= (4)) {
        WORKERREPUTATION_ARAXOSMINE = (WORKERREPUTATION_ARAXOSMINE) + (2);
        PRINTD(CS2("Reputacja u górników Araxos: ", INTTOSTRING(WORKERREPUTATION_ARAXOSMINE)));
        WORKER_ARAXOSMINE_02_GIVENORE = TRUE;
        WORKER_ARAXOSMINE_02_WANTORE = FALSE;
        NPC_REMOVEINVITEMS(SELF, 0x837c, 4);
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        B_GIVEINVITEMS(OTHER, SELF, 0x837c, 4);
        AI_OUTPUT(SELF, OTHER, "DIA_Worker_AraxosMine_02_GiveOre_03_02");
    };
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Worker_AraxosMine_02_GiveOre_03_03");
}

instance DIA_WORKER_ARAXOSMINE_02_ABOUTMINE(C_INFO) {
    NPC = 0xdc28;
    NR = 1;
    CONDITION = DIA_WORKER_ARAXOSMINE_02_ABOUTMINE_CONDITION;
    INFORMATION = DIA_WORKER_ARAXOSMINE_02_ABOUTMINE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What's the situation at the mine?";
}

func int DIA_WORKER_ARAXOSMINE_02_ABOUTMINE_CONDITION() {
    if ((QA306_GOTOARAXOSMINE) == (0)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_WORKER_ARAXOSMINE_02_ABOUTMINE_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Worker_AraxosMine_02_AboutMine_15_01");
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Worker_AraxosMine_02_AboutMine_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Worker_AraxosMine_02_AboutMine_03_03");
    AI_RESETFACEANI(OTHER);
}

instance DIA_WORKER_QA306_BACK(C_INFO) {
    NPC = 0xdc28;
    NR = 1;
    CONDITION = DIA_WORKER_QA306_BACK_CONDITION;
    INFORMATION = DIA_WORKER_QA306_BACK_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_WORKER_QA306_BACK_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_QA306)) == (LOG_RUNNING)) && ((QA306_GOTOARAXOSMINE) >= (2))) && ((WORKER_ARAXOSMINE_02_GIVENORE) == (TRUE))) {
        if ((NPC_KNOWSINFO(HERO, 0x13625)) == (FALSE)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_WORKER_QA306_BACK_INFO() {
    WORKERREPUTATION_ARAXOSMINE = (WORKERREPUTATION_ARAXOSMINE) + (1);
    PRINTD(CS2("Reputacja u górników Araxos: ", INTTOSTRING(WORKERREPUTATION_ARAXOSMINE)));
    QA306_FINISHEDEVENTS = (QA306_FINISHEDEVENTS) + (1);
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Worker_QA306_Back_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Worker_QA306_Back_03_02");
    CREATEINVITEMS(SELF, 0x837c, 8);
    B_GIVEINVITEMS(SELF, OTHER, 0x837c, 8);
}

