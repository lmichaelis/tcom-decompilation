instance DIA_GARDENER_EXIT(C_INFO) {
    NPC = 0xdca9;
    NR = 999;
    CONDITION = DIA_GARDENER_EXIT_CONDITION;
    INFORMATION = DIA_GARDENER_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_GARDENER_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_GARDENER_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_GARDENER_HELLO(C_INFO) {
    NPC = 0xdca9;
    NR = 1;
    CONDITION = DIA_GARDENER_HELLO_CONDITION;
    INFORMATION = DIA_GARDENER_HELLO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What do you do here?";
}

func int DIA_GARDENER_HELLO_CONDITION() {
    return TRUE;
}

func void DIA_GARDENER_HELLO_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_GARDENER_Hello_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_GARDENER_Hello_03_02");
}

instance DIA_GARDENER_SQ502(C_INFO) {
    NPC = 0xdca9;
    NR = 1;
    CONDITION = DIA_GARDENER_SQ502_CONDITION;
    INFORMATION = DIA_GARDENER_SQ502_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "It seems you have quite a collection of plants here.";
}

func int DIA_GARDENER_SQ502_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x13673)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GARDENER_SQ502_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_GARDENER_SQ502_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_GARDENER_SQ502_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_GARDENER_SQ502_03_03");
}

instance DIA_GARDENER_SQ502_START(C_INFO) {
    NPC = 0xdca9;
    NR = 1;
    CONDITION = DIA_GARDENER_SQ502_START_CONDITION;
    INFORMATION = DIA_GARDENER_SQ502_START_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I could bring them to you.";
}

func int DIA_GARDENER_SQ502_START_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x13676)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GARDENER_SQ502_START_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_GARDENER_SQ502_Start_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_GARDENER_SQ502_Start_03_02");
    B_USEFAKESCROLL();
    B_GIVEINVITEMS(SELF, OTHER, 0x9301, 1);
    AI_WAITTILLEND(OTHER, SELF);
    B_SAY(OTHER, SELF, "$MARVIN_YeahLetsGo");
    LOG_CREATETOPIC(TOPIC_SQ502, LOG_MISSION);
    LOG_SETSTATUS(_@(MIS_SQ502), TOPIC_SQ502, LOG_RUNNING);
    AI_LOGENTRY(TOPIC_SQ502, LOG_SQ502_STARTREAL);
}

var int SQ502_BLUEPLANTGIVEN = 0;
var int SQ502_HEALTHHERB03GIVEN = 0;
var int SQ502_MANAHERB03GIVEN = 0;
var int SQ502_MANAHERB01GIVEN = 0;
instance DIA_GARDENER_SQ502_SEEDS(C_INFO) {
    NPC = 0xdca9;
    NR = 1;
    CONDITION = DIA_GARDENER_SQ502_SEEDS_CONDITION;
    INFORMATION = DIA_GARDENER_SQ502_SEEDS_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I have a seed for you.";
}

func int DIA_GARDENER_SQ502_SEEDS_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x13679)) && ((LOG_GETSTATUS(MIS_SQ502)) == (LOG_RUNNING))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GARDENER_SQ502_SEEDS_CHOICES() {
    INFO_CLEARCHOICES(0x13680);
    INFO_ADDCHOICE(0x13680, DIALOG_BACK, 0x13685);
    if (((NPC_HASITEMS(OTHER, 0x89ee)) >= (1)) && ((SQ502_BLUEPLANTGIVEN) == (FALSE))) {
        INFO_ADDCHOICE(0x13680, "(Give blue elder seed)", 0x13686);
    };
    if (((NPC_HASITEMS(OTHER, 0x89ec)) >= (1)) && ((SQ502_HEALTHHERB03GIVEN) == (FALSE))) {
        INFO_ADDCHOICE(0x13680, "(Give healing root seed)", 0x13687);
    };
    if (((NPC_HASITEMS(OTHER, 0x89ef)) >= (1)) && ((SQ502_MANAHERB03GIVEN) == (FALSE))) {
        INFO_ADDCHOICE(0x13680, "(Give fire root seed)", 0x13688);
    };
    if (((NPC_HASITEMS(OTHER, 0x89f1)) >= (1)) && ((SQ502_MANAHERB01GIVEN) == (FALSE))) {
        INFO_ADDCHOICE(0x13680, "(Give fire nettle seed)", 0x13689);
    };
}

func void DIA_GARDENER_SQ502_SEEDS_DONE() {
    AI_OUTPUT(SELF, OTHER, "DIA_GARDENER_SQ502_Seeds_Done_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_GARDENER_SQ502_Seeds_Done_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_GARDENER_SQ502_Seeds_Done_03_03");
    B_GIVEPLAYERXP(XP_SQ502_FINISH);
    AI_LOGENTRY(TOPIC_SQ502, LOG_SQ502_FINISH);
    LOG_SETSTATUS(_@(MIS_SQ502), TOPIC_SQ502, LOG_SUCCESS);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_GARDENER_SQ502_SEEDS_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_GARDENER_SQ502_Seeds_15_00");
    AI_OUTPUT(SELF, OTHER, "DIA_GARDENER_SQ502_Seeds_03_01");
    DIA_GARDENER_SQ502_SEEDS_CHOICES();
}

func void DIA_GARDENER_SQ502_SEEDS_BACK() {
    INFO_CLEARCHOICES(0x13680);
}

func void DIA_GARDENER_SQ502_SEEDS_BLUEPLANT() {
    B_GIVEINVITEMS(OTHER, SELF, 0x89ee, 1);
    AI_OUTPUT(SELF, OTHER, "DIA_GARDENER_SQ502_Seeds_BluePlant_03_01");
    B_GIVEINVITEMS(SELF, OTHER, 0x8649, 1);
    AI_LOGENTRY(TOPIC_SQ502, LOG_SQ502_BLUEPLANT);
    SQ502_BLUEPLANTGIVEN = TRUE;
    if (((((SQ502_BLUEPLANTGIVEN) == (TRUE)) && ((SQ502_HEALTHHERB03GIVEN) == (TRUE))) && ((SQ502_MANAHERB03GIVEN) == (TRUE))) && ((SQ502_MANAHERB01GIVEN) == (TRUE))) {
        DIA_GARDENER_SQ502_SEEDS_DONE();
    };
    DIA_GARDENER_SQ502_SEEDS_CHOICES();
}

func void DIA_GARDENER_SQ502_SEEDS_HEALTHHERB03() {
    B_GIVEINVITEMS(OTHER, SELF, 0x89ec, 1);
    AI_OUTPUT(SELF, OTHER, "DIA_GARDENER_SQ502_Seeds_HealthHerb03_03_01");
    B_GIVEINVITEMS(SELF, OTHER, 0x838e, 1);
    AI_LOGENTRY(TOPIC_SQ502, LOG_SQ502_PLANEBERRY);
    SQ502_HEALTHHERB03GIVEN = TRUE;
    if (((((SQ502_BLUEPLANTGIVEN) == (TRUE)) && ((SQ502_HEALTHHERB03GIVEN) == (TRUE))) && ((SQ502_MANAHERB03GIVEN) == (TRUE))) && ((SQ502_MANAHERB01GIVEN) == (TRUE))) {
        DIA_GARDENER_SQ502_SEEDS_DONE();
    };
    DIA_GARDENER_SQ502_SEEDS_CHOICES();
}

func void DIA_GARDENER_SQ502_SEEDS_MANAHERB03() {
    B_GIVEINVITEMS(OTHER, SELF, 0x89ef, 1);
    AI_OUTPUT(SELF, OTHER, "DIA_GARDENER_SQ502_Seeds_ManaHerb03_03_01");
    B_GIVEINVITEMS(SELF, OTHER, 0x864b, 1);
    AI_LOGENTRY(TOPIC_SQ502, LOG_SQ502_MANAHERB03);
    SQ502_MANAHERB03GIVEN = TRUE;
    if (((((SQ502_BLUEPLANTGIVEN) == (TRUE)) && ((SQ502_HEALTHHERB03GIVEN) == (TRUE))) && ((SQ502_MANAHERB03GIVEN) == (TRUE))) && ((SQ502_MANAHERB01GIVEN) == (TRUE))) {
        DIA_GARDENER_SQ502_SEEDS_DONE();
    };
    DIA_GARDENER_SQ502_SEEDS_CHOICES();
}

func void DIA_GARDENER_SQ502_SEEDS_MANAHERB01() {
    B_GIVEINVITEMS(OTHER, SELF, 0x89f1, 1);
    AI_OUTPUT(SELF, OTHER, "DIA_GARDENER_SQ502_Seeds_ManaHerb01_03_01");
    B_GIVEINVITEMS(SELF, OTHER, 0x8647, 1);
    AI_LOGENTRY(TOPIC_SQ502, LOG_SQ502_MANAHERB01);
    SQ502_MANAHERB01GIVEN = TRUE;
    if (((((SQ502_BLUEPLANTGIVEN) == (TRUE)) && ((SQ502_HEALTHHERB03GIVEN) == (TRUE))) && ((SQ502_MANAHERB03GIVEN) == (TRUE))) && ((SQ502_MANAHERB01GIVEN) == (TRUE))) {
        DIA_GARDENER_SQ502_SEEDS_DONE();
    };
    DIA_GARDENER_SQ502_SEEDS_CHOICES();
}

instance DIA_GARDENER_AMBIENT(C_INFO) {
    NPC = 0xdca9;
    NR = 990;
    CONDITION = DIA_GARDENER_AMBIENT_CONDITION;
    INFORMATION = DIA_GARDENER_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How are you doing?";
}

func int DIA_GARDENER_AMBIENT_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x13673)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GARDENER_AMBIENT_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_WhatNew4");
    if (((LOG_GETSTATUS(MIS_SQ502)) != (LOG_RUNNING)) && ((LOG_GETSTATUS(MIS_SQ502)) != (LOG_SUCCESS))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Gardener_Ambient_03_01");
    };
    if ((LOG_GETSTATUS(MIS_SQ502)) == (LOG_RUNNING)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Gardener_Ambient_03_02");
    };
    if ((LOG_GETSTATUS(MIS_SQ502)) == (LOG_SUCCESS)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Gardener_Ambient_03_03");
    };
}

instance DIA_GARDENER_PICKPOCKET(C_INFO) {
    NPC = 0xdca9;
    NR = 900;
    CONDITION = DIA_GARDENER_PICKPOCKET_CONDITION;
    INFORMATION = DIA_GARDENER_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_40;
}

func int DIA_GARDENER_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GARDENER_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(0x1368d);
    INFO_ADDCHOICE(0x1368d, DIALOG_BACK, 0x13691);
    INFO_ADDCHOICE(0x1368d, DIALOG_PICKPOCKET, 0x13690);
}

func void DIA_GARDENER_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) {
        B_PICKPOCKET_AMBIENT_TIER_1();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(0x1368d);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(0x1368d);
}

func void DIA_GARDENER_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(0x1368d);
}

