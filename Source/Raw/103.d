func void APPLYGOTHIC1MODESETTINGS() {
    CATINV_CHANGEONLAST = !(!(STR_TOINT(MEM_GETGOTHOPT("GAME", "invCatChangeOnLast"))));
    BAKG1MODE = CATINV_G1MODE;
    CATINV_G1MODE = !(!(STR_TOINT(MEM_GETGOTHOPT("GAME", "invCatG1Mode"))));
    if ((BAKG1MODE) != (CATINV_G1MODE)) {
        CATINV_ACTIVECATEGORY = 0;
    };
    if ((CATINV_G1MODE) && (!(CATINV_ACTIVECATEGORY))) {
        CATINV_ACTIVECATEGORY += 1;
    };
}

var int APPLYGOTHIC1MODESETTINGS.BAKG1MODE = 0;
func void APPLYSOMESETTINGS_HOOK() {
    APPLYGOTHIC1MODESETTINGS();
}

func void CATINV_INIT() {
    HOOKENGINEF(OCITEMCONTAINER__OPENPASSIVE, 7, 0x51b7);
    HOOKENGINEF(OCITEMCONTAINER__CLOSE, 6, 0x51ba);
    MEMORYPROTECTIONOVERRIDE(OCITEMCONTAINER__PREVITEM_CHECK1, 2);
    MEMORYPROTECTIONOVERRIDE(OCITEMCONTAINER__NEXTITEM_CHECK2, 1);
    HOOKENGINEF(OCITEMCONTAINER__NEXTITEM_CHECK0, 5, 0x51c9);
    MEMORYPROTECTIONOVERRIDE(OCITEMCONTAINER__PREVITEM_CHECK1, 2);
    MEMORYPROTECTIONOVERRIDE(OCITEMCONTAINER__PREVITEM_CHECK2, 1);
    HOOKENGINEF(OCITEMCONTAINER__PREVITEM_CHECK0, 5, 0x51d3);
    HOOKENGINEF(OCITEMCONTAINER__HANDLEEVENT_LAST, 6, 0x51e9);
    HOOKENGINEF(OCNPCCONTAINER__HANDLEEVENT_LAST, 6, 0x51e9);
    HOOKENGINEF(OCSTEALCONTAINER__HANDLEEVENT_LAST, 6, 0x51e9);
    HOOKENGINEF(OCVIEWDIALOGTRADE__HANDLEEVENT_LAST, 6, 0x51ea);
    HOOKENGINEF(OCITEMCONTAINER__REMOVE_REMOVELISTNODE, 5, 0x51f9);
    HOOKENGINEF(OCNPCINVENTORY__REMOVE_REMOVELISTNODE, 5, 0x5202);
    HOOKENGINEF(OCNPCINVENTORY__REMOVEBYPTR_REMOVELISTNODE, 5, 0x5208);
    HOOKENGINEF(OCNPCINVENTORY__REMOVEITEM_REMOVELISTNODE, 5, 0x520a);
    HOOKENGINEF(OCITEMCONTAINER__INSERT_INSERTLISTNODE, 5, 0x51f6);
    HOOKENGINEF(OCNPCINVENTORY__INSERT_INSERTLISTNODE, 6, 0x51fc);
    HOOKENGINEF(OCNPC__OPENDEADNPC_SETUPINV, 6, 0x5217);
    HOOKENGINEF(OCITEMCONTAINER__DRAWCATEGORY_END, 5, 0x5218);
    HOOKENGINEF(CGAMEMANAGER__APPLYSOMESETTINGS, 6, 0x522e);
    MEMORYPROTECTIONOVERRIDE(OCITEMCONTAINER__CHECKSELECTEDITEM_ISACTIVE, 5);
    MEM_WRITEBYTE(OCITEMCONTAINER__CHECKSELECTEDITEM_ISACTIVE, ASMINT_OP_NOP);
    MEM_WRITEINT((OCITEMCONTAINER__CHECKSELECTEDITEM_ISACTIVE) + (1), ASMINT_OP_ADD4ESP);
    HOOKENGINEF(OCITEMCONTAINER__CHECKSELECTEDITEM_ISACTIVE, 5, 0x51f0);
    MEMORYPROTECTIONOVERRIDE(OCITEMCONTAINER__CHECKSELECTEDITEM_ISACTIVEP, 1);
    MEM_WRITEBYTE(OCITEMCONTAINER__CHECKSELECTEDITEM_ISACTIVEP, ASMINT_OP_SHORTJMP);
    if ((MEM_READINT(OCSTEALCONTAINER__CREATELIST_ISARMOR_SP18)) == (0)) {
        MEMORYPROTECTIONOVERRIDE(OCSTEALCONTAINER__CREATELIST_ISARMOR_SP18, 4);
        MEM_WRITEINT(OCSTEALCONTAINER__CREATELIST_ISARMOR_SP18, 271);
        CATINV_SP18ARMOR = TRUE;
    };
    if ((MEM_READINT(OCNPCCONTAINER__CREATELIST_ISARMOR_SP18)) == (0)) {
        MEMORYPROTECTIONOVERRIDE(OCNPCCONTAINER__CREATELIST_ISARMOR_SP18, 1);
        MEM_WRITEBYTE(OCNPCCONTAINER__CREATELIST_ISARMOR_SP18, 26);
        CATINV_SP18ARMOR = TRUE;
    };
    MEMORYPROTECTIONOVERRIDE(OCSTEALCONTAINER__CREATELIST_ISARMOR, 5);
    MEM_WRITEBYTE(OCSTEALCONTAINER__CREATELIST_ISARMOR, ASMINT_OP_NOP);
    MEM_WRITEINT((OCSTEALCONTAINER__CREATELIST_ISARMOR) + (1), ASMINT_OP_ADD4ESP);
    HOOKENGINEF(OCSTEALCONTAINER__CREATELIST_ISARMOR, 5, 0x518f);
    MEMORYPROTECTIONOVERRIDE(OCNPCCONTAINER__CREATELIST_ISARMOR, 5);
    MEM_WRITEBYTE(OCNPCCONTAINER__CREATELIST_ISARMOR, ASMINT_OP_NOP);
    MEM_WRITEINT((OCNPCCONTAINER__CREATELIST_ISARMOR) + (1), ASMINT_OP_ADD4ESP);
    HOOKENGINEF(OCNPCCONTAINER__CREATELIST_ISARMOR, 5, 0x518f);
    MEMORYPROTECTIONOVERRIDE(OCNPCCONTAINER__HANDLEEVENT_ISEMPTY, 5);
    MEM_WRITEBYTE(OCNPCCONTAINER__HANDLEEVENT_ISEMPTY, ASMINT_OP_NOP);
    MEM_WRITEINT((OCNPCCONTAINER__HANDLEEVENT_ISEMPTY) + (1), ASMINT_OP_NOP4TIMES);
    HOOKENGINEF(OCNPCCONTAINER__HANDLEEVENT_ISEMPTY, 5, 0x5215);
    MEMORYPROTECTIONOVERRIDE(OCNPCINVENTORY__HANDLEEVENT_KEYWEAPONJZ, 1);
    MEMORYPROTECTIONOVERRIDE(OCNPCINVENTORY__HANDLEEVENT_KEYWEAPON, 8);
    MEM_WRITEINT(OCNPCINVENTORY__HANDLEEVENT_KEYWEAPON, ASMINT_OP_NOP4TIMES);
    MEM_WRITEINT((OCNPCINVENTORY__HANDLEEVENT_KEYWEAPON) + (4), ASMINT_OP_NOP4TIMES);
    HOOKENGINEF(OCNPCINVENTORY__HANDLEEVENT_KEYWEAPON, 8, 0x51ec);
    MEMORYPROTECTIONOVERRIDE(OCAIHUMAN__CHANGECAMMODEBYSITUATION_SWITCHMOBCAM, 8);
    MEM_WRITEINT(OCAIHUMAN__CHANGECAMMODEBYSITUATION_SWITCHMOBCAM, ASMINT_OP_ADD4ESP);
    MEM_WRITEINT((OCAIHUMAN__CHANGECAMMODEBYSITUATION_SWITCHMOBCAM) + (4), ASMINT_OP_NOP4TIMES);
    HOOKENGINEF(OCAIHUMAN__CHANGECAMMODEBYSITUATION_SWITCHMOBCAM, 8, 0x51ed);
    if (!(MEM_GOTHOPTEXISTS("GAME", "invCatChangeOnLast"))) {
        MEM_SETGOTHOPT("GAME", "invCatChangeOnLast", "0");
    };
    if (!(MEM_GOTHOPTEXISTS("GAME", "invCatG1Mode"))) {
        MEM_SETGOTHOPT("GAME", "invCatG1Mode", "0");
    };
    APPLYGOTHIC1MODESETTINGS();
}

