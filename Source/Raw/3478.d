func void SQ309_THIRDMARKET_START() {
    if ((CHANGESQ309MARKET3COLLISION) == (0)) {
        PRINTD("Rozpoczynam - SQ309_ThirdMarket_Start");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("KM_GOLDENINNOS_MOVER_02");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        CHANGEVOBCOLLISION("INNOSMARKET3_WOODCHEST", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_MARKET", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_ROOF", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_CRATES_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_CRATES_02", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_CRATES_03", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_CRATES_04", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_CRATES_05", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_GOLD1", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_GOLD2", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_SILVER1", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_BRONZE1", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("KM_GOLDENINNOS_MOVER_02");
        CHANGESQ309MARKET3COLLISION = 1;
    };
    if (((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ309_ThirdMarket_Start");
        CHANGEVOBCOLLISION("INNOSMARKET3_WOODCHEST", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_MARKET", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_ROOF", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_CRATES_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_CRATES_02", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_CRATES_03", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_CRATES_04", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_CRATES_05", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_GOLD1", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_GOLD2", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_SILVER1", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("INNOSMARKET3_BRONZE1", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0xf3ac);
        CHANGESQ309MARKET3COLLISION = 0;
        if ((CURRENTLEVEL) == (ARCHOLOS_ZEN)) {
            WLD_INSERTNPC(0xd8a4, "PARTM8_PATH_107");
        };
    };
}

var int SQ309_THIRDMARKET_START.CHANGESQ309MARKET3COLLISION = 0;
instance SQ309_THIRDMARKET_START.MOVER1(ZCMOVER)
var int SQ309_THIRDMARKET_START.MOVPTR1 = 0;
func void SQ309_SPAWNWORKER() {
    PRINTD("Teleport NPC");
    SQ309_COUNTASK = 0;
    if (NPC_KNOWSINFO(HERO, 0x12667)) {
        SQ309_WORKERSPAWNPOINT = 4;
        WLD_INSERTNPC(0xd5d8, "SLUMS_PATH_138");
    };
    if ((NPC_GETDISTTOWP(HERO, "HARBOUR_WORKER_02")) <= (0x9c4)) {
        SQ309_WORKERSPAWNPOINT = 1;
        WLD_INSERTNPC(0xd5d8, "HARBOUR_PATH_199");
    };
    if ((NPC_GETDISTTOWP(HERO, "HARBOUR_PATH_08")) <= (0x9c4)) {
        SQ309_WORKERSPAWNPOINT = 2;
        WLD_INSERTNPC(0xd5d8, "HARBOUR_PATH_06");
    };
    if ((NPC_GETDISTTOWP(HERO, "SLUMS_PATH_190")) <= (0x9c4)) {
        SQ309_WORKERSPAWNPOINT = 3;
        WLD_INSERTNPC(0xd5d8, "SLUMS_PATH_153");
    };
}

func void SQ309_COUNTPOINT() {
    SQ309_COUNTASK = (SQ309_COUNTASK) + (1);
    if ((SQ309_COUNTASK) == (2)) {
        SQ309_SPAWNWORKER();
    };
}

