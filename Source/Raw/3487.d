func void SQ411_HIDEEVENTS() {
    NPC_EXCHANGEROUTINE(VLK_6454_DANIS, START);
    B_STARTOTHERROUTINE(VLK_12289_WORKER, START);
    NPC_REFRESH(VLK_12289_WORKER);
}

func int C_SQ411_GOTRICHVLKARMOR(var C_NPC NPC) {
    if (((((((NPC_HASITEMS(NPC, 0x8ac8)) > (0)) || ((NPC_HASITEMS(NPC, 0x8ac9)) > (0))) || ((NPC_HASITEMS(NPC, 0x8aca)) > (0))) || ((NPC_HASITEMS(NPC, 0x8acb)) > (0))) || ((NPC_HASITEMS(NPC, 0x8acc)) > (0))) || ((NPC_HASITEMS(NPC, 0x8acd)) > (0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void SQ411_GIVEKAZEEMARMORANDGOLD() {
    if ((NPC_HASITEMS(OTHER, 0x8ac8)) >= (1)) {
        B_GIVEINVITEMS(OTHER, SELF, 0x8ac8, 1);
        AI_EQUIPARMOR(SELF, 0x8ac8);
    };
    if ((NPC_HASITEMS(OTHER, 0x8ac9)) >= (1)) {
        B_GIVEINVITEMS(OTHER, SELF, 0x8ac9, 1);
        AI_EQUIPARMOR(SELF, 0x8ac9);
    };
    if ((NPC_HASITEMS(OTHER, 0x8aca)) >= (1)) {
        B_GIVEINVITEMS(OTHER, SELF, 0x8aca, 1);
        AI_EQUIPARMOR(SELF, 0x8aca);
    };
    if ((NPC_HASITEMS(OTHER, 0x8acb)) >= (1)) {
        B_GIVEINVITEMS(OTHER, SELF, 0x8acb, 1);
        AI_EQUIPARMOR(SELF, 0x8acb);
    };
    if ((NPC_HASITEMS(OTHER, 0x8acc)) >= (1)) {
        B_GIVEINVITEMS(OTHER, SELF, 0x8acc, 1);
        AI_EQUIPARMOR(SELF, 0x8acc);
    };
    if ((NPC_HASITEMS(OTHER, 0x8acd)) >= (1)) {
        B_GIVEINVITEMS(OTHER, SELF, 0x8acd, 1);
        AI_EQUIPARMOR(SELF, 0x8acd);
    };
    B_GIVEINVITEMS(OTHER, SELF, 0x859b, SQ411_KAZEEM_NEEDEDGOLD);
}

func void SQ411_KAZZEM_AUCTION() {
    SQ411_KAZEEMWILLHELP = 2;
    SQ411_KAZEEMNEGOCIATION = 1;
    SQ411_KAZEEMNEGOCIATION_DAY = WLD_GETDAY();
    SQ411_TIMELIMIT = 3;
    B_STARTOTHERROUTINE(VLK_6454_DANIS, "SQ411_SMALLTALK");
    NPC_REFRESH(VLK_6454_DANIS);
    NPC_EXCHANGEROUTINE(NONE_100012_KAZEEM_CHAPTER4, "SQ411_SMALLTALK");
    B_STARTOTHERROUTINE(VLK_12289_WORKER, START);
    NPC_REFRESH(VLK_12289_WORKER);
}

func void SQ411_PREPARENEWHOME() {
    FF_APPLYONCEEXTGT(0xf42d, 0, -(1));
    NONE_100012_KAZEEM_CHAPTER4.FLAGS = 2;
    CREATEINVITEMS(NONE_100012_KAZEEM_CHAPTER4, 0x901d, 1);
    B_STARTOTHERROUTINE(NONE_100012_KAZEEM_CHAPTER4, "SQ411_NEWHOME");
    NPC_REFRESH(NONE_100012_KAZEEM_CHAPTER4);
    B_STARTOTHERROUTINE(VLK_6454_DANIS, START);
    NPC_REFRESH(VLK_6454_DANIS);
}

func void SQ411_CHANGEDOOR() {
    if ((SQ411_CHANGEDOOR_COUNT) == (0)) {
        PRINTD("Rozpoczynam - SQ411_ChangeDoor");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("SQ411_MOVER_DOOR");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("SQ411_MOVER_DOOR_REAL");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("SQ411_DOOR_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ411_DOOR_02", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("SQ411_MOVER_DOOR");
        WLD_SENDTRIGGER("SQ411_MOVER_DOOR_REAL");
        SQ411_CHANGEDOOR_COUNT = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ411_ChangeDoor");
        CHANGEVOBCOLLISION("SQ411_DOOR_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ411_DOOR_02", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0xf42d);
        SQ411_CHANGEDOOR_COUNT = 0;
    };
}

var int SQ411_CHANGEDOOR.SQ411_CHANGEDOOR_COUNT = 0;
instance SQ411_CHANGEDOOR.MOVER1(ZCMOVER)
instance SQ411_CHANGEDOOR.MOVER2(ZCMOVER)
var int SQ411_CHANGEDOOR.MOVPTR1 = 0;
var int SQ411_CHANGEDOOR.MOVPTR2 = 0;
