func void EVT_QA401_KICKOBJECT() {
    QA401_COUNTDESTROYEDOBJECT = (QA401_COUNTDESTROYEDOBJECT) + (1);
    if ((QA401_COUNTDESTROYEDOBJECT) == (1)) {
        PRINTD("Attack");
        NONE_13541_WORKER.AIVAR[96] = -(1);
        NONE_13542_WORKER.AIVAR[96] = -(1);
        NONE_13543_WORKER.AIVAR[96] = -(1);
        B_IMMEDIATEATTACKPLAYER(NONE_13541_WORKER, AR_KILL);
        B_IMMEDIATEATTACKPLAYER(NONE_13542_WORKER, AR_KILL);
        B_IMMEDIATEATTACKPLAYER(NONE_13543_WORKER, AR_KILL);
        TELEPORTNPCTOWP(0xd2aa, "HARBOUR_SHIPYARD_06");
        B_LOGENTRY(TOPIC_QA401, LOG_QA401_WORKER_FIGHT);
    };
    if ((QA401_COUNTDESTROYEDOBJECT) == (4)) {
        QA401_WORKERRESULT = 2;
        B_LOGENTRY(TOPIC_QA401, LOG_QA401_WORKER_DESTROYED);
        QA401_COUNTTASKS();
    };
    B_GIVEPLAYERXP(XP_QA401_DESTROYWORKERSTUFF);
    SND_PLAY("DESTROY_WOOD");
    SND_PLAY("DOOR_SLAM");
}

var int EVT_QA401_KICKOBJECT.QA401_COUNTDESTROYEDOBJECT = 0;
func void EVT_QA401_CRATE_01() {
    QA401_WORKER_CHEST_01 = TRUE;
    MOB_CHANGEFOCUSNAME("QA401_CRATE_01", "MOBNAME_NOTHING");
    EVT_QA401_KICKOBJECT();
    FF_APPLYONCEEXTGT(0x166e4, 0, -(1));
}

func void QA401_CRATE_01_KICKED() {
    if ((QA401_CRATE_01_KICKED_APPLY) == (0)) {
        PRINTD("Rozpoczynam - QA401_CRATE_01_Kicked");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_CRATE_DESTROY_01");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_CRATE_01");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("QA401_CRATE_01", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_CRATE_DESTROY_01");
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_CRATE_01");
        QA401_CRATE_01_KICKED_APPLY = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Sko刃zy쓴m - QA401_CRATE_01_Kicked");
        CHANGEVOBCOLLISION("QA401_CRATE_01", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0x166e4);
        QA401_CRATE_01_KICKED_APPLY = 0;
    };
}

var int QA401_CRATE_01_KICKED.QA401_CRATE_01_KICKED_APPLY = 0;
instance QA401_CRATE_01_KICKED.MOVER1(ZCMOVER)
instance QA401_CRATE_01_KICKED.MOVER2(ZCMOVER)
var int QA401_CRATE_01_KICKED.MOVPTR1 = 0;
var int QA401_CRATE_01_KICKED.MOVPTR2 = 0;
func void EVT_QA401_CRATE_02() {
    QA401_WORKER_CHEST_02 = TRUE;
    MOB_CHANGEFOCUSNAME("QA401_CRATE_02", "MOBNAME_NOTHING");
    EVT_QA401_KICKOBJECT();
    FF_APPLYONCEEXTGT(0x166eb, 0, -(1));
}

func void QA401_CRATE_02_KICKED() {
    if ((QA401_CRATE_02_KICKED_APPLY) == (0)) {
        PRINTD("Rozpoczynam - QA401_CRATE_02_Kicked");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_CRATE_DESTROY_02");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_CRATE_02");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("QA401_CRATE_02", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_CRATE_DESTROY_02");
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_CRATE_02");
        QA401_CRATE_02_KICKED_APPLY = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Sko刃zy쓴m - QA401_CRATE_02_Kicked");
        CHANGEVOBCOLLISION("QA401_CRATE_02", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0x166eb);
        QA401_CRATE_02_KICKED_APPLY = 0;
    };
}

var int QA401_CRATE_02_KICKED.QA401_CRATE_02_KICKED_APPLY = 0;
instance QA401_CRATE_02_KICKED.MOVER1(ZCMOVER)
instance QA401_CRATE_02_KICKED.MOVER2(ZCMOVER)
var int QA401_CRATE_02_KICKED.MOVPTR1 = 0;
var int QA401_CRATE_02_KICKED.MOVPTR2 = 0;
func void EVT_QA401_BARREL_01() {
    QA401_WORKER_BARREL_01 = TRUE;
    MOB_CHANGEFOCUSNAME("QA401_BARREL_01", "MOBNAME_NOTHING");
    EVT_QA401_KICKOBJECT();
    FF_APPLYONCEEXTGT(0x166f2, 0, -(1));
}

func void QA401_BARREL_01_KICKED() {
    if ((QA401_BARREL_01_KICKED_APPLY) == (0)) {
        PRINTD("Rozpoczynam - QA401_BARREL_01_Kicked");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_BARREL_DESTROY_01");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_BARREL_01");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("QA401_BARREL_01", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_BARREL_DESTROY_01");
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_BARREL_01");
        QA401_BARREL_01_KICKED_APPLY = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Sko刃zy쓴m - QA401_BARREL_01_Kicked");
        CHANGEVOBCOLLISION("QA401_BARREL_01", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0x166f2);
        QA401_BARREL_01_KICKED_APPLY = 0;
    };
}

var int QA401_BARREL_01_KICKED.QA401_BARREL_01_KICKED_APPLY = 0;
instance QA401_BARREL_01_KICKED.MOVER1(ZCMOVER)
instance QA401_BARREL_01_KICKED.MOVER2(ZCMOVER)
var int QA401_BARREL_01_KICKED.MOVPTR1 = 0;
var int QA401_BARREL_01_KICKED.MOVPTR2 = 0;
func void EVT_QA401_BARREL_02() {
    QA401_WORKER_BARREL_02 = TRUE;
    MOB_CHANGEFOCUSNAME("QA401_BARREL_02", "MOBNAME_NOTHING");
    EVT_QA401_KICKOBJECT();
    FF_APPLYONCEEXTGT(0x166f9, 0, -(1));
}

func void QA401_BARREL_02_KICKED() {
    if ((QA401_BARREL_02_KICKED_APPLY) == (0)) {
        PRINTD("Rozpoczynam - QA401_BARREL_02_Kicked");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_BARREL_DESTROY_01");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_BARREL_01");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("QA401_BARREL_02", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_BARREL_DESTROY_02");
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_BARREL_02");
        QA401_BARREL_02_KICKED_APPLY = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Sko刃zy쓴m - QA401_BARREL_02_Kicked");
        CHANGEVOBCOLLISION("QA401_BARREL_02", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0x166f9);
        QA401_BARREL_02_KICKED_APPLY = 0;
    };
}

var int QA401_BARREL_02_KICKED.QA401_BARREL_02_KICKED_APPLY = 0;
instance QA401_BARREL_02_KICKED.MOVER1(ZCMOVER)
instance QA401_BARREL_02_KICKED.MOVER2(ZCMOVER)
var int QA401_BARREL_02_KICKED.MOVPTR1 = 0;
var int QA401_BARREL_02_KICKED.MOVPTR2 = 0;
func void QA401_BIGCRATE_REFUSETOUSE() {
    AI_USEMOB(HERO, NPC_GETDETECTEDMOB(HERO), -(1));
    B_SAY(HERO, HERO, "$MARVIN_WRONGTIME");
}

func void QA401_BIGCRATE_USE() {
    MOB_CHANGEFOCUSNAME("QA401_BIGCRATE_02", "MOBNAME_NOTHING");
    AI_WAIT(HERO, 0x3fc00000);
    AI_USEMOB(HERO, NPC_GETDETECTEDMOB(HERO), -(1));
    B_GIVEPLAYERXP(XP_QA401_DESTROYBRIDGECRATES);
    MOB_CHANGEFOCUSNAME("QA401_BIGCRATE_01", "MOBNAME_NOTHING");
    QA401_COUNTTASKS();
}

func void EVT_QA401_BIGCRATE_01() {
    if (WLD_ISTIME(20, 0, 3, 0)) {
        QA401_BRIDGEBIGCRATERESULT = 1;
        B_LOGENTRY(TOPIC_QA401, LOG_QA401_BRDIGE_FIRE);
        QA401_BIGCRATE_USE();
        SND_PLAY("TORCH_ENLIGHT");
        NPC_REMOVEINVITEM(HERO, 0x87b6);
        WLD_SENDTRIGGER("QA401_MOVER_BRIDGE_FIRE");
        QA401_LEAVEGUILD_MOVER_01 = TRUE;
        QA401_REMOVEFIRECRATES();
    };
    QA401_BIGCRATE_REFUSETOUSE();
}

func void EVT_QA401_BIGCRATE_02() {
    if (WLD_ISTIME(20, 0, 3, 0)) {
        QA401_BRIDGEBIGCRATERESULT = 2;
        B_LOGENTRY(TOPIC_QA401, LOG_QA401_BRIDGE_POISON);
        QA401_BIGCRATE_USE();
        NPC_REMOVEINVITEM(HERO, 0x90f7);
        QA401_REMOVEFIRECRATES();
    };
    QA401_BIGCRATE_REFUSETOUSE();
}

func void EVT_QA401_MEATBUG_LOGENTRY_01() {
    if ((NPC_KNOWSINFO(HERO, 0x11726)) && ((HERO.GUILD) == (GIL_MEATBUG))) {
        if ((QA401_MEATBUG_LOGENTRY_01) == (FALSE)) {
            QA401_MEATBUG_LOGENTRY_01 = TRUE;
            B_LOGENTRY(TOPIC_QA401, LOG_QA401_MEATBUG_V1);
        };
    };
}

var int EVT_QA401_MEATBUG_LOGENTRY_01.QA401_MEATBUG_LOGENTRY_01 = 0;
func void EVT_QA401_MEATBUG_LOGENTRY_04() {
    if ((NPC_KNOWSINFO(HERO, 0x11726)) && ((HERO.GUILD) == (GIL_MEATBUG))) {
        if ((QA401_MEATBUG_LOGENTRY_04) == (FALSE)) {
            QA401_MEATBUG_LOGENTRY_04 = TRUE;
            B_LOGENTRY(TOPIC_QA401, LOG_QA401_MEATBUG_V4);
        };
    };
}

var int EVT_QA401_MEATBUG_LOGENTRY_04.QA401_MEATBUG_LOGENTRY_04 = 0;
func void EVT_QA401_MEATBUG_TELEPORTARAXOS() {
    PRINTD("Araxos gotowe");
    NPC_CLEARAIQUEUE(SLD_1009_CARAMON);
    QA401_CARAMON_RTNCHECK = 2;
    NPC_EXCHANGEROUTINE(SLD_1009_CARAMON, "QA401_BEACH_WAIT2");
    TELEPORTNPCTOWP(0xcb1c, SLD_1009_CARAMON.WP);
    if ((MARVIN_ARAXOSSPECIALIZATION) == (ARAXOS_SPECIALIZATION_FIGHTER)) {
        NPC_CHANGEARMOR(SLD_1009_CARAMON, 0x8a7e);
    };
    if ((MARVIN_ARAXOSSPECIALIZATION) == (ARAXOS_SPECIALIZATION_ARCHER)) {
        NPC_CHANGEARMOR(SLD_1009_CARAMON, 0x8a8e);
    };
    NPC_CHANGEARMOR(SLD_1009_CARAMON, 0x8a89);
    NPC_REMOVEINVITEMS(SLD_1009_CARAMON, 0x8473, 1);
    NPC_CLEARAIQUEUE(SLD_5002_SUNDER);
    QA401_SUNDER_RTNCHECK = 4;
    B_STARTOTHERROUTINE(SLD_5002_SUNDER, "QA401_BEACH_WAIT3");
    TELEPORTNPCTOWP(0xe176, SLD_5002_SUNDER.WP);
    NPC_CHANGEARMOR(SLD_5002_SUNDER, 0x8a89);
    NPC_REMOVEINVITEMS(SLD_5002_SUNDER, 0x8af4, 1);
    NPC_CLEARAIQUEUE(SLD_1000_ADELARD);
    QA401_ADELARD_RTNCHECK = 3;
    B_STARTOTHERROUTINE(SLD_1000_ADELARD, "QA401_BEACH_WAIT2");
    TELEPORTNPCTOWP(0xcb0a, SLD_1000_ADELARD.WP);
    NPC_CHANGEARMOR(SLD_1000_ADELARD, 0x8a83);
    NPC_REMOVEINVITEMS(SLD_1000_ADELARD, 0x8473, 1);
    NPC_CLEARAIQUEUE(SLD_13548_ARAXOS);
    B_STARTOTHERROUTINE(SLD_13548_ARAXOS, "QA401_BEACH_WAIT2");
    TELEPORTNPCTOWP(0xda46, SLD_13548_ARAXOS.WP);
    NPC_CHANGEARMOR(SLD_13548_ARAXOS, 0x8a7e);
    NPC_REMOVEINVITEMS(SLD_13548_ARAXOS, 0x8af3, 1);
    NPC_CLEARAIQUEUE(SLD_13549_ARAXOS);
    B_STARTOTHERROUTINE(SLD_13549_ARAXOS, "QA401_BEACH_WAIT2");
    TELEPORTNPCTOWP(0xd950, SLD_13549_ARAXOS.WP);
    NPC_CHANGEARMOR(SLD_13549_ARAXOS, 0x8a8e);
    NPC_REMOVEINVITEMS(SLD_13549_ARAXOS, 0x8472, 1);
}

func void EVT_QA401_KICKDOOR() {
    if ((QA401_KICKDOOR_CHECK) == (FALSE)) {
        QA401_KICKDOOR_CHECK = TRUE;
        WLD_SENDTRIGGER("QA401_BROKENDOOR_01");
        WLD_SENDTRIGGER("QA401_BROKENDOOR_02");
        WLD_SENDTRIGGER("QA401_BROKENDOOR_03");
        WLD_PLAYEFFECT("FX_DUST", HERO, HERO, 0, 0, 0, FALSE);
        SND_PLAY("ROCKS_KICK_01");
        SND_PLAY("PLACEHOLDER_SlamDoor01");
        SND_PLAY("DESTROY_WOOD");
    };
}

var int EVT_QA401_KICKDOOR.QA401_KICKDOOR_CHECK = 0;
func void EVT_QA401_DOOR() {
    if ((QA401_DOOR_CHANGESMUGGLERS) == (FALSE)) {
        QA401_DOOR_CHANGESMUGGLERS = TRUE;
        BDT_13564_SMUGGLER.FLAGS = 0;
        BDT_13565_SMUGGLER.FLAGS = 0;
        BDT_13566_SMUGGLER.FLAGS = 0;
        BDT_13567_SMUGGLER.FLAGS = 0;
        BDT_13568_SMUGGLER.FLAGS = 0;
        NPC_CLEARAIQUEUE(BDT_13564_SMUGGLER);
        B_STARTOTHERROUTINE(BDT_13564_SMUGGLER, START);
        TELEPORTNPCTOWP(0xd901, BDT_13564_SMUGGLER.WP);
        NPC_CLEARAIQUEUE(BDT_13565_SMUGGLER);
        B_STARTOTHERROUTINE(BDT_13565_SMUGGLER, START);
        TELEPORTNPCTOWP(0xd904, BDT_13565_SMUGGLER.WP);
        NPC_CLEARAIQUEUE(BDT_13566_SMUGGLER);
        B_STARTOTHERROUTINE(BDT_13566_SMUGGLER, START);
        TELEPORTNPCTOWP(0xd907, BDT_13566_SMUGGLER.WP);
        NPC_CLEARAIQUEUE(BDT_13567_SMUGGLER);
        B_STARTOTHERROUTINE(BDT_13567_SMUGGLER, START);
        TELEPORTNPCTOWP(0xd90a, BDT_13567_SMUGGLER.WP);
        NPC_CLEARAIQUEUE(BDT_13568_SMUGGLER);
        B_STARTOTHERROUTINE(BDT_13568_SMUGGLER, START);
        TELEPORTNPCTOWP(0xd90d, BDT_13568_SMUGGLER.WP);
    };
}

var int EVT_QA401_DOOR.QA401_DOOR_CHANGESMUGGLERS = 0;
func void EVT_QA401_LEVER() {
    if ((QA401_LEVER_CHANGESMUGGLERS) == (FALSE)) {
        QA401_LEVER_CHANGESMUGGLERS = TRUE;
        QA401_FINAL_CUTSCENEENABLE = 1;
        WLD_SENDTRIGGER("QA401_SMUGGLERS_CRATE_01");
        WLD_SENDTRIGGER("QA401_SMUGGLERS_CRATE_02");
        WLD_SENDTRIGGER("QA401_SMUGGLERS_CHEST_01");
        B_LOGENTRY(TOPIC_QA401, LOG_QA401_FIGHT_LEVER);
        FF_APPLYONCEEXTGT(0xf5c0, 0, -(1));
        QA401_FIGHTSMUGGLERS_ROUND02();
    };
}

func void EVT_QA401_TOUCHPLATE() {
    if ((QA401_PABLOUSETOUCHPLATE) == (1)) {
        QA401_PABLOUSETOUCHPLATE = 2;
        QA401_FIGHTWITHBANDITS_SEWERS = 1;
        WLD_INSERTNPC(0xe653, "S1_QA401_ROOM_BANDIT_04");
        WLD_INSERTNPC(0xe65c, "S1_QA401_ROOM_BANDIT_03");
        WLD_INSERTNPC(0xe659, "S1_QA401_ROOM_BANDIT_02");
        WLD_INSERTNPC(0xe656, "S1_QA401_ROOM_BANDIT_01");
    };
    WLD_SENDTRIGGER("QA401_WALL");
}

