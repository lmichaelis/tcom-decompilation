var int SIGHTSCALING_SCALINGENABLED = 0;
var string SIGHTSCALING_CURRENTMUSICTHEMENAME = "";
var int SIGHTSCALING_DEFAULTFACTOR = 0;
var int SIGHTSCALING_DEFAULTFACTOROPTION1 = 0;
var int SIGHTSCALING_DEFAULTFACTOROPTION2 = 0;
func void UPDATESCALINGFACTOR(var string MUSICTHEME) {
    if ((MEM_WORLD.SKYCONTROLEROUTDOOR) == (0)) {
        return;
    };
    SIGHTSCALING_CURRENTMUSICTHEMENAME = MUSICTHEME;
    if ((SIGHTSCALING_SCALINGENABLED) == (FALSE)) {
        return;
    };
    if ((STR_STARTSWITH(MUSICTHEME, "HAR_")) || (STR_STARTSWITH(MUSICTHEME, "INX_"))) {
        MEM_SKYCONTROLLER.USERFARZSCALABILITY = SIGHTSCALING_DEFAULTFACTOROPTION1;
    };
    if (((STR_STARTSWITH(MUSICTHEME, "CIT_")) || (STR_STARTSWITH(MUSICTHEME, "CMD_"))) || (STR_STARTSWITH(MUSICTHEME, "CRH_"))) {
        MEM_SKYCONTROLLER.USERFARZSCALABILITY = SIGHTSCALING_DEFAULTFACTOROPTION2;
    };
    MEM_SKYCONTROLLER.USERFARZSCALABILITY = SIGHTSCALING_DEFAULTFACTOR;
}

func void SIGHTSCALING_APPLYSOMESETTINGS() {
    if ((MEM_WORLD.SKYCONTROLEROUTDOOR) == (0)) {
        return;
    };
    SIGHTSCALING_SCALINGENABLED = STR_TOINT(MEM_GETGOTHOPT("GAME", "sightScaling"));
    SIGHTVALUE = STR_TOINT(MEM_GETGOTHOPT("PERFORMANCE", "sightValue"));
    SIGHTFACTORDEFAULT = ((SIGHTVALUE) + (1)) * (20);
    SIGHTSCALING_DEFAULTFACTOR = DIVF(MKF(SIGHTFACTORDEFAULT), MKF(100));
    if ((SIGHTVALUE) < (4)) {
        SIGHTSCALING_SCALINGENABLED = FALSE;
    };
    SIGHTVALUEOPTION1 = 4;
    SIGHTVALUEOPTION2 = 3;
    SIGHTFACTOROPTION1 = ((SIGHTVALUEOPTION1) + (1)) * (20);
    SIGHTFACTOROPTION2 = ((SIGHTVALUEOPTION2) + (1)) * (20);
    SIGHTSCALING_DEFAULTFACTOROPTION1 = DIVF(MKF(SIGHTFACTOROPTION1), MKF(100));
    SIGHTSCALING_DEFAULTFACTOROPTION2 = DIVF(MKF(SIGHTFACTOROPTION2), MKF(100));
    if (SIGHTSCALING_SCALINGENABLED) {
        UPDATESCALINGFACTOR(SIGHTSCALING_CURRENTMUSICTHEMENAME);
    };
    MEM_SKYCONTROLLER.USERFARZSCALABILITY = SIGHTSCALING_DEFAULTFACTOR;
}

var int SIGHTSCALING_APPLYSOMESETTINGS.SIGHTVALUE = 0;
var int SIGHTSCALING_APPLYSOMESETTINGS.SIGHTFACTORDEFAULT = 0;
var int SIGHTSCALING_APPLYSOMESETTINGS.SIGHTVALUEOPTION1 = 0;
var int SIGHTSCALING_APPLYSOMESETTINGS.SIGHTVALUEOPTION2 = 0;
var int SIGHTSCALING_APPLYSOMESETTINGS.SIGHTFACTOROPTION1 = 0;
var int SIGHTSCALING_APPLYSOMESETTINGS.SIGHTFACTOROPTION2 = 0;
