instance DIA_WANDERER_EXIT(C_INFO) {
    NPC = 0xdf0a;
    NR = 999;
    CONDITION = DIA_WANDERER_EXIT_CONDITION;
    INFORMATION = DIA_WANDERER_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_WANDERER_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_WANDERER_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_WANDERER_NS63_START(C_INFO) {
    NPC = 0xdf0a;
    NR = 1;
    CONDITION = DIA_WANDERER_NS63_START_CONDITION;
    INFORMATION = DIA_WANDERER_NS63_START_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_WANDERER_NS63_START_CONDITION() {
    return TRUE;
}

func void DIA_WANDERER_NS63_START_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Wanderer_NS63_Start_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Wanderer_NS63_Start_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Wanderer_NS63_Start_03_03");
    NPC_EXCHANGEROUTINE(SELF, TOT);
    INFO_ADDCHOICE(0x13b53, "Why should I know anything about it?", 0x13b59);
    INFO_ADDCHOICE(0x13b53, "The vineyard is right next to us.", 0x13b56);
    INFO_ADDCHOICE(0x13b53, "Maybe join the Merchant's Guild?", 0x13b57);
    INFO_ADDCHOICE(0x13b53, "Have you thought about the city guard?", 0x13b58);
}

func void DIA_WANDERER_NS63_VINNEYARD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Wanderer_NS63_Vinneyard_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Wanderer_NS63_Vinneyard_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Wanderer_NS63_Vinneyard_03_03");
    B_GIVEPLAYERXP(XP_EVENT_ASSASINSCREED);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_WANDERER_NS63_GUILD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Wanderer_NS63_Guild_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Wanderer_NS63_Guild_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Wanderer_NS63_Guild_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Wanderer_NS63_Guild_03_04");
    B_GIVEPLAYERXP(XP_EVENT_ASSASINSCREED);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_WANDERER_NS63_MILITIA() {
    AI_OUTPUT(OTHER, SELF, "DIA_Wanderer_NS63_Militia_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Wanderer_NS63_Militia_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Wanderer_NS63_Militia_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Wanderer_NS63_Militia_03_04");
    B_GIVEPLAYERXP(XP_EVENT_ASSASINSCREED);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_WANDERER_NS63_ASSASIN() {
    AI_OUTPUT(OTHER, SELF, "DIA_Wanderer_NS63_Assasin_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Wanderer_NS63_Assasin_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Wanderer_NS63_Assasin_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Wanderer_NS63_Assasin_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Wanderer_NS63_Assasin_03_05");
    B_GIVEPLAYERXP(XP_EVENT_ASSASINSCREED);
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_WANDERER_AFTER_NS63(C_INFO) {
    NPC = 0xdf0a;
    NR = 3;
    CONDITION = DIA_WANDERER_AFTER_NS63_CONDITION;
    INFORMATION = DIA_WANDERER_AFTER_NS63_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_WANDERER_AFTER_NS63_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x13b53)) && (NPC_ISINSTATE(SELF, 0xf09f))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_WANDERER_AFTER_NS63_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Wanderer_After_NS63_03_01");
    AI_STOPPROCESSINFOS(SELF);
}

