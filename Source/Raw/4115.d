instance DIA_ARETHE_EXIT(C_INFO) {
    NPC = 0xe39f;
    NR = 999;
    CONDITION = DIA_ARETHE_EXIT_CONDITION;
    INFORMATION = DIA_ARETHE_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_ARETHE_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_ARETHE_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_ARETHE_PICKPOCKET_BOLT() {
    Q402_BOLT_ARETHE = TRUE;
    NPC_REMOVEINVITEMS(HERO, 0x91d8, 1);
    CREATEINVITEMS(HERO, 0x8650, 1);
    B_GIVEINVITEMS(SELF, OTHER, 0x91d8, 1);
    AI_LOGENTRY(TOPIC_Q402, LOG_Q402_ARETHEBOLTINFO_V2);
    B_GIVEPLAYERXP(XP_Q402_ARETHE);
}

instance DIA_ARETHE_BOLT(C_INFO) {
    NPC = 0xe39f;
    NR = 1;
    CONDITION = DIA_ARETHE_BOLT_CONDITION;
    INFORMATION = DIA_ARETHE_BOLT_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Apparently you're carrying some special bolts.";
}

func int DIA_ARETHE_BOLT_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_Q402)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x13e78))) && (NPC_KNOWSINFO(OTHER, 0x13f92))) {
        if ((Q402_BOLT_ARETHE) == (FALSE)) {
            if ((Q402_HEROISINMINE) == (FALSE)) {
                return TRUE;
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARETHE_BOLT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_BOLT_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_BOLT_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_BOLT_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_BOLT_03_04");
    INFO_CLEARCHOICES(0x13f53);
    INFO_ADDCHOICE(0x13f53, "You probably think your pay is too small...", 0x13f56);
    INFO_ADDCHOICE(0x13f53, "Why don't we see who is the better shooter?", 0x13f57);
    INFO_ADDCHOICE(0x13f53, "What if you looked away for a moment?", 0x13f58);
}

func void DIA_ARETHE_BOLT_GOLD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_BOLT_Gold_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_BOLT_Gold_03_02");
}

func void DIA_ARETHE_BOLT_DUEL() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_BOLT_Duel_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_BOLT_Duel_03_02");
}

func void DIA_ARETHE_BOLT_TURNAWAY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_BOLT_TurnAway_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_BOLT_TurnAway_03_02");
}

instance DIA_ARETHE_NOWAY(C_INFO) {
    NPC = 0xe39f;
    NR = 1;
    CONDITION = DIA_ARETHE_NOWAY_CONDITION;
    INFORMATION = DIA_ARETHE_NOWAY_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I don't think we'll get along.";
}

func int DIA_ARETHE_NOWAY_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q402)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x13f53))) {
        if ((Q402_BOLT_ARETHE) == (FALSE)) {
            if ((Q402_HEROISINMINE) == (FALSE)) {
                return TRUE;
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARETHE_NOWAY_INFO() {
    Q402_ARETHEWAY = TRUE;
    MOB_CHANGEFOCUSNAME("KM_PART16_BARREL_01", "MOBNAME_DESTROY_BARREL");
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_NoWay_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_NoWay_03_02");
    AI_LOGENTRY(TOPIC_Q402, LOG_Q402_ARETHEINFO);
}

instance DIA_ARETHE_WHATHAPPEND(C_INFO) {
    NPC = 0xe39f;
    NR = 1;
    CONDITION = DIA_ARETHE_WHATHAPPEND_CONDITION;
    INFORMATION = DIA_ARETHE_WHATHAPPEND_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARETHE_WHATHAPPEND_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q402)) == (LOG_RUNNING)) && ((Q402_ARETHEWAY) == (2))) {
        if ((Q402_HEROISINMINE) == (FALSE)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARETHE_WHATHAPPEND_INFO() {
    Q402_ARETHEWAY = 3;
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_WhatHappend_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_WhatHappend_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_WhatHappend_03_03");
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "BARREL");
    B_STARTOTHERROUTINE(DJG_16036_WOLFSON, "BARREL");
}

instance DIA_ARETHE_SQ417_WAITASEC(C_INFO) {
    NPC = 0xe39f;
    NR = 1;
    CONDITION = DIA_ARETHE_SQ417_WAITASEC_CONDITION;
    INFORMATION = DIA_ARETHE_SQ417_WAITASEC_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARETHE_SQ417_WAITASEC_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q404)) == (LOG_SUCCESS)) && ((HERO.LEVEL) >= (25))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARETHE_SQ417_WAITASEC_INFO() {
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_WaitASec_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_WaitASec_03_02");
}

instance DIA_ARETHE_SQ417_WHAT(C_INFO) {
    NPC = 0xe39f;
    NR = 1;
    CONDITION = DIA_ARETHE_SQ417_WHAT_CONDITION;
    INFORMATION = DIA_ARETHE_SQ417_WHAT_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What is it?";
}

func int DIA_ARETHE_SQ417_WHAT_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x13f5f)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int ARETHE_SQ417_WHAT_REWARD = 0;
var int ARETHE_SQ417_WHAT_WHY = 0;
func void DIA_ARETHE_SQ417_WHAT_CHOICES() {
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    INFO_CLEARCHOICES(0x13f62);
    if ((ARETHE_SQ417_WHAT_WHY) == (FALSE)) {
        INFO_ADDCHOICE(0x13f62, "Why don't any of your companions take over the watch?", 0x13f69);
    };
    if ((ARETHE_SQ417_WHAT_REWARD) == (FALSE)) {
        INFO_ADDCHOICE(0x13f62, "And what do I get out of it?", 0x13f68);
    };
    INFO_ADDCHOICE(0x13f62, "I don't have time right now.", 0x13f6c);
    INFO_ADDCHOICE(0x13f62, "All right, I'll stand guard for you.", 0x13f6a);
}

func void DIA_ARETHE_SQ417_WHAT_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_SQ417_What_15_01");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_What_03_02");
    AI_STARTFACEANI(SELF, S_DOUBT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_What_03_03");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_What_03_04");
    DIA_ARETHE_SQ417_WHAT_CHOICES();
}

func void DIA_ARETHE_SQ417_WHAT_REWARD() {
    ARETHE_SQ417_WHAT_REWARD = TRUE;
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_SQ417_What_Reward_15_01");
    if (((Q402_BOLT_ARETHE) == (TRUE)) && ((DJG_10012_ARETHE.AIVAR[6]) == (FALSE))) {
        AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_What_Reward_03_02");
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_What_Reward_03_03");
    };
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_What_Reward_03_04");
    DIA_ARETHE_SQ417_WHAT_CHOICES();
}

func void DIA_ARETHE_SQ417_WHAT_WHY() {
    ARETHE_SQ417_WHAT_WHY = TRUE;
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_SQ417_What_Why_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_What_Why_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_What_Why_03_03");
    DIA_ARETHE_SQ417_WHAT_CHOICES();
}

func void DIA_ARETHE_SQ417_WHAT_START() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_SQ417_What_Start_15_01");
    B_STANDUP();
    B_USEFAKESCROLL();
    CREATEINVITEMS(SELF, 0x9220, 1);
    B_GIVEINVITEMS(SELF, OTHER, 0x9220, 1);
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_What_Start_03_02");
    LOG_CREATETOPIC(TOPIC_SQ417, LOG_MISSION);
    LOG_SETSTATUS(_@(MIS_SQ417), TOPIC_SQ417, LOG_RUNNING);
    AI_LOGENTRY(TOPIC_SQ417, LOG_SQ417_START);
    INFO_CLEARCHOICES(0x13f62);
}

var int SQ417_ARETHE_TAKEQUEST = 0;
func void DIA_ARETHE_SQ417_WHAT_NO() {
    SQ417_ARETHE_TAKEQUEST = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_SQ417_What_No_15_01");
    INFO_CLEARCHOICES(0x13f62);
}

instance DIA_ARETHE_SQ417_TAKEQUEST(C_INFO) {
    NPC = 0xe39f;
    NR = 1;
    CONDITION = DIA_ARETHE_SQ417_TAKEQUEST_CONDITION;
    INFORMATION = DIA_ARETHE_SQ417_TAKEQUEST_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "All right, I'll stand guard for you.";
}

func int DIA_ARETHE_SQ417_TAKEQUEST_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x13f62)) && ((SQ417_ARETHE_TAKEQUEST) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARETHE_SQ417_TAKEQUEST_INFO() {
    DIA_ARETHE_SQ417_WHAT_START();
}

instance DIA_ARETHE_SQ417_PATROLTIME(C_INFO) {
    NPC = 0xe39f;
    NR = 1;
    CONDITION = DIA_ARETHE_SQ417_PATROLTIME_CONDITION;
    INFORMATION = DIA_ARETHE_SQ417_PATROLTIME_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARETHE_SQ417_PATROLTIME_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ417)) == (LOG_RUNNING)) && ((SQ417_ARETHEPATROL) == (TRUE))) && ((SQ417_ARETHEPATROL_DAY) != (WLD_GETDAY()))) {
        if (((NPC_GETDISTTOWP(SELF, "WOLFSDEN_WALL_SQ417_ARETHE")) <= (500)) && (WLD_ISTIME(18, 0, 23, 0))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARETHE_SQ417_PATROLTIME_INFO() {
    CHANGETIMESPEED(0x898);
    SQ417_PATROLTIME = 1;
    SQ417_ARETHEPATROL = 2;
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_PatrolTime_03_01");
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "SQ417_SLEEP");
    AI_LOGENTRY(TOPIC_SQ417, LOG_SQ417_ARETHE_PATROLTIME);
    AI_FUNCTION(SELF, 0xf872);
    AI_FUNCTION(SELF, 0xf874);
}

instance DIA_ARETHE_SQ417_AFTERPATROL(C_INFO) {
    NPC = 0xe39f;
    NR = 1;
    CONDITION = DIA_ARETHE_SQ417_AFTERPATROL_CONDITION;
    INFORMATION = DIA_ARETHE_SQ417_AFTERPATROL_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARETHE_SQ417_AFTERPATROL_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ417)) == (LOG_RUNNING)) && ((SQ417_PATROLTIME) == (6))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARETHE_SQ417_AFTERPATROL_INFO() {
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_AfterPatrol_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_AfterPatrol_03_02");
    INFO_CLEARCHOICES(0x13f73);
    INFO_ADDCHOICE(0x13f73, DIALOG_DONOTTALK, 0x13f78);
    INFO_ADDCHOICE(0x13f73, "I came to see what was going on...", 0x13f77);
}

func void DIA_ARETHE_SQ417_AFTERPATROL_NEXT() {
    AI_SETWALKMODE(SELF, NPC_WALK);
    AI_GOTOWP(SELF, "WOLFSDEN_HOUSE01_BENCH01");
    AI_WAITTILLEND(OTHER, SELF);
    AI_PLAYANI(SELF, T_PLUNDER);
    AI_TURNTONPC(SELF, OTHER);
    AI_TURNTONPC(OTHER, SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_AfterPatrol_Next_03_01");
    INFO_CLEARCHOICES(0x13f73);
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 0xf876);
}

func void DIA_ARETHE_SQ417_AFTERPATROL_COME() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_SQ417_AfterPatrol_Come_15_01");
    DIA_ARETHE_SQ417_AFTERPATROL_NEXT();
}

func void DIA_ARETHE_SQ417_AFTERPATROL_SILENCE() {
    DIA_ARETHE_SQ417_AFTERPATROL_NEXT();
}

instance DIA_ARETHE_SQ417_WHATNEXT(C_INFO) {
    NPC = 0xe39f;
    NR = 1;
    CONDITION = DIA_ARETHE_SQ417_WHATNEXT_CONDITION;
    INFORMATION = DIA_ARETHE_SQ417_WHATNEXT_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Did you figure something out?";
}

func int DIA_ARETHE_SQ417_WHATNEXT_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ417)) == (LOG_RUNNING)) && ((SQ417_PATROLTIME) == (10))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int ARETHE_SQ417_WHATNEXT_JOKES = 0;
var int ARETHE_SQ417_WHATNEXT_THIEF = 0;
var int ARETHE_SQ417_WHATNEXT_BEAST = 0;
func void DIA_ARETHE_SQ417_WHATNEXT_NEXT() {
    SQ417_ARETHEPLAN = 1;
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_WhatNext_Next_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_WhatNext_Next_03_02");
    AI_RESETFACEANI(SELF);
    SQ417_ARETHEPLAN_CHECKTIME = 1;
    SQ417_ARETHEPLAN_DAY = WLD_GETDAY();
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_WhatNext_Next_03_04");
    INFO_CLEARCHOICES(0x13f79);
    INFO_ADDCHOICE(0x13f79, "Let's get to work.", 0x13f85);
    INFO_ADDCHOICE(0x13f79, "What about your sleep?", 0x13f84);
}

func void DIA_ARETHE_SQ417_WHATNEXT_CHOCIES() {
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    INFO_CLEARCHOICES(0x13f79);
    if (((ARETHE_SQ417_WHATNEXT_JOKES) == (FALSE)) || ((ARETHE_SQ417_WHATNEXT_THIEF) == (FALSE))) {
        if ((ARETHE_SQ417_WHATNEXT_JOKES) == (FALSE)) {
            INFO_ADDCHOICE(0x13f79, "Do you think any Wolf Son is pulling a prank?", 0x13f82);
        };
        if ((ARETHE_SQ417_WHATNEXT_THIEF) == (FALSE)) {
            INFO_ADDCHOICE(0x13f79, "You think someone broke in here?", 0x13f83);
        };
    };
    DIA_ARETHE_SQ417_WHATNEXT_NEXT();
    if ((LOG_GETSTATUS(MIS_SQ416)) != (LOG_SUCCESS)) {
        if ((ARETHE_SQ417_WHATNEXT_BEAST) == (FALSE)) {
            INFO_ADDCHOICE(0x13f79, "Maybe it's the same Beast as in Silbach?", 0x13f81);
        };
    };
}

func void DIA_ARETHE_SQ417_WHATNEXT_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_SQ417_WhatNext_15_01");
    AI_STARTFACEANI(SELF, S_THINK, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_WhatNext_03_02");
    DIA_ARETHE_SQ417_WHATNEXT_CHOCIES();
}

func void DIA_ARETHE_SQ417_WHATNEXT_BEAST() {
    ARETHE_SQ417_WHATNEXT_BEAST = TRUE;
    AI_STARTFACEANI(OTHER, S_SERIOUS, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_SQ417_WhatNext_Beast_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_WhatNext_Beast_03_02");
    DIA_ARETHE_SQ417_WHATNEXT_CHOCIES();
}

func void DIA_ARETHE_SQ417_WHATNEXT_JOKES() {
    ARETHE_SQ417_WHATNEXT_JOKES = TRUE;
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_SQ417_WhatNext_Jokes_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_WhatNext_Jokes_03_02");
    DIA_ARETHE_SQ417_WHATNEXT_CHOCIES();
}

func void DIA_ARETHE_SQ417_WHATNEXT_THIEF() {
    ARETHE_SQ417_WHATNEXT_THIEF = TRUE;
    AI_STARTFACEANI(OTHER, S_THINK, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_SQ417_WhatNext_Thief_15_01");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_WhatNext_Thief_03_02");
    DIA_ARETHE_SQ417_WHATNEXT_CHOCIES();
}

func void DIA_ARETHE_SQ417_WHATNEXT_THIEF_NEXT_SLEEP() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_SQ417_WhatNext_Sleep_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_WhatNext_Sleep_03_02");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

func void DIA_ARETHE_SQ417_WHATNEXT_THIEF_NEXT_GO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_SQ417_WhatNext_Go_15_01");
    AI_LOGENTRY(TOPIC_SQ417, LOG_SQ417_ARETHE_PLAN_V1);
    INFO_CLEARCHOICES(0x13f79);
    AI_FUNCTION(SELF, 0x13f86);
}

func void SQ417_ARETHE_CHANGERTN_V2() {
    NPC_EXCHANGEROUTINE(DJG_10012_ARETHE, "SQ417_WAITV2");
    B_STARTOTHERROUTINE(DJG_13632_WOLFSON, TOT);
}

instance DIA_ARETHE_SQ417_HIDE(C_INFO) {
    NPC = 0xe39f;
    NR = 1;
    CONDITION = DIA_ARETHE_SQ417_HIDE_CONDITION;
    INFORMATION = DIA_ARETHE_SQ417_HIDE_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARETHE_SQ417_HIDE_CONDITION() {
    if ((LOG_GETSTATUS(MIS_SQ417)) == (LOG_RUNNING)) {
        if (((SQ417_ARETHEPLAN_CHECKTIME) == (1)) && ((SQ417_ARETHEPLAN_DAY) <= ((WLD_GETDAY()) - (1)))) {
            if (WLD_ISTIME(18, 0, 23, 59)) {
                return TRUE;
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARETHE_SQ417_HIDE_INFO() {
    SQ417_ARETHEPLAN = 2;
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_Hide_03_01");
    AI_LOGENTRY(TOPIC_SQ417, LOG_SQ417_ARETHE_HIDE);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "SQ417_PATROL");
    AI_FUNCTION(SELF, 0xf872);
    AI_FUNCTION(SELF, 0xf874);
}

var int ARETHE_AMBIENTBEAR = 0;
var int ARETHE_AMBIENTGRON = 0;
instance DIA_ARETHE_SQ417_FINISH(C_INFO) {
    NPC = 0xe39f;
    NR = 1;
    CONDITION = DIA_ARETHE_SQ417_FINISH_CONDITION;
    INFORMATION = DIA_ARETHE_SQ417_FINISH_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARETHE_SQ417_FINISH_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ417)) == (LOG_RUNNING)) && ((SQ417_DECISION) >= (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARETHE_SQ417_FINISH_INFO() {
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_Finish_03_01");
    INFO_CLEARCHOICES(0x13f8c);
    if ((SQ417_DECISION) == (2)) {
        INFO_ADDCHOICE(0x13f8c, "The perpetrator of the confusion was Gron.", 0x13f90);
    };
    INFO_ADDCHOICE(0x13f8c, "Baes found himself a new friend - a bear.", 0x13f91);
}

func void DIA_ARETHE_SQ417_FINISH_NEXT() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_Finish_Next_03_01");
    SQ417_FINISHCHECK = TRUE;
    SQ417_FINISHCHECK_DAY = WLD_GETDAY();
    if ((SQ417_DECISION) == (2)) {
        AI_LOGENTRY(TOPIC_SQ417, LOG_SQ417_FINISH_V2);
    };
    AI_LOGENTRY(TOPIC_SQ417, LOG_SQ417_FINISH_V1);
    LOG_SETSTATUS(_@(MIS_SQ417), TOPIC_SQ417, LOG_SUCCESS);
    if (((Q402_BOLT_ARETHE) == (TRUE)) && ((DJG_10012_ARETHE.AIVAR[6]) == (FALSE))) {
        CREATEINVITEMS(SELF, 0x859b, SQ417_REWARD);
    };
    CREATEINVITEMS(SELF, 0x9ab0, 1);
    B_GIVEINVITEMS(SELF, OTHER, 0x9ab0, 1);
    B_GIVEPLAYERXP(XP_SQ417_FINISH);
    INFO_CLEARCHOICES(0x13f8c);
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    NPC_EXCHANGEROUTINE(SELF, "START2");
}

func void DIA_ARETHE_SQ417_FINISH_GRON() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_SQ417_Finish_Gron_15_01");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_Finish_Gron_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_Finish_Gron_03_03");
    ARETHE_AMBIENTGRON = TRUE;
    DIA_ARETHE_SQ417_FINISH_NEXT();
}

func void DIA_ARETHE_SQ417_FINISH_BAES() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_SQ417_Finish_Baes_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_PLAYANI(SELF, T_JUMPB);
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_Finish_Baes_03_02");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_Finish_Baes_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_Finish_Baes_03_04");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_SQ417_Finish_Baes_03_05");
    ARETHE_AMBIENTBEAR = TRUE;
    DIA_ARETHE_SQ417_FINISH_NEXT();
}

instance DIA_ARETHE_WHO(C_INFO) {
    NPC = 0xe39f;
    NR = 1;
    CONDITION = DIA_ARETHE_WHO_CONDITION;
    INFORMATION = DIA_ARETHE_WHO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Who are you?";
}

func int DIA_ARETHE_WHO_CONDITION() {
    if ((LOG_GETSTATUS(MIS_Q401)) == (LOG_SUCCESS)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARETHE_WHO_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_Who_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arethe_Who_03_02");
}

instance DIA_ARETHE_AMBIENT(C_INFO) {
    NPC = 0xe39f;
    NR = 850;
    CONDITION = DIA_ARETHE_AMBIENT_CONDITION;
    INFORMATION = DIA_ARETHE_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How's the service?";
}

func int DIA_ARETHE_AMBIENT_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x13f92)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARETHE_AMBIENT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arethe_Ambient_15_01");
    if ((ARETHE_AMBIENTBEAR) == (TRUE)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Arethe_Ambient_03_02");
    };
    if ((ARETHE_AMBIENTGRON) == (TRUE)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Arethe_Ambient_03_03");
    };
    if (((ARETHE_AMBIENTGRON) == (FALSE)) && ((ARETHE_AMBIENTBEAR) == (FALSE))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Arethe_Ambient_03_04");
    };
}

instance DIA_ARETHE_Q404_NEEDHELP(C_INFO) {
    NPC = 0xe39f;
    NR = 850;
    CONDITION = DIA_ARETHE_Q404_NEEDHELP_CONDITION;
    INFORMATION = DIA_ARETHE_Q404_NEEDHELP_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I need someone to guard the mine.";
}

func int DIA_ARETHE_Q404_NEEDHELP_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q404)) == (LOG_RUNNING)) && ((Q404_GUARDMINE_NEEDHELP) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARETHE_Q404_NEEDHELP_INFO() {
    Q404_MARVINASK_NEEDHELP();
    DIA_IMBUSY_CALM();
}

instance DIA_ARETHE_PICKPOCKET(C_INFO) {
    NPC = 0xe39f;
    NR = 900;
    CONDITION = DIA_ARETHE_PICKPOCKET_CONDITION;
    INFORMATION = DIA_ARETHE_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_80;
}

func int DIA_ARETHE_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARETHE_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(0x13f9b);
    INFO_ADDCHOICE(0x13f9b, DIALOG_BACK, 0x13f9f);
    INFO_ADDCHOICE(0x13f9b, DIALOG_PICKPOCKET, 0x13f9e);
}

func void DIA_ARETHE_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (2)) {
        B_PICKPOCKET_AMBIENT_TIER_2();
        if (((LOG_GETSTATUS(MIS_Q402)) == (LOG_RUNNING)) && ((Q402_BOLT_ARETHE) == (FALSE))) {
            DIA_ARETHE_PICKPOCKET_BOLT();
        };
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(0x13f9b);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(0x13f9b);
}

func void DIA_ARETHE_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(0x13f9b);
}

