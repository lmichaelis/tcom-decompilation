func void QM304_PREPARENPC() {
    WLD_INSERTNPC(0xd2ce, "HARBOUR_STAND_01");
    WLD_INSERTNPC(0xd2d1, "HARBOUR_DARKSECRETS_COUCH_02");
    WLD_INSERTNPC(0xd7e9, "SLUMS_QM304_REFUGEE");
    WLD_INSERTNPC(0xd2d4, "HARBOUR_WALLS_33");
    WLD_INSERTNPC(0xd2d7, "HARBOUR_WALLS_33");
    WLD_INSERTNPC(0xd2da, "HARBOUR_WALLS_33");
}

func void QM304_STARTFIGHTREFUGEE() {
    PRINTD("Atakuj¹");
    QM304_FIGHTWITHREFUGEE = 1;
    B_IMMEDIATEATTACKPLAYER(NONE_13593_REFUGEE, AR_KILL);
    B_IMMEDIATEATTACKPLAYER(NONE_13594_REFUGEE, AR_KILL);
    B_IMMEDIATEATTACKPLAYER(NONE_13595_REFUGEE, AR_KILL);
    NONE_13593_REFUGEE.AIVAR[52] = TRUE;
    NONE_13594_REFUGEE.AIVAR[52] = TRUE;
    NONE_13595_REFUGEE.AIVAR[52] = TRUE;
    NONE_13593_REFUGEE.FLAGS = 0;
    NONE_13594_REFUGEE.FLAGS = 0;
    NONE_13595_REFUGEE.FLAGS = 0;
}

func void QM304_COUNTHOWMANYNUGGETS() {
    QM304_COUNTNUGGETS = (QM304_COUNTNUGGETS) + (1);
    PRINTD(CS2("Zdobyte bry³ki: ", INTTOSTRING(QM304_COUNTNUGGETS)));
    B_GIVEPLAYERXP(XP_QM304_NUGGETEXP);
}

func void QM304_COUNTHOWMANYEVENTS() {
    QM304_COUNTEVENTS = (QM304_COUNTEVENTS) + (1);
    PRINTD(CS2("Odegrane eventy: ", INTTOSTRING(QM304_COUNTEVENTS)));
}

func void QM304_FINISHQUEST() {
    QM304_FINISH = TRUE;
    QM304_FINISH_DAY = WLD_GETDAY();
    if ((QM304_GIVENUGGETWINSTAN) == (TRUE)) {
        B_GIVEINVITEMS(OTHER, SELF, 0x859a, QM304_COUNTNUGGETS);
        CREATEINVITEMS(SELF, 0x859b, (QM304_FINISHGOLD) + ((QM304_BONUSGOLD) * (QM304_COUNTNUGGETS)));
        B_GIVEINVITEMS(SELF, OTHER, 0x859b, (QM304_FINISHGOLD) + ((QM304_BONUSGOLD) * (QM304_COUNTNUGGETS)));
        B_GIVEPLAYERXP((XP_QM304_FINISH) + ((XP_QM304_BONUSEXP) * (QM304_COUNTNUGGETS)));
    };
    CREATEINVITEMS(SELF, 0x859b, QM304_FINISHGOLD);
    B_GIVEINVITEMS(SELF, OTHER, 0x859b, QM304_FINISHGOLD);
    B_GIVEPLAYERXP(XP_QM304_FINISH);
    LOG_SETSTATUS(_@(MIS_QM304), TOPIC_QM304, LOG_SUCCESS);
}

