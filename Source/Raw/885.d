var int PRAYIDOLDAY = 0;
var int RECIEVEDMONEY = 0;
var int GIVENHITPOINTS = 0;
var int GIVENMANA = 0;
var int GOLDFROMBELIAR = 0;
const int HPFORBELIAR = 10;
const int HPFORBELIARV2 = 30;
const int HPFORBELIARV3 = 50;
func void B_BLITZINARSCH() {
    CURRENTHITPOINTS = HERO.ATTRIBUTE[0];
    BLITZINARSCH_HITPOINTS = ((CURRENTHITPOINTS) * (4)) / (5);
    if ((BLITZINARSCH_HITPOINTS) < (2)) {
        BLITZINARSCH_HITPOINTS = 2;
    };
    ABZUG = (HERO.ATTRIBUTE[0]) - (BLITZINARSCH_HITPOINTS);
    if ((ABZUG) > (0)) {
        CONCATTEXT1 = CONCATSTRINGS(" ", NAME_DAMAGE);
        CONCATTEXT2 = CONCATSTRINGS(INTTOSTRING(ABZUG), CONCATTEXT1);
        AI_PRINTSCREEN(CONCATTEXT2, -(1), YPOS_GOLDTAKEN, FONT_SCREENSMALL, 2);
        WLD_PLAYEFFECT("spellFX_BELIARSRAGE", HERO, HERO, 0, 0, 0, FALSE);
    };
    HERO.ATTRIBUTE[0] = BLITZINARSCH_HITPOINTS;
}

var int B_BLITZINARSCH.BLITZINARSCH_HITPOINTS = 0;
var int B_BLITZINARSCH.CURRENTHITPOINTS = 0;
var int B_BLITZINARSCH.ABZUG = 0;
var string B_BLITZINARSCH.CONCATTEXT1 = "";
var string B_BLITZINARSCH.CONCATTEXT2 = "";
func void B_GETBELIARSGOLD(var int KOHLE) {
    GOLDFROMBELIAR = (GOLDFROMBELIAR) + (KOHLE);
    CREATEINVITEMS(HERO, 0x859b, KOHLE);
    CONCATTEXT1 = CONCATSTRINGS(INTTOSTRING(KOHLE), " ");
    CONCATTEXT2 = CONCATSTRINGS(CONCATTEXT1, PRINT_GOLDERHALTEN);
    AI_PRINTSCREEN(CONCATTEXT2, -(1), YPOS_GOLDTAKEN, FONT_SCREENSMALL, 2);
}

var string B_GETBELIARSGOLD.CONCATTEXT1 = "";
var string B_GETBELIARSGOLD.CONCATTEXT2 = "";
func void PRAYIDOL_S1() {
    HER = HLP_GETNPC(0xc3ab);
    if ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(HER))) {
        WLD_PLAYEFFECT("DEMENTOR_FX", HERO, HERO, 0, 0, 0, FALSE);
        SELF.AIVAR[4] = TRUE;
        PLAYER_MOBSI_PRODUCTION = MOBSI_PRAYIDOL;
        AI_PROCESSINFOS(HER);
        ACH_14_BELIAR = TRUE;
    };
}

instance PRAYIDOL_S1.HER(C_NPC)
instance PC_PRAYIDOL_END(C_INFO) {
    NPC = 0xc3ab;
    NR = 999;
    CONDITION = PC_PRAYIDOL_END_CONDITION;
    INFORMATION = PC_PRAYIDOL_END_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int PC_PRAYIDOL_END_CONDITION() {
    if ((PLAYER_MOBSI_PRODUCTION) == (MOBSI_PRAYIDOL)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_PRAYIDOL_END_INFO() {
    B_ENDPRODUCTIONDIALOG();
}

instance PC_PRAYIDOL_PRAYIDOL(C_INFO) {
    NPC = 0xc3ab;
    NR = 2;
    CONDITION = PC_PRAYIDOL_PRAYIDOL_CONDITION;
    INFORMATION = PC_PRAYIDOL_PRAYIDOL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_ADDON_BETEN;
}

func int PC_PRAYIDOL_PRAYIDOL_CONDITION() {
    if ((PLAYER_MOBSI_PRODUCTION) == (MOBSI_PRAYIDOL)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_PRAYIDOL_PRAYIDOL_INFO() {
    REAL_HP = ((40) + ((HERO.LEVEL) * (HP_PER_LEVEL))) - (BELIARSHRINECOST);
    INFO_CLEARCHOICES(0xbb39);
    INFO_ADDCHOICE(0xbb39, DIALOG_BACK, 0xbb3d);
    INFO_ADDCHOICE(0xbb39, NAME_ADDON_PRAYIDOL_GIVENOTHING, 0xbb3e);
    if (((GOLDFROMBELIAR) <= (0x7d0)) && ((PRAYIDOLDAY) != (WLD_GETDAY()))) {
        if ((REAL_HP) >= (11)) {
            INFO_ADDCHOICE(0xbb39, NAME_ADDON_PRAYIDOL_GIVEHITPOINT1, 0xbb3f);
        };
        if ((REAL_HP) >= (31)) {
            INFO_ADDCHOICE(0xbb39, NAME_ADDON_PRAYIDOL_GIVEHITPOINT2, 0xbb40);
        };
        if ((REAL_HP) >= (51)) {
            INFO_ADDCHOICE(0xbb39, NAME_ADDON_PRAYIDOL_GIVEHITPOINT3, 0xbb42);
        };
    };
}

var int PC_PRAYIDOL_PRAYIDOL_INFO.REAL_HP = 0;
func void PC_PRAYIDOL_PRAYIDOL_BACK() {
    INFO_CLEARCHOICES(0xbb39);
}

func void PC_PRAYIDOL_PRAYIDOL_NOPAY() {
    B_BLITZINARSCH();
    INFO_CLEARCHOICES(0xbb39);
}

func void PC_PRAYIDOL_PRAYIDOL_SMALLPAY() {
    if ((PRAYIDOLDAY) == (WLD_GETDAY())) {
        B_BLITZINARSCH();
    };
    B_GETBELIARSGOLD(50);
    BELIARSHRINECOST = (BELIARSHRINECOST) + (10);
    HERO.ATTRIBUTE[0] = (HERO.ATTRIBUTE[0]) - (HPFORBELIAR);
    HERO.ATTRIBUTE[1] = (HERO.ATTRIBUTE[1]) - (HPFORBELIAR);
    MARVINTRANSFORMHP = (MARVINTRANSFORMHP) - (HPFORBELIAR);
    PRAYIDOLDAY = WLD_GETDAY();
    INFO_CLEARCHOICES(0xbb39);
}

func void PC_PRAYIDOL_PRAYIDOL_MEDIUMPAY() {
    if ((PRAYIDOLDAY) == (WLD_GETDAY())) {
        B_BLITZINARSCH();
    };
    B_GETBELIARSGOLD(250);
    BELIARSHRINECOST = (BELIARSHRINECOST) + (30);
    HERO.ATTRIBUTE[0] = (HERO.ATTRIBUTE[0]) - (HPFORBELIARV2);
    HERO.ATTRIBUTE[1] = (HERO.ATTRIBUTE[1]) - (HPFORBELIARV2);
    MARVINTRANSFORMHP = (MARVINTRANSFORMHP) - (HPFORBELIARV2);
    PRAYIDOLDAY = WLD_GETDAY();
    INFO_CLEARCHOICES(0xbb39);
}

func void PC_PRAYIDOL_PRAYIDOL_BIGHPPAY() {
    if ((PRAYIDOLDAY) == (WLD_GETDAY())) {
        B_BLITZINARSCH();
    };
    B_GETBELIARSGOLD(500);
    BELIARSHRINECOST = (BELIARSHRINECOST) + (50);
    HERO.ATTRIBUTE[0] = (HERO.ATTRIBUTE[0]) - (HPFORBELIARV3);
    HERO.ATTRIBUTE[1] = (HERO.ATTRIBUTE[1]) - (HPFORBELIARV3);
    MARVINTRANSFORMHP = (MARVINTRANSFORMHP) - (HPFORBELIARV3);
    PRAYIDOLDAY = WLD_GETDAY();
    INFO_CLEARCHOICES(0xbb39);
}

func void PC_PRAYIDOL_PRAYIDOL_BIGPAY() {
    PC_PRAYIDOL_PRAYIDOL_BIGHPPAY();
}

