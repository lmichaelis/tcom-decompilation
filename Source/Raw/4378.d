instance DIA_LUDWIG_Q602_EXIT(C_INFO) {
    NPC = 0xead0;
    NR = 999;
    CONDITION = DIA_LUDWIG_Q602_EXIT_CONDITION;
    INFORMATION = DIA_LUDWIG_Q602_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_LUDWIG_Q602_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_LUDWIG_Q602_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_LUDWIG_Q602_WAIT(C_INFO) {
    NPC = 0xead0;
    NR = 1;
    CONDITION = DIA_LUDWIG_Q602_WAIT_CONDITION;
    INFORMATION = DIA_LUDWIG_Q602_WAIT_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_LUDWIG_Q602_WAIT_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q602)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x16135))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int LUDWIG_Q602_HELP = 0;
func void DIA_LUDWIG_Q602_WAIT_INFO() {
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Wait_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Wait_03_02");
    INFO_CLEARCHOICES(0x1628a);
    INFO_ADDCHOICE(0x1628a, "Let's go.", 0x16291);
    INFO_ADDCHOICE(0x1628a, "I don't have time right now.", 0x16290);
    INFO_ADDCHOICE(0x1628a, "What is it?", 0x1628e);
}

func void DIA_LUDWIG_Q602_WAIT_DEAL() {
    AI_OUTPUT(OTHER, SELF, "DIA_Ludwig_Q602_Wait_Deal_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Wait_Deal_03_02");
}

func void DIA_LUDWIG_Q602_REFUSEMINIQUEST() {
    LUDWIG_Q602_HELP = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_Ludwig_Q602_Sambor_No_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Sambor_No_03_02");
    INFO_CLEARCHOICES(0x16292);
    INFO_CLEARCHOICES(0x1628a);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_LUDWIG_Q602_WAIT_NO() {
    DIA_LUDWIG_Q602_REFUSEMINIQUEST();
}

func void DIA_LUDWIG_Q602_WAIT_YES() {
    LUDWIG_Q602_HELP = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_Ludwig_Q602_Wait_Yes_15_01");
    INFO_CLEARCHOICES(0x1628a);
    AI_STOPPROCESSINFOS(OTHER);
    NPC_EXCHANGEROUTINE(SELF, "Q602_GARDEN");
}

instance DIA_LUDWIG_Q602_SAMBOR(C_INFO) {
    NPC = 0xead0;
    NR = 1;
    CONDITION = DIA_LUDWIG_Q602_SAMBOR_CONDITION;
    INFORMATION = DIA_LUDWIG_Q602_SAMBOR_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_LUDWIG_Q602_SAMBOR_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_Q602)) == (LOG_RUNNING)) && ((NPC_GETDISTTOWP(SELF, "PARTM3_CHEMIST_GARDEN_10")) <= (400))) && ((LUDWIG_Q602_HELP) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUDWIG_Q602_SAMBOR_INFO() {
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Sambor_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Sambor_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Sambor_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Sambor_03_04");
    INFO_CLEARCHOICES(0x16292);
    INFO_ADDCHOICE(0x16292, "I don't have time right now.", 0x16296);
    INFO_ADDCHOICE(0x16292, "I can't let him die. What do you need?", 0x16295);
}

func void DIA_LUDWIG_Q602_SAMBOR_NEED() {
    AI_OUTPUT(OTHER, SELF, "DIA_Ludwig_Q602_Sambor_Need_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Sambor_Need_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Sambor_Need_03_03");
    INFO_CLEARCHOICES(0x16292);
    INFO_ADDCHOICE(0x16292, "I'll be back soon.", 0x16297);
    INFO_ADDCHOICE(0x16292, "And where am I supposed to find this?", 0x16298);
}

func void DIA_LUDWIG_Q602_SAMBOR_NO() {
    DIA_LUDWIG_Q602_REFUSEMINIQUEST();
}

func void DIA_LUDWIG_Q602_SAMBOR_NEED_LEAVE() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Ludwig_Q602_Sambor_Leave_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Sambor_Leave_03_02");
    INFO_CLEARCHOICES(0x16292);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "Q602_OBSERVE");
    AI_LOGENTRY(TOPIC_Q602, LOG_Q602_THINGSFORLUDWIG);
}

func void DIA_LUDWIG_Q602_SAMBOR_NEED_WHERE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Ludwig_Q602_Sambor_Where_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Sambor_Where_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Sambor_Where_03_03");
}

instance DIA_LUDWIG_Q602_STUFF(C_INFO) {
    NPC = 0xead0;
    NR = 1;
    CONDITION = DIA_LUDWIG_Q602_STUFF_CONDITION;
    INFORMATION = DIA_LUDWIG_Q602_STUFF_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I brought everything you asked for.";
}

func int DIA_LUDWIG_Q602_STUFF_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_Q602)) == (LOG_RUNNING)) && ((LUDWIG_Q602_HELP) == (1))) && (NPC_KNOWSINFO(OTHER, 0x16292))) && ((NPC_HASITEMS(OTHER, 0x8643)) >= (1))) {
        if ((((NPC_HASITEMS(OTHER, 0x8588)) >= (1)) || ((NPC_HASITEMS(OTHER, 0x8587)) >= (1))) || ((NPC_HASITEMS(OTHER, 0x8586)) >= (1))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUDWIG_Q602_STUFF_INFO() {
    if ((NPC_HASITEMS(OTHER, 0x8588)) >= (1)) {
    };
    if ((NPC_HASITEMS(OTHER, 0x8587)) >= (1)) {
    };
    if ((NPC_HASITEMS(OTHER, 0x8586)) >= (1)) {
        B_GIVEINVITEMS(OTHER, SELF, 0x8586, 1);
    };
    B_GIVEINVITEMS(OTHER, SELF, 0x8643, 1);
    B_GIVEPLAYERXP(XP_Q602_HELPLUDWIG);
    AI_OUTPUT(OTHER, SELF, "DIA_Ludwig_Q602_Stuff_15_01");
    if ((NPC_ISDEAD(VLK_6407_RAMHA_Q602)) || (NPC_ISDEAD(VLK_6406_FAHDA_Q602))) {
        AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
        AI_STARTFACEANI(OTHER, S_SAD, 1, -(1));
        AI_OUTPUT(OTHER, SELF, "DIA_Ludwig_Q602_Stuff_15_02");
        AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Stuff_03_03");
    };
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Stuff_03_04");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Ludwig_Q602_Stuff_03_05");
    AI_LOGENTRY(TOPIC_Q602, LOG_Q602_WEHELPEDLUDWIG);
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, START);
}

