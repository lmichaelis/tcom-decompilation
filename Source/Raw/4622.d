instance SQ121_RIORDIANTEACHINGCUTSCENE(CUTSCENE) {
    ONSTART = FUNCTION(0x16ac5);
}

func void SQ121_RIORDIANTEACHINGCUTSCENE_WAIT() {
    AI_WAITTILLEND(KDW_203_RIORDIAN, HERO);
    AI_WAITTILLEND(HERO, KDW_203_RIORDIAN);
}

func void SQ121_RIORDIANTEACHINGCUTSCENE_START() {
    WLD_SENDTRIGGER("SQ121_WAITFORNIGHT_01");
    TELEPORTNPCTOWP(0x71b, "VILLAGE_CEMETERY_07");
    TELEPORTNPCTOWP(0xdd28, KDW_203_RIORDIAN.WP);
    NPC_CLEARAIQUEUE(KDW_203_RIORDIAN);
    KDW_203_RIORDIAN.AIVAR[92] = TRUE;
    AI_TURNTONPC(HERO, KDW_203_RIORDIAN);
    AI_TURNTONPC(KDW_203_RIORDIAN, HERO);
    AI_OUTPUT(KDW_203_RIORDIAN, HERO, "DIA_Riordian_SQ121_Cutscene_03_01");
    CREATEINVITEMS(KDW_203_RIORDIAN, 0x9f77, 1);
    B_GIVEINVITEMS(KDW_203_RIORDIAN, HERO, 0x9f77, 1);
    SQ121_RIORDIANTEACHINGCUTSCENE_WAIT();
    AI_PLAYANI(HERO, T_STAND_2_COUNTING);
    AI_FUNCTION(KDW_203_RIORDIAN, 0x16ac6);
}

func void SQ121_RIORDIANTEACHINGCUTSCENE_TIMESKIP() {
    FADESCREENTOBLACKF(1, 0x16ac7, 1000);
}

func void SQ121_RIORDIANTEACHINGCUTSCENE_FADESCREEN() {
    WLD_SENDTRIGGER("SQ121_WAITFORNIGHT_02");
    WLD_SENDUNTRIGGER("SQ121_WAITFORNIGHT_01");
    WLD_SETTIME(21, 0);
    FADESCREENFROMBLACK(1);
    AI_TURNTONPC(KDW_203_RIORDIAN, HERO);
    AI_TURNTONPC(HERO, KDW_203_RIORDIAN);
    AI_OUTPUT(KDW_203_RIORDIAN, HERO, "DIA_Riordian_SQ121_Cutscene_03_02");
    AI_OUTPUT(KDW_203_RIORDIAN, HERO, "DIA_Riordian_SQ121_Cutscene_03_03");
    AI_OUTPUT(KDW_203_RIORDIAN, HERO, "DIA_Riordian_SQ121_Cutscene_03_04");
    AI_FUNCTION(KDW_203_RIORDIAN, 0xf283);
    SQ121_RIORDIANTEACHINGCUTSCENE_WAIT();
    AI_FUNCTION(KDW_203_RIORDIAN, 0x16ac8);
    AI_PLAYANI(KDW_203_RIORDIAN, T_SEARCH);
    AI_PLAYANI(HERO, T_COUNTING_2_STAND);
    AI_OUTPUT(KDW_203_RIORDIAN, HERO, "DIA_Riordian_SQ121_Cutscene_03_05");
    AI_OUTPUT(KDW_203_RIORDIAN, HERO, "DIA_Riordian_SQ121_Cutscene_03_06");
    AI_FUNCTION(KDW_203_RIORDIAN, 0x16ac9);
}

func void SQ121_RIORDIANTEACHINGCUTSCENE_CAMERA_01() {
    WLD_SENDTRIGGER("SQ121_WAITFORNIGHT_03");
    WLD_SENDUNTRIGGER("SQ121_WAITFORNIGHT_02");
}

func void SQ121_RIORDIANTEACHINGCUTSCENE_END() {
    FF_APPLYONCEEXT(0xf284, 75, 4);
}

