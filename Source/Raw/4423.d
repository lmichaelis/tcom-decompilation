func void ZS_MM_EATBODY() {
    NPC_SETPERCTIME(SELF, 0x3f800000);
    NPC_PERCENABLE(SELF, PERC_ASSESSMAGIC, 0xa92d);
    NPC_PERCENABLE(SELF, PERC_ASSESSDAMAGE, 0x165ec);
    NPC_PERCENABLE(SELF, PERC_ASSESSOTHERSDAMAGE, 0x165ef);
    NPC_PERCENABLE(SELF, PERC_ASSESSMURDER, 0x165ef);
    AI_GOTONPC(SELF, OTHER);
    AI_TURNTONPC(SELF, OTHER);
    AI_PLAYANI(SELF, "T_STAND_2_EAT");
    SELF.AIVAR[29] = PRIO_EAT;
    SELF.AIVAR[44] = HLP_GETINSTANCEID(OTHER);
    SELF.AIVAR[19] = NOTINPOS;
}

func int ZS_MM_EATBODY_LOOP() {
    if ((SELF.AIVAR[19]) == (NOTINPOS)) {
        NPC_PERCENABLE(SELF, PERC_ASSESSENEMY, 0x165ed);
        SELF.AIVAR[19] = ISINPOS;
    };
    if (!(HLP_ISVALIDNPC(OTHER))) {
        NPC_CLEARAIQUEUE(SELF);
        return LOOP_END;
    };
    return LOOP_CONTINUE;
}

func void ZS_MM_EATBODY_END() {
    AI_PLAYANI(SELF, "T_EAT_2_STAND");
}

