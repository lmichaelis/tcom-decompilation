func void ZS_MM_THREATENENEMY() {
    NPC_SETPERCTIME(SELF, 0x40000000);
    NPC_PERCENABLE(SELF, PERC_ASSESSBODY, 0x165ea);
    NPC_PERCENABLE(SELF, PERC_ASSESSMAGIC, 0xa92d);
    NPC_PERCENABLE(SELF, PERC_ASSESSDAMAGE, 0x165ec);
    NPC_PERCENABLE(SELF, PERC_ASSESSOTHERSDAMAGE, 0x165ef);
    NPC_PERCENABLE(SELF, PERC_ASSESSMURDER, 0x165ef);
    AI_STANDUP(SELF);
    NPC_SENDPASSIVEPERC(SELF, PERC_ASSESSWARN, OTHER, SELF);
}

func int ZS_MM_THREATENENEMY_LOOP() {
    if ((NPC_GETDISTTONPC(SELF, OTHER)) > (PERC_DIST_MONSTER_ACTIVE_MAX)) {
        NPC_CLEARAIQUEUE(SELF);
        return LOOP_END;
    };
    if ((NPC_GETDISTTONPC(SELF, OTHER)) <= (FIGHT_DIST_MONSTER_ATTACKRANGE)) {
        NPC_CLEARAIQUEUE(SELF);
        NPC_SETTARGET(SELF, OTHER);
        AI_STARTSTATE(SELF, 0x1661a, 0, "");
        return LOOP_END;
    };
    if ((NPC_GETSTATETIME(SELF)) >= (MONSTER_THREATEN_TIME)) {
        NPC_CLEARAIQUEUE(SELF);
        NPC_SETTARGET(SELF, OTHER);
        AI_STARTSTATE(SELF, 0x1661a, 0, "");
        return LOOP_END;
    };
    AI_TURNTONPC(SELF, OTHER);
    AI_PLAYANI(SELF, T_WARN);
    return LOOP_CONTINUE;
}

func void ZS_MM_THREATENENEMY_END() {
}

