func void ZS_GUIDE_PLAYER_NOIQ() {
    PERCEPTION_SET_NONE();
    B_RESETALL(SELF);
    SELF.SENSES = ((SENSE_SEE) | (SENSE_HEAR)) | (SENSE_SMELL);
    SELF.SENSES_RANGE = 0x7d0;
    NPC_SETPERCTIME(SELF, 0x3f800000);
    NPC_PERCENABLE(SELF, PERC_ASSESSPLAYER, 0xb3fa);
    NPC_PERCENABLE(SELF, PERC_ASSESSTALK, 0xa2ad);
    NPC_PERCENABLE(SELF, PERC_MOVEMOB, 0xa2b6);
}

func int ZS_GUIDE_PLAYER_NOIQ_LOOP() {
    if (((NPC_GETDISTTONPC(SELF, HERO)) > (800)) && ((NPC_GETDISTTOWP(SELF, SELF.WP)) < (NPC_GETDISTTOWP(HERO, SELF.WP)))) {
        B_ASSESSGUIDEPLAYER();
    };
    if ((NPC_GETDISTTOWP(SELF, SELF.WP)) > (300)) {
        if (!(C_BODYSTATECONTAINS(SELF, BS_SWIM))) {
            AI_SETWALKMODE(SELF, NPC_RUN);
        };
        AI_GOTOWP(SELF, SELF.WP);
    };
    B_TURNTONPC(SELF, HERO);
    return LOOP_CONTINUE;
}

func int ZS_GUIDE_PLAYER_NOIQ_END() {
    return 0 /* !broken stack! */;
}

func void ZS_GUIDE_PLAYER_NOSOUND() {
    NPC_PERCENABLE(SELF, PERC_ASSESSPLAYER, 0xb3fa);
    NPC_PERCENABLE(SELF, PERC_ASSESSENEMY, 0xa2a1);
    NPC_PERCENABLE(SELF, PERC_ASSESSMAGIC, 0xa92d);
    NPC_PERCENABLE(SELF, PERC_ASSESSDAMAGE, 0xa2a3);
    NPC_PERCENABLE(SELF, PERC_ASSESSMURDER, 0xa2aa);
    NPC_PERCENABLE(SELF, PERC_ASSESSTHEFT, 0xa2b1);
    NPC_PERCENABLE(SELF, PERC_ASSESSUSEMOB, 0xa2b3);
    NPC_PERCENABLE(SELF, PERC_ASSESSENTERROOM, 0xa2a7);
    NPC_PERCENABLE(SELF, PERC_ASSESSTALK, 0xa2ad);
    NPC_PERCENABLE(SELF, PERC_MOVEMOB, 0xa2b6);
    NPC_PERCENABLE(SELF, PERC_ASSESSWARN, 0xa2b5);
    NPC_PERCENABLE(SELF, PERC_ASSESSTHREAT, 0xa2b2);
    B_RESETALL(SELF);
    SELF.SENSES = ((SENSE_SEE) | (SENSE_HEAR)) | (SENSE_SMELL);
    SELF.SENSES_RANGE = 0x7d0;
    NPC_SETPERCTIME(SELF, 0x3f800000);
}

func int ZS_GUIDE_PLAYER_NOSOUND_LOOP() {
    if (((NPC_GETDISTTONPC(SELF, HERO)) > (800)) && ((NPC_GETDISTTOWP(SELF, SELF.WP)) < (NPC_GETDISTTOWP(HERO, SELF.WP)))) {
        B_ASSESSGUIDEPLAYER();
    };
    if ((NPC_GETDISTTOWP(SELF, SELF.WP)) > (300)) {
        if (!(C_BODYSTATECONTAINS(SELF, BS_SWIM))) {
            AI_SETWALKMODE(SELF, NPC_RUN);
        };
        AI_GOTOWP(SELF, SELF.WP);
    };
    B_TURNTONPC(SELF, HERO);
    return LOOP_CONTINUE;
}

func int ZS_GUIDE_PLAYER_NOSOUND_END() {
    return 0 /* !broken stack! */;
}

func void ZS_GUIDE_PLAYER_BLIND() {
    NPC_PERCENABLE(SELF, PERC_ASSESSPLAYER, 0xb3fa);
    NPC_PERCENABLE(SELF, PERC_ASSESSMAGIC, 0xa92d);
    NPC_PERCENABLE(SELF, PERC_ASSESSDAMAGE, 0xa2a3);
    NPC_PERCENABLE(SELF, PERC_ASSESSMURDER, 0xa2aa);
    NPC_PERCENABLE(SELF, PERC_ASSESSTHEFT, 0xa2b1);
    NPC_PERCENABLE(SELF, PERC_ASSESSUSEMOB, 0xa2b3);
    NPC_PERCENABLE(SELF, PERC_ASSESSENTERROOM, 0xa2a7);
    NPC_PERCENABLE(SELF, PERC_ASSESSTALK, 0xa2ad);
    NPC_PERCENABLE(SELF, PERC_MOVEMOB, 0xa2b6);
    NPC_PERCENABLE(SELF, PERC_ASSESSWARN, 0xa2b5);
    NPC_PERCENABLE(SELF, PERC_ASSESSTHREAT, 0xa2b2);
    B_RESETALL(SELF);
    SELF.SENSES = ((SENSE_SEE) | (SENSE_HEAR)) | (SENSE_SMELL);
    SELF.SENSES_RANGE = 0x7d0;
    NPC_SETPERCTIME(SELF, 0x3f800000);
}

func int ZS_GUIDE_PLAYER_BLIND_LOOP() {
    if (((NPC_GETDISTTONPC(SELF, HERO)) > (800)) && ((NPC_GETDISTTOWP(SELF, SELF.WP)) < (NPC_GETDISTTOWP(HERO, SELF.WP)))) {
        B_ASSESSGUIDEPLAYER();
    };
    if ((NPC_GETDISTTOWP(SELF, SELF.WP)) > (300)) {
        if (!(C_BODYSTATECONTAINS(SELF, BS_SWIM))) {
            AI_SETWALKMODE(SELF, NPC_RUN);
        };
        AI_GOTOWP(SELF, SELF.WP);
    };
    B_TURNTONPC(SELF, HERO);
    return LOOP_CONTINUE;
}

func int ZS_GUIDE_PLAYER_BLIND_END() {
    return 0 /* !broken stack! */;
}

