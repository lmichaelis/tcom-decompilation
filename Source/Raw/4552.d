instance KQ404_VLADANCUTSCENE(CUTSCENE) {
    ONSTART = FUNCTION(0x168d0);
}

func void KQ404_VLADANCUTSCENE_WAIT() {
    AI_WAITTILLEND(HERO, NONE_922_VLADAN);
    AI_WAITTILLEND(NONE_922_VLADAN, HERO);
}

func void KQ404_VLADANCUTSCENE_START() {
    KQ404_VLADANCUTSCENEENABLE = 3;
    WLD_SENDTRIGGER("KM_BROTHEL_SECRET_01");
    DIACAM_DISABLE();
    KQ404_CANOPENBROTHELSECRET = TRUE;
    TELEPORTNPCTOWP(0x71b, "HARBOUR_DARKSECRETS_36");
    TELEPORTNPCTOWP(0xd4dc, "HARBOUR_DARKSECRETS_CHAIR_04");
    NPC_CLEARAIQUEUE(NONE_922_VLADAN);
    AI_SETWALKMODE(NONE_922_VLADAN, NPC_WALK);
    AI_GOTOWP(NONE_922_VLADAN, "HARBOUR_DARKSECRETS_BUTTON");
    AI_USEMOB(NONE_922_VLADAN, "TOUCHPLATE", -(1));
    AI_WAIT(HERO, 0x3f99999a);
    AI_USEMOB(NONE_922_VLADAN, "TOUCHPLATE", 1);
    AI_TURNTONPC(HERO, NONE_922_VLADAN);
    KQ404_VLADANCUTSCENE_WAIT();
    AI_FUNCTION(NONE_922_VLADAN, 0x168d1);
    AI_TURNTONPC(NONE_922_VLADAN, HERO);
    AI_WAIT(HERO, 0x3e4ccccd);
    AI_TURNAWAY(HERO, NONE_922_VLADAN);
    AI_PLAYANI(HERO, T_SEARCH);
    AI_TURNTONPC(HERO, NONE_922_VLADAN);
    AI_GOTOWP(NONE_922_VLADAN, "HARBOUR_DARKSECRETS_35");
    AI_FUNCTION(HERO, 0x168d2);
}

func void KQ404_VLADANCUTSCENE_CAMERA_01() {
    WLD_SENDTRIGGER("KM_BROTHEL_SECRET_02");
    WLD_SENDUNTRIGGER("KM_BROTHEL_SECRET_01");
}

func void KQ404_VLADANCUTSCENE_ENABLEDIALOGUE() {
    NONE_922_VLADAN.AIVAR[4] = FALSE;
    HERO.AIVAR[4] = FALSE;
    KQ404_VLADANCUTSCENE_DIALOGUE = TRUE;
}

