instance Q405_FOUNDJORN_SACHS(CUTSCENE) {
    ONSTART = FUNCTION(0x169cb);
}

func void Q405_FOUNDJORN_SACHS_WAIT() {
    AI_WAITTILLEND(HERO, NONE_6413_SACHS);
    AI_WAITTILLEND(HERO, NONE_202_KESSEL);
    AI_WAITTILLEND(NONE_6413_SACHS, HERO);
    AI_WAITTILLEND(NONE_6413_SACHS, NONE_202_KESSEL);
    AI_WAITTILLEND(NONE_202_KESSEL, HERO);
    AI_WAITTILLEND(NONE_202_KESSEL, NONE_6413_SACHS);
}

func void Q405_FOUNDJORN_SACHS_START() {
    MUSIC_OVERRIDETRACK(0x55be);
    WLD_SENDTRIGGER("Q405_JORN_11");
    WLD_SENDUNTRIGGER("Q405_JORN_10");
    TELEPORTNPCTOWP(0x71b, "SLUMS_HOUSE17_36");
    TELEPORTNPCTOWP(0xd07d, "SLUMS_HOUSE17_38");
    MDL_APPLYOVERLAYMDS(HERO, "HumanS_Stand_Q405.mds");
    NONE_6413_SACHS.AIVAR[52] = TRUE;
    AI_OUTPUT(NONE_6413_SACHS, HERO, "DIA_Sachs_Q405_FoundJorn_03_01");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169cd);
    AI_REMOVEWEAPON(NONE_6413_SACHS);
    AI_UNEQUIPWEAPONS(NONE_6413_SACHS);
    AI_FUNCTION(NONE_6413_SACHS, 0x169ce);
    AI_STARTFACEANI(HERO, S_NOPE, 1, -(1));
    AI_STANDUP(HERO);
    AI_STANDUPQUICK(HERO);
    AI_PLAYANI(HERO, "T_Q405_MARVIN_RUN");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169cf);
    AI_STARTFACEANI(NONE_6413_SACHS, S_ANGRY, 1, -(1));
    AI_STARTFACEANI(HERO, S_ANGRY, 1, -(1));
    AI_TURNTONPC(NONE_6413_SACHS, HERO);
    AI_TURNTONPC(HERO, NONE_6413_SACHS);
    AI_EQUIPBESTRANGEDWEAPON(NONE_6413_SACHS);
    AI_READYRANGEDWEAPON(NONE_6413_SACHS);
    AI_WAIT(NONE_6413_SACHS, 0x3dcccccd);
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169d0);
    AI_UNEQUIPWEAPONS(HERO);
    AI_EQUIPBESTRANGEDWEAPON(HERO);
    AI_READYRANGEDWEAPON(HERO);
    AI_TURNTONPC(HERO, NONE_6413_SACHS);
    AI_OUTPUT(HERO, HERO, "DIA_Sachs_Q405_FoundJorn_15_02");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169d1);
    AI_TURNTONPC(NONE_6413_SACHS, HERO);
    AI_OUTPUT(NONE_6413_SACHS, HERO, "DIA_Sachs_Q405_FoundJorn_03_03");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_OUTPUT(HERO, HERO, "DIA_Sachs_Q405_FoundJorn_15_04");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_OUTPUT(NONE_6413_SACHS, HERO, "DIA_Sachs_Q405_FoundJorn_03_05");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169d2);
    AI_STANDUP(NONE_202_KESSEL);
    AI_STANDUPQUICK(NONE_202_KESSEL);
    AI_TURNTONPC(NONE_202_KESSEL, NONE_6413_SACHS);
    AI_EQUIPBESTRANGEDWEAPON(NONE_202_KESSEL);
    AI_READYRANGEDWEAPON(NONE_202_KESSEL);
    AI_SETWALKMODE(NONE_202_KESSEL, NPC_RUN);
    AI_OUTPUT(HERO, HERO, "DIA_Sachs_Q405_FoundJorn_15_06");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169d3);
    AI_OUTPUT(NONE_6413_SACHS, HERO, "DIA_Sachs_Q405_FoundJorn_03_07");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169d4);
    AI_GOTOWP(NONE_202_KESSEL, "SLUMS_HOUSE17_35");
    AI_OUTPUT(NONE_202_KESSEL, HERO, "DIA_Kessel_Q405_FoundJorn_03_08");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169d5);
    AI_TURNTONPC(NONE_6413_SACHS, NONE_202_KESSEL);
    AI_TURNTONPC(HERO, NONE_202_KESSEL);
    AI_OUTPUT(NONE_6413_SACHS, HERO, "DIA_Sachs_Q405_FoundJorn_03_09");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169d6);
    AI_TURNTONPC(HERO, NONE_6413_SACHS);
    AI_WAIT(HERO, 0x3e4ccccd);
    AI_TURNTONPC(HERO, NONE_202_KESSEL);
    AI_WAIT(HERO, 0x3ecccccd);
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_OUTPUT(NONE_202_KESSEL, HERO, "DIA_Kessel_Q405_FoundJorn_03_10");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_OUTPUT(HERO, HERO, "DIA_Sachs_Q405_FoundJorn_15_11");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_TURNTONPC(NONE_202_KESSEL, HERO);
    AI_OUTPUT(NONE_202_KESSEL, HERO, "DIA_Kessel_Q405_FoundJorn_03_12");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169d7);
    AI_OUTPUT(HERO, HERO, "DIA_Sachs_Q405_FoundJorn_15_13");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_OUTPUT(NONE_6413_SACHS, HERO, "DIA_Sachs_Q405_FoundJorn_03_14");
    AI_TURNTONPC(NONE_202_KESSEL, NONE_6413_SACHS);
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169d8);
    AI_OUTPUT(NONE_202_KESSEL, HERO, "DIA_Kessel_Q405_FoundJorn_03_15");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169d9);
    AI_TURNTONPC(NONE_6413_SACHS, NONE_202_KESSEL);
    AI_OUTPUT(NONE_6413_SACHS, HERO, "DIA_Sachs_Q405_FoundJorn_03_16");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169da);
    AI_TURNTONPC(HERO, NONE_6413_SACHS);
    AI_OUTPUT(HERO, HERO, "DIA_Sachs_Q405_FoundJorn_15_17");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_TURNTONPC(NONE_6413_SACHS, HERO);
    AI_OUTPUT(NONE_6413_SACHS, HERO, "DIA_Sachs_Q405_FoundJorn_03_18");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169db);
    AI_OUTPUT(HERO, HERO, "DIA_Sachs_Q405_FoundJorn_15_19");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169dc);
    AI_OUTPUT(NONE_6413_SACHS, HERO, "DIA_Sachs_Q405_FoundJorn_03_20");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169dd);
    AI_TURNTONPC(NONE_202_KESSEL, HERO);
    AI_TURNTONPC(HERO, NONE_202_KESSEL);
    AI_TURNTONPC(NONE_6413_SACHS, NONE_202_KESSEL);
    AI_OUTPUT(NONE_202_KESSEL, HERO, "DIA_Kessel_Q405_FoundJorn_03_21");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_OUTPUT(HERO, HERO, "DIA_Sachs_Q405_FoundJorn_15_22");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_TURNTONPC(NONE_202_KESSEL, NONE_6413_SACHS);
    AI_OUTPUT(NONE_202_KESSEL, HERO, "DIA_Kessel_Q405_FoundJorn_03_23");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_FUNCTION(NONE_6413_SACHS, 0x169de);
    AI_TURNTONPC(NONE_6413_SACHS, HERO);
    AI_OUTPUT(NONE_6413_SACHS, HERO, "DIA_Sachs_Q405_FoundJorn_03_24");
    Q405_FOUNDJORN_SACHS_WAIT();
    AI_TURNTONPC(NONE_202_KESSEL, NONE_6413_SACHS);
    AI_SHOOTAT(NONE_202_KESSEL, NONE_6413_SACHS);
    AI_FUNCTION(NONE_202_KESSEL, 0x169cc);
}

func void Q405_FOUNDJORN_END() {
    if ((NPC_ISDEAD(NONE_6413_SACHS)) == (FALSE)) {
        B_MAGICHURTNPC(NONE_202_KESSEL, NONE_6413_SACHS, 0x270f);
    };
    FF_APPLYONCEEXT(0xf95c, 75, 4);
}

func void Q405_FOUNDJORN_CAMERA_09() {
    WLD_SENDTRIGGER("Q405_CROSSBOW_MOVER");
    MDL_REMOVEOVERLAYMDS(HERO, "HumanS_Stand_Q405.mds");
    WLD_SENDTRIGGER("Q405_JORN_12");
    WLD_SENDUNTRIGGER("Q405_JORN_11");
}

func void Q405_FOUNDJORN_REMOVEFAKESCROLL() {
    MDL_REMOVEOVERLAYMDS(NONE_6413_SACHS, "HumanS_Scroll_Q405.mds");
    NPC_REMOVEINVITEMS(NONE_6413_SACHS, 0x8cf5, 1);
    CREATEINVITEMS(NONE_6413_SACHS, 0x9b1e, 1);
    CREATEINVITEMS(NONE_6413_SACHS, 0x8650, 10);
}

func void Q405_FOUNDJORN_CAMERA_10() {
    TELEPORTNPCTOWP(0x71b, "SLUMS_HOUSE17_MARVINCROSSBOW");
    CREATEINVITEMS(HERO, 0x8cf6, 1);
    CREATEINVITEMS(HERO, 0x8650, 2);
    WLD_SENDTRIGGER("Q405_JORN_13");
    WLD_SENDUNTRIGGER("Q405_JORN_12");
}

func void Q405_FOUNDJORN_CAMERA_11() {
    WLD_SENDTRIGGER("Q405_JORN_14");
    WLD_SENDUNTRIGGER("Q405_JORN_13");
}

func void Q405_FOUNDJORN_CAMERA_12() {
    TELEPORTNPCTOWP(0xd07d, "SLUMS_HOUSE17_SACHSBODY");
    WLD_SENDTRIGGER("Q405_JORN_15");
    WLD_SENDUNTRIGGER("Q405_JORN_14");
}

func void Q405_FOUNDJORN_CAMERA_13() {
    FF_APPLYONCEEXTGT(0xf964, 0, -(1));
    TELEPORTNPCTOWP(0xdd70, "SLUMS_HOUSE17_32");
    WLD_SENDTRIGGER("Q405_JORN_16");
    WLD_SENDUNTRIGGER("Q405_JORN_15");
}

func void Q405_FOUNDJORN_CAMERA_14() {
    WLD_SENDTRIGGER("Q405_JORN_17");
    WLD_SENDUNTRIGGER("Q405_JORN_16");
}

func void Q405_FOUNDJORN_CAMERA_15() {
    SND_PLAY("ROCKS_KICK_01");
    SND_PLAY("PLACEHOLDER_SlamDoor01");
    SND_PLAY("DESTROY_WOOD");
    WLD_SENDTRIGGER("Q405_JORN_18");
    WLD_SENDUNTRIGGER("Q405_JORN_17");
}

func void Q405_FOUNDJORN_CAMERA_16() {
    TELEPORTNPCTOWP(0xdd70, "SLUMS_HOUSE17_35");
    WLD_SENDTRIGGER("Q405_JORN_19");
    WLD_SENDUNTRIGGER("Q405_JORN_18");
}

func void Q405_FOUNDJORN_CAMERA_17() {
    WLD_SENDTRIGGER("Q405_JORN_20");
    WLD_SENDUNTRIGGER("Q405_JORN_19");
}

func void Q405_FOUNDJORN_CAMERA_18() {
    WLD_SENDTRIGGER("Q405_JORN_21");
    WLD_SENDUNTRIGGER("Q405_JORN_20");
}

func void Q405_FOUNDJORN_CAMERA_19() {
    WLD_SENDTRIGGER("Q405_JORN_22");
    WLD_SENDUNTRIGGER("Q405_JORN_21");
}

func void Q405_FOUNDJORN_CAMERA_20() {
    WLD_SENDTRIGGER("Q405_JORN_23");
    WLD_SENDUNTRIGGER("Q405_JORN_22");
}

func void Q405_FOUNDJORN_CAMERA_21() {
    WLD_SENDTRIGGER("Q405_JORN_24");
    WLD_SENDUNTRIGGER("Q405_JORN_23");
}

func void Q405_FOUNDJORN_CAMERA_22() {
    WLD_SENDTRIGGER("Q405_JORN_25");
    WLD_SENDUNTRIGGER("Q405_JORN_24");
}

func void Q405_FOUNDJORN_CAMERA_23() {
    WLD_SENDTRIGGER("Q405_JORN_26");
    WLD_SENDUNTRIGGER("Q405_JORN_25");
}

func void Q405_FOUNDJORN_CAMERA_24() {
    WLD_SENDTRIGGER("Q405_JORN_27");
    WLD_SENDUNTRIGGER("Q405_JORN_26");
}

func void Q405_FOUNDJORN_CAMERA_25() {
    NONE_6413_SACHS.FLAGS = 0;
    NONE_6413_SACHS.ATTRIBUTE[0] = 1;
    NONE_6413_SACHS.ATTRIBUTE[1] = 1;
    NONE_202_KESSEL.HITCHANCE[4] = 100;
    WLD_SENDTRIGGER("Q405_JORN_28");
    WLD_SENDUNTRIGGER("Q405_JORN_27");
}

