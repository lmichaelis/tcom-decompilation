instance DIA_GUIDEMERCHANT_EXIT(C_INFO) {
    NPC = 0xcfe2;
    NR = 999;
    CONDITION = DIA_GUIDEMERCHANT_EXIT_CONDITION;
    INFORMATION = DIA_GUIDEMERCHANT_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_GUIDEMERCHANT_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_GUIDEMERCHANT_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_GUIDEMERCHANT_HELLO(C_INFO) {
    NPC = 0xcfe2;
    NR = 1;
    CONDITION = DIA_GUIDEMERCHANT_HELLO_CONDITION;
    INFORMATION = DIA_GUIDEMERCHANT_HELLO_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_GUIDEMERCHANT_HELLO_CONDITION() {
    if (NPC_ISINSTATE(SELF, 0xf09f)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GUIDEMERCHANT_HELLO_INFO() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_GuideMerchant_HELLO_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_GuideMerchant_HELLO_03_02");
    if ((TRADER_LOGENTRY_CITY_MAPARAXOS) == (FALSE)) {
        TRADER_LOGENTRY_CITY_MAPARAXOS = TRUE;
        LOG_CREATETOPIC(TOPIC_CITYTRADER, LOG_NOTE);
        AI_LOGENTRY(TOPIC_CITYTRADER, LOG_TRADER_CITY_ARAXOSMAPS);
    };
}

instance DIA_GUIDEMERCHANT_TRADE(C_INFO) {
    NPC = 0xcfe2;
    NR = 850;
    CONDITION = DIA_GUIDEMERCHANT_TRADE_CONDITION;
    INFORMATION = DIA_GUIDEMERCHANT_TRADE_INFO;
    PERMANENT = TRUE;
    TRADE = TRUE;
    DESCRIPTION = "Show me your wares.";
}

func int DIA_GUIDEMERCHANT_TRADE_CONDITION() {
    return TRUE;
}

func void DIA_GUIDEMERCHANT_TRADE_INFO() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_GuideMerchant_TRADE_15_01");
    B_GIVETRADEINV(SELF);
}

