func void B_SUMMONEDASSESSTALK() {
    NPC_CHANGEATTRIBUTE(SELF, ATR_HITPOINTS, -(SELF.ATTRIBUTE[1]));
}

func void ZS_MM_RTN_SUMMONED() {
    NPC_SETPERCTIME(SELF, 0x3f800000);
    NPC_PERCENABLE(SELF, PERC_ASSESSPLAYER, 0x165f0);
    NPC_PERCENABLE(SELF, PERC_ASSESSENEMY, 0x165ed);
    NPC_PERCENABLE(SELF, PERC_ASSESSMAGIC, 0xa92d);
    NPC_PERCENABLE(SELF, PERC_ASSESSDAMAGE, 0x165ec);
    NPC_PERCENABLE(SELF, PERC_ASSESSFIGHTSOUND, 0x165ef);
    NPC_PERCENABLE(SELF, PERC_ASSESSTALK, 0x16609);
    B_SETATTITUDE(SELF, ATT_FRIENDLY);
    SELF.AIVAR[15] = TRUE;
    AI_STANDUP(SELF);
    AI_SETWALKMODE(SELF, NPC_RUN);
}

func int ZS_MM_RTN_SUMMONED_LOOP() {
    if ((NPC_GETDISTTONPC(SELF, HERO)) > (500)) {
        AI_GOTONPC(SELF, HERO);
    };
    if ((NPC_GETSTATETIME(SELF)) >= (1)) {
        if (!(NPC_CANSEENPC(SELF, HERO))) {
            AI_TURNTONPC(SELF, HERO);
        };
        SELF.AIVAR[62] = (SELF.AIVAR[62]) + (NPC_GETSTATETIME(SELF));
        if ((SELF.AIVAR[62]) >= (MONSTER_SUMMON_TIME)) {
            PRINTSCREENS(PRINT_SUMMON_EXPIRED, -(1), -(1), FONT_SCREEN, 5);
            NPC_CHANGEATTRIBUTE(SELF, ATR_HITPOINTS, -(SELF.ATTRIBUTE[1]));
        };
        NPC_SETSTATETIME(SELF, 0);
    };
    B_MM_WISPDETECT();
    SELF.WP = NPC_GETNEARESTWP(SELF);
    return LOOP_CONTINUE;
}

func void ZS_MM_RTN_SUMMONED_END() {
}

