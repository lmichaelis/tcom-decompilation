instance DIA_ARMORSELLER_EXIT(C_INFO) {
    NPC = 0xcdd1;
    NR = 999;
    CONDITION = DIA_ARMORSELLER_EXIT_CONDITION;
    INFORMATION = DIA_ARMORSELLER_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_ARMORSELLER_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_ARMORSELLER_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_ARMORSELLER_HELLO(C_INFO) {
    NPC = 0xcdd1;
    NR = 1;
    CONDITION = DIA_ARMORSELLER_HELLO_CONDITION;
    INFORMATION = DIA_ARMORSELLER_HELLO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Who are you?";
}

func int DIA_ARMORSELLER_HELLO_CONDITION() {
    return TRUE;
}

func void DIA_ARMORSELLER_HELLO_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_ArmorSeller_Hello_15_01");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_ArmorSeller_Hello_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_ArmorSeller_Hello_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_ArmorSeller_Hello_03_04");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    INFO_CLEARCHOICES(0x11bd2);
    INFO_ADDCHOICE(0x11bd2, "Armor upgrades?", 0x11bd5);
}

func void DIA_ARMORSELLER_HELLO_UPGRADE() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_ArmorSeller_Upgrade_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_ArmorSeller_Upgrade_03_02");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_ArmorSeller_Upgrade_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_ArmorSeller_Upgrade_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_ArmorSeller_Upgrade_03_05");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    LOG_CREATETOPIC(TOPIC_ARMORS, LOG_NOTE);
    AI_LOGENTRY(TOPIC_ARMORS, LOG_ARMORS_CITY);
    TRADER_LOGENTRY_ARMOR();
}

instance DIA_ARMORSELLER_TEACH(C_INFO) {
    NPC = 0xcdd1;
    NR = 1;
    CONDITION = DIA_ARMORSELLER_TEACH_CONDITION;
    INFORMATION = DIA_ARMORSELLER_TEACH_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Could you teach me something?";
}

func int DIA_ARMORSELLER_TEACH_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x11bd2)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARMORSELLER_TEACH_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    B_SAY(OTHER, SELF, "$MARVIN_CanYouTeachMe");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_ArmorSeller_Teach_03_02");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

instance DIA_ARMORSELLER_BUYARMOR(C_INFO) {
    NPC = 0xcdd1;
    NR = 850;
    CONDITION = DIA_ARMORSELLER_BUYARMOR_CONDITION;
    INFORMATION = DIA_ARMORSELLER_BUYARMOR_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_BUYARMOR;
}

func int DIA_ARMORSELLER_BUYARMOR_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x11bd2)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARMORSELLER_BUYARMOR_INFO() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    INFO_CLEARCHOICES(0x11bd9);
    if ((KAPITEL) >= (4)) {
        INFO_ADDCHOICE(0x11bd9, TXT_ARMORTRADE_42, 0x11be1);
    };
    INFO_ADDCHOICE(0x11bd9, TXT_ARMORTRADE_02, 0x11be0);
    INFO_ADDCHOICE(0x11bd9, TXT_ARMORTRADE_03, 0x11bdf);
    INFO_ADDCHOICE(0x11bd9, TXT_ARMORTRADE_04, 0x11bde);
    INFO_ADDCHOICE(0x11bd9, TXT_ARMORTRADE_05, 0x11bdd);
    INFO_ADDCHOICE(0x11bd9, TXT_ARMORTRADE_06, 0x11bdc);
    INFO_ADDCHOICE(0x11bd9, DIALOG_BACK, 0x11be2);
}

func void DIA_ARMORSELLER_BUYARMOR_CHAINL() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (VALUE_ITAR_CHAIN_L)) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, VALUE_ITAR_CHAIN_L);
        CREATEINVITEMS(SELF, 0x8a46, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a46, 1);
        AI_EQUIPARMOR(HERO, 0x8a46);
        B_GIVEINVITEMS(OTHER, SELF, 0x859b, VALUE_ITAR_CHAIN_L);
        DIA_ARMORSELLER_BUYARMOR_INFO();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_ARMORSELLER_BUYARMOR_INFO();
}

func void DIA_ARMORSELLER_BUYARMOR_CHAINM() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (VALUE_ITAR_CHAIN_M)) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, VALUE_ITAR_CHAIN_M);
        CREATEINVITEMS(SELF, 0x8a4b, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a4b, 1);
        AI_EQUIPARMOR(HERO, 0x8a4b);
        B_GIVEINVITEMS(OTHER, SELF, 0x859b, VALUE_ITAR_CHAIN_M);
        DIA_ARMORSELLER_BUYARMOR_INFO();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_ARMORSELLER_BUYARMOR_INFO();
}

func void DIA_ARMORSELLER_BUYARMOR_LEATHERL() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (VALUE_ITAR_KM_LEATHER_L)) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, VALUE_ITAR_KM_LEATHER_L);
        CREATEINVITEMS(SELF, 0x8a56, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a56, 1);
        AI_EQUIPARMOR(HERO, 0x8a56);
        B_GIVEINVITEMS(OTHER, SELF, 0x859b, VALUE_ITAR_KM_LEATHER_L);
        DIA_ARMORSELLER_BUYARMOR_INFO();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_ARMORSELLER_BUYARMOR_INFO();
}

func void DIA_ARMORSELLER_BUYARMOR_LEATHERM() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (VALUE_ITAR_KM_LEATHER_M)) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, VALUE_ITAR_KM_LEATHER_M);
        CREATEINVITEMS(SELF, 0x8a59, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a59, 1);
        AI_EQUIPARMOR(HERO, 0x8a59);
        B_GIVEINVITEMS(OTHER, SELF, 0x859b, VALUE_ITAR_KM_LEATHER_M);
        DIA_ARMORSELLER_BUYARMOR_INFO();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_ARMORSELLER_BUYARMOR_INFO();
}

func void DIA_ARMORSELLER_BUYARMOR_HUNTERL() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (VALUE_ITAR_HUNTER_L)) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, VALUE_ITAR_HUNTER_L);
        CREATEINVITEMS(SELF, 0x8a5e, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a5e, 1);
        AI_EQUIPARMOR(HERO, 0x8a5e);
        B_GIVEINVITEMS(OTHER, SELF, 0x859b, VALUE_ITAR_HUNTER_L);
        DIA_ARMORSELLER_BUYARMOR_INFO();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_ARMORSELLER_BUYARMOR_INFO();
}

func void DIA_ARMORSELLER_BUYARMOR_KNIGHT() {
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (VALUE_ITAR_KNIGHTARMOR)) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, VALUE_ITAR_KNIGHTARMOR);
        CREATEINVITEMS(SELF, 0x8ac5, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8ac5, 1);
        AI_EQUIPARMOR(HERO, 0x8ac5);
        B_GIVEINVITEMS(OTHER, SELF, 0x859b, VALUE_ITAR_KNIGHTARMOR);
        DIA_ARMORSELLER_BUYARMOR_INFO();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_ARMORSELLER_BUYARMOR_INFO();
}

func void DIA_ARMORSELLER_BUYARMOR_BACK() {
    AI_RESETFACEANI(SELF);
    INFO_CLEARCHOICES(0x11bd9);
}

instance DIA_ARMORSELLER_UPGRADEARMOR(C_INFO) {
    NPC = 0xcdd1;
    NR = 991;
    CONDITION = DIA_ARMORSELLER_UPGRADEARMOR_CONDITION;
    INFORMATION = DIA_ARMORSELLER_UPGRADEARMOR_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_UPGRADEARMOR;
}

func int DIA_ARMORSELLER_UPGRADEARMOR_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x11bd2)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARMORSELLER_UPGRADEARMOR_INFO() {
    ARMORSELLER_CHAIN_L_TIER2 = CS7(NAMEARMOR_CHAIN_L_TIER2, " (", I2S((VALUE_ITAR_CHAIN_L) / (2)), PRINT_SZ, " + 5x ", NAMECRAFT_IRON, ")");
    ARMORSELLER_CHAIN_M_TIER2 = CS7(NAMEARMOR_CHAIN_M_TIER2, " (", I2S((VALUE_ITAR_CHAIN_M) / (2)), PRINT_SZ, " + 6x ", NAMECRAFT_IRON, ")");
    ARMORSELLER_CRAB_TIER2 = CS7(NAMEARMOR_CRAB_TIER2, " (", I2S((VALUE_ITAR_CRAB) / (2)), PRINT_SZ, " + 4x ", THROPHYNAME_CRABSHELL, ")");
    ARMORSELLER_LEATHER_L_TIER2 = CS7(NAMEARMOR_KM_LEATHER_L_TIER2, " (", I2S((VALUE_ITAR_KM_LEATHER_L) / (2)), PRINT_SZ, " + 1x ", THROPHYNAME_TURTLESHELL, ")");
    ARMORSELLER_LEATHER_M_TIER2 = CS7(NAMEARMOR_KM_LEATHER_M_TIER2, " (", I2S((VALUE_ITAR_KM_LEATHER_M) / (2)), PRINT_SZ, " + 2x ", THROPHYNAME_TURTLESHELL, ")");
    ARMORSELLER_HUNTER_L_TIER2 = CS7(NAMEARMOR_KM_HUNTER_L_TIER2, " (", I2S((VALUE_ITAR_HUNTER_L) / (2)), PRINT_SZ, " + 1x ", THROPHYNAME_CRAWLERPLATE, ")");
    ARMORSELLER_STH_L_TIER2 = CS7(NAMEARMOR_STH_L_TIER2, " (", I2S((VALUE_ITAR_STH_L) / (2)), PRINT_SZ, " + 2x ", THROPHYNAME_CRAWLERPLATE, ")");
    ARMORSELLER_STH_H_TIER2 = CS7(NAMEARMOR_STH_H_TIER2, " (", I2S((VALUE_ITAR_STH_H) / (2)), PRINT_SZ, " + 4x ", THROPHYNAME_CRAWLERPLATE, ")");
    ARMORSELLER_NORDMAR_TIER2 = CS7(NAMEARMOR_NORDMAR_TIER2, " (", I2S((VALUE_ITAR_NORDMAR) / (2)), PRINT_SZ, " + 2x ", MISCNAME_NUGGET, ")");
    ARMORSELLER_ARX_R_TIER2 = CS7(NAMEARMOR_ARX_R_TIER2, " (", I2S((VALUE_ITAR_ARX_R) / (2)), PRINT_SZ, " + 5x ", NAMECRAFT_IRON, ")");
    ARMORSELLER_ARX_B_TIER2 = CS7(NAMEARMOR_ARX_B_TIER2, " (", I2S((VALUE_ITAR_ARX_B) / (2)), PRINT_SZ, " + 3x ", THROPHYNAME_TURTLESHELL, ")");
    ARMORSELLER_ARX_W1_TIER2 = CS7(NAMEARMOR_ARX_W1_TIER2, " (", I2S((VALUE_ITAR_ARX_W1) / (2)), PRINT_SZ, " + 20x ", NAMECRAFT_IRON, ")");
    ARMORSELLER_ARX_W2_TIER2 = CS7(NAMEARMOR_ARX_W2_TIER2, " (", I2S((VALUE_ITAR_ARX_W2) / (2)), PRINT_SZ, " + 10x ", NAMEMISC_SILVER, ")");
    ARMORSELLER_ARX_H1_TIER2 = CS7(NAMEARMOR_ARX_H1_TIER2, " (", I2S((VALUE_ITAR_ARX_H1) / (2)), PRINT_SZ, " + 4x ", THROPHYNAME_CRABSHELL, ")");
    ARMORSELLER_ARX_H2_TIER2 = CS7(NAMEARMOR_ARX_H2_TIER2, " (", I2S((VALUE_ITAR_ARX_H2) / (2)), PRINT_SZ, " + 6x ", THROPHYNAME_CRAWLERPLATE, ")");
    ARMORSELLER_MIL_R_TIER2 = CS7(NAMEARMOR_MIL_R_01_TIER2, " (", I2S((VALUE_ITAR_MIL_R) / (2)), PRINT_SZ, " + 5x ", NAMECRAFT_IRON, ")");
    ARMORSELLER_MIL_B_TIER2 = CS7(NAMEARMOR_MIL_B_TIER2, " (", I2S((VALUE_ITAR_MIL_B) / (2)), PRINT_SZ, " + 3x ", THROPHYNAME_TURTLESHELL, ")");
    ARMORSELLER_MIL_W1_TIER2 = CS7(NAMEARMOR_MIL_W1_TIER2, " (", I2S((VALUE_ITAR_MIL_W1) / (2)), PRINT_SZ, " + 20x ", NAMECRAFT_IRON, ")");
    ARMORSELLER_MIL_W2_TIER2 = CS7(NAMEARMOR_MIL_W2_TIER2, " (", I2S((VALUE_ITAR_MIL_W2) / (2)), PRINT_SZ, " + 10x ", NAMEMISC_SILVER, ")");
    ARMORSELLER_MIL_C1_TIER2 = CS7(NAMEARMOR_MIL_C1_TIER2, " (", I2S((VALUE_ITAR_MIL_C1) / (2)), PRINT_SZ, " + 4x ", THROPHYNAME_CRAWLERPLATE, ")");
    ARMORSELLER_MIL_C2_TIER2 = CS7(NAMEARMOR_MIL_C2_TIER2, " (", I2S((VALUE_ITAR_MIL_C2) / (2)), PRINT_SZ, " + 6x ", THROPHYNAME_CRABSHELL, ")");
    ARMORSELLER_USM_L_TIER2 = CS7(NAMEARMOR_USM_L_TIER2, " (", I2S((VALUE_ITAR_USM_L) / (2)), PRINT_SZ, " + 10x ", NAMECRAFT_IRON, ")");
    ARMORSELLER_WS_M_TIER2 = CS7(NAMEARMOR_WS_M_TIER2, " (", I2S((VALUE_ITAR_WS_M) / (2)), PRINT_SZ, " + 8x ", NAMEMISC_SILVER, ")");
    ARMORSELLER_GRD_M_TIER2 = CS7(NAMEARMOR_GRD_M_TIER2, " (", I2S((VALUE_ITAR_GRD_M) / (2)), PRINT_SZ, " + 20x ", MISCNAME_GOLDNUGGET_ADDON, ")");
    ARMORSELLER_KNIGHT_TIER2 = CS7(NAMEARMOR_KNIGHTARMOR_TIER2, " (", I2S((VALUE_ITAR_KNIGHTARMOR) / (5)), PRINT_SZ, " + 20x ", NAMECRAFT_IRON, ")");
    INFO_CLEARCHOICES(0x11be3);
    if ((NPC_HASITEMS(OTHER, 0x8a46)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_CHAIN_L_TIER2, 0x11be7);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a4b)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_CHAIN_M_TIER2, 0x11be8);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a56)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_LEATHER_L_TIER2, 0x11bea);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a59)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_LEATHER_M_TIER2, 0x11beb);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a5e)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_HUNTER_L_TIER2, 0x11bec);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a66)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_STH_L_TIER2, 0x11bed);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a6b)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_STH_H_TIER2, 0x11bee);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a4f)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_CRAB_TIER2, 0x11be9);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a97)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_USM_L_TIER2, 0x11bf0);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a74)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_NORDMAR_TIER2, 0x11bef);
    };
    if ((NPC_HASITEMS(OTHER, 0x8abb)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_WS_M_TIER2, 0x11bf1);
    };
    if ((NPC_HASITEMS(OTHER, 0x8b21)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_GRD_M_TIER2, 0x11bf2);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a7b)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_ARX_R_TIER2, 0x11bf3);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a89)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_ARX_B_TIER2, 0x11bf4);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a7e)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_ARX_W1_TIER2, 0x11bf5);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a83)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_ARX_W2_TIER2, 0x11bf6);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a8e)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_ARX_H1_TIER2, 0x11bf7);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a93)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_ARX_H2_TIER2, 0x11bf8);
    };
    if ((NPC_HASITEMS(OTHER, 0x8a9a)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_MIL_R_TIER2, 0x11bf9);
    };
    if ((NPC_HASITEMS(OTHER, 0x8aa0)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_MIL_B_TIER2, 0x11bfa);
    };
    if ((NPC_HASITEMS(OTHER, 0x8aad)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_MIL_W1_TIER2, 0x11bfb);
    };
    if ((NPC_HASITEMS(OTHER, 0x8ab2)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_MIL_W2_TIER2, 0x11bfc);
    };
    if ((NPC_HASITEMS(OTHER, 0x8aa5)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_MIL_C1_TIER2, 0x11bfd);
    };
    if ((NPC_HASITEMS(OTHER, 0x8aaa)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_MIL_C2_TIER2, 0x11bfe);
    };
    if ((NPC_HASITEMS(OTHER, 0x8ac5)) >= (1)) {
        INFO_ADDCHOICE(0x11be3, ARMORSELLER_KNIGHT_TIER2, 0x11bff);
    };
    INFO_ADDCHOICE(0x11be3, DIALOG_BACK, 0x11be6);
}

func void DIA_ARMORSELLER_UPGRADEARMOR_BACK() {
    INFO_CLEARCHOICES(0x11be3);
}

func void DIA_ARMORSELLER_UPGRADEARMOR_CHAIN_L_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a46)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_CHAIN_L) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8c8c)) >= (5))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_CHAIN_L) / (2));
        CREATEINVITEMS(SELF, 0x8a47, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a47, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8c8c, 5);
        AI_EQUIPARMOR(OTHER, 0x8a47);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_CHAIN_M_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a4b)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_CHAIN_M) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8c8c)) >= (6))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_CHAIN_M) / (2));
        CREATEINVITEMS(SELF, 0x8a4c, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a4c, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8c8c, 6);
        AI_EQUIPARMOR(OTHER, 0x8a4c);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_CRAB_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a4f)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_CRAB) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8a21)) >= (4))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_CRAB) / (2));
        CREATEINVITEMS(SELF, 0x8a50, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a50, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8a21, 4);
        AI_EQUIPARMOR(OTHER, 0x8a50);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_LEATHER_L_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a56)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_KM_LEATHER_L) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8a20)) >= (1))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_KM_LEATHER_L) / (2));
        CREATEINVITEMS(SELF, 0x8a57, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a57, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8a20, 1);
        AI_EQUIPARMOR(OTHER, 0x8a57);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_LEATHER_M_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a59)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_KM_LEATHER_M) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8a20)) >= (2))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_KM_LEATHER_M) / (2));
        CREATEINVITEMS(SELF, 0x8a5a, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a5a, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8a20, 2);
        AI_EQUIPARMOR(OTHER, 0x8a5a);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_HUNTER_L_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a5e)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_HUNTER_L) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8446)) >= (1))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_HUNTER_L) / (2));
        CREATEINVITEMS(SELF, 0x8a5f, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a5f, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8446, 1);
        AI_EQUIPARMOR(OTHER, 0x8a5f);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_STH_L_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a66)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_STH_L) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8446)) >= (2))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_STH_L) / (2));
        CREATEINVITEMS(SELF, 0x8a67, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a67, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8446, 2);
        AI_EQUIPARMOR(OTHER, 0x8a67);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_STH_H_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a6b)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_STH_H) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8446)) >= (4))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_STH_H) / (2));
        CREATEINVITEMS(SELF, 0x8a6c, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a6c, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8446, 4);
        AI_EQUIPARMOR(OTHER, 0x8a6c);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_NORDMAR_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a74)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_NORDMAR) / (2)))) && ((NPC_HASITEMS(OTHER, 0x859a)) >= (2))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_NORDMAR) / (2));
        CREATEINVITEMS(SELF, 0x8a75, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a75, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x859a, 2);
        AI_EQUIPARMOR(OTHER, 0x8a75);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_USM_L_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a97)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_USM_L) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8c8c)) >= (10))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_USM_L) / (2));
        CREATEINVITEMS(SELF, 0x8a98, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a98, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8c8c, 10);
        AI_EQUIPARMOR(OTHER, 0x8a98);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_WS_M_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8abb)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_WS_M) / (2)))) && ((NPC_HASITEMS(OTHER, 0x904b)) >= (8))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_WS_M) / (2));
        CREATEINVITEMS(SELF, 0x8abc, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8abc, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8c8c, 8);
        AI_EQUIPARMOR(OTHER, 0x8abc);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_GRD_M_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8b21)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_GRD_M) / (2)))) && ((NPC_HASITEMS(OTHER, 0x837c)) >= (20))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_GRD_M) / (2));
        CREATEINVITEMS(SELF, 0x8b22, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8b22, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x837c, 20);
        AI_EQUIPARMOR(OTHER, 0x8b22);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_ARX_R_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a7b)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_ARX_R) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8c8c)) >= (5))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_ARX_R) / (2));
        CREATEINVITEMS(SELF, 0x8a7c, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a7c, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8c8c, 5);
        AI_EQUIPARMOR(OTHER, 0x8a7c);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_ARX_B_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a89)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_ARX_B) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8a20)) >= (3))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_ARX_B) / (2));
        CREATEINVITEMS(SELF, 0x8a8a, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a8a, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8a20, 3);
        AI_EQUIPARMOR(OTHER, 0x8a8a);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_ARX_W1_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a7e)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_ARX_W1) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8c8c)) >= (20))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_ARX_W1) / (2));
        CREATEINVITEMS(SELF, 0x8a7f, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a7f, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8c8c, 20);
        AI_EQUIPARMOR(OTHER, 0x8a7f);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_ARX_W2_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a83)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_ARX_W2) / (2)))) && ((NPC_HASITEMS(OTHER, 0x904b)) >= (10))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_ARX_W2) / (2));
        CREATEINVITEMS(SELF, 0x8a84, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a84, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x904b, 10);
        AI_EQUIPARMOR(OTHER, 0x8a84);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_ARX_H1_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a8e)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_ARX_H1) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8a21)) >= (4))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_ARX_H1) / (2));
        CREATEINVITEMS(SELF, 0x8a8f, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a8f, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8a21, 4);
        AI_EQUIPARMOR(OTHER, 0x8a8f);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_ARX_H2_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a93)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_ARX_H2) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8446)) >= (6))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_ARX_H2) / (2));
        CREATEINVITEMS(SELF, 0x8a94, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a94, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8446, 6);
        AI_EQUIPARMOR(OTHER, 0x8a94);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_MIL_R_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8a9a)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_MIL_R) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8c8c)) >= (5))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_MIL_R) / (2));
        CREATEINVITEMS(SELF, 0x8a9b, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a9b, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8c8c, 5);
        AI_EQUIPARMOR(OTHER, 0x8a9b);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_MIL_B_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8aa0)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_MIL_B) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8a20)) >= (3))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_MIL_B) / (2));
        CREATEINVITEMS(SELF, 0x8aa1, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8aa1, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8a20, 3);
        AI_EQUIPARMOR(OTHER, 0x8aa1);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_MIL_W1_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8aad)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_MIL_W1) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8c8c)) >= (20))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_MIL_W1) / (2));
        CREATEINVITEMS(SELF, 0x8aae, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8aae, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8c8c, 20);
        AI_EQUIPARMOR(OTHER, 0x8aae);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_MIL_W2_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8ab2)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_MIL_W2) / (2)))) && ((NPC_HASITEMS(OTHER, 0x904b)) >= (10))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_MIL_W2) / (2));
        CREATEINVITEMS(SELF, 0x8ab3, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8ab3, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x904b, 10);
        AI_EQUIPARMOR(OTHER, 0x8ab3);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_MIL_C1_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8aa5)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_MIL_C1) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8446)) >= (4))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_MIL_C1) / (2));
        CREATEINVITEMS(SELF, 0x8aa6, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8aa6, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8446, 4);
        AI_EQUIPARMOR(OTHER, 0x8aa6);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_MIL_C2_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8aaa)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_MIL_C2) / (2)))) && ((NPC_HASITEMS(OTHER, 0x8a21)) >= (6))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_MIL_C2) / (2));
        CREATEINVITEMS(SELF, 0x8aab, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8aab, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8a21, 6);
        AI_EQUIPARMOR(OTHER, 0x8aab);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

func void DIA_ARMORSELLER_UPGRADEARMOR_KNIGHT_TIER2() {
    if ((((NPC_HASITEMS(OTHER, 0x8ac5)) >= (1)) && ((NPC_HASITEMS(OTHER, 0x859b)) >= ((VALUE_ITAR_KNIGHTARMOR) / (5)))) && ((NPC_HASITEMS(OTHER, 0x8c8c)) >= (20))) {
        NPC_REMOVEINVITEMS(SELF, 0x859b, (VALUE_ITAR_KNIGHTARMOR) / (4));
        CREATEINVITEMS(SELF, 0x8ac6, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8ac6, 1);
        B_GIVEPLAYERXP(XP_ARMORUPGRADE_TIER2);
        NPC_REMOVEINVITEMS(SELF, 0x8c8c, 5);
        AI_EQUIPARMOR(OTHER, 0x8ac6);
    };
    B_SAY(SELF, OTHER, "$NOITEMS");
    DIA_ARMORSELLER_UPGRADEARMOR_INFO();
}

instance DIA_ARMORSELLER_PICKPOCKET(C_INFO) {
    NPC = 0xcdd1;
    NR = 998;
    CONDITION = DIA_ARMORSELLER_PICKPOCKET_CONDITION;
    INFORMATION = DIA_ARMORSELLER_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_80;
}

func int DIA_ARMORSELLER_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARMORSELLER_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(0x11c00);
    INFO_ADDCHOICE(0x11c00, DIALOG_BACK, 0x11c04);
    INFO_ADDCHOICE(0x11c00, DIALOG_PICKPOCKET, 0x11c03);
}

func void DIA_ARMORSELLER_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (2)) {
        CREATEINVITEMS(SELF, 0x8a21, 1);
        B_GIVEINVITEMS(SELF, OTHER, 0x8a21, 1);
        B_PICKPOCKET_AMBIENT_TIER_2();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(0x11c00);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(0x11c00);
}

func void DIA_ARMORSELLER_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(0x11c00);
}

instance DIA_ARMORSELLER_TRADE(C_INFO) {
    NPC = 0xcdd1;
    NR = 889;
    CONDITION = DIA_ARMORSELLER_TRADE_CONDITION;
    INFORMATION = DIA_ARMORSELLER_TRADE_INFO;
    PERMANENT = TRUE;
    TRADE = TRUE;
    DESCRIPTION = "Let's deal.";
}

func int DIA_ARMORSELLER_TRADE_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x11bd2)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARMORSELLER_TRADE_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_LetsTrade");
    TRADER_LOGENTRY_ARMORSELLER();
    B_GIVETRADEINV(SELF);
}

