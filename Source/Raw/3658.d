instance DIA_ARWID_EXIT(C_INFO) {
    NPC = 0xcca0;
    NR = 999;
    CONDITION = DIA_ARWID_EXIT_CONDITION;
    INFORMATION = DIA_ARWID_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_ARWID_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_ARWID_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_ARWID_DUTY(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_DUTY_CONDITION;
    INFORMATION = DIA_ARWID_DUTY_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "How's the service?";
}

func int DIA_ARWID_DUTY_CONDITION() {
    if ((Q509_ARWIDVOLFZACKE) == (FALSE)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_DUTY_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_Duty_15_00");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Duty_13_01");
}

instance DIA_ARWID_NOTHINGINTERESTING(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_NOTHINGINTERESTING_CONDITION;
    INFORMATION = DIA_ARWID_NOTHINGINTERESTING_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "You haven't happened upon anything more interesting yet?";
}

func int DIA_ARWID_NOTHINGINTERESTING_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x10472)) && ((Q509_ARWIDVOLFZACKE) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_NOTHINGINTERESTING_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_Nothinginteresting_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Nothinginteresting_13_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_Nothinginteresting_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Nothinginteresting_13_06");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_Nothinginteresting_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Nothinginteresting_13_08");
}

instance DIA_ARWID_AMBIENT(C_INFO) {
    NPC = 0xcca0;
    NR = 997;
    CONDITION = DIA_ARWID_AMBIENT_CONDITION;
    INFORMATION = DIA_ARWID_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How are you doing?";
}

func int DIA_ARWID_AMBIENT_CONDITION() {
    if ((Q509_ARWIDVOLFZACKE) == (FALSE)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_AMBIENT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_Ambient_15_00");
    if (((OTHER.GUILD) != (GIL_MIL)) && ((OTHER.GUILD) != (GIL_SLD))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Ambient_13_01");
    };
    if ((OTHER.GUILD) == (GIL_SLD)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Ambient_13_02");
    };
    if (((OTHER.GUILD) == (GIL_MIL)) && ((MARVIN_MILITIASPECIALIZATION) == (MILITIA_SPECIALIZATION_NONE))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Ambient_13_03");
    };
    if (((OTHER.GUILD) == (GIL_MIL)) && (((MARVIN_MILITIASPECIALIZATION) == (MILITIA_SPECIALIZATION_FIGHTER)) || ((MARVIN_MILITIASPECIALIZATION) == (MILITIA_SPECIALIZATION_CROSSBOWMAN)))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Ambient_13_04");
    };
    if (((OTHER.GUILD) == (GIL_MIL)) && (((MARVIN_MILITIASPECIALIZATION) == (MILITIA_SPECIALIZATION_MASTERFIGHTER)) || ((MARVIN_MILITIASPECIALIZATION) == (MILITIA_SPECIALIZATION_MASTERCROSSBOWMAN)))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Ambient_13_05");
    };
}

instance DIA_ARWID_FMQ002(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_FMQ002_CONDITION;
    INFORMATION = DIA_ARWID_FMQ002_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I need a guard's sword, any ideas?";
}

func int DIA_ARWID_FMQ002_CONDITION() {
    if (((LOG_GETSTATUS(MIS_FMQ002)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x101e7))) {
        if (((((NPC_HASITEMS(OTHER, 0x9a4a)) == (0)) || ((NPC_HASITEMS(OTHER, 0x9a4c)) == (0))) || ((NPC_HASITEMS(OTHER, 0x9a4b)) == (0))) || ((NPC_HASITEMS(OTHER, 0x9a4d)) == (0))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_FMQ002_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_FMQ002_15_00");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_FMQ002_10_01");
    AI_LOGENTRY(TOPIC_FMQ002, LOG_FMQ002_ARWIDABOUTODGAR);
    FMQ002_KNOWSODGAR = 1;
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_FMQ002_10_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_FMQ002_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_FMQ002_10_04");
    INFO_CLEARCHOICES(0x1047b);
    INFO_ADDCHOICE(0x1047b, "I don't feel like it.", 0x10480);
    INFO_ADDCHOICE(0x1047b, "Why not.", 0x1047f);
}

func void DIA_ARWID_FMQ002_LETSGO() {
    FMQ002_HOUROFARWIDFIGHT = WLD_GETHOUR();
    FMQ002_DAYOFARWIDFIGHT = WLD_GETDAY();
    FMQ002_LETSFIGHT = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_FMQ002_HaveGold_15_01");
    NPC_REMOVEINVITEMS(SELF, 0x859b, FMQ002_GOLDFORARWID);
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_FMQ002_HaveGold_10_02");
    B_GIVEINVITEMS(OTHER, SELF, 0x859b, FMQ002_GOLDFORARWID);
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_FMQ002_HaveGold_10_03");
    AI_LOGENTRY(TOPIC_FMQ002, LOG_FMQ002_PAYEDFIGHTWITHARWID);
    NPC_EXCHANGEROUTINE(MIL_4017_ARWID, "TOFIGHT");
}

func void DIA_ARWID_FMQ002_LETSFIGHT() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_FMQ002_LetsFight_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_FMQ002_LetsFight_10_02");
    AI_LOGENTRY(TOPIC_FMQ002, LOG_FMQ002_FIGHTWITHARWID);
    FMQ002_KNOWSABOUTARWIDFIGHT = 1;
    INFO_CLEARCHOICES(0x1047b);
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (FMQ002_GOLDFORARWID)) {
        DIA_ARWID_FMQ002_LETSGO();
    };
    FMQ002_ARWIDADDITIONALSTATUS = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_FMQ002_NoGold_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_FMQ002_NoGold_10_02");
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_ARWID_FMQ002_NOPE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_FMQ002_Nope_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_FMQ002_Nope_10_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_FMQ002_Nope_10_03");
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_ARWID_FMQ002_HAVEGOLD(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_FMQ002_HAVEGOLD_CONDITION;
    INFORMATION = DIA_ARWID_FMQ002_HAVEGOLD_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = DIALOG_GIVE40G;
}

func int DIA_ARWID_FMQ002_HAVEGOLD_CONDITION() {
    if ((LOG_GETSTATUS(MIS_FMQ002)) == (LOG_RUNNING)) {
        if (NPC_KNOWSINFO(OTHER, 0x1047b)) {
            if ((FMQ002_LETSFIGHT) == (0)) {
                if ((FMQ002_GOTSWORD) == (0)) {
                    if ((FMQ002_ARWIDADDITIONALSTATUS) == (1)) {
                        if ((NPC_HASITEMS(OTHER, 0x859b)) >= (FMQ002_GOLDFORARWID)) {
                            return TRUE;
                        };
                    };
                };
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_FMQ002_HAVEGOLD_INFO() {
    DIA_ARWID_FMQ002_LETSGO();
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_ARWID_TESTYOURMIGHT(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_TESTYOURMIGHT_CONDITION;
    INFORMATION = DIA_ARWID_TESTYOURMIGHT_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARWID_TESTYOURMIGHT_CONDITION() {
    if ((LOG_GETSTATUS(MIS_FMQ002)) == (LOG_RUNNING)) {
        if ((NPC_GETDISTTOWP(SELF, "PARTM8_PATH_04")) <= (1000)) {
            if ((FMQ002_FORFEITSTATUS) == (0)) {
                return TRUE;
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void ARWID_HEALHIM() {
    if ((MIL_4017_ARWID.ATTRIBUTE[0]) != (MIL_4017_ARWID.ATTRIBUTE[1])) {
        MIL_4017_ARWID.ATTRIBUTE[0] = MIL_4017_ARWID.ATTRIBUTE[1];
    };
}

func void ARWID_ARENAFIGHT() {
    SELF.AIVAR[45] = AF_RUNNING;
    AI_STOPPROCESSINFOS(SELF);
    B_ATTACK(SELF, OTHER, AR_NONE, 1);
}

func void DIA_ARWID_TESTYOURMIGHT_INFO() {
    FMQ002_FIGHTWITHARWID = TRUE;
    AI_REMOVEWEAPON(SELF);
    AI_UNEQUIPWEAPONS(SELF);
    if ((NPC_HASEQUIPPEDMELEEWEAPON(SELF)) == (FALSE)) {
        CREATEINVITEMS(SELF, 0x9a4c, 1);
    };
    CREATEINVITEMS(SELF, 0x913c, 1);
    AI_EQUIPBESTMELEEWEAPON(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_TestYourMight_10_01");
    AI_DRAWWEAPON(SELF);
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_TestYourMight_15_02");
    AI_DRAWWEAPON(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_TestYourMight_10_03");
    ARWID_HEALHIM();
    ARWID_ARENAFIGHT();
}

instance DIA_ARWID_MARVINWON(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_MARVINWON_CONDITION;
    INFORMATION = DIA_ARWID_MARVINWON_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARWID_MARVINWON_CONDITION() {
    if ((LOG_GETSTATUS(MIS_FMQ002)) == (LOG_RUNNING)) {
        if ((FMQ002_FIGHTWITHARWID) == (1)) {
            if (((SELF.AIVAR[64]) == (FALSE)) && ((SELF.AIVAR[0]) != (FIGHT_NONE))) {
                if ((SELF.AIVAR[45]) != (AF_NONE)) {
                    return TRUE;
                };
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_MARVINWON_INFO() {
    FMQ002_ARWIDADDITIONALSTATUS = 2;
    if ((SELF.AIVAR[0]) == (FIGHT_LOST)) {
        FMQ002_GOTSWORD = 1;
        FMQ002_SWDTIER2 = TRUE;
        FMQ002_SWDTIER2_GOT = TRUE;
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_MarvinWon_10_00");
        if ((!(NPC_HASITEMS(OTHER, 0x9a4c))) >= (1)) {
            AI_OUTPUT(SELF, OTHER, "DIA_Arwid_MarvinWon_10_01");
            B_GIVEINVITEMS(SELF, OTHER, 0x9a4c, 1);
        };
        if (((!(NPC_HASITEMS(OTHER, 0x913c))) >= (1)) && ((ARWIDGOLDPOCKETOPENED) == (FALSE))) {
            B_GIVEINVITEMS(SELF, OTHER, 0x913c, 1);
        };
        AI_OUTPUT(OTHER, SELF, "DIA_Arwid_MarvinWon_15_02");
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_MarvinWon_10_03");
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_MarvinWon_10_04");
        AI_OUTPUT(OTHER, SELF, "DIA_Arwid_MarvinWon_15_05");
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_MarvinWon_10_06");
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_MarvinWon_10_07");
        NPC_EXCHANGEROUTINE(MIL_4017_ARWID, "TRADING");
        NPC_EXCHANGEROUTINE(VLK_6111_CITYTRADE05, "TRADING");
        AI_LOGENTRY(TOPIC_FMQ002, LOG_FMQ002_WONWITHARWID);
    };
    FMQ002_LETSFIGHT = 0;
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_MarvinLost_10_00");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_MarvinLost_10_02");
    AI_REMOVEWEAPON(SELF);
    AI_UNEQUIPWEAPONS(SELF);
    NPC_REMOVEINVITEM(SELF, 0x9a4c);
    CREATEINVITEMS(SELF, 0x84e5, 1);
    AI_EQUIPBESTMELEEWEAPON(SELF);
    NPC_EXCHANGEROUTINE(MIL_4017_ARWID, START);
    NPC_REMOVEINVITEM(SELF, 0x913c);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_FMQ002, LOG_FMQ002_LOSTWITHARWID);
    ARWID_HEALHIM();
    AI_STOPPROCESSINFOS(SELF);
    SELF.AIVAR[45] = AF_NONE;
    SELF.AIVAR[64] = TRUE;
}

instance DIA_ARWID_QM202_INN(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_QM202_INN_CONDITION;
    INFORMATION = DIA_ARWID_QM202_INN_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "We are to go together to find recruits for the guard.";
}

var int ARWID_QM202_INN = 0;
func int DIA_ARWID_QM202_INN_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QM202)) == (LOG_RUNNING)) && ((ARWID_QM202_INN) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_QM202_INN_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_Inn_15_01");
    if (WLD_ISTIME(18, 0, 23, 0)) {
        ARWID_QM202_INN = TRUE;
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_Inn_03_03");
        AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_Inn_15_04");
        AI_STOPPROCESSINFOS(SELF);
        SELF.AIVAR[15] = TRUE;
        NPC_EXCHANGEROUTINE(SELF, "QM202_GUIDE");
        AI_LOGENTRY(TOPIC_QM202, LOG_QM202_ARWID_LETSGO);
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_Inn_03_02");
}

instance DIA_ARWID_QM202_READY(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_QM202_READY_CONDITION;
    INFORMATION = DIA_ARWID_QM202_READY_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARWID_QM202_READY_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_QM202)) == (LOG_RUNNING)) && ((NPC_GETDISTTOWP(SELF, "PARTM4_PATH_84")) <= (500))) && ((ARWID_QM202_INN) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_QM202_READY_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_Ready_03_01");
    INFO_CLEARCHOICES(0x10490);
    INFO_ADDCHOICE(0x10490, "Let's not limit ourselves. Let's just speak positively.", 0x10494);
    INFO_ADDCHOICE(0x10490, "Let's tell it how it is. Both the good and the bad.", 0x10495);
    INFO_ADDCHOICE(0x10490, "Let's just criticize the guard.", 0x10496);
    QM202_PREPARENPC();
}

func void DIA_ARWID_QM202_READY_NEXT() {
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_Ready_Next_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_Ready_Next_15_02");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_Ready_Next_03_03");
    if ((QM202_ARWIDDECISION) == (1)) {
        AI_LOGENTRY(TOPIC_QM202, LOG_QM202_ARWID_PLAN_LIES);
    };
    if ((QM202_ARWIDDECISION) == (2)) {
        AI_LOGENTRY(TOPIC_QM202, LOG_QM202_ARWID_PLAN_TRUTH);
    };
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "QM202_INN");
    QM202_ARWID_RTNCHECK = 4;
}

func void DIA_ARWID_QM202_READY_GOOD() {
    QM202_ARWIDDECISION = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_Ready_Good_15_01");
    AI_STARTFACEANI(SELF, S_THINK, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_Ready_Good_03_02");
    AI_STARTFACEANI(OTHER, S_SMUG, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_Ready_Good_15_03");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_Ready_Good_03_04");
    DIA_ARWID_QM202_READY_NEXT();
}

func void DIA_ARWID_QM202_READY_TRUTH() {
    QM202_ARWIDDECISION = 2;
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_Ready_Truth_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_Ready_Truth_03_02");
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_Ready_Truth_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_Ready_Truth_03_04");
    DIA_ARWID_QM202_READY_NEXT();
}

func void DIA_ARWID_QM202_READY_BAD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_Ready_Bad_15_01");
    AI_STARTFACEANI(SELF, S_THINK, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_Ready_Bad_03_02");
    AI_STARTFACEANI(OTHER, S_SMUG, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_Ready_Bad_15_03");
    AI_STARTFACEANI(SELF, S_DOUBT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_Ready_Bad_03_04");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

instance DIA_ARWID_QM202_HOW(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_QM202_HOW_CONDITION;
    INFORMATION = DIA_ARWID_QM202_HOW_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "How did it go?";
}

func int DIA_ARWID_QM202_HOW_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QM202)) == (LOG_RUNNING)) && ((QM202_ALLDIALOGUEDONE) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_QM202_HOW_INFO() {
    QM202_LEAVEINN = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_How_15_01");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_How_03_02");
    AI_STARTFACEANI(OTHER, S_TIRED, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_How_15_03");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_How_03_04");
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "QM202_GUIDE_V3");
    QM202_ARWID_RTNCHECK = 3;
}

instance DIA_ARWID_QM202_FILEDCLEAR(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_QM202_FILEDCLEAR_CONDITION;
    INFORMATION = DIA_ARWID_QM202_FILEDCLEAR_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARWID_QM202_FILEDCLEAR_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QM202)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x11d0c))) {
        if (((((NPC_ISDEAD(GIANT_BUG_QM202_01)) && (NPC_ISDEAD(GIANT_BUG_QM202_02))) && (NPC_ISDEAD(GIANT_BUG_QM202_03))) && (NPC_ISDEAD(GIANT_BUG_QM202_04))) && (NPC_ISDEAD(GIANT_BUG_QM202_05))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_QM202_FILEDCLEAR_INFO() {
    AI_STARTFACEANI(SELF, S_DOUBT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_FiledClear_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_FiledClear_15_02");
    AI_RESETFACEANI(SELF);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "QM202_FIELD_WAIT");
    QM202_ARWID_RTNCHECK = 8;
    AI_LOGENTRY(TOPIC_QM202, LOG_QM202_ARWID_FIELDCLEAR);
}

instance DIA_ARWID_QM202_TESPIDONE(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_QM202_TESPIDONE_CONDITION;
    INFORMATION = DIA_ARWID_QM202_TESPIDONE_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARWID_QM202_TESPIDONE_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QM202)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x11d0f))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_QM202_TESPIDONE_INFO() {
    QM202_ARWIDTOOKTAV = TRUE;
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_TespiDone_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_TespiDone_15_02");
    AI_RESETFACEANI(SELF);
    AI_LOGENTRY(TOPIC_QM202, LOG_QM202_ARWID_TESPIDONE);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(MIL_4017_ARWID, "QM202_GUIDE");
    NPC_EXCHANGEROUTINE(MIL_4001_OKTAV, "QM202_FINISH");
    QM202_OKTAV_RTNCHECK = 1;
}

instance DIA_ARWID_QM202_AFTERQUEST(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_QM202_AFTERQUEST_CONDITION;
    INFORMATION = DIA_ARWID_QM202_AFTERQUEST_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARWID_QM202_AFTERQUEST_CONDITION() {
    if ((LOG_GETSTATUS(MIS_QM202)) == (LOG_SUCCESS)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_QM202_AFTERQUEST_INFO() {
    if ((QM202_FINISHWAY) == (1)) {
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_AfterQuest_03_01");
        AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
        AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_AfterQuest_15_02");
    };
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_AfterQuest_03_04");
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM202_AfterQuest_15_05");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM202_AfterQuest_03_06");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    SELF.AIVAR[15] = FALSE;
    NPC_EXCHANGEROUTINE(SELF, START);
}

instance DIA_ARWID_QM301_HELP(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_QM301_HELP_CONDITION;
    INFORMATION = DIA_ARWID_QM301_HELP_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "The guard needs you.";
}

func int DIA_ARWID_QM301_HELP_CONDITION() {
    if ((LOG_GETSTATUS(MIS_QM301)) == (LOG_RUNNING)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_QM301_HELP_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM301_Help_15_01");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_Help_03_02");
    B_STANDUP();
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM301_Help_15_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM301_Help_15_04");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_Help_03_05");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_Help_03_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_Help_03_07");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM301_Help_15_08");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_Help_03_09");
    AI_LOGENTRY(TOPIC_QM301, LOG_QM301_ARWID_RUN);
}

instance DIA_ARWID_QM301_LETSGO(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_QM301_LETSGO_CONDITION;
    INFORMATION = DIA_ARWID_QM301_LETSGO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Come on, it's showtime.";
}

func int DIA_ARWID_QM301_LETSGO_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QM301)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x10420))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_QM301_LETSGO_INFO() {
    QM301_CUTSCENE = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM301_LetsGo_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_LetsGo_03_02");
    AI_STOPPROCESSINFOS(SELF);
    SELF.AIVAR[15] = TRUE;
    NPC_EXCHANGEROUTINE(SELF, "QM301_GUIDE");
    QM301_ARWID_RTNCHECK = 1;
}

instance DIA_ARWID_QM301_SHOWTIME(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_QM301_SHOWTIME_CONDITION;
    INFORMATION = DIA_ARWID_QM301_SHOWTIME_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARWID_QM301_SHOWTIME_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x104a6)) && ((LOG_GETSTATUS(MIS_QM301)) == (LOG_RUNNING))) && ((QM301_CUTSCENE) == (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_QM301_SHOWTIME_INFO() {
    if (TORCH_HEROHOLDINGTORCH()) {
        TORCH_UNEQUIP();
    };
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_ShowTime_03_01");
    AI_FUNCTION(SELF, 0x104ad);
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM301_ShowTime_15_02");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_ShowTime_03_03");
    AI_FUNCTION(SELF, 0x104ae);
    AI_STARTFACEANI(OTHER, S_THINK, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_ShowTime_03_04");
    AI_REMOVEWEAPON(OTHER);
    AI_UNREADYSPELL(OTHER);
    AI_PLAYANI(OTHER, "T_STAND_2_LGUARD_HERO");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM301_ShowTime_15_05");
    AI_FUNCTION(SELF, 0x104af);
    AI_WAITTILLEND(SELF, OTHER);
    AI_WAITTILLEND(OTHER, SELF);
    AI_PLAYANI(OTHER, "T_REMOVE_LGUARD");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    AI_TURNTONPC(SELF, BDT_11096_THIEF);
    AI_TURNTONPC(OTHER, NONE_826_ELID);
    AI_STOPLOOKAT(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_ShowTime_03_06");
    AI_PLAYANI(SELF, "T_STAND_2_LOOKOUT");
    AI_WAIT(OTHER, 0x3ecccccd);
    AI_PLAYANI(OTHER, "R_STRETCH_RANDOM_01");
    AI_PLAYANI(SELF, "R_LOOKOUT_RANDOM_01");
    AI_FUNCTION(SELF, 0x104b0);
    AI_FUNCTION(SELF, 0x104ac);
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_ShowTime_03_07");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM301_ShowTime_15_08");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM301_ShowTime_15_09");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_ShowTime_03_10");
    AI_PLAYANI(SELF, "T_LOOKOUT_2_STAND");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM301_ShowTime_15_11");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_ShowTime_03_12");
    AI_FUNCTION(SELF, 0x104b1);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "QM301_CUTSCENCE_THIEF");
    QM301_ARWID_RTNCHECK = 2;
}

func void QM301_CUTSCENE_THIEFBEATELID() {
    AI_TURNTONPC(NONE_826_ELID, BDT_11096_THIEF);
    AI_TURNTONPC(BDT_11096_THIEF, NONE_826_ELID);
    AI_PLAYANI(NONE_826_ELID, "T_SHRUG");
    AI_WAIT(BDT_11096_THIEF, 0x40200000);
    AI_PLAYANI(BDT_11096_THIEF, "T_PISSOFF");
    AI_WAITTILLEND(NONE_826_ELID, BDT_11096_THIEF);
    AI_WAITTILLEND(BDT_11096_THIEF, NONE_826_ELID);
    AI_WAIT(BDT_11096_THIEF, 0x40066666);
    AI_DRAWWEAPON(BDT_11096_THIEF);
    AI_WAIT(NONE_826_ELID, 0x3fcccccd);
    AI_PLAYANI(NONE_826_ELID, T_NO);
    AI_WAIT(BDT_11096_THIEF, 0x3fe66666);
    AI_GOTONPC(BDT_11096_THIEF, NONE_826_ELID);
    AI_WAITTILLEND(NONE_826_ELID, BDT_11096_THIEF);
    AI_WAITTILLEND(BDT_11096_THIEF, NONE_826_ELID);
    AI_PLAYANI(BDT_11096_THIEF, T_1HATTACKR);
    AI_PLAYANI(NONE_826_ELID, "T_WOUNDEDB_START");
    AI_WAIT(BDT_11096_THIEF, 0x3fd9999a);
    AI_PLAYANI(BDT_11096_THIEF, T_PLUNDER);
    AI_WAIT(BDT_11096_THIEF, 0x3ff33333);
    AI_PLAYANI(BDT_11096_THIEF, T_SEARCH);
    AI_REMOVEWEAPON(BDT_11096_THIEF);
    AI_WAITTILLEND(NONE_826_ELID, BDT_11096_THIEF);
    AI_PLAYANI(NONE_826_ELID, "T_WOUNDEDB_REMOVE");
}

func void QM301_CUTSCENE_CHANGECAMERA_01() {
    WLD_SENDTRIGGER("QM301_02");
    WLD_SENDUNTRIGGER("QM301_01");
}

func void QM301_CUTSCENE_CHANGECAMERA_02() {
    WLD_SENDTRIGGER("QM301_03");
    WLD_SENDUNTRIGGER("QM301_02");
}

func void QM301_CUTSCENE_CHANGECAMERA_03() {
    WLD_SENDTRIGGER("QM301_04");
    WLD_SENDUNTRIGGER("QM301_03");
}

func void QM301_CUTSCENE_CHANGECAMERA_04() {
    WLD_SENDTRIGGER("QM301_05");
    WLD_SENDUNTRIGGER("QM301_04");
}

func void QM301_CUTSCENE_END() {
    QM301_CUTSCENE = 3;
    WLD_SENDUNTRIGGER("QM301_05");
    WLD_SENDUNTRIGGER("QM301_04");
    WLD_SENDUNTRIGGER("QM301_03");
    WLD_SENDUNTRIGGER("QM301_02");
    WLD_SENDUNTRIGGER("QM301_01");
    DIACAM_ENABLE();
    B_STARTOTHERROUTINE(NONE_826_ELID, "QM301_CUTSCENCE_THIEF");
    NPC_REFRESH(NONE_826_ELID);
    TELEPORTNPCTOWP(0xcf13, NONE_826_ELID.WP);
    AI_PLAYANI(NONE_826_ELID, T_JUMPB);
    B_STARTOTHERROUTINE(BDT_11096_THIEF, "QM301_CUTSCENCE_THIEF");
    NPC_REFRESH(BDT_11096_THIEF);
    TELEPORTNPCTOWP(0xcc99, BDT_11096_THIEF.WP);
}

instance DIA_ARWID_QM301_FOUNDTHIEF(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_QM301_FOUNDTHIEF_CONDITION;
    INFORMATION = DIA_ARWID_QM301_FOUNDTHIEF_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARWID_QM301_FOUNDTHIEF_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_QM301)) == (LOG_RUNNING)) && ((QM301_CHASETHIEF_END) == (1))) && ((NPC_GETDISTTOWP(SELF, "PARTM3_PATH_205")) <= (500))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_QM301_FOUNDTHIEF_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_FoundThief_03_01");
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_QM301, LOG_QM301_ARWID_FOUNDTHIEF);
    NPC_EXCHANGEROUTINE(SELF, "QM301_GUARD");
    QM301_ARWID_RTNCHECK = 4;
}

instance DIA_ARWID_QM301_AFTERFIGHT(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_QM301_AFTERFIGHT_CONDITION;
    INFORMATION = DIA_ARWID_QM301_AFTERFIGHT_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARWID_QM301_AFTERFIGHT_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QM301)) == (LOG_RUNNING)) && ((QM301_FIGHTWITHTHIEFS) >= (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_QM301_AFTERFIGHT_INFO() {
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_STARTFACEANI(OTHER, S_SMUG, 0, 1);
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_AfterFight_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM301_AfterFight_15_02");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_AfterFight_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_QM301_AfterFight_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_QM301_AfterFight_03_05");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "QM301_GUIDE2");
    QM301_ARWID_RTNCHECK = 5;
}

instance DIA_ARWID_KQ402_REWARD(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_KQ402_REWARD_CONDITION;
    INFORMATION = DIA_ARWID_KQ402_REWARD_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARWID_KQ402_REWARD_CONDITION() {
    if (((LOG_GETSTATUS(MIS_KQ402)) == (LOG_SUCCESS)) && (NPC_ISINSTATE(SELF, 0xf09f))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_KQ402_REWARD_INFO() {
    KQ402_ARWIDPROMOTION = 1;
    KQ402_ARWIDPROMOTION_DAY = WLD_GETDAY();
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_KQ402_Reward_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_KQ402_Reward_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_KQ402_Reward_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_KQ402_Reward_15_04");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_KQ402_Reward_03_05");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_KQ402_Reward_15_06");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_KQ402_Reward_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_KQ402_Reward_03_08");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_KQ402_Reward_15_09");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    AI_STOPPROCESSINFOS(SELF);
    NPC = HLP_GETNPC(0x71b);
    NPCPTR = _@(0x104bb);
    FF_APPLYEXTDATAGT(0x104bd, 75, -(1), NPCPTR);
}

instance DIA_ARWID_KQ402_REWARD_INFO.NPC(C_NPC)
var int DIA_ARWID_KQ402_REWARD_INFO.NPCPTR = 0;
func void KQ402_ARWID_PROMOTION_APPLY() {
    if ((CURRENTLEVEL) == (ARCHOLOS_ZEN)) {
        if ((KQ402_ARWIDPROMOTION) == (1)) {
            if ((KQ402_ARWIDPROMOTION_DAY) <= ((WLD_GETDAY()) - (1))) {
                KQ402_ARWIDPROMOTION = 2;
                PRINTD("Awans Arwid!");
                if ((MARVIN_MILITIA_WHEREJOINED) == (1)) {
                    if ((ARWID_TIERARMOR) == (1)) {
                        ARWID_TIERARMOR = 2;
                        NPC_CHANGEARMOR(MIL_4017_ARWID, 0x8ab2);
                        NPC_REMOVEINVITEMS(MIL_4017_ARWID, 0x8aad, 1);
                        CREATEINVITEMS(MIL_4017_ARWID, 0x851a, 1);
                    } else {
                        ARWID_TIERARMOR = 1;
                        NPC_CHANGEARMOR(MIL_4017_ARWID, 0x8aad);
                        NPC_REMOVEINVITEMS(MIL_4017_ARWID, 0x8aa0, 1);
                        CREATEINVITEMS(MIL_4017_ARWID, 0x8512, 1);
                    } else {
                        /* set_instance(0) */;
                    };
                };
                if ((MARVIN_MILITIA_WHEREJOINED) == (2)) {
                    if ((ARWID_TIERARMOR) == (3)) {
                        ARWID_TIERARMOR = 4;
                        NPC_CHANGEARMOR(MIL_4017_ARWID, 0x8aaa);
                        NPC_REMOVEINVITEMS(MIL_4017_ARWID, 0x8aa5, 1);
                        CREATEINVITEMS(MIL_4017_ARWID, 0x9b36, 1);
                    } else {
                        ARWID_TIERARMOR = 3;
                        NPC_CHANGEARMOR(MIL_4017_ARWID, 0x8aa5);
                        NPC_REMOVEINVITEMS(MIL_4017_ARWID, 0x8aa0, 1);
                        CREATEINVITEMS(MIL_4017_ARWID, 0x8652, 1);
                    };
                };
                FF_REMOVE(0x104bd);
            };
        } else {
            PRINTD("Poczekaj dzieñ, to awansujê Arwida!");
        } else {
            /* set_instance(0) */;
        };
    };
    if (((CURRENTLEVEL) == (ARCHOLOS_ENDGAME_ZEN)) || ((CURRENTLEVEL) == (ARCHOLOS_VOLFZACKE_ZEN))) {
        PRINTD("I tak nie zobaczysz efektów");
        FF_REMOVE(0x104bd);
    };
    PRINTD("Mogê funkcjê wykonaæ tylko w zenie Archolos! - KQ402_ARWID_PROMOTION_APPLY");
}

instance DIA_ARWID_GOODIDEA(C_INFO) {
    NPC = 0xcca0;
    NR = 2;
    CONDITION = DIA_ARWID_GOODIDEA_CONDITION;
    INFORMATION = DIA_ARWID_GOODIDEA_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARWID_GOODIDEA_CONDITION() {
    if (((ARWID_CHAT) == (TRUE)) && ((Q509_ARWIDVOLFZACKE) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_GOODIDEA_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_GoodIdea_03_00");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_GoodIdea_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_GoodIdea_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_GoodIdea_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_GoodIdea_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_GoodIdea_03_05");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_GoodIdea_15_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_GoodIdea_03_07");
    ARWID_CHAT = FALSE;
    NPC_EXCHANGEROUTINE(MIL_4017_ARWID, START);
}

var int ARWID_KNOWHOW = 0;
var int ARWID_KNOWWHEN = 0;
var int ARWID_KNOWWHY = 0;
instance DIA_ARWID_WELLDONE(C_INFO) {
    NPC = 0xcca0;
    NR = 2;
    CONDITION = DIA_ARWID_WELLDONE_CONDITION;
    INFORMATION = DIA_ARWID_WELLDONE_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARWID_WELLDONE_CONDITION() {
    if (((((NPC_GETDISTTOWP(MIL_4017_ARWID, "PARTM4_TAVERN_STAND_01")) <= (400)) && ((OTHER.GUILD) == (GIL_MIL))) && ((BECOMEAGUARD_TAVERNPART) == (1))) && ((Q509_ARWIDVOLFZACKE) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_WELLDONE_INFO() {
    B_STOPLOOKAT(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_WellDone_03_00");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_WellDone_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_WellDone_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_WellDone_15_03");
    CREATEINVITEMS(MIL_4017_ARWID, 0x8e0b, 1);
    CREATEINVITEMS(HERO, 0x8e0b, 1);
    AI_USEITEM(HERO, 0x8e0b);
    AI_USEITEM(MIL_4017_ARWID, 0x8e0b);
    INFO_CLEARCHOICES(0x104c4);
    INFO_ADDCHOICE(0x104c4, "How long did it take you to join the guard?", 0x104c7);
    INFO_ADDCHOICE(0x104c4, "Why did you become a guard?", 0x104c8);
    INFO_ADDCHOICE(0x104c4, "What was your recruitment process like?", 0x104c9);
}

func void DIA_ARWID_WELLDONE_WHENJOIN() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_WellDone_WhenJoin_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_WellDone_WhenJoin_03_02");
    ARWID_KNOWWHEN = TRUE;
    if ((((ARWID_KNOWWHEN) == (TRUE)) && ((ARWID_KNOWWHY) == (TRUE))) && ((ARWID_KNOWHOW) == (TRUE))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_All_03_01");
        CREATEINVITEMS(MIL_4017_ARWID, 0x8e0b, 1);
        CREATEINVITEMS(HERO, 0x8e0b, 1);
        AI_USEITEM(HERO, 0x8e0b);
        AI_USEITEM(MIL_4017_ARWID, 0x8e0b);
        AI_STOPPROCESSINFOS(SELF);
    };
}

func void DIA_ARWID_WELLDONE_WHYJOIN() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_WellDone_WhyJoin_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_WellDone_WhyJoin_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_WellDone_WhyJoin_03_03");
    ARWID_KNOWWHY = TRUE;
    if ((((ARWID_KNOWWHEN) == (TRUE)) && ((ARWID_KNOWWHY) == (TRUE))) && ((ARWID_KNOWHOW) == (TRUE))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_All_03_02");
        CREATEINVITEMS(MIL_4017_ARWID, 0x8e0b, 1);
        CREATEINVITEMS(HERO, 0x8e0b, 1);
        AI_USEITEM(HERO, 0x8e0b);
        AI_USEITEM(MIL_4017_ARWID, 0x8e0b);
        AI_STOPPROCESSINFOS(SELF);
    };
}

func void DIA_ARWID_WELLDONE_HOWJOIN() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_WellDone_HowJoin_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_WellDone_HowJoin_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_WellDone_HowJoin_03_03");
    ARWID_KNOWHOW = TRUE;
    if ((((ARWID_KNOWWHEN) == (TRUE)) && ((ARWID_KNOWWHY) == (TRUE))) && ((ARWID_KNOWHOW) == (TRUE))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_All_03_03");
        CREATEINVITEMS(MIL_4017_ARWID, 0x8e0b, 1);
        CREATEINVITEMS(HERO, 0x8e0b, 1);
        AI_USEITEM(HERO, 0x8e0b);
        AI_USEITEM(MIL_4017_ARWID, 0x8e0b);
        AI_STOPPROCESSINFOS(SELF);
    };
}

instance DIA_ARWID_Q509_QUESTION(C_INFO) {
    NPC = 0xcca0;
    NR = 1;
    CONDITION = DIA_ARWID_Q509_QUESTION_CONDITION;
    INFORMATION = DIA_ARWID_Q509_QUESTION_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_ARWID_Q509_QUESTION_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_Q509)) == (LOG_RUNNING)) && ((Q509_COUNTWARRIORS) < (4))) && ((LOG_GETSTATUS(MIS_Q203)) == (LOG_SUCCESS))) && (NPC_ISINSTATE(SELF, 0xf09f))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_Q509_QUESTION_INFO() {
    B_STANDUP();
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Question_03_01");
    INFO_CLEARCHOICES(0x104ca);
    INFO_ADDCHOICE(0x104ca, "Unfortunately, my brother is dead.", 0x104ce);
    INFO_ADDCHOICE(0x104ca, "Did I mention that?", 0x104cd);
}

func void DIA_ARWID_Q509_QUESTION_TOLD() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_Q509_Question_Told_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Question_Told_03_02");
}

func void DIA_ARWID_Q509_QUESTION_DEAD() {
    AI_STARTFACEANI(OTHER, S_SAD, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_Q509_Question_Dead_15_01");
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Question_Dead_03_02");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_Q509_Question_Dead_15_03");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Question_Dead_03_04");
    INFO_CLEARCHOICES(0x104ca);
    INFO_ADDCHOICE(0x104ca, "Actually, why do you even want to help me?", 0x104cf);
}

func void DIA_ARWID_Q509_QUESTION_DEAD_WHY() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_Q509_Question_Why_15_01");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    if (((LOG_GETSTATUS(MIS_QM202)) == (LOG_SUCCESS)) && ((LOG_GETSTATUS(MIS_KQ402)) == (LOG_SUCCESS))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Question_Why_03_02");
    };
    if ((MARVIN_LOSTGUILDMILITA) == (TRUE)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Question_Why_03_03");
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Question_Why_03_04");
    };
    if ((MARVIN_MILITIASPECIALIZATION) >= (3)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Question_Why_03_05");
        AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Question_Why_03_06");
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Question_Why_03_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Question_Why_03_08");
    INFO_CLEARCHOICES(0x104ca);
    INFO_ADDCHOICE(0x104ca, "And you won't change your mind when I tell you I'm going to Vardhal?", 0x104d0);
}

func void DIA_ARWID_Q509_QUESTION_DEAD_WHY_VARHDAL() {
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_Q509_Question_Varhdal_15_01");
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Question_Varhdal_03_02");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_Arwid_Q509_Question_Varhdal_15_03");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Question_Varhdal_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Question_Varhdal_03_07");
    INFO_CLEARCHOICES(0x104ca);
    B_STANDUP();
    AI_STOPPROCESSINFOS(SELF);
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    B_GIVEPLAYERXP(XP_VARHDAL_RECRUIT);
    SELF.AIVAR[15] = TRUE;
    SELF.FLAGS = 2;
    Q509_ARWIDVOLFZACKE = 1;
    NPC_EXCHANGEROUTINE(SELF, "Q509_WAIT");
    AI_LOGENTRY(TOPIC_Q509, LOG_Q509_ARWID);
    AI_FUNCTION(SELF, 0xf74c);
}

instance DIA_ARWID_Q509_FEEL(C_INFO) {
    NPC = 0xcca0;
    NR = 90;
    CONDITION = DIA_ARWID_Q509_FEEL_CONDITION;
    INFORMATION = DIA_ARWID_Q509_FEEL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How's the morale?";
}

func int DIA_ARWID_Q509_FEEL_CONDITION() {
    if (((NPC_GETDISTTOWP(SELF, "PART5_Q509_HEROFRIEND")) <= (0x7d0)) && ((Q509_ARWIDVOLFZACKE) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_ARWID_Q509_FEEL_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    B_SAY(OTHER, SELF, "$MARVIN_VolfzackMorale3");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Arwid_Q509_Feel_03_02");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

