instance SQ204_NIGHT(CUTSCENE) {
    ONSTART = FUNCTION(0x16ada);
}

func void SQ204_NIGHT_START() {
    DIACAM_ENABLE();
    MDL_APPLYOVERLAYMDS(HERO, "HUMANS_Marvin_Sit_Howls.MDS");
    WLD_SENDTRIGGER("KM_SQ204_03");
    WLD_SENDUNTRIGGER("KM_SQ204_02");
    FADESCREENTOBLACKF(3, 0x16adb, 1000);
}

func void SQ204_NIGHT_FADESCREEN() {
    FF_APPLYONCEEXT(0x16adc, 1000, 9);
    TELEPORTNPCTOWP(0xd212, "PART11_INNOS");
    NPC_SETTRUEGUILD(VLK_3015_DETLOW, GIL_NONE);
    VLK_3015_DETLOW.GUILD = GIL_NONE;
    TELEPORTNPCTOWP(0x71b, "PART11_CUTSCENE_HERO");
    AI_PLAYANIBS(HERO, T_STAND_2_SIT, BS_SIT);
    WLD_INSERTNPC(0xc6e5, "PART11_DETLOW_WOLFATTACK_01");
    WLD_INSERTNPC(0xc6e8, "PART11_DETLOW_WOLFATTACK_02");
}

func void SQ204_NIGHT_FADESCREEN_CAMERA() {
    SQ204_CAMERACOUNT = (SQ204_CAMERACOUNT) + (1);
    if ((SQ204_CAMERACOUNT) == (1)) {
        WLD_SENDTRIGGER("KM_SQ204_04");
        WLD_SENDUNTRIGGER("KM_SQ204_03");
        FADESCREENFROMBLACK(1);
    };
    if ((SQ204_CAMERACOUNT) == (4)) {
        WLD_SENDTRIGGER("KM_SQ204_05");
        WLD_SENDUNTRIGGER("KM_SQ204_04");
    };
    if ((SQ204_CAMERACOUNT) == (6)) {
        WLD_SENDTRIGGER("KM_SQ204_06");
        WLD_SENDUNTRIGGER("KM_SQ204_05");
    };
    if ((SQ204_CAMERACOUNT) == (9)) {
        AI_STANDUP(HERO);
        WLD_SENDUNTRIGGER("KM_SQ204_01");
        WLD_SENDUNTRIGGER("KM_SQ204_02");
        WLD_SENDUNTRIGGER("KM_SQ204_03");
        WLD_SENDUNTRIGGER("KM_SQ204_04");
        WLD_SENDUNTRIGGER("KM_SQ204_05");
        WLD_SENDUNTRIGGER("KM_SQ204_06");
        WOLF_DETLOW_CUTSCENE_01.GUILD = GIL_WOLF;
        WOLF_DETLOW_CUTSCENE_02.GUILD = GIL_WOLF;
        NPC_SETTRUEGUILD(HERO, HERO.GUILD);
        B_STARTOTHERROUTINE(WOLF_DETLOW_CUTSCENE_01, "FIGHT");
        NPC_SETTRUEGUILD(WOLF_DETLOW_CUTSCENE_02, GIL_WOLF);
        NPC_REFRESH(WOLF_DETLOW_CUTSCENE_01);
        NPC_SETTRUEGUILD(WOLF_DETLOW_CUTSCENE_01, GIL_WOLF);
        B_STARTOTHERROUTINE(WOLF_DETLOW_CUTSCENE_02, "FIGHT");
        NPC_REFRESH(WOLF_DETLOW_CUTSCENE_02);
        B_IMMEDIATEATTACKPLAYER(WOLF_DETLOW_CUTSCENE_01, AR_KILL);
        B_IMMEDIATEATTACKPLAYER(WOLF_DETLOW_CUTSCENE_02, AR_KILL);
        TELEPORTNPCTOWP(0xc6e5, "PART11_MOB_11");
        TELEPORTNPCTOWP(0xc6e8, "PART11_MOB_11");
        HERO.AIVAR[4] = FALSE;
        SQ204_STARTCUTSCENE = 1;
    };
}

var int SQ204_NIGHT_FADESCREEN_CAMERA.SQ204_CAMERACOUNT = 0;
