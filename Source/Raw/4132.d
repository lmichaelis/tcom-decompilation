instance DIA_WOLFSON_SQ417_EXIT(C_INFO) {
    NPC = 0xe336;
    NR = 999;
    CONDITION = DIA_WOLFSON_SQ417_EXIT_CONDITION;
    INFORMATION = DIA_WOLFSON_SQ417_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_WOLFSON_SQ417_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_WOLFSON_SQ417_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_WOLFSON_SQ417_SQ417_WHAT(C_INFO) {
    NPC = 0xe336;
    NR = 1;
    CONDITION = DIA_WOLFSON_SQ417_SQ417_WHAT_CONDITION;
    INFORMATION = DIA_WOLFSON_SQ417_SQ417_WHAT_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_WOLFSON_SQ417_SQ417_WHAT_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ417)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x13f73))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_WOLFSON_SQ417_SQ417_WHAT_INFO() {
    TRIA_INVITE(DJG_10012_ARETHE);
    TRIA_START();
    AI_LOOKATNPC(OTHER, SELF);
    AI_STOPLOOKAT(SELF);
    TRIA_WAIT();
    TRIA_NEXT(DJG_13632_WOLFSON);
    AI_OUTPUT(SELF, OTHER, "DIA_WolfSon_SQ417_SQ417_What_03_01");
    INFO_CLEARCHOICES(0x14203);
    INFO_ADDCHOICE(0x14203, DIALOG_DONOTTALK, 0x1420b);
    INFO_ADDCHOICE(0x14203, "I heard something... But we don't know what it might have been...", 0x1420a);
}

func void DIA_WOLFSON_SQ417_SQ417_WHAT_NEXT() {
    TRIA_WAIT();
    TRIA_NEXT(DJG_10012_ARETHE);
    AI_TURNTONPC(OTHER, SELF);
    AI_TURNTONPC(SELF, OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_WolfSon_SQ417_SQ417_What_Next_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_WolfSon_SQ417_SQ417_What_Next_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_WolfSon_SQ417_SQ417_What_Next_03_03");
    INFO_CLEARCHOICES(0x14203);
    INFO_ADDCHOICE(0x14203, "What about your sleeping problem?", 0x14207);
    INFO_ADDCHOICE(0x14203, "I am returning to my post immediately.", 0x14208);
}

func void DIA_WOLFSON_SQ417_SQ417_WHAT_SOMETHING_NEXT_SLEEP() {
    AI_OUTPUT(OTHER, SELF, "DIA_WolfSon_SQ417_SQ417_What_Sleep_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_WolfSon_SQ417_SQ417_What_Sleep_03_02");
}

func void DIA_WOLFSON_SQ417_SQ417_WHAT_SOMETHING_NEXT_BACK() {
    AI_OUTPUT(OTHER, SELF, "DIA_WolfSon_SQ417_SQ417_What_Back_15_01");
    TRIA_FINISH();
    AI_STOPLOOKAT(SELF);
    AI_STOPLOOKAT(OTHER);
    INFO_CLEARCHOICES(0x14203);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_SQ417, LOG_SQ417_PATROL_GOBACK);
    AI_FUNCTION(SELF, 0x14209);
    SQ417_PATROLTIME = 7;
}

func void SQ417_ARETHE_CHANGERTN() {
    NPC_EXCHANGEROUTINE(DJG_10012_ARETHE, "SQ417_SLEEP");
    NPC_EXCHANGEROUTINE(DJG_13632_WOLFSON, TOT);
}

func void DIA_WOLFSON_SQ417_SQ417_WHAT_SOMETHING() {
    AI_OUTPUT(OTHER, SELF, "DIA_WolfSon_SQ417_SQ417_What_Something_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_WolfSon_SQ417_SQ417_What_Something_03_02");
    DIA_WOLFSON_SQ417_SQ417_WHAT_NEXT();
}

func void DIA_WOLFSON_SQ417_SQ417_WHAT_SILENCE() {
    DIA_WOLFSON_SQ417_SQ417_WHAT_NEXT();
}

