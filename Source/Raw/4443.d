func void EVT_Q304_PLUNDER() {
    AI_WAIT(HERO, 0x3fc00000);
    AI_FUNCTION(HERO, 0x166b1);
    AI_USEMOB(HERO, NPC_GETDETECTEDMOB(HERO), -(1));
}

func void Q304_MOVERTRAP() {
    MARVIN_CURRENTBRANCHESTRAP = NPC_HASITEMS(HERO, 0x9186);
    MARVIN_CURRENTLEAVESTRAP = NPC_HASITEMS(HERO, 0x9187);
    NPC_REMOVEINVITEMS(HERO, 0x9187, MARVIN_CURRENTLEAVESTRAP);
    WLD_SENDTRIGGER("KM_SWAMPCAVE_TRAP");
    NPC_REMOVEINVITEMS(HERO, 0x9186, MARVIN_CURRENTBRANCHESTRAP);
    WLD_SENDTRIGGER("MOVER_Q304_PLUNDER");
    Q304_FINALCUTSCENE = 1;
}

var int Q304_MOVERTRAP.MARVIN_CURRENTBRANCHESTRAP = 0;
var int Q304_MOVERTRAP.MARVIN_CURRENTLEAVESTRAP = 0;
