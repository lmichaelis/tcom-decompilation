func void SQ413_SPAWNGUARDS() {
    WLD_INSERTNPC(0xd117, "PARTM5_HOTEL_SQ413_GUARD_01");
    WLD_INSERTNPC(0xd11a, "PARTM5_HOTEL_SQ413_GUARD_02");
    B_STARTOTHERROUTINE(VLK_11310_LIMAK, "PRISON");
    NPC_REFRESH(VLK_11310_LIMAK);
    TELEPORTNPCTOWP(0xd20e, VLK_11310_LIMAK.WP);
    FF_APPLYONCEEXTGT(0xf434, 0, -(1));
}

func void SQ413_CORPSE_START() {
    if ((SQ413_CORPSE_START_COLLISION) == (0)) {
        PRINTD("Rozpoczynam - SQ413_Corpse_Start");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("SQ413_MOVER_CORPSE");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        CHANGEVOBCOLLISION("SQ413_CORPSE_CITIZEN", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("SQ413_MOVER_CORPSE");
        SQ413_CORPSE_START_COLLISION = 1;
    };
    if (((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ413_Corpse_Start");
        CHANGEVOBCOLLISION("SQ413_CORPSE_CITIZEN", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0xf434);
        SQ413_CORPSE_START_COLLISION = 0;
    };
}

var int SQ413_CORPSE_START.SQ413_CORPSE_START_COLLISION = 0;
instance SQ413_CORPSE_START.MOVER1(ZCMOVER)
var int SQ413_CORPSE_START.MOVPTR1 = 0;
func void SQ413_REMOVEGUARDS() {
    B_REMOVENPC(0xd117);
    B_REMOVENPC(0xd11a);
    B_REMOVENPC(0xd20e);
    FF_APPLYONCEEXTGT(0xf434, 0, -(1));
    WLD_SENDTRIGGER("SQ413_CHEST");
}

func void SQ413_GOAWAY() {
    if ((SQ413_FREEEXP) == (FALSE)) {
        SQ413_FREEEXP = TRUE;
        B_GIVEPLAYERXP((XP_SQ413_FINISH) / (2));
    };
    if ((HERO.GUILD) == (GIL_MIL)) {
        B_SAY(SELF, OTHER, "$IMBUSY_CALM");
        AI_RESETFACEANI(SELF);
    };
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    B_SAY(SELF, OTHER, "$IMBUSY_ANGRY");
    AI_RESETFACEANI(SELF);
    AI_STOPPROCESSINFOS(SELF);
}

var int SQ413_GOAWAY.SQ413_FREEEXP = 0;
