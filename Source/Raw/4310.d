var int SQ102_RASCO_ABOUTOTHO = 0;
var int SQ102_RASCO_JOBDONE = 0;
instance DIA_RASCO_EXIT(C_INFO) {
    NPC = 0xe110;
    NR = 999;
    CONDITION = DIA_RASCO_EXIT_CONDITION;
    INFORMATION = DIA_RASCO_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_RASCO_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_RASCO_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_RASCO_SQ102_OTHO_REFUSETALK() {
    NPC_SETREFUSETALK(SELF, 60);
}

func void DIA_RASCO_HELLO_HOUSE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_Hello_House_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Hello_House_03_02");
}

func void DIA_RASCO_HELLO_LOSTWAY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_Hello_LostWay_15_01");
    NPC_INITAMBIENTS(SELF, 2);
    if ((NPC_GETLASTAMBIENT(SELF)) == (1)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Hello_LostWay_03_02");
        INFO_CLEARCHOICES(0x15b4b);
        DIA_RASCO_SQ102_OTHO_REFUSETALK();
        AI_STOPPROCESSINFOS(SELF);
    };
    if ((NPC_GETLASTAMBIENT(SELF)) == (2)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Hello_LostWay_03_03");
        INFO_CLEARCHOICES(0x15b4b);
        AI_STOPPROCESSINFOS(SELF);
        B_ATTACK(SELF, OTHER, AR_NONE, 1);
    };
}

func void DIA_RASCO_SQ102_OTHO() {
    SQ102_RASCO_ABOUTOTHO = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Otho_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_03_02");
    AI_REMOVEWEAPON(SELF);
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Otho_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_03_06");
    AI_LOGENTRY(TOPIC_SQ102, LOG_SQ102_RASCO_NOTHIEF);
    INFO_CLEARCHOICES(0x15b4b);
    INFO_ADDCHOICE(0x15b4b, "Why would I do that?", 0x15b16);
    INFO_ADDCHOICE(0x15b4b, "What do I get in return?", 0x15b17);
    INFO_CLEARCHOICES(0x15b1a);
    INFO_ADDCHOICE(0x15b1a, "Why would I do that?", 0x15b16);
    INFO_ADDCHOICE(0x15b1a, "What do I get in return?", 0x15b17);
}

func void DIA_RASCO_SQ102_OTHO_WHY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Otho_Why_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Why_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Why_03_03");
    INFO_ADDCHOICE(0x15b4b, "And what if I refuse?", 0x15b18);
    INFO_ADDCHOICE(0x15b4b, "All right, I'll do it.", 0x15b19);
    INFO_ADDCHOICE(0x15b1a, "And what if I refuse?", 0x15b18);
    INFO_ADDCHOICE(0x15b1a, "All right, I'll do it.", 0x15b19);
}

func void DIA_RASCO_SQ102_OTHO_REWARD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Otho_Reward_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Reward_03_02");
}

func void DIA_RASCO_SQ102_OTHO_WHY_REFUSE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Otho_Refuse_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Refuse_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Refuse_03_03");
}

func void DIA_RASCO_SQ102_OTHO_WHY_OKAY() {
    SQ102_HELPRASCOWITHSHIT = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Otho_Okay_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Okay_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Okay_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Okay_03_04");
    AI_LOGENTRY(TOPIC_SQ102, LOG_SQ102_RASCO_WORK);
    NPC_EXCHANGEROUTINE(NONE_11048_HENKER, "GUARD");
    NPC_EXCHANGEROUTINE(BAU_729_NOB, "RascoQuest");
    INFO_CLEARCHOICES(0x15b4b);
    INFO_CLEARCHOICES(0x15b1a);
    AI_STOPPROCESSINFOS(SELF);
    DIA_RASCO_SQ102_OTHO_REFUSETALK();
}

instance DIA_RASCO_OTHOSENDME(C_INFO) {
    NPC = 0xe110;
    NR = 3;
    CONDITION = DIA_RASCO_OTHOSENDME_CONDITION;
    INFORMATION = DIA_RASCO_OTHOSENDME_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Otho sent me.";
}

func int DIA_RASCO_OTHOSENDME_CONDITION() {
    if ((((NPC_KNOWSINFO(OTHER, 0x15bcf)) && ((LOG_GETSTATUS(MIS_SQ102)) == (LOG_RUNNING))) && ((SQ102_HELPEDOTHO) == (FALSE))) && ((SQ102_RASCO_ABOUTOTHO) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_RASCO_OTHOSENDME_INFO() {
    DIA_RASCO_SQ102_OTHO();
}

instance DIA_RASCO_SQ102_DONE(C_INFO) {
    NPC = 0xe110;
    NR = 2;
    CONDITION = DIA_RASCO_SQ102_DONE_CONDITION;
    INFORMATION = DIA_RASCO_SQ102_DONE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I did what you wanted.";
}

func int DIA_RASCO_SQ102_DONE_CONDITION() {
    if (((((SQ102_HELPRASCOWITHSHIT) == (TRUE)) && ((SQ102_HELPEDOTHO) == (FALSE))) && ((LOG_GETSTATUS(MIS_SQ102)) == (LOG_RUNNING))) && ((SQ102_RASCO_JOBDONE) == (FALSE))) {
        if (((MOB_HASITEMS("SQ102_ALBYNSACK_CONTAINER", 0x90ac)) == (TRUE)) || ((MOB_HASITEMS("Q104_ALBYNSACK_CONTAINER", 0x90ac)) == (TRUE))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_RASCO_SQ102_DONE_DIALOGUE() {
    SQ102_HELPRASCOWITHSHIT = 2;
    SQ102_RASCO_JOBDONE = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Done_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_REMOVEWEAPON(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_03_04");
    if ((CITYENTERED) == (FALSE)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_03_05");
    };
    NPC_EXCHANGEROUTINE(NONE_11048_HENKER, START);
    if (NPC_KNOWSINFO(HERO, 0x15bf6)) {
        NPC_EXCHANGEROUTINE(BAU_729_NOB, "NORMALDAY");
    };
    NPC_EXCHANGEROUTINE(BAU_729_NOB, START);
    INFO_CLEARCHOICES(0x15b1d);
    if ((CITYENTERED) == (FALSE)) {
        INFO_ADDCHOICE(0x15b1d, "Tell me how to get into town.", 0x15b24);
        if ((LOG_GETSTATUS(MIS_Q201)) != (LOG_SUCCESS)) {
            INFO_ADDCHOICE(0x15b1d, "Getting into town is a hassle?", 0x15b23);
        };
    };
    INFO_ADDCHOICE(0x15b1d, "I'll take that ring.", 0x15b22);
    INFO_CLEARCHOICES(0x15b4b);
    if ((CITYENTERED) == (FALSE)) {
        INFO_ADDCHOICE(0x15b4b, "Tell me how to get into town.", 0x15b24);
        if ((LOG_GETSTATUS(MIS_Q201)) != (LOG_SUCCESS)) {
            INFO_ADDCHOICE(0x15b4b, "Getting into town is a hassle?", 0x15b23);
        };
    };
    INFO_ADDCHOICE(0x15b4b, "I'll take that ring.", 0x15b22);
}

func void DIA_RASCO_SQ102_DONE_INFO() {
    DIA_RASCO_SQ102_DONE_DIALOGUE();
}

func void DIA_RASCO_SQ102_DONE_FINISHJOB() {
    INFO_CLEARCHOICES(0x15b1d);
    INFO_CLEARCHOICES(0x15b4b);
    SQ102_HELPEDRASCO = TRUE;
    AI_LOGENTRY(TOPIC_SQ102, LOG_SQ102_RASCO_FINISHJOB);
    DIA_RASCO_SQ102_OTHO_REFUSETALK();
}

func void DIA_RASCO_SQ102_DONE_RING() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Done_Ring_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_Ring_03_02");
    CREATEINVITEMS(SELF, 0x86cc, 1);
    B_GIVEINVITEMS(SELF, OTHER, 0x86cc, 1);
    DIA_RASCO_SQ102_DONE_FINISHJOB();
}

func void DIA_RASCO_SQ102_DONE_PROBLEM() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Done_Problem_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_Problem_03_02");
}

func void DIA_RASCO_SQ102_DONE_CITY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Done_City_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_City_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_City_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_City_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_City_03_05");
    DIA_RASCO_SQ102_DONE_FINISHJOB();
}

instance DIA_RASCO_GQ001_JORN(C_INFO) {
    NPC = 0xe110;
    NR = 10;
    CONDITION = DIA_RASCO_GQ001_JORN_CONDITION;
    INFORMATION = DIA_RASCO_GQ001_JORN_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "You know anything about Kurt's break-in?";
}

func int DIA_RASCO_GQ001_JORN_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x1575a)) && ((LOG_GETSTATUS(MIS_GQ001)) == (LOG_RUNNING))) && (!(NPC_KNOWSINFO(OTHER, 0x1577f)))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_RASCO_GQ001_JORN_TELLEVERYTHING() {
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_03_06");
    GQ001_VILLAGEINFORMATIONJORNCOUNT = (GQ001_VILLAGEINFORMATIONJORNCOUNT) + (1);
    INFO_CLEARCHOICES(0x15b25);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_GQ001, LOG_GQ001_RASCO);
}

func void DIA_RASCO_GQ001_JORN_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_GQ001_Jorn_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_03_02");
    if ((SQ102_HELPEDRASCO) == (TRUE)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_03_03");
        DIA_RASCO_GQ001_JORN_TELLEVERYTHING();
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_03_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_03_08");
    INFO_CLEARCHOICES(0x15b25);
    if ((NPC_HASITEMS(OTHER, 0x859b)) >= (GQ001_RASCOINFORMATION_V1)) {
        INFO_ADDCHOICE(0x15b25, "Maybe a couple of coins will convince you?", 0x15b29);
    };
    INFO_ADDCHOICE(0x15b25, "It's about my brother. Looks like he's been kidnapped.", 0x15b2f);
}

func void DIA_RASCO_GQ001_JORN_WANTSOMEGOLD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_GQ001_Jorn_WantSomeGold_15_01");
    B_STANDUP();
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_WantSomeGold_03_02");
    INFO_CLEARCHOICES(0x15b25);
    INFO_ADDCHOICE(0x15b25, DIALOG_GIVE10G, 0x15b2c);
    INFO_ADDCHOICE(0x15b25, DIALOG_GIVE20G, 0x15b2d);
    INFO_ADDCHOICE(0x15b25, DIALOG_GIVE30G, 0x15b2e);
}

var int RASCO_GQ001_GOLD = 0;
func void DIA_RASCO_GQ001_JORN_WANTSOMEGOLD_GIVE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_GQ001_Jorn_10_15_01");
    if ((RASCO_GQ001_GOLD) == (1)) {
    };
    if ((RASCO_GQ001_GOLD) == (2)) {
    };
    if ((RASCO_GQ001_GOLD) == (3)) {
        B_GIVEINVITEMS(OTHER, SELF, 0x859b, GQ001_RASCOINFORMATION_V3);
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_10_03_02");
    DIA_RASCO_GQ001_JORN_TELLEVERYTHING();
}

func void DIA_RASCO_GQ001_JORN_WANTSOMEGOLD_10() {
    RASCO_GQ001_GOLD = 1;
    DIA_RASCO_GQ001_JORN_WANTSOMEGOLD_GIVE();
}

func void DIA_RASCO_GQ001_JORN_WANTSOMEGOLD_20() {
    RASCO_GQ001_GOLD = 2;
    DIA_RASCO_GQ001_JORN_WANTSOMEGOLD_GIVE();
}

func void DIA_RASCO_GQ001_JORN_WANTSOMEGOLD_30() {
    RASCO_GQ001_GOLD = 3;
    DIA_RASCO_GQ001_JORN_WANTSOMEGOLD_GIVE();
}

func void DIA_RASCO_GQ001_JORN_BROTHER() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_GQ001_Jorn_Brother_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_Brother_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_Brother_03_03");
    AI_PLAYANI(SELF, "T_GETLOST");
    INFO_CLEARCHOICES(0x15b25);
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_RASCO_SQ202(C_INFO) {
    NPC = 0xe110;
    NR = 1;
    CONDITION = DIA_RASCO_SQ202_CONDITION;
    INFORMATION = DIA_RASCO_SQ202_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Apparently you're interested in a certain stuff.";
}

func int DIA_RASCO_SQ202_CONDITION() {
    if (((((SQ202_RASCOWANTSJOINT) == (TRUE)) && ((LOG_GETSTATUS(MIS_SQ202)) == (LOG_RUNNING))) && ((NPC_HASITEMS(OTHER, 0x8592)) >= (1))) && ((SQ202_OPENDFREDRIKJOINTS) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_RASCO_SQ202_INFO() {
    SQ202_RASCOWANTSJOINT = 2;
    AI_REMOVEWEAPON(SELF);
    B_STANDUP();
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_15_03");
    B_MARVIN_USEFAKEJOINTTHROW();
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_03_05");
    INFO_CLEARCHOICES(0x15b30);
    INFO_ADDCHOICE(0x15b30, "Five.", 0x15b38);
    INFO_ADDCHOICE(0x15b30, "Ten.", 0x15b3a);
    INFO_ADDCHOICE(0x15b30, "Fifteen.", 0x15b3d);
    INFO_CLEARCHOICES(0x15b4b);
    INFO_ADDCHOICE(0x15b4b, "Five.", 0x15b38);
    INFO_ADDCHOICE(0x15b4b, "Ten.", 0x15b3a);
    INFO_ADDCHOICE(0x15b4b, "Fifteen.", 0x15b3d);
}

func void DIA_RASCO_SQ202_DEAL() {
    SQ202_FARMERGOODCOUNT = 10;
    if ((NPC_HASITEMS(OTHER, 0x8592)) == (9)) {
        B_GIVEINVITEMS(SELF, OTHER, 0x859b, (SQ202_RASCOGOLD) * (9));
        SQ202_EARNEDGOLD = (SQ202_EARNEDGOLD) + ((SQ202_RASCOGOLD) * (9));
    };
    if ((NPC_HASITEMS(OTHER, 0x8592)) <= (8)) {
        MARVINCURRENTJOINTS = NPC_HASITEMS(OTHER, 0x8592);
        B_GIVEINVITEMS(SELF, OTHER, 0x859b, (SQ202_RASCOGOLD) * (MARVINCURRENTJOINTS));
        SQ202_EARNEDGOLD = (SQ202_EARNEDGOLD) + ((SQ202_RASCOGOLD) * (MARVINCURRENTJOINTS));
    };
    if ((MARVINCURRENTJOINTS) >= (5)) {
        SQ202_FREDRIKSUSPICIOUS = TRUE;
    };
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_03");
    INFO_CLEARCHOICES(0x15b30);
    INFO_ADDCHOICE(0x15b30, "I prefer not to reveal my sources.", 0x15b36);
    INFO_ADDCHOICE(0x15b30, "I got it from a trader named Petra.", 0x15b37);
    INFO_CLEARCHOICES(0x15b4b);
    INFO_ADDCHOICE(0x15b4b, "I prefer not to reveal my sources.", 0x15b36);
    INFO_ADDCHOICE(0x15b4b, "I got it from a trader named Petra.", 0x15b37);
}

var int DIA_RASCO_SQ202_DEAL.MARVINCURRENTJOINTS = 0;
var int RASCO_CANTRADEJOINTS = 0;
func void DIA_RASCO_SQ202_DUNNO() {
    RASCO_CANTRADEJOINTS = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_06");
    B_GIVEPLAYERXP(XP_SQ202_GOODANWSER);
    AI_LOGENTRY(TOPIC_SQ202, LOG_SQ202_RASCO_JOINTS_V1);
    INFO_CLEARCHOICES(0x15b30);
    INFO_CLEARCHOICES(0x15b4b);
    LOG_CREATETOPIC(TOPIC_BARTER, LOG_NOTE);
    AI_LOGENTRY(TOPIC_BARTER, LOG_SILBACHBARTER_RASCO);
    NPC_SETREFUSETALK(SELF, 30);
}

func void DIA_RASCO_SQ202_FREDRIK() {
    SQ202_FARMERKNOWFREDRIK = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_08");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_09");
    AI_LOGENTRY(TOPIC_SQ202, LOG_SQ202_RASCO_JOINTS_V2);
    INFO_CLEARCHOICES(0x15b30);
    INFO_CLEARCHOICES(0x15b4b);
    NPC_SETREFUSETALK(SELF, 30);
}

func void DIA_RASCO_SQ202_5() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_10");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_11");
    SQ202_RASCOGOLD = 3;
    INFO_CLEARCHOICES(0x15b30);
    INFO_ADDCHOICE(0x15b30, "Four.", 0x15b39);
    INFO_ADDCHOICE(0x15b30, "Agreed.", 0x15b33);
    INFO_CLEARCHOICES(0x15b4b);
    INFO_ADDCHOICE(0x15b4b, "Four.", 0x15b39);
    INFO_ADDCHOICE(0x15b4b, "Agreed.", 0x15b33);
}

func void DIA_RASCO_SQ202_4() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_12");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_13");
    SQ202_RASCOGOLD = 4;
    DIA_RASCO_SQ202_DEAL();
}

func void DIA_RASCO_SQ202_10() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_14");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_15");
    SQ202_RASCOGOLD = 6;
    INFO_CLEARCHOICES(0x15b30);
    INFO_ADDCHOICE(0x15b30, "Eight.", 0x15b3b);
    INFO_ADDCHOICE(0x15b30, "Agreed.", 0x15b33);
    INFO_CLEARCHOICES(0x15b4b);
    INFO_ADDCHOICE(0x15b4b, "Eight.", 0x15b3b);
    INFO_ADDCHOICE(0x15b4b, "Agreed.", 0x15b33);
}

func void DIA_RASCO_SQ202_8() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_16");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_17");
    SQ202_RASCOGOLD = 5;
    INFO_CLEARCHOICES(0x15b30);
    INFO_ADDCHOICE(0x15b30, "Six.", 0x15b3c);
    INFO_ADDCHOICE(0x15b30, "Agreed.", 0x15b33);
    INFO_CLEARCHOICES(0x15b4b);
    INFO_ADDCHOICE(0x15b4b, "Six.", 0x15b3c);
    INFO_ADDCHOICE(0x15b4b, "Agreed.", 0x15b33);
}

func void DIA_RASCO_SQ202_6() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_18");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_19");
    SQ202_RASCOGOLD = 6;
    DIA_RASCO_SQ202_DEAL();
}

func void DIA_RASCO_SQ202_15() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_20");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_21");
    SQ202_RASCOGOLD = 8;
    INFO_CLEARCHOICES(0x15b30);
    INFO_ADDCHOICE(0x15b30, "Twelve.", 0x15b3e);
    INFO_ADDCHOICE(0x15b30, "Agreed.", 0x15b33);
    INFO_CLEARCHOICES(0x15b4b);
    INFO_ADDCHOICE(0x15b4b, "Twelve.", 0x15b3e);
    INFO_ADDCHOICE(0x15b4b, "Agreed.", 0x15b33);
}

func void DIA_RASCO_SQ202_12() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_22");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_23");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_24");
    SQ202_RASCOGOLD = 8;
    INFO_CLEARCHOICES(0x15b30);
    INFO_ADDCHOICE(0x15b30, "So be it.", 0x15b3f);
    INFO_ADDCHOICE(0x15b30, "Agreed.", 0x15b33);
    INFO_CLEARCHOICES(0x15b4b);
    INFO_ADDCHOICE(0x15b4b, "So be it.", 0x15b3f);
    INFO_ADDCHOICE(0x15b4b, "Agreed.", 0x15b33);
}

func void DIA_RASCO_SQ202_SHRUG() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_25");
    if ((SQ102_HELPEDRASCO) == (TRUE)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_26");
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_27");
        SQ202_RASCOGOLD = 10;
        DIA_RASCO_SQ202_DEAL();
        B_GIVEPLAYERXP(XP_SQ202_GOODTRADER);
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_28");
    INFO_CLEARCHOICES(0x15b30);
    INFO_CLEARCHOICES(0x15b4b);
}

instance DIA_RASCO_SELLJOINTS(C_INFO) {
    NPC = 0xe110;
    NR = 200;
    CONDITION = DIA_RASCO_SELLJOINTS_CONDITION;
    INFORMATION = DIA_RASCO_SELLJOINTS_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I have more joints for you.";
}

func int DIA_RASCO_SELLJOINTS_CONDITION() {
    if ((RASCO_CANTRADEJOINTS) == (TRUE)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int RASCO_COUNTALLJOINTS = 0;
func void DIA_RASCO_SELLJOINTS_CHOICES() {
    INFO_CLEARCHOICES(0x15b40);
    INFO_CLEARCHOICES(0x15b4b);
    RASCO_COUNTALLJOINTS = NPC_HASITEMS(HERO, 0x8592);
    if ((NPC_HASITEMS(OTHER, 0x8592)) >= (5)) {
        INFO_ADDCHOICE(0x15b40, "Sell 5 pieces.", 0x15b4a);
    };
    if ((NPC_HASITEMS(OTHER, 0x8592)) >= (1)) {
        INFO_ADDCHOICE(0x15b40, "Sell 1 piece.", 0x15b49);
    };
    ALL_STRING2 = CS4(DIALOG_ALL, " (", I2S(RASCO_COUNTALLJOINTS), ")");
    INFO_ADDCHOICE(0x15b40, ALL_STRING2, 0x15b48);
    INFO_ADDCHOICE(0x15b4b, DIALOG_BACK, 0x15b47);
    if ((NPC_HASITEMS(OTHER, 0x8592)) >= (5)) {
        INFO_ADDCHOICE(0x15b4b, "Sell 5 pieces.", 0x15b4a);
    };
    if ((NPC_HASITEMS(OTHER, 0x8592)) >= (1)) {
        INFO_ADDCHOICE(0x15b4b, "Sell 1 piece.", 0x15b49);
    };
    ALL_STRING = CS4(DIALOG_ALL, " (", I2S(RASCO_COUNTALLJOINTS), ")");
    INFO_ADDCHOICE(0x15b4b, ALL_STRING, 0x15b48);
    INFO_ADDCHOICE(0x15b40, DIALOG_BACK, 0x15b47);
}

var string DIA_RASCO_SELLJOINTS_CHOICES.ALL_STRING2 = "";
var string DIA_RASCO_SELLJOINTS_CHOICES.ALL_STRING = "";
func void DIA_RASCO_SELLJOINTS_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SellJoints_15_01");
    DIA_RASCO_SELLJOINTS_CHOICES();
}

func void DIA_RASCO_SELLJOINTS_BACK() {
    RASCO_COUNTALLJOINTS = 0;
    INFO_CLEARCHOICES(0x15b40);
    INFO_CLEARCHOICES(0x15b4b);
}

func void DIA_RASCO_SELLJOINTS_EVERYTHING() {
    NPC_REMOVEINVITEMS(SELF, 0x8592, RASCO_COUNTALLJOINTS);
    CREATEINVITEMS(SELF, 0x859b, (RASCO_COUNTALLJOINTS) * (SQ202_RASCOGOLD));
    B_GIVEINVITEMS(SELF, OTHER, 0x859b, (RASCO_COUNTALLJOINTS) * (SQ202_RASCOGOLD));
    DIA_RASCO_SELLJOINTS_CHOICES();
    B_GIVEINVITEMS(OTHER, SELF, 0x8592, RASCO_COUNTALLJOINTS);
}

func void DIA_RASCO_SELLJOINTS_JOINTONE() {
    NPC_REMOVEINVITEMS(SELF, 0x8592, 1);
    CREATEINVITEMS(SELF, 0x859b, SQ202_RASCOGOLD);
    B_GIVEINVITEMS(SELF, OTHER, 0x859b, SQ202_RASCOGOLD);
    DIA_RASCO_SELLJOINTS_CHOICES();
    B_GIVEINVITEMS(OTHER, SELF, 0x8592, 1);
}

func void DIA_RASCO_SELLJOINTS_JOINTFIVE() {
    NPC_REMOVEINVITEMS(SELF, 0x8592, 5);
    CREATEINVITEMS(SELF, 0x859b, (SQ202_RASCOGOLD) * (5));
    B_GIVEINVITEMS(SELF, OTHER, 0x859b, (SQ202_RASCOGOLD) * (5));
    DIA_RASCO_SELLJOINTS_CHOICES();
    B_GIVEINVITEMS(OTHER, SELF, 0x8592, 5);
}

instance DIA_RASCO_HELLO(C_INFO) {
    NPC = 0xe110;
    NR = 1;
    CONDITION = DIA_RASCO_HELLO_CONDITION;
    INFORMATION = DIA_RASCO_HELLO_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_RASCO_HELLO_CONDITION() {
    if (((SQ102_HELPRASCOWITHSHIT) >= (1)) || ((RASCO_CANTRADEJOINTS) == (TRUE))) {
        return FALSE;
    };
    if (((NPC_GETDISTTOWP(HERO, "VILLAGE_POORHOUSE04_SLEEP")) <= (500)) && ((NPC_REFUSETALK(SELF)) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_RASCO_HELLO_INFO() {
    B_STANDUP();
    AI_DRAWWEAPON(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Hello_03_01");
    INFO_CLEARCHOICES(0x15b4b);
    INFO_ADDCHOICE(0x15b4b, "Uh... nice hut.", 0x15b13);
    INFO_ADDCHOICE(0x15b4b, "Looks like I took the wrong turn.", 0x15b14);
    if (((SQ102_HELPEDOTHO) == (FALSE)) && ((LOG_GETSTATUS(MIS_SQ102)) == (LOG_RUNNING))) {
        if (NPC_KNOWSINFO(OTHER, 0x15bcf)) {
            if ((SQ102_RASCO_ABOUTOTHO) == (FALSE)) {
                INFO_ADDCHOICE(0x15b4b, "Otho sent me.", 0x15b15);
            };
        };
        if (((SQ102_HELPRASCOWITHSHIT) == (TRUE)) && ((SQ102_RASCO_JOBDONE) == (FALSE))) {
            if (((MOB_HASITEMS("SQ102_ALBYNSACK_CONTAINER", 0x90ac)) == (TRUE)) || ((MOB_HASITEMS("Q104_ALBYNSACK_CONTAINER", 0x90ac)) == (TRUE))) {
                INFO_ADDCHOICE(0x15b4b, "I did what you wanted.", 0x15b1f);
            };
        };
    };
    if (((SQ202_RASCOWANTSJOINT) == (TRUE)) && ((LOG_GETSTATUS(MIS_SQ202)) == (LOG_RUNNING))) {
        if ((NPC_HASITEMS(OTHER, 0x8592)) >= (1)) {
            INFO_ADDCHOICE(0x15b4b, "Apparently you're interested in a certain stuff.", 0x15b32);
        };
    };
    if ((RASCO_CANTRADEJOINTS) == (TRUE)) {
        if ((NPC_HASITEMS(OTHER, 0x8592)) >= (1)) {
            INFO_ADDCHOICE(0x15b4b, "I have more joints for you.", 0x15b46);
        };
    };
}

instance DIA_RASCO_AMBIENT(C_INFO) {
    NPC = 0xe110;
    NR = 200;
    CONDITION = DIA_RASCO_AMBIENT_CONDITION;
    INFORMATION = DIA_RASCO_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How are you doing?";
}

func int DIA_RASCO_AMBIENT_CONDITION() {
    return TRUE;
}

func void DIA_RASCO_AMBIENT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_Ambient_15_01");
    NPC_INITAMBIENTS(SELF, 2);
    if ((NPC_GETLASTAMBIENT(SELF)) == (1)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Ambient_03_02");
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Ambient_03_03");
    };
    if ((NPC_GETLASTAMBIENT(SELF)) == (2)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Ambient_03_04");
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Ambient_03_05");
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Ambient_03_06");
    };
}

instance DIA_RASCO_PICKPOCKET(C_INFO) {
    NPC = 0xe110;
    NR = 900;
    CONDITION = DIA_RASCO_PICKPOCKET_CONDITION;
    INFORMATION = DIA_RASCO_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_80;
}

func int DIA_RASCO_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_RASCO_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(0x15b51);
    INFO_ADDCHOICE(0x15b51, DIALOG_BACK, 0x15b55);
    INFO_ADDCHOICE(0x15b51, DIALOG_PICKPOCKET, 0x15b54);
}

func void DIA_RASCO_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (2)) {
        CREATEINVITEMS(SELF, 0x8592, 4);
        B_GIVEINVITEMS(SELF, OTHER, 0x8592, 4);
        B_PICKPOCKET_AMBIENT_TIER_2();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(0x15b51);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(0x15b51);
}

func void DIA_RASCO_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(0x15b51);
}

