func void EVENTSMANAGER_KQ406() {
    if ((LOG_GETSTATUS(MIS_KQ406)) != (LOG_RUNNING)) {
        return;
    };
    if ((KQ406_GOTWOOD_LOGENTRY) == (FALSE)) {
        if ((NPC_HASITEMS(HERO, 0x923c)) >= (1)) {
            KQ406_GOTWOOD_LOGENTRY = TRUE;
            B_LOGENTRY(TOPIC_KQ406, LOG_KQ406_GOTWOOD);
        };
    };
    if ((KQ406_CRATES_IDEA_LOGENTRY) == (FALSE)) {
        if ((NPC_GETDISTTOWP(HERO, "HARBOUR_KQ406_CRATES")) <= (300)) {
            KQ406_CRATES_IDEA_LOGENTRY = TRUE;
            B_LOGENTRY(TOPIC_KQ406, LOG_KQ406_CRATESIDEA);
        };
    };
    if ((KQ406_WAITFORSABOTEUR) == (1)) {
        if (((KQ406_WAITFORSABOTEUR_DAY) <= ((WLD_GETDAY()) - (1))) || ((NPC_GETDISTTOWP(HERO, "HARBOUR_PATH_199")) >= (0x1b58))) {
            KQ406_WAITFORSABOTEUR = 2;
            KQ406_PREPAREANGRYMOB();
        };
    };
    if ((KQ406_FIGHTWITHWORKER) == (1)) {
        if (((NPC_GETDISTTONPC(HERO, VLK_13676_WORKER)) >= (0x5dc)) && ((NPC_ISINSTATE(VLK_13676_WORKER, 0xf09f)) == (FALSE))) {
            KQ406_FIGHTWITHWORKER = 2;
            B_LOGENTRY(TOPIC_KQ406, LOG_KQ406_WORKERFIGHT_V2);
            B_STARTOTHERROUTINE(MIL_13382_HUXLAY, "KQ406_HARBOUR");
            TELEPORTNPCTOWP(0xd1d7, MIL_13382_HUXLAY.WP);
            NPC_SETATTITUDE(VLK_13676_WORKER, ATT_NEUTRAL);
            NPC_SETTEMPATTITUDE(VLK_13676_WORKER, ATT_NEUTRAL);
            VLK_13676_WORKER.AIVAR[1] = CRIME_NONE;
            VLK_13676_WORKER.AIVAR[0] = FIGHT_NONE;
            VLK_13676_WORKER.AIVAR[45] = AF_NONE;
            VLK_13676_WORKER.AIVAR[64] = TRUE;
            NPC_CLEARAIQUEUE(VLK_13676_WORKER);
        };
    };
    if ((KQ406_CHANGERICHARDRTN) == (1)) {
        if ((NPC_GETDISTTOWP(MIL_13490_RICHARD, "HARBOUR_HOUSE11_13")) <= (350)) {
            KQ406_CHANGERICHARDRTN = 2;
            B_STARTOTHERROUTINE(MIL_13490_RICHARD, "KQ406_ANSKAR");
            NPC_REFRESH(MIL_13490_RICHARD);
        };
    };
    if ((KQ406_WAITFORFINISHQUEST) == (1)) {
        if ((NPC_GETDISTTOWP(HERO, "PARTM5_CITYHALL_38")) <= (300)) {
            KQ406_WAITFORFINISHQUEST = 2;
            KQ406_FINISHCUTSCENE_PREPARE();
        };
    };
}

var int EVENTSMANAGER_KQ406.KQ406_GOTWOOD_LOGENTRY = 0;
var int EVENTSMANAGER_KQ406.KQ406_CRATES_IDEA_LOGENTRY = 0;
