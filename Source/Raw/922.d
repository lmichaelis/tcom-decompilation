func void TASSACKCHEST_APPLYFUNCION() {
    NPC = HLP_GETNPC(0x71b);
    NPCPTR = _@(0xbf5e);
    FF_APPLYEXTDATAGT(0xbf60, 0, -(1), NPCPTR);
}

instance TASSACKCHEST_APPLYFUNCION.NPC(C_NPC)
var int TASSACKCHEST_APPLYFUNCION.NPCPTR = 0;
func void TASSACKCHEST_APPLY() {
    if ((CURRENTLEVEL) == (ARCHOLOS_ZEN)) {
        if ((NPC_GETDISTTOWP(HERO, "PART4_TASSACK_03")) >= (0x1388)) {
            FF_REMOVE(0xbf60);
            TASSACKCHEST_SPAWNEASTEREGG = 0;
            B_STARTOTHERROUTINE(NONE_80000_LUCY, START);
            NPC_REFRESH(NONE_80000_LUCY);
            TELEPORTNPCTOWP(0xdac8, NONE_80000_LUCY.WP);
            B_STARTOTHERROUTINE(NONE_80001_DAWID, START);
            NPC_REFRESH(NONE_80001_DAWID);
            TELEPORTNPCTOWP(0xdacb, NONE_80001_DAWID.WP);
            B_STARTOTHERROUTINE(NONE_80002_MIKI, START);
            NPC_REFRESH(NONE_80002_MIKI);
            TELEPORTNPCTOWP(0xdace, NONE_80002_MIKI.WP);
            B_STARTOTHERROUTINE(NONE_80003_SHAREC, START);
            NPC_REFRESH(NONE_80003_SHAREC);
            TELEPORTNPCTOWP(0xdad1, NONE_80003_SHAREC.WP);
            B_STARTOTHERROUTINE(NONE_80004_KIEP, START);
            NPC_REFRESH(NONE_80004_KIEP);
            TELEPORTNPCTOWP(0xdad4, NONE_80004_KIEP.WP);
            MUSIC_DISABLEOVERRIDE();
            PRINTD("Poszli se");
        } else {
            PRINTD("Oddal siê to usunê koncert");
        } else {
            /* set_instance(0) */;
        };
    };
    if (((CURRENTLEVEL) == (ARCHOLOS_ENDGAME_ZEN)) || ((CURRENTLEVEL) == (ARCHOLOS_VOLFZACKE_ZEN))) {
        PRINTD("I tak nie zobaczysz efektów");
        FF_REMOVE(0xbf60);
    };
    PRINTD("Mogê funkcjê wykonaæ tylko w zenie Archolos! - TASSACKCHEST_Apply");
}

func void TASSACKCHEST_S0() {
    if ((((((MOB_HASITEMS("TASSACK_CHEST", 0x8546)) == (TRUE)) && ((MOB_HASITEMS("TASSACK_CHEST", 0x8547)) == (TRUE))) && ((MOB_HASITEMS("TASSACK_CHEST", 0x8548)) == (TRUE))) && ((MOB_HASITEMS("TASSACK_CHEST", 0x8549)) == (TRUE))) && ((MOB_HASITEMS("TASSACK_CHEST", 0x854a)) == (TRUE))) {
        if ((TASSACKCHEST_SPAWNEASTEREGG) == (0)) {
            TASSACKCHEST_SPAWNEASTEREGG = 1;
            MUSIC_OVERRIDETRACK(0x55c0);
            B_STARTOTHERROUTINE(NONE_80000_LUCY, "PLAY");
            NPC_REFRESH(NONE_80000_LUCY);
            TELEPORTNPCTOWP(0xdac8, NONE_80000_LUCY.WP);
            WLD_PLAYEFFECT("spellFX_INCOVATION_WHITE_NOLIGHT", NONE_80000_LUCY, NONE_80000_LUCY, 0, 0, 0, FALSE);
            B_STARTOTHERROUTINE(NONE_80001_DAWID, "PLAY");
            NPC_REFRESH(NONE_80001_DAWID);
            TELEPORTNPCTOWP(0xdacb, NONE_80001_DAWID.WP);
            B_STARTOTHERROUTINE(NONE_80002_MIKI, "PLAY");
            NPC_REFRESH(NONE_80002_MIKI);
            TELEPORTNPCTOWP(0xdace, NONE_80002_MIKI.WP);
            WLD_PLAYEFFECT("spellFX_INCOVATION_RED_NOLIGHT", NONE_80002_MIKI, NONE_80002_MIKI, 0, 0, 0, FALSE);
            B_STARTOTHERROUTINE(NONE_80003_SHAREC, "PLAY");
            NPC_REFRESH(NONE_80003_SHAREC);
            TELEPORTNPCTOWP(0xdad1, NONE_80003_SHAREC.WP);
            B_STARTOTHERROUTINE(NONE_80004_KIEP, "PLAY");
            NPC_REFRESH(NONE_80004_KIEP);
            TELEPORTNPCTOWP(0xdad4, NONE_80004_KIEP.WP);
            WLD_PLAYEFFECT("spellFX_INCOVATION_BLUE_NOLIGHT", NONE_80004_KIEP, NONE_80004_KIEP, 0, 0, 0, FALSE);
            TASSACKCHEST_APPLYFUNCION();
        };
    };
    HERO.AIVAR[4] = FALSE;
}

