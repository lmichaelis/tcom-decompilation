instance Q602_FIRSTCUTSCENE(CUTSCENE) {
    ONSTART = FUNCTION(0x16a4c);
}

func void Q602_FIRSTCUTSCENE_WAIT() {
    AI_WAITTILLEND(VLK_61070_ARMAR_Q602, HERO);
    AI_WAITTILLEND(VLK_61070_ARMAR_Q602, VLK_61070_ARMAR_Q602);
    AI_WAITTILLEND(DJG_10047_WOLFSON_Q602, HERO);
    AI_WAITTILLEND(DJG_10047_WOLFSON_Q602, VLK_61070_ARMAR_Q602);
    AI_WAITTILLEND(HERO, DJG_10047_WOLFSON_Q602);
    AI_WAITTILLEND(HERO, VLK_61070_ARMAR_Q602);
}

func void Q602_FIRSTCUTSCENE_START() {
    WLD_SENDTRIGGER("KM_Q602_CUTSCENE_01_B");
    FF_APPLYONCEEXT(0x16a50, 1000, 5);
    NPC_CLEARAIQUEUE(HERO);
    TELEPORTNPCTOWP(0x71b, "Q602_CUTSCENE_01_HERO");
    TELEPORTNPCTOWP(0xe86b, "Q602_CUTSCENE_01_WOLFSSON");
    TELEPORTNPCTOWP(0xead4, "Q602_CUTSCENE_01_TRADER");
    NPC_CLEARAIQUEUE(DJG_10047_WOLFSON_Q602);
    NPC_CLEARAIQUEUE(VLK_61070_ARMAR_Q602);
    Q602_FIRSTCUTSCENE_WAIT();
    AI_TURNTONPC(HERO, DJG_10047_WOLFSON_Q602);
    AI_WAIT(DJG_10047_WOLFSON_Q602, 0x3dcccccd);
    AI_WAIT(VLK_61070_ARMAR_Q602, 0x3dcccccd);
    AI_PLAYANI(DJG_10047_WOLFSON_Q602, "T_DEAD_WOLFSSON");
    AI_PLAYANI(VLK_61070_ARMAR_Q602, "T_DEAD_TRADER");
    AI_REMOVEWEAPON(VLK_61070_ARMAR_Q602);
    AI_FUNCTION(VLK_61070_ARMAR_Q602, 0x16a52);
    Q602_FIRSTCUTSCENE_WAIT();
    AI_FUNCTION(DJG_10047_WOLFSON_Q602, 0x16a4f);
    AI_FUNCTION(DJG_10047_WOLFSON_Q602, 0x16a4d);
    AI_SETWALKMODE(HERO, NPC_WALK);
    AI_GOTOWP(HERO, "PARTE2_PATH_08");
    AI_TURNTONPC(HERO, DJG_10047_WOLFSON_Q602);
    AI_WAIT(HERO, 0x3f000000);
    AI_FUNCTION(HERO, 0x16a4e);
}

func void Q602_FIRSTCUTSCENE_CHANGERTN_01() {
    B_STARTOTHERROUTINE(DJG_10047_WOLFSON_Q602, "Q602_OBSERVE");
    NPC_REFRESH(DJG_10047_WOLFSON_Q602);
}

func void Q602_FIRSTCUTSCENE_END() {
    WLD_SENDUNTRIGGER("KM_Q602_CUTSCENE_01");
    WLD_SENDUNTRIGGER("KM_Q602_CUTSCENE_02");
    WLD_SENDUNTRIGGER("KM_Q602_CUTSCENE_03");
    MDL_REMOVEOVERLAYMDS(DJG_10047_WOLFSON_Q602, "Humans_2HST2_NOANIMATION.MDS");
    Q602_FIRSTCUTSCENE_WOLFSSONATTACK();
    HERO.AIVAR[4] = FALSE;
}

func void Q602_FIRSTCUTSCENE_CHANGECAMERA() {
    WLD_SENDTRIGGER("KM_Q602_CUTSCENE_03");
    WLD_SENDUNTRIGGER("KM_Q602_CUTSCENE_02");
}

func void Q602_FIRSTCUTSCENE_TIMER() {
    Q602_FIRSTCUTSCENE_TIMER_COUNT = (Q602_FIRSTCUTSCENE_TIMER_COUNT) + (1);
    if ((Q602_FIRSTCUTSCENE_TIMER_COUNT) == (2)) {
        WLD_SENDTRIGGER("KM_Q602_CUTSCENE_02");
        WLD_SENDUNTRIGGER("KM_Q602_CUTSCENE_01");
        TELEPORTNPCTOWP(0x71b, "PARTM2_PATH_13");
    };
}

var int Q602_FIRSTCUTSCENE_TIMER.Q602_FIRSTCUTSCENE_TIMER_COUNT = 0;
func void Q602_FIRSTCUTSCENE_KILLYOURSELF() {
    B_KILLNPC(0xead4);
}

