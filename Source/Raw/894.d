func void CHAIRINNOS_S1() {
    HER = HLP_GETNPC(0xc3ab);
    if ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(HER))) {
        MOB_CHANGEFOCUSNAME("CHAIRINNOS", "MOBNAME_NOTHING");
        DIACAM_ENABLE();
        FADESCREENTOBLACKF(1, 0xbd6b, 1000);
    };
}

instance CHAIRINNOS_S1.HER(C_NPC)
func void CHAIRINNOS_FADESCREEN_MOVER_ENDANIMATION() {
    AI_USEMOB(HERO, NPC_GETDETECTEDMOB(HERO), -(1));
}

func void CHAIRINNOS_FADESCREEN_MOVER() {
    if ((SQ309_CHAIRWORKINNOS_DONE) == (0)) {
        NPC_CLEARAIQUEUE(HERO);
        WLD_INSERTITEM(0x91a3, "FP_PARTM7_GOLDENINNOS_QUESTITEM_01");
        WLD_INSERTITEM(0x91a4, "FP_PARTM7_GOLDENINNOS_QUESTITEM_02");
        FF_APPLYONCEEXTGT(0xbd6c, 0, -(1));
        HERO.AIVAR[4] = FALSE;
        SQ309_CHAIRWORKINNOS = FALSE;
        SQ309_CHAIRWORKINNOS_DONE = 1;
    };
    if ((SQ309_CHAIRWORKINNOS_DONE) == (3)) {
        NPC_CLEARAIQUEUE(HERO);
        FF_APPLYONCEEXTGT(0xbd6c, 0, -(1));
        HERO.AIVAR[4] = FALSE;
        SQ309_CHAIRWORKINNOS = FALSE;
        SQ309_CHAIRWORKINNOS_DONE = 4;
    };
    B_PASSTIME(2);
    B_ENDPRODUCTIONDIALOG();
    FADESCREENFROMBLACKF(1, 0xbd6a, 1000);
}

func void SQ309_DOORCHANGE() {
    if ((SQ309_DOORCHANGECOLLISION) == (0)) {
        PRINTD("Rozpoczynam - SQ309_DoorChange");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("KM_GOLDENINNOS_MOVER");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        CHANGEVOBCOLLISION("DOOR_GOLDENINNOS_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("DOOR_GOLDENINNOS_02", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("KM_GOLDENINNOS_MOVER");
        SQ309_DOORCHANGECOLLISION = 1;
    };
    if (((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ309_DoorChange");
        CHANGEVOBCOLLISION("DOOR_GOLDENINNOS_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("DOOR_GOLDENINNOS_02", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(0xbd6c);
        SQ309_DOORCHANGECOLLISION = 0;
    };
}

var int SQ309_DOORCHANGE.SQ309_DOORCHANGECOLLISION = 0;
instance SQ309_DOORCHANGE.MOVER1(ZCMOVER)
var int SQ309_DOORCHANGE.MOVPTR1 = 0;
