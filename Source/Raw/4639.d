instance SQ416_PARTYCUTSCENE(CUTSCENE) {
    ONSTART = FUNCTION(0x16b37);
}

func void SQ416_PARTYCUTSCENE_START() {
    SQ416_PARTYCUTSCENEENABLE = 2;
    DIACAM_DISABLE();
    WLD_SENDTRIGGER("SQ416_PART_01");
    TELEPORTNPCTOWP(0x71b, "VILLAGE_SQ416_DRINK");
    B_TURNTONPC(HERO, BAU_704_BASTIAN);
    AI_FUNCTION(HERO, 0x16b38);
    SQ416_DRINKBEER_MARVIN();
}

func void SQ416_PARTYCUTSCENE_END() {
    SQ416_PARTYCUTSCENEENABLE_RAMSEYPARTY_PREPARENPC();
    FF_APPLYONCEEXTGT(0xf859, 0, -(1));
    FADESCREENTOBLACKF(5, 0x16b39, 1000);
}

func void SQ416_PARTYCUTSCENE_END_FADESCREEN() {
    WLD_SETTIME(19, 0);
    FF_APPLYONCEEXT(0x16b3a, 1000, 7);
    WLD_SENDTRIGGER("SQ416_PART_02");
    WLD_SENDUNTRIGGER("SQ416_PART_01");
    FADESCREENFROMBLACK(3);
}

func void SQ416_PARTYCUTSCENEENABLE_PART2_APPLY() {
    SQ416_PARTYCUTSCENEENABLE_PART2_COUNT = (SQ416_PARTYCUTSCENEENABLE_PART2_COUNT) + (1);
    if ((SQ416_PARTYCUTSCENEENABLE_PART2_COUNT) == (5)) {
        WLD_SENDTRIGGER("SQ416_PART_03");
        WLD_SENDUNTRIGGER("SQ416_PART_02");
        SQ416_DRINKBEER_MARVIN();
        TELEPORTNPCTOWP(0xe09d, "VILLAGE_PUB_03");
        B_STARTOTHERROUTINE(BAU_700_ALBYN, "SQ416_VILLAGE_INN");
        NPC_REFRESH(BAU_700_ALBYN);
        AI_GOTONPC(BAU_700_ALBYN, HERO);
    };
    if ((SQ416_PARTYCUTSCENEENABLE_PART2_COUNT) == (7)) {
        SQ416_PARTYCUTSCENEENABLE = 3;
        HERO.AIVAR[4] = FALSE;
    };
}

var int SQ416_PARTYCUTSCENEENABLE_PART2_APPLY.SQ416_PARTYCUTSCENEENABLE_PART2_COUNT = 0;
