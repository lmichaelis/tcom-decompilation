var int LUTZ_BATTLEINFORMATION = 0;
var int LUTZ_ORCSINFORMATION = 0;
var int LUTZ_GENERALLEEINFORMATION = 0;
var int LUTZ_INFORMATION = 0;
instance DIA_LUTZ_EXIT(C_INFO) {
    NPC = 0xccc4;
    NR = 999;
    CONDITION = DIA_LUTZ_EXIT_CONDITION;
    INFORMATION = DIA_LUTZ_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_LUTZ_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_LUTZ_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

var int LUTZ_WEKNOWLEE = 0;
instance DIA_LUTZ_HELLO(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_HELLO_CONDITION;
    INFORMATION = DIA_LUTZ_HELLO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Interesting armor.";
}

func int DIA_LUTZ_HELLO_CONDITION() {
    return TRUE;
}

func void DIA_LUTZ_HELLO_CHOICE() {
    INFO_CLEARCHOICES(0x10609);
    if ((LUTZ_BATTLEINFORMATION) == (FALSE)) {
        INFO_ADDCHOICE(0x10609, "What's the situation on the front?", 0x1060d);
    };
    if ((LUTZ_ORCSINFORMATION) == (FALSE)) {
        INFO_ADDCHOICE(0x10609, "Tell me about the orcs.", 0x1060e);
    };
    if (((LUTZ_GENERALLEEINFORMATION) == (FALSE)) && ((LUTZ_WEKNOWLEE) == (TRUE))) {
        INFO_ADDCHOICE(0x10609, "Who is this General Lee?", 0x1060f);
    };
    if ((LUTZ_INFORMATION) >= (1)) {
        INFO_ADDCHOICE(0x10609, "Thanks for the information. I have to go now.", 0x10610);
    };
}

func void DIA_LUTZ_HELLO_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_03_03");
    AI_STARTFACEANI(OTHER, S_SURPRISE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_03_05");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_03_06");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_03_08");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_03_09");
    if ((LUTZ_INFORMATION) < (7)) {
        DIA_LUTZ_HELLO_CHOICE();
    };
}

func void DIA_LUTZ_HELLO_BATTLE() {
    LUTZ_BATTLEINFORMATION = TRUE;
    LUTZ_INFORMATION = (LUTZ_INFORMATION) + (1);
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Battle_15_01");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Battle_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Battle_03_03");
    LUTZ_WEKNOWLEE = TRUE;
    AI_STARTFACEANI(OTHER, S_SAD, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Battle_15_04");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Battle_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Battle_03_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Battle_03_07");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Battle_03_08");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Battle_03_09");
    AI_STARTFACEANI(OTHER, S_SURPRISE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Battle_15_10");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Battle_03_11");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Battle_03_12");
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
    if ((LUTZ_INFORMATION) < (7)) {
        DIA_LUTZ_HELLO_CHOICE();
    };
}

func void DIA_LUTZ_HELLO_ORCS() {
    LUTZ_ORCSINFORMATION = TRUE;
    LUTZ_INFORMATION = (LUTZ_INFORMATION) + (1);
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Orcs_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Orcs_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Orcs_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Orcs_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Orcs_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Orcs_03_06");
    if ((LUTZ_INFORMATION) < (7)) {
        DIA_LUTZ_HELLO_CHOICE();
    };
}

func void DIA_LUTZ_HELLO_GENERALLEE() {
    LUTZ_GENERALLEEINFORMATION = TRUE;
    LUTZ_INFORMATION = (LUTZ_INFORMATION) + (1);
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_GeneralLee_15_01");
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_GeneralLee_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_GeneralLee_15_03");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_GeneralLee_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_GeneralLee_03_05");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_GeneralLee_03_06");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_GeneralLee_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_GeneralLee_03_08");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_GeneralLee_03_09");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_GeneralLee_03_10");
    AI_RESETFACEANI(SELF);
    if ((LUTZ_INFORMATION) < (7)) {
        DIA_LUTZ_HELLO_CHOICE();
    };
}

func void DIA_LUTZ_HELLO_GOODBYE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Goodbye_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Goodbye_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Goodbye_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Goodbye_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Goodbye_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Goodbye_03_06");
    INFO_CLEARCHOICES(0x10609);
    INFO_ADDCHOICE(0x10609, "I'm sorry, I don't know anyone like that.", 0x10612);
    INFO_ADDCHOICE(0x10609, "Martha?! Are you talking about that rough and spiteful hag?", 0x10611);
}

func void DIA_LUTZ_HELLO_GOODBYE_GRANDMA() {
    if (TORCH_HEROHOLDINGTORCH()) {
        TORCH_UNEQUIP();
    };
    AI_STARTFACEANI(OTHER, S_SURPRISE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Grandma_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Grandma_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Grandma_03_03");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Grandma_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Grandma_03_05");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Grandma_15_06");
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Grandma_03_07");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Grandma_15_08");
    AI_REMOVEWEAPON(OTHER);
    AI_UNREADYSPELL(OTHER);
    AI_PLAYANIBS(OTHER, "T_STAND_2_LGUARD_HERO", BS_SIT);
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Grandma_03_09");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Grandma_15_10");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Grandma_03_11");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Grandma_15_12");
    AI_PLAYANIBS(OTHER, "T_REMOVE_LGUARD", BS_STAND);
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Grandma_03_13");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Grandma_03_14");
    INFO_CLEARCHOICES(0x10609);
    INFO_ADDCHOICE(0x10609, "I don't have time for this.", 0x10614);
    INFO_ADDCHOICE(0x10609, "The road to Silbach is long and dangerous...", 0x10613);
}

func void DIA_LUTZ_HELLO_GOODBYE_DONTKNOW() {
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_DontKnow_15_01");
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_DontKnow_03_02");
    SQ213_TAKEQUEST = TRUE;
    SQ213_KNOWMARTHA = 1;
    LUTZ_INFORMATION = 7;
    INFO_CLEARCHOICES(0x10609);
    AI_STOPPROCESSINFOS(SELF);
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
}

func void DIA_LUTZ_HELLO_GOODBYE_GRANDMA_SILBACH() {
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Silbach_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_Silbach_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_Silbach_15_03");
    INFO_CLEARCHOICES(0x10609);
    AI_STOPPROCESSINFOS(SELF);
    LUTZ_INFORMATION = 7;
    LOG_CREATETOPIC(TOPIC_SQ213, LOG_MISSION);
    LOG_SETSTATUS(_@(MIS_SQ213), TOPIC_SQ213, LOG_RUNNING);
    AI_LOGENTRY(TOPIC_SQ213, LOG_SQ213_START);
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
}

func void DIA_LUTZ_HELLO_GOODBYE_GRANDMA_NOTIME() {
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_HELLO_NoTime_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_HELLO_NoTime_03_02");
    SQ213_TAKEQUEST = TRUE;
    SQ213_KNOWMARTHA = 2;
    LUTZ_INFORMATION = 7;
    INFO_CLEARCHOICES(0x10609);
    AI_STOPPROCESSINFOS(SELF);
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
}

instance DIA_LUTZ_BATTLE(C_INFO) {
    NPC = 0xccc4;
    NR = 2;
    CONDITION = DIA_LUTZ_BATTLE_CONDITION;
    INFORMATION = DIA_LUTZ_BATTLE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What's the situation on the front?";
}

func int DIA_LUTZ_BATTLE_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x10609)) && ((LUTZ_BATTLEINFORMATION) == (FALSE))) && ((Q509_LUTZVOLFZACKE) == (0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_BATTLE_INFO() {
    DIA_LUTZ_HELLO_BATTLE();
}

instance DIA_LUTZ_ORCS(C_INFO) {
    NPC = 0xccc4;
    NR = 3;
    CONDITION = DIA_LUTZ_ORCS_CONDITION;
    INFORMATION = DIA_LUTZ_ORCS_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Tell me something about orcs.";
}

func int DIA_LUTZ_ORCS_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x10609)) && ((LUTZ_ORCSINFORMATION) == (FALSE))) && ((Q509_LUTZVOLFZACKE) == (0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_ORCS_INFO() {
    DIA_LUTZ_HELLO_ORCS();
}

instance DIA_LUTZ_GENERALLEE(C_INFO) {
    NPC = 0xccc4;
    NR = 4;
    CONDITION = DIA_LUTZ_GENERALLEE_CONDITION;
    INFORMATION = DIA_LUTZ_GENERALLEE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Who is this General Lee?";
}

func int DIA_LUTZ_GENERALLEE_CONDITION() {
    if ((((NPC_KNOWSINFO(OTHER, 0x10609)) && ((LUTZ_GENERALLEEINFORMATION) == (FALSE))) && ((Q509_LUTZVOLFZACKE) == (0))) && ((LUTZ_WEKNOWLEE) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_GENERALLEE_INFO() {
    DIA_LUTZ_HELLO_GENERALLEE();
}

instance DIA_LUTZ_TAKEQUEST(C_INFO) {
    NPC = 0xccc4;
    NR = 5;
    CONDITION = DIA_LUTZ_TAKEQUEST_CONDITION;
    INFORMATION = DIA_LUTZ_TAKEQUEST_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I'm going to Silbach. You still want me to talk to Martha?";
}

func int DIA_LUTZ_TAKEQUEST_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x10609)) && ((SQ213_TAKEQUEST) == (TRUE))) && ((SQ213_KNOWMARTHA) == (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_TAKEQUEST_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_TakeQuest_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_TakeQuest_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_TakeQuest_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_TakeQuest_03_04");
    SQ213_TAKEQUEST = FALSE;
    LOG_CREATETOPIC(TOPIC_SQ213, LOG_MISSION);
    LOG_SETSTATUS(_@(MIS_SQ213), TOPIC_SQ213, LOG_RUNNING);
    AI_LOGENTRY(TOPIC_SQ213, LOG_SQ213_START);
    AI_RESETFACEANI(SELF);
}

instance DIA_LUTZ_MARTHATAKEQUEST(C_INFO) {
    NPC = 0xccc4;
    NR = 6;
    CONDITION = DIA_LUTZ_MARTHATAKEQUEST_CONDITION;
    INFORMATION = DIA_LUTZ_MARTHATAKEQUEST_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I just remembered! You mean Martha from the inn?";
}

func int DIA_LUTZ_MARTHATAKEQUEST_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x10609)) && ((SQ213_TAKEQUEST) == (TRUE))) && ((SQ213_KNOWMARTHA) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_MARTHATAKEQUEST_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaTakeQuest_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaTakeQuest_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaTakeQuest_15_03");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaTakeQuest_03_04");
    SQ213_TAKEQUEST = FALSE;
    LOG_CREATETOPIC(TOPIC_SQ213, LOG_MISSION);
    LOG_SETSTATUS(_@(MIS_SQ213), TOPIC_SQ213, LOG_RUNNING);
    AI_LOGENTRY(TOPIC_SQ213, LOG_SQ213_START);
    AI_RESETFACEANI(SELF);
}

instance DIA_LUTZ_MARTHA(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_MARTHA_CONDITION;
    INFORMATION = DIA_LUTZ_MARTHA_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I talked to Martha.";
}

func int DIA_LUTZ_MARTHA_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 0x15862)) && ((LOG_GETSTATUS(MIS_SQ213)) == (LOG_RUNNING))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_MARTHA_COMEBACK_HER() {
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_Her_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_Her_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_Her_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_Her_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_Her_03_06");
    AI_LOGENTRY(TOPIC_SQ213, LOG_SQ213_PLOTTHICKENS);
    CREATEINVITEMS(SELF, 0x859b, MIST_LUTZDEBT);
    B_GIVEINVITEMS(SELF, OTHER, 0x859b, MIST_LUTZDEBT);
    SQ213_LUTZDEBTGIVEN = 1;
    SQ213_LUTZDEBTGIVEN_DAY = WLD_GETDAY();
    INFO_CLEARCHOICES(0x10624);
    INFO_ADDCHOICE(0x10624, "(Take care of other matters)", 0x10628);
    INFO_ADDCHOICE(0x10624, "(Go to Martha)", 0x10627);
}

func void DIA_LUTZ_MARTHA_TELEPORT() {
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 0xf45f);
}

func void DIA_LUTZ_MARTHA_LATER() {
    INFO_CLEARCHOICES(0x10639);
    INFO_CLEARCHOICES(0x10624);
}

func void DIA_LUTZ_MARTHA_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_15_01");
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_03_04");
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_15_05");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_03_06");
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_15_07");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_03_08");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_03_09");
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_03_10");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_15_11");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_03_12");
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_15_13");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_03_14");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_15_15");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_03_16");
    INFO_CLEARCHOICES(0x10624);
    INFO_ADDCHOICE(0x10624, "Start by paying off your debt.", 0x1062a);
    INFO_ADDCHOICE(0x10624, "Better get back to the mainland.", 0x1062b);
}

func void DIA_LUTZ_MARTHA_DEBT() {
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_Debt_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_Debt_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_Debt_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_Debt_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_Debt_15_05");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_Debt_03_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_Debt_03_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_Debt_03_08");
    AI_STARTFACEANI(OTHER, S_SERIOUS, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_Debt_15_09");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_Debt_03_10");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_Debt_15_11");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_Debt_03_12");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_Debt_15_13");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_Debt_03_14");
    DIA_LUTZ_MARTHA_COMEBACK_HER();
}

func void DIA_LUTZ_MARTHA_COMEBACK() {
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_ComeBack_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_ComeBack_03_02");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_ComeBack_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_ComeBack_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_ComeBack_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_ComeBack_03_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_ComeBack_03_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_Debt_03_08");
    AI_STARTFACEANI(OTHER, S_SERIOUS, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Martha_Debt_15_09");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Martha_Debt_03_10");
    DIA_LUTZ_MARTHA_COMEBACK_HER();
}

instance DIA_LUTZ_ANGRY(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_ANGRY_CONDITION;
    INFORMATION = DIA_LUTZ_ANGRY_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_LUTZ_ANGRY_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ213)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x10624))) && ((SQ213_LUTZANGRY) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void LUTZ_ARENAFIGHT() {
    SQ213_LUTZANGRY = 2;
    SELF.AIVAR[45] = AF_RUNNING;
    AI_STOPPROCESSINFOS(SELF);
    B_ATTACK(SELF, OTHER, AR_NONE, 1);
}

func void DIA_LUTZ_ANGRY_INFO() {
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Angry_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_Angry_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_Angry_03_03");
    AI_RESETFACEANI(SELF);
    LUTZ_ARENAFIGHT();
}

instance DIA_LUTZ_FIGHTRESULT(C_INFO) {
    NPC = 0xccc4;
    NR = 2;
    CONDITION = DIA_LUTZ_FIGHTRESULT_CONDITION;
    INFORMATION = DIA_LUTZ_FIGHTRESULT_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_LUTZ_FIGHTRESULT_CONDITION() {
    if ((LOG_GETSTATUS(MIS_SQ213)) == (LOG_RUNNING)) {
        if ((SQ213_LUTZANGRY) == (2)) {
            if (((SELF.AIVAR[64]) == (FALSE)) && ((SELF.AIVAR[0]) != (FIGHT_NONE))) {
                if ((SELF.AIVAR[45]) != (AF_NONE)) {
                    return TRUE;
                };
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_FIGHTRESULT_INFO() {
    if ((SELF.AIVAR[0]) == (FIGHT_WON)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Lutz_FightResult_03_01");
        AI_OUTPUT(SELF, OTHER, "DIA_Lutz_FightResult_03_02");
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_FightResult_03_03");
    if ((OTHER.GUILD) == (GIL_MIL)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Lutz_FightResult_03_04");
        AI_OUTPUT(OTHER, SELF, "DIA_Lutz_FightResult_15_05");
    };
    if ((OTHER.GUILD) == (GIL_SLD)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Lutz_FightResult_03_06");
        AI_OUTPUT(OTHER, SELF, "DIA_Lutz_FightResult_15_07");
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_FightResult_03_08");
    AI_LOGENTRY(TOPIC_SQ213, LOG_SQ213_FAIL);
    LOG_SETSTATUS(_@(MIS_SQ213), TOPIC_SQ213, LOG_FAILED);
    SQ213_LUTZANGRY = 3;
    AI_STOPPROCESSINFOS(SELF);
    SELF.AIVAR[45] = AF_NONE;
    SELF.AIVAR[64] = TRUE;
}

instance DIA_LUTZ_GOAWAY(C_INFO) {
    NPC = 0xccc4;
    NR = 3;
    CONDITION = DIA_LUTZ_GOAWAY_CONDITION;
    INFORMATION = DIA_LUTZ_GOAWAY_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_LUTZ_GOAWAY_CONDITION() {
    if (((((SQ213_LUTZANGRY) == (3)) && (NPC_KNOWSINFO(OTHER, 0x10630))) && (NPC_ISINSTATE(SELF, 0xf09f))) || ((((SQ213_SONGRESULT) == (7)) && (NPC_KNOWSINFO(OTHER, 0x1064a))) && (NPC_ISINSTATE(SELF, 0xf09f)))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_GOAWAY_INFO() {
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_FightResult_03_02");
    AI_STOPPROCESSINFOS(SELF);
    AI_RESETFACEANI(SELF);
}

instance DIA_LUTZ_MARTHARESULT(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_MARTHARESULT_CONDITION;
    INFORMATION = DIA_LUTZ_MARTHARESULT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "As for Martha...";
}

func int DIA_LUTZ_MARTHARESULT_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 0x10624)) && ((LOG_GETSTATUS(MIS_SQ213)) == (LOG_RUNNING))) && ((SQ213_EVERYTHINGREADY) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_MARTHARESULT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_02");
    if ((SQ213_LUTZDEBTGIVEN) == (2)) {
        AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_05");
        AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_06");
        SQ213_LUTZREADYCOUNT = (SQ213_LUTZREADYCOUNT) + (1);
        if ((SQ213_VIKTORWAY) == (1)) {
            AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_07");
            AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_08");
            AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_09");
        } else if ((SQ213_VIKTORWAY) == (2)) {
            AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_10");
            AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_11");
        };
        if (((SQ213_BASTIANINFORMATION) == (3)) || (NPC_KNOWSINFO(OTHER, 0x158ce))) {
            if ((SQ213_VIKTORWAY) == (1)) {
                AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_12");
            } else {
                AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_18");
                AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_19");
            } else {
                AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_13");
            } else if (((SQ213_MUSICANNOHELP) == (FALSE)) && ((SQ213_MARVINKNOWHOWTOPLAY) == (FALSE))) {
                AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_14");
                AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_15");
                AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_16");
                AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_43");
                AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_17");
            };
            SQ213_LUTZREADYCOUNT = (SQ213_LUTZREADYCOUNT) + (1);
        };
        if ((SQ213_BASTIANBOUGHTFOOD) == (TRUE)) {
            AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_31");
            AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_32");
            AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_33");
            AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_34");
            SQ213_LUTZREADYCOUNT = (SQ213_LUTZREADYCOUNT) + (1);
        };
        if ((SQ213_ORCHARDREADY) == (TRUE)) {
            AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_24");
            AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_25");
            AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_26");
            AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_27");
            SQ213_LUTZREADYCOUNT = (SQ213_LUTZREADYCOUNT) + (1);
        };
        if ((SQ213_GOTVINE) != (0)) {
            if ((SQ213_GOTVINE) == (1)) {
                AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_22");
                AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_23");
            } else {
                AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_20");
                AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_21");
            } else {
                SQ213_LUTZREADYCOUNT = (SQ213_LUTZREADYCOUNT) + (1);
            };
        };
        if ((SQ213_MUSICANNOHELP) == (TRUE)) {
            AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_28");
            AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_29");
            AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_30");
        };
        if ((SQ213_MARVINKNOWHOWTOPLAY) == (TRUE)) {
            if ((SQ213_KARINWILLSING) == (FALSE)) {
                AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_35");
                AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_36");
                AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_37");
            } else {
                AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_39");
                AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_40");
                AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_41");
                AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_42");
            } else {
                AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_38");
            } else {
                SQ213_LUTZREADYCOUNT = (SQ213_LUTZREADYCOUNT) + (1);
            };
        };
    };
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_MarthaResult_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_MarthaResult_03_04");
    if ((SQ213_LUTZREADYCOUNT) == (6)) {
        SQ213_EVERYTHINGREADY = 1;
    };
    SQ213_LUTZREADYCOUNT = 0;
}

instance DIA_LUTZ_SQ213READY(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_SQ213READY_CONDITION;
    INFORMATION = DIA_LUTZ_SQ213READY_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "It's all taken care of.";
}

func int DIA_LUTZ_SQ213READY_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ213)) == (LOG_RUNNING)) && ((SQ213_EVERYTHINGREADY) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_SQ213READY_INFO() {
    SQ213_PREPAREBLANKET();
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_SQ213Ready_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_SQ213Ready_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_SQ213Ready_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_SQ213Ready_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_SQ213Ready_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_SQ213Ready_03_06");
    B_STANDUP();
    AI_PLAYANI(SELF, "T_PLUNDER");
    AI_FUNCTION(SELF, 0x1063c);
    AI_LOGENTRY(TOPIC_SQ213, LOG_SQ213_ALMOSTREADY);
    NPC_EXCHANGEROUTINE(SELF, ORCHARD);
    INFO_CLEARCHOICES(0x10639);
    INFO_ADDCHOICE(0x10639, "(Take care of other matters)", 0x10628);
    INFO_ADDCHOICE(0x10639, "(Go to Martha)", 0x10627);
}

func void LUTZ_SQ213_CHANGEARMOR_VLK() {
    if ((NPC_HASITEMS(MIL_6318_LUTZ, 0x8add)) == (0)) {
        CREATEINVITEMS(MIL_6318_LUTZ, 0x8add, 1);
    };
    ITM = NPC_GETEQUIPPEDARMOR(MIL_6318_LUTZ);
    if ((NPC_HASEQUIPPEDARMOR(MIL_6318_LUTZ)) == (TRUE)) {
        if ((HLP_ISITEM(ITM, 0x8add)) == (FALSE)) {
            AI_EQUIPARMOR(MIL_6318_LUTZ, 0x8add);
        };
    };
    AI_EQUIPARMOR(MIL_6318_LUTZ, 0x8add);
    NPC_REMOVEINVITEMS(MIL_6318_LUTZ, 0x8b1f, 1);
}

instance LUTZ_SQ213_CHANGEARMOR_VLK.ITM(C_ITEM)
func void LUTZ_SQ213_CHANGEARMOR_GRD() {
    if ((NPC_HASITEMS(MIL_6318_LUTZ, 0x8b1f)) == (0)) {
        CREATEINVITEMS(MIL_6318_LUTZ, 0x8b1f, 1);
    };
    ITM = NPC_GETEQUIPPEDARMOR(MIL_6318_LUTZ);
    if ((NPC_HASEQUIPPEDARMOR(MIL_6318_LUTZ)) == (TRUE)) {
        if ((HLP_ISITEM(ITM, 0x8b1f)) == (FALSE)) {
            AI_EQUIPARMOR(MIL_6318_LUTZ, 0x8b1f);
        };
    };
    AI_EQUIPARMOR(MIL_6318_LUTZ, 0x8b1f);
    NPC_REMOVEINVITEMS(MIL_6318_LUTZ, 0x8add, 1);
}

instance LUTZ_SQ213_CHANGEARMOR_GRD.ITM(C_ITEM)
instance DIA_LUTZ_FINISHMIST(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_FINISHMIST_CONDITION;
    INFORMATION = DIA_LUTZ_FINISHMIST_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I'm here. Can we get started?";
}

func int DIA_LUTZ_FINISHMIST_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ213)) == (LOG_RUNNING)) && ((SQ213_EVERYTHINGREADY) == (2))) && ((NPC_GETDISTTOWP(SELF, "PART9_PATH_75")) <= (500))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_SONG() {
    if ((SQ213_KARINWILLSING) == (TRUE)) {
        AI_OUTPUT(OTHER, SELF, "DIA_Lutz_FinishMist_15_09");
        SQ213_EVERYTHINGREADY = 4;
    };
    AI_STOPPROCESSINFOS(SELF);
    if ((SQ213_KARINWILLSING) == (FALSE)) {
        AI_FUNCTION(SELF, 0x10644);
    };
}

func void DIA_LUTZ_FINISHMIST_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_FinishMist_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_FinishMist_03_02");
    if ((NPC_HASITEMS(OTHER, 0x922d)) >= (1)) {
        AI_OUTPUT(OTHER, SELF, "DIA_Lutz_FinishMist_15_03");
        AI_OUTPUT(SELF, OTHER, "DIA_Lutz_FinishMist_03_04");
        AI_OUTPUT(SELF, OTHER, "DIA_Lutz_FinishMist_03_05");
        B_GIVEINVITEMS(OTHER, SELF, 0x922d, 1);
        SQ213_BASKETFOODRESULT = 1;
        DIA_LUTZ_SONG();
    };
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_FinishMist_15_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_FinishMist_03_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_FinishMist_03_08");
    SQ213_BASKETFOODRESULT = 2;
    DIA_LUTZ_SONG();
}

func void MIST_SONGWITHOUTKARIN() {
    FADESCREENTOBLACKF(1, 0x10645, 1000);
}

func void MIST_SONGWITHOUTKARIN_FADESCREEN() {
    WLD_SETTIME(19, 10);
    SQ213_EVERYTHINGREADY = 3;
    HERO.AIVAR[4] = TRUE;
    FF_APPLYONCEEXT(0xf456, 75, 4);
}

instance DIA_LUTZ_SQ213TRIALOG(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_SQ213TRIALOG_CONDITION;
    INFORMATION = DIA_LUTZ_SQ213TRIALOG_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_LUTZ_SQ213TRIALOG_CONDITION() {
    if ((LOG_GETSTATUS(MIS_SQ213)) == (LOG_RUNNING)) {
        if (((SQ213_EVERYTHINGREADY) == (6)) || ((SQ213_EVERYTHINGREADY) == (7))) {
            if (((NPC_GETDISTTOWP(MIL_6318_LUTZ, "PART9_CUTSCENE_LUTZ_01")) <= (500)) && ((NPC_GETDISTTOWP(BAU_703_MARTHA, "PART9_CUTSCENE_MARTHA_01")) <= (500))) {
                return TRUE;
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_AFTERSONG_DAY_COUNT() {
    SQ213_AFTERSONG_CHECK = TRUE;
    SQ213_AFTERSONG_DAY = WLD_GETDAY();
}

func void DIA_LUTZ_SQ213TRIALOG_INFO() {
    if (WLD_ISTIME(19, 0, 4, 0)) {
        AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ213Trialog_Result_15_04");
        AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ213Trialog_Result_03_05");
    };
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ213Trialog_03_06");
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ213Trialog_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ213Trialog_03_08");
    AI_LOGENTRY(TOPIC_SQ213, LOG_SQ213_WEROCK);
    SQ213_SONGRESULT = 2;
    AI_STOPPROCESSINFOS(SELF);
    DIA_LUTZ_AFTERSONG_DAY_COUNT();
}

instance DIA_LUTZ_FINISHQUEST(C_INFO) {
    NPC = 0xccc4;
    NR = 3;
    CONDITION = DIA_LUTZ_FINISHQUEST_CONDITION;
    INFORMATION = DIA_LUTZ_FINISHQUEST_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "So, Lutz, how did it go?";
}

func int DIA_LUTZ_FINISHQUEST_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ213)) == (LOG_RUNNING)) && ((SQ213_AFTERSONG_CHECK) == (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_FINISHQUEST_INFO() {
    SQ213_WAITTONEXTQUEST_DAY = WLD_GETDAY();
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_FinishQuest_15_01");
    if (((SQ213_GOTVINE) == (2)) || ((SQ213_BASKETFOODRESULT) == (2))) {
        AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_FinishQuest_03_02");
        if ((SQ213_GOTVINE) == (2)) {
            AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_FinishQuest_03_03");
        };
        if ((SQ213_BASKETFOODRESULT) == (2)) {
            AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_FinishQuest_03_04");
        };
        AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_FinishQuest_03_05");
        AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_FinishQuest_03_06");
    };
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_FinishQuest_03_21");
    if (((SQ213_GOTVINE) == (2)) || ((SQ213_BASKETFOODRESULT) == (2))) {
        AI_STARTFACEANI(OTHER, S_SURPRISE, 1, -(1));
        AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_FinishQuest_15_08");
        AI_RESETFACEANI(SELF);
    };
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_FinishQuest_03_22");
    B_SAY(SELF, OTHER, "$REWARD_CALM");
    AI_WAITTILLEND(OTHER, SELF);
    if ((HERO.HITCHANCE[1]) >= (HERO.HITCHANCE[2])) {
        CREATEINVITEMS(SELF, 0x9a48, 1);
        if ((NPC_HASITEMS(OTHER, 0x8cc2)) == (0)) {
            CREATEINVITEM(OTHER, 0x8cc2);
            AI_USEITEMTOSTATE(OTHER, 0x8cc2, 1);
            AI_WAIT(OTHER, 0x40800000);
            AI_USEITEMTOSTATE(OTHER, 0x8cc2, -(1));
        };
    };
    CREATEINVITEMS(SELF, 0x9a49, 1);
    if ((NPC_HASITEMS(OTHER, 0x8cc3)) == (0)) {
        CREATEINVITEM(OTHER, 0x8cc3);
        AI_USEITEMTOSTATE(OTHER, 0x8cc3, 1);
        AI_WAIT(OTHER, 0x40800000);
        AI_USEITEMTOSTATE(OTHER, 0x8cc3, -(1));
    };
    B_GIVEINVITEMS(SELF, OTHER, 0x9a49, 1);
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_FinishQuest_03_28");
    INFO_CLEARCHOICES(0x1064a);
    INFO_ADDCHOICE(0x1064a, "What are you going to do now?", 0x1064d);
}

func void DIA_LUTZ_FINISHQUEST_DONE() {
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_WhatNext_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_WhatNext_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_WhatNext_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_WhatNext_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_WhatNext_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_WhatNext_03_06");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_WhatNext_03_07");
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_WhatNext_15_08");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_WhatNext_03_09");
    if ((SQ213_SONGRESULT) == (2)) {
        AI_LOGENTRY(TOPIC_SQ213, LOG_SQ213_HAPPYENDING);
    };
    if ((SQ213_SONGRESULT) == (1)) {
        AI_LOGENTRY(TOPIC_SQ213, LOG_SQ213_HAPPYENDINGV2);
    };
    SQ213_SONGRESULT = 8;
}

instance DIA_LUTZ_SQ410_START(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_SQ410_START_CONDITION;
    INFORMATION = DIA_LUTZ_SQ410_START_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "So how are the lovebirds? Everything all right?";
}

func int DIA_LUTZ_SQ410_START_CONDITION() {
    if ((((SQ213_WAITTONEXTQUEST_DAY) <= ((WLD_GETDAY()) - (2))) && ((LOG_GETSTATUS(MIS_SQ213)) == (LOG_SUCCESS))) && ((KAPITEL) >= (4))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_SQ410_START_INFO() {
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Start_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Start_03_02");
    AI_STARTFACEANI(OTHER, S_SURPRISE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Start_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Start_03_04");
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    INFO_CLEARCHOICES(0x1064e);
    INFO_ADDCHOICE(0x1064e, "No, unless Martha starts torturing me.", 0x10653);
    INFO_ADDCHOICE(0x1064e, "After all we've been through together?", 0x10652);
}

func void DIA_LUTZ_SQ410_START_NEXT() {
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Start_Next_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Start_Next_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Start_Next_03_03");
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Start_Next_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Start_Next_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Start_Next_03_06");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Start_Next_03_07");
    INFO_CLEARCHOICES(0x1064e);
}

func void DIA_LUTZ_SQ410_START_NOV1() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Start_NoV1_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Start_NoV1_03_02");
    DIA_LUTZ_SQ410_START_NEXT();
}

func void DIA_LUTZ_SQ410_START_NOV2() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Start_NoV2_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Start_NoV2_03_02");
    DIA_LUTZ_SQ410_START_NEXT();
}

instance DIA_LUTZ_SQ410_HELP(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_SQ410_HELP_CONDITION;
    INFORMATION = DIA_LUTZ_SQ410_HELP_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Is there anything I can do for you?";
}

func int DIA_LUTZ_SQ410_HELP_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 0x1064e)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_SQ410_HELP_INFO() {
    AI_STARTFACEANI(OTHER, S_TIRED, 1, -(1));
    AI_STARTFACEANI(SELF, S_SAD, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Help_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Help_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Help_03_03");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    if (((LOG_GETSTATUS(MIS_SQ410)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x15879))) {
        AI_LOGENTRY(TOPIC_SQ410, LOG_SQ410_BADIDEA);
    };
    LOG_CREATETOPIC(TOPIC_SQ410, LOG_MISSION);
    LOG_SETSTATUS(_@(MIS_SQ410), TOPIC_SQ410, LOG_RUNNING);
    AI_LOGENTRY(TOPIC_SQ410, LOG_SQ410_START_V1);
}

instance DIA_LUTZ_SQ410_VIKTOR(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_SQ410_VIKTOR_CONDITION;
    INFORMATION = DIA_LUTZ_SQ410_VIKTOR_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Here's something you should know.";
}

func int DIA_LUTZ_SQ410_VIKTOR_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ410)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x15810))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_SQ410_VIKTOR_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Viktor_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Viktor_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Viktor_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Viktor_03_04");
}

instance DIA_LUTZ_SQ410_NOTHING(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_SQ410_NOTHING_CONDITION;
    INFORMATION = DIA_LUTZ_SQ410_NOTHING_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "And you won't do anything about it?";
}

func int DIA_LUTZ_SQ410_NOTHING_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ410)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x10657))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_SQ410_NOTHING_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Nothing_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Nothing_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Nothing_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Nothing_03_04");
}

instance DIA_LUTZ_SQ410_IDEA(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_SQ410_IDEA_CONDITION;
    INFORMATION = DIA_LUTZ_SQ410_IDEA_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What if we gave her a reason?";
}

func int DIA_LUTZ_SQ410_IDEA_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ410)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x1065a))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_SQ410_IDEA_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Idea_15_01");
    AI_STARTFACEANI(SELF, S_THINK, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Idea_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Idea_15_03");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Idea_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Idea_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Idea_03_06");
    AI_RESETFACEANI(SELF);
    B_STANDUP();
    NPC_EXCHANGEROUTINE(SELF, "SQ410_OUTSIDEINN");
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_SQ410, LOG_SQ410_LUTZ_PLAN);
}

instance DIA_LUTZ_SQ410_SUCCESS(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_SQ410_SUCCESS_CONDITION;
    INFORMATION = DIA_LUTZ_SQ410_SUCCESS_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "The plan worked. They want you out of the village.";
}

func int DIA_LUTZ_SQ410_SUCCESS_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ410)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 0x1587c))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void LUTZ_SQ410_FINISHQUEST() {
    LOG_SETSTATUS(_@(MIS_SQ410), TOPIC_SQ410, LOG_SUCCESS);
    GIVEREPUTATION_SILBACH();
    B_GIVEPLAYERXP(XP_SQ410_FINISH);
    B_STARTOTHERROUTINE(BAU_703_MARTHA, START);
    NPC_REFRESH(BAU_703_MARTHA);
}

func void DIA_LUTZ_SQ410_SUCCESS_INFO() {
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    B_STANDUP();
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_SQ410_Success_15_01");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_WAITTILLEND(SELF, OTHER);
    AI_PLAYANI(SELF, "T_SHOCKED_START");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_SQ410_Success_03_02");
    AI_PLAYANI(SELF, "T_SHOCKED_REMOVE");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_SQ410_Success_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_SQ410_Success_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_SQ410_Success_03_05");
    AI_STARTFACEANI(OTHER, S_DOUBT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_SQ410_Success_15_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_SQ410_Success_03_07");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, START);
    LUTZ_SQ410_FINISHQUEST();
    AI_LOGENTRY(TOPIC_SQ410, LOG_SQ410_FINISH_V1);
}

instance DIA_LUTZ_SQ410_WEGOTPROBLEM(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_SQ410_WEGOTPROBLEM_CONDITION;
    INFORMATION = DIA_LUTZ_SQ410_WEGOTPROBLEM_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Things got complicated!";
}

func int DIA_LUTZ_SQ410_WEGOTPROBLEM_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ410)) == (LOG_RUNNING)) && ((SQ410_ENDING_V2) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_SQ410_WEGOTPROBLEM_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_WeGotProblem_15_01");
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_WeGotProblem_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_WeGotProblem_15_03");
    AI_WAITTILLEND(SELF, OTHER);
    AI_PLAYANI(SELF, T_JUMPB);
    AI_STARTFACEANI(SELF, T_HURT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_WeGotProblem_03_04");
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 0x10667);
    NPC_EXCHANGEROUTINE(SELF, "SQ410_FLEE");
}

func void LUTZ_SQ410_CHANGEMARTHARTN() {
    B_STARTOTHERROUTINE(BAU_703_MARTHA, "SQ410_RUNTOLUTZ");
    NPC_REFRESH(BAU_703_MARTHA);
}

instance DIA_LUTZ_SQ410_GOOD(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_SQ410_GOOD_CONDITION;
    INFORMATION = DIA_LUTZ_SQ410_GOOD_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Good to see you in one piece.";
}

func int DIA_LUTZ_SQ410_GOOD_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ410)) == (LOG_RUNNING)) && ((SQ410_ENDING_V2) == (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_SQ410_GOOD_INFO() {
    AI_STARTFACEANI(OTHER, S_SMILE, 0, 1);
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Good_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Good_03_02");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Good_15_03");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Good_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_SQ410_Good_15_05");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_SQ410_Good_03_06");
    AI_LOGENTRY(TOPIC_SQ410, LOG_SQ410_FINISH_V2);
    LUTZ_SQ410_FINISHQUEST();
}

instance DIA_LUTZ_KQ404_GUARDARMOR(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_KQ404_GUARDARMOR_CONDITION;
    INFORMATION = DIA_LUTZ_KQ404_GUARDARMOR_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Lutz, now I need to ask you a favor.";
}

func int DIA_LUTZ_KQ404_GUARDARMOR_CONDITION() {
    if (((((((LOG_GETSTATUS(MIS_KQ404)) == (LOG_RUNNING)) && ((KQ404_UNICORNLIST_READ) == (TRUE))) && ((INEXTREMO_CANPLAYCONCERT) == (TRUE))) && ((KQ404_GUARDARMOR_WHO) == (0))) && ((LOG_GETSTATUS(MIS_SQ213)) == (LOG_SUCCESS))) && ((LOG_GETSTATUS(MIS_SQ410)) == (LOG_SUCCESS))) {
        if (((KQ404_UNICORNLIST_GOTEVERYTHING) != (2)) && ((Q509_LUTZVOLFZACKE) == (0))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void LUTZ_KQ404_GIVEARMOR() {
    if ((NPC_HASITEMS(MIL_6318_LUTZ, 0x8add)) == (0)) {
        CREATEINVITEMS(MIL_6318_LUTZ, 0x8add, 1);
    };
    ITM = NPC_GETEQUIPPEDARMOR(MIL_6318_LUTZ);
    if ((NPC_HASEQUIPPEDARMOR(MIL_6318_LUTZ)) == (TRUE)) {
        if ((HLP_ISITEM(ITM, 0x8add)) == (FALSE)) {
            AI_EQUIPARMOR(MIL_6318_LUTZ, 0x8add);
        };
    };
    AI_EQUIPARMOR(MIL_6318_LUTZ, 0x8add);
    if ((NPC_HASITEMS(MIL_6318_LUTZ, 0x8b1f)) == (0)) {
        CREATEINVITEMS(MIL_6318_LUTZ, 0x8b1f, 1);
    };
    B_GIVEINVITEMS(MIL_6318_LUTZ, HERO, 0x8b1f, 1);
}

instance LUTZ_KQ404_GIVEARMOR.ITM(C_ITEM)
func void DIA_LUTZ_KQ404_GUARDARMOR_INFO() {
    KQ404_GUARDARMOR_WHO = 3;
    KQ404_LUTZ_BLOCKVOLFZACKQUESTION = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_KQ404_GuardArmor_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_KQ404_GuardArmor_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_KQ404_GuardArmor_15_03");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_KQ404_GuardArmor_03_04");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_KQ404_GuardArmor_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Lutz_KQ404_GuardArmor_03_06");
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Lutz_KQ404_GuardArmor_15_07");
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 0x1066d);
}

instance DIA_LUTZ_Q509_QUESTION(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_Q509_QUESTION_CONDITION;
    INFORMATION = DIA_LUTZ_Q509_QUESTION_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Aren't you up for some adventure?";
}

func int DIA_LUTZ_Q509_QUESTION_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_Q509)) == (LOG_RUNNING)) && ((LOG_GETSTATUS(MIS_SQ213)) == (LOG_SUCCESS))) && ((LOG_GETSTATUS(MIS_SQ410)) == (LOG_SUCCESS))) && ((Q509_COUNTWARRIORS) < (4))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_Q509_QUESTION_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_Q509_Question_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_Q509_Question_03_02");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_Q509_Question_15_03");
    AI_STARTFACEANI(SELF, S_THINK, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_Q509_Question_03_04");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_Q509_Question_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_Q509_Question_03_06");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    if (((KQ404_GUARDARMOR_WHO) == (3)) && ((LOG_GETSTATUS(MIS_KQ404)) != (LOG_SUCCESS))) {
        AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_Q509_Question_03_07");
    };
}

instance DIA_LUTZ_Q509_LETSGO(C_INFO) {
    NPC = 0xccc4;
    NR = 1;
    CONDITION = DIA_LUTZ_Q509_LETSGO_CONDITION;
    INFORMATION = DIA_LUTZ_Q509_LETSGO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "So, you ready to go?";
}

func int DIA_LUTZ_Q509_LETSGO_CONDITION() {
    if (((KQ404_GUARDARMOR_WHO) == (3)) && ((LOG_GETSTATUS(MIS_KQ404)) != (LOG_SUCCESS))) {
        return FALSE;
    };
    if ((((LOG_GETSTATUS(MIS_Q509)) == (LOG_RUNNING)) && ((Q509_COUNTWARRIORS) < (4))) && (NPC_KNOWSINFO(OTHER, 0x10670))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_Q509_LETSGO_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_LUTZ_Q509_LetsGo_15_01");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_Q509_LetsGo_03_02");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    B_STANDUP();
    AI_PLAYANI(SELF, "T_PLUNDER");
    AI_FUNCTION(SELF, 0x1063e);
    AI_STOPPROCESSINFOS(SELF);
    B_GIVEPLAYERXP(XP_VARHDAL_RECRUIT);
    SELF.AIVAR[15] = TRUE;
    SELF.FLAGS = 2;
    Q509_LUTZVOLFZACKE = 1;
    NPC_EXCHANGEROUTINE(SELF, "Q509_WAIT");
    AI_LOGENTRY(TOPIC_Q509, LOG_Q509_LUTZ);
    AI_FUNCTION(SELF, 0xf74c);
}

instance DIA_LUTZ_Q509_FEEL(C_INFO) {
    NPC = 0xccc4;
    NR = 90;
    CONDITION = DIA_LUTZ_Q509_FEEL_CONDITION;
    INFORMATION = DIA_LUTZ_Q509_FEEL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How's the morale?";
}

func int DIA_LUTZ_Q509_FEEL_CONDITION() {
    if (((Q509_LUTZVOLFZACKE) == (1)) && ((NPC_GETDISTTOWP(SELF, "PART5_Q509_LUTZ")) <= (0x7d0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_Q509_FEEL_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    B_SAY(OTHER, SELF, "$MARVIN_VolfzackMorale3");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_LUTZ_Q509_Feel_03_02");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

instance DIA_LUTZ_PICKPOCKET(C_INFO) {
    NPC = 0xccc4;
    NR = 900;
    CONDITION = DIA_LUTZ_PICKPOCKET_CONDITION;
    INFORMATION = DIA_LUTZ_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_120;
}

func int DIA_LUTZ_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_LUTZ_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(0x10679);
    INFO_ADDCHOICE(0x10679, DIALOG_BACK, 0x1067d);
    INFO_ADDCHOICE(0x10679, DIALOG_PICKPOCKET, 0x1067c);
}

func void DIA_LUTZ_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (3)) {
        B_PICKPOCKET_AMBIENT_TIER_3();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(0x10679);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(0x10679);
}

func void DIA_LUTZ_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(0x10679);
}

