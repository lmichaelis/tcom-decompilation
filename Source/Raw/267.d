func void B_GETWISPDETECTEDITEM() {
    if (!(HLP_ISVALIDITEM(ITEM))) {
        return;
    };
    if ((NPC_GETHEIGHTTOITEM(SELF, ITEM)) > (500)) {
        return;
    };
    RANDY = HLP_RANDOM(100);
    AI_GOTOITEM(SELF, ITEM);
    if (((NPC_GETDISTTOITEM(SELF, ITEM)) < (1000)) && ((RANDY) <= (1))) {
        WLD_PLAYEFFECT("spellFX_ItemAusbuddeln", ITEM, ITEM, 0, 0, 0, FALSE);
    };
}

var int B_GETWISPDETECTEDITEM.RANDY = 0;
func int B_WISPDETECTEDITEM() {
    if ((WISPSEARCHING) == (WISPSEARCH_FOLLOW)) {
    };
    WISPSEARCHFLAGS = 0;
    if (((PLAYER_TALENT_WISPDETECTOR[0]) == (TRUE)) && (((WISPSEARCHING) == (WISPSEARCH_ALL)) || ((WISPSEARCHING) == (WISPSEARCH_NF)))) {
        WISPSEARCHFLAGS = (WISPSEARCHFLAGS) | (ITEM_KAT_NF);
    };
    if (((PLAYER_TALENT_WISPDETECTOR[1]) == (TRUE)) && (((WISPSEARCHING) == (WISPSEARCH_ALL)) || ((WISPSEARCHING) == (WISPSEARCH_FF)))) {
        WISPSEARCHFLAGS = ((WISPSEARCHFLAGS) | (ITEM_KAT_FF)) | (ITEM_KAT_MUN);
    };
    if (((PLAYER_TALENT_WISPDETECTOR[2]) == (TRUE)) && (((WISPSEARCHING) == (WISPSEARCH_ALL)) || ((WISPSEARCHING) == (WISPSEARCH_NONE)))) {
        WISPSEARCHFLAGS = ((((WISPSEARCHFLAGS) | (ITEM_KAT_NONE)) | (ITEM_KAT_KEYS)) | (ITEM_KAT_LIGHT)) | (ITEM_KAT_ARMOR);
    };
    if (((PLAYER_TALENT_WISPDETECTOR[3]) == (TRUE)) && (((WISPSEARCHING) == (WISPSEARCH_ALL)) || ((WISPSEARCHING) == (WISPSEARCH_RUNE)))) {
        WISPSEARCHFLAGS = ((WISPSEARCHFLAGS) | (ITEM_KAT_RUNE)) | (ITEM_KAT_DOCS);
    };
    if (((PLAYER_TALENT_WISPDETECTOR[4]) == (TRUE)) && (((WISPSEARCHING) == (WISPSEARCH_ALL)) || ((WISPSEARCHING) == (WISPSEARCH_MAGIC)))) {
        WISPSEARCHFLAGS = (WISPSEARCHFLAGS) | (ITEM_KAT_MAGIC);
    };
    if (((PLAYER_TALENT_WISPDETECTOR[5]) == (TRUE)) && (((WISPSEARCHING) == (WISPSEARCH_ALL)) || ((WISPSEARCHING) == (WISPSEARCH_FOOD)))) {
        WISPSEARCHFLAGS = (WISPSEARCHFLAGS) | (ITEM_KAT_FOOD);
    };
    if (((PLAYER_TALENT_WISPDETECTOR[6]) == (TRUE)) && (((WISPSEARCHING) == (WISPSEARCH_ALL)) || ((WISPSEARCHING) == (WISPSEARCH_POTIONS)))) {
        WISPSEARCHFLAGS = (WISPSEARCHFLAGS) | (ITEM_KAT_POTIONS);
    };
    if ((WISPSEARCHFLAGS) != (0)) {
        if (WLD_DETECTITEM(SELF, WISPSEARCHFLAGS)) {
            B_GETWISPDETECTEDITEM();
        };
    };
    return WISPSEARCHFLAGS;
}

var int B_WISPDETECTEDITEM.WISPSEARCHFLAGS = 0;
func int B_MM_WISPDETECT() {
    return 0;
}

