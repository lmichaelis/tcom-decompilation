const int VALUE_JORNPOTION = 0;
const int HPMAX_JORNPOTION = 30;
const int VALUE_FAKEARTIFACT_BELIARSWISPER = 40;
const int HP_FAKEARTIFACT_BELIARSWISPER = -5;
const int MANA_FAKEARTIFACT_BELIARSWISPER = -5;
const int VALUE_STONESKIN = 1500;
const int STONESKIN_PERMVALUE = 3;
const int STONESKIN_MAGIC_PERMVALUE = 1;
const int VALUE_HPREGEN = 220;
const int VALUE_MANAREGEN = 160;
const int VALUE_HPREGEN2 = 400;
const int VALUE_MANAREGEN2 = 300;
const int VALUE_DIVE = 35;
const int VALUE_FALL = 35;
const int VALUE_MANA_BLUEPLANT = 20;
const int MANA_BLUEPLANTN_MANABONUS = 25;
const int MANA_BLUEPLANTN_MANABONUS_VOL2 = 35;
const int VALUE_TIMED_HEALTH = 125;
const int VALUE_TIMED_MANA = 125;
const int VALUE_TIMED_STR = 150;
const int VALUE_TIMED_DEX = 150;
const int VALUE_TIMED_DEF = 150;
const int VALUE_TIMED_HEALTH2 = 220;
const int VALUE_TIMED_MANA2 = 220;
const int VALUE_TIMED_STR2 = 270;
const int VALUE_TIMED_DEX2 = 270;
const int VALUE_TIMED_DEF2 = 270;
const int VALUE_HERSHLIKPOTION = 2000;
const int HERSHLIKPOTION_MANABONUS = 25;
const int HERSHLIKPOTION_STRDEXBONUS = 5;
const int HERSHLIKPOTION_STRBONUS = 10;
const int HERSHLIKPOTION_DEXBONUS = 10;
const int DURATION_POTION_TIMED = 5;
const int DURATION_POTION_TIMED_STRONG = 10;
const int DURATION_POTION_REGEN = 3;
const int DURATION_POTION_REGEN_STRONG = 6;
func void GIVEPOTIONXP(var C_NPC NPC, var int XP) {
    if (NPC_ISPLAYER(NPC)) {
        B_GIVEPLAYERXP(XP);
    };
}

instance ALCHEMYTESTPACKET(C_ITEM) {
    NAME = "Alchemy Starter Pack";
    MAINFLAG = ITEM_KAT_NONE;
    VISUAL = "ItMi_Packet.3ds";
    SCEMENAME = SCEME_MAPSEALED;
    ON_STATE[0] = USE_ALCHEMYTESTPACKET;
    MATERIAL = MAT_LEATHER;
    DESCRIPTION = NAME;
}

func void USE_ALCHEMYTESTPACKET() {
    CREATEINVITEMS(HERO, 0x88e6, 1);
    CREATEINVITEMS(HERO, 0x88e8, 1);
    CREATEINVITEMS(HERO, 0x889e, 1);
    CREATEINVITEMS(HERO, 0x88e4, 1);
    CREATEINVITEMS(HERO, 0x88e2, 1);
    CREATEINVITEMS(HERO, 0x88c6, 1);
    CREATEINVITEMS(HERO, 0x88c4, 1);
    CREATEINVITEMS(HERO, 0x88c2, 1);
    CREATEINVITEMS(HERO, 0x88c0, 1);
    CREATEINVITEMS(HERO, 0x88e0, 1);
    CREATEINVITEMS(HERO, 0x88d6, 1);
    CREATEINVITEMS(HERO, 0x88d8, 1);
    CREATEINVITEMS(HERO, 0x88da, 1);
    CREATEINVITEMS(HERO, 0x88dc, 1);
    CREATEINVITEMS(HERO, 0x88de, 1);
    CREATEINVITEMS(HERO, 0x88ea, 1);
    CREATEINVITEMS(HERO, 0x88ec, 1);
    CREATEINVITEMS(HERO, 0x88c8, 1);
    CREATEINVITEMS(HERO, 0x88ca, 1);
    CREATEINVITEMS(HERO, 0x9342, 5);
    CREATEINVITEMS(HERO, 0x9346, 5);
    CREATEINVITEMS(HERO, 0x934a, 5);
    CREATEINVITEMS(HERO, 0x934e, 5);
    CREATEINVITEMS(HERO, 0x9352, 5);
    CREATEINVITEMS(HERO, 0x9356, 5);
    CREATEINVITEMS(HERO, 0x9348, 5);
    CREATEINVITEMS(HERO, 0x934c, 5);
    CREATEINVITEMS(HERO, 0x9350, 5);
    CREATEINVITEMS(HERO, 0x9354, 5);
    CREATEINVITEMS(HERO, 0x9358, 5);
    CREATEINVITEMS(HERO, 0x935c, 5);
    CREATEINVITEMS(HERO, 0x9362, 5);
    CREATEINVITEMS(HERO, 0x9366, 5);
    CREATEINVITEMS(HERO, 0x9364, 5);
    CREATEINVITEMS(HERO, 0x9368, 5);
    CREATEINVITEMS(HERO, 0x936a, 5);
    CREATEINVITEMS(HERO, 0x935a, 5);
    CREATEINVITEMS(HERO, 0x864b, 5);
    CREATEINVITEMS(HERO, 0x864d, 5);
    CREATEINVITEMS(HERO, 0x8581, 100);
    CREATEINVITEMS(HERO, 0x85f8, 100);
    CREATEINVITEMS(HERO, 0x85fe, 500);
    CREATEINVITEMS(HERO, 0x85ff, 500);
    CREATEINVITEMS(HERO, 0x85f2, 500);
    CREATEINVITEMS(HERO, 0x85e8, 100);
    CREATEINVITEMS(HERO, 0x85ea, 100);
    CREATEINVITEMS(HERO, 0x85ec, 100);
    CREATEINVITEMS(HERO, 0x85e2, 100);
    CREATEINVITEMS(HERO, 0x85e4, 100);
    CREATEINVITEMS(HERO, 0x85e6, 100);
    CREATEINVITEMS(HERO, 0x930f, 100);
    CREATEINVITEMS(HERO, 0x9315, 100);
    CREATEINVITEMS(HERO, 0x85f0, 100);
    CREATEINVITEMS(HERO, 0x85ee, 100);
    SND_PLAY(GELDBEUTEL);
}

instance ITPO_MANA_BLUEPLANT(C_ITEM) {
    NAME = POTIONNAME_MANA_BLUEPLANT;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_MANA_BLUEPLANT;
    VISUAL = "ItPo_Blueberry.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_MANA_BLUEPLANT;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[1] = POTIONDESC_MANA_BLUEPLANT_TEXT01;
    COUNT[1] = MANA_BLUEPLANTN_MANABONUS;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE_MANA_BLUEPLANT;
}

func void USEITPO_MANA_BLUEPLANT() {
    NPC_CHANGEATTRIBUTE(SELF, ATR_MANA, MANA_BLUEPLANTN_MANABONUS);
}

instance ITPO_MANA_BLUEPLANT_VOL2(C_ITEM) {
    NAME = POTIONNAME_MANA_BLUEPLANT_VOL2;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_MANA_BLUEPLANT;
    VISUAL = "ItPo_Blueberry.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_MANA_BLUEPLANT_VOL2;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[1] = POTIONDESC_MANA_BLUEPLANT_TEXT01;
    COUNT[1] = MANA_BLUEPLANTN_MANABONUS_VOL2;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE_MANA_BLUEPLANT;
}

func void USEITPO_MANA_BLUEPLANT_VOL2() {
    NPC_CHANGEATTRIBUTE(SELF, ATR_MANA, MANA_BLUEPLANTN_MANABONUS_VOL2);
}

instance ITPO_TIMED_HEALTH(C_ITEM) {
    NAME = POTIONNAME_TIMED_HEALTH;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_TIMED_HEALTH;
    VISUAL = "ItPo_Time_Health.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_TIMED_HEALTH;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[0] = POTIONDESC_TIMED_HEALTH_TEXT01;
    TEXT[2] = NAME_BONUS_HPMAX;
    COUNT[2] = 150;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = DURATION_POTION_TIMED;
    TEXT[4] = PRINT_XPGAINED;
    COUNT[4] = XP_ITPO_TIMED;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_TIMED_HEALTH() {
    GIVEPOTIONXP(SELF, XP_ITPO_TIMED);
    BUFF_APPLYEXT(SELF, 0x7ecf, ((DURATION_POTION_TIMED) * (60)) * (1000), FALSE, TRUE);
}

instance ITPO_TIMED_HEALTH2(C_ITEM) {
    NAME = POTIONNAME_TIMED_HEALTH2;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_TIMED_HEALTH2;
    VISUAL = "ItPo_Time_Health.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_TIMED_HEALTH2;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[0] = POTIONDESC_TIMED_HEALTH_TEXT01;
    TEXT[2] = NAME_BONUS_HPMAX;
    COUNT[2] = 150;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = DURATION_POTION_TIMED_STRONG;
    TEXT[4] = PRINT_XPGAINED;
    COUNT[4] = XP_ITPO_TIMEDSTRONG;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_TIMED_HEALTH2() {
    GIVEPOTIONXP(SELF, XP_ITPO_TIMEDSTRONG);
    BUFF_APPLYEXT(SELF, 0x7ecf, ((DURATION_POTION_TIMED_STRONG) * (60)) * (1000), FALSE, TRUE);
}

instance ITPO_TIMED_MANA(C_ITEM) {
    NAME = POTIONNAME_TIMED_MANA;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_TIMED_MANA;
    VISUAL = "ItPo_Time_mana.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_TIMED_MANA;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[0] = POTIONDESC_TIMED_MANA_TEXT01;
    TEXT[2] = NAME_BONUS_MANAMAX;
    COUNT[2] = 50;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = DURATION_POTION_TIMED;
    TEXT[4] = PRINT_XPGAINED;
    COUNT[4] = XP_ITPO_TIMED;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_TIMED_MANA() {
    GIVEPOTIONXP(SELF, XP_ITPO_TIMED);
    BUFF_APPLYEXT(SELF, 0x7ed8, ((DURATION_POTION_TIMED) * (60)) * (1000), FALSE, TRUE);
}

instance ITPO_TIMED_MANA2(C_ITEM) {
    NAME = POTIONNAME_TIMED_MANA2;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_TIMED_MANA2;
    VISUAL = "ItPo_Time_mana.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_TIMED_MANA2;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[0] = POTIONDESC_TIMED_MANA_TEXT01;
    TEXT[2] = NAME_BONUS_MANAMAX;
    COUNT[2] = 50;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = DURATION_POTION_TIMED_STRONG;
    TEXT[4] = PRINT_XPGAINED;
    COUNT[4] = XP_ITPO_TIMEDSTRONG;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_TIMED_MANA2() {
    GIVEPOTIONXP(SELF, XP_ITPO_TIMEDSTRONG);
    BUFF_APPLYEXT(SELF, 0x7ed8, ((DURATION_POTION_TIMED_STRONG) * (60)) * (1000), FALSE, TRUE);
}

instance ITPO_TIMED_STR(C_ITEM) {
    NAME = POTIONNAME_TIMED_STR;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_TIMED_STR;
    VISUAL = "ItPo_Time_Str.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_TIMED_STR;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[0] = POTIONDESC_TIMED_STR_TEXT01;
    TEXT[2] = NAME_BONUS_STR;
    COUNT[2] = 25;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = DURATION_POTION_TIMED;
    TEXT[4] = PRINT_XPGAINED;
    COUNT[4] = XP_ITPO_TIMED;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_TIMED_STR() {
    GIVEPOTIONXP(SELF, XP_ITPO_TIMED);
    BUFF_APPLYEXT(SELF, 0x7ee2, ((DURATION_POTION_TIMED) * (60)) * (1000), FALSE, TRUE);
}

instance ITPO_TIMED_STR2(C_ITEM) {
    NAME = POTIONNAME_TIMED_STR2;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_TIMED_STR2;
    VISUAL = "ItPo_Time_Str.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_TIMED_STR2;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[0] = POTIONDESC_TIMED_STR_TEXT01;
    TEXT[2] = NAME_BONUS_STR;
    COUNT[2] = 25;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = DURATION_POTION_TIMED_STRONG;
    TEXT[4] = PRINT_XPGAINED;
    COUNT[4] = XP_ITPO_TIMEDSTRONG;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_TIMED_STR2() {
    GIVEPOTIONXP(SELF, XP_ITPO_TIMEDSTRONG);
    BUFF_APPLYEXT(SELF, 0x7ee2, ((DURATION_POTION_TIMED_STRONG) * (60)) * (1000), FALSE, TRUE);
}

instance ITPO_TIMED_DEX(C_ITEM) {
    NAME = POTIONNAME_TIMED_DEX;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_TIMED_DEX;
    VISUAL = "ItPo_Time_Dex.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_TIMED_DEX;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[0] = POTIONDESC_TIMED_DEX_TEXT01;
    TEXT[2] = NAME_BONUS_DEX;
    COUNT[2] = 25;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = DURATION_POTION_TIMED;
    TEXT[4] = PRINT_XPGAINED;
    COUNT[4] = XP_ITPO_TIMED;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_TIMED_DEX() {
    GIVEPOTIONXP(SELF, XP_ITPO_TIMED);
    BUFF_APPLYEXT(SELF, 0x7eec, ((DURATION_POTION_TIMED) * (60)) * (1000), FALSE, TRUE);
}

instance ITPO_TIMED_DEX2(C_ITEM) {
    NAME = POTIONNAME_TIMED_DEX2;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_TIMED_DEX2;
    VISUAL = "ItPo_Time_Dex.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_TIMED_DEX2;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[0] = POTIONDESC_TIMED_DEX_TEXT01;
    TEXT[2] = NAME_BONUS_DEX;
    COUNT[2] = 25;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = DURATION_POTION_TIMED_STRONG;
    TEXT[4] = PRINT_XPGAINED;
    COUNT[4] = XP_ITPO_TIMEDSTRONG;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_TIMED_DEX2() {
    GIVEPOTIONXP(SELF, XP_ITPO_TIMEDSTRONG);
    BUFF_APPLYEXT(SELF, 0x7eec, ((DURATION_POTION_TIMED_STRONG) * (60)) * (1000), FALSE, TRUE);
}

instance ITPO_TIMED_DEF(C_ITEM) {
    NAME = POTIONNAME_TIMED_DEF;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_TIMED_DEF;
    VISUAL = "ItPo_Time_def.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_TIMED_DEF;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[0] = POTIONDESC_TIMED_DEF_TEXT01;
    TEXT[2] = NAME_BONUS_DEF;
    COUNT[2] = 25;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = DURATION_POTION_TIMED;
    TEXT[4] = PRINT_XPGAINED;
    COUNT[4] = XP_ITPO_TIMED;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_TIMED_DEF() {
    GIVEPOTIONXP(SELF, XP_ITPO_TIMED);
    BUFF_APPLYEXT(SELF, 0x7eff, ((DURATION_POTION_TIMED) * (60)) * (1000), FALSE, TRUE);
}

instance ITPO_TIMED_DEF2(C_ITEM) {
    NAME = POTIONNAME_TIMED_DEF2;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_TIMED_DEF2;
    VISUAL = "ItPo_Time_def.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_TIMED_DEF2;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[0] = POTIONDESC_TIMED_DEF_TEXT01;
    TEXT[2] = NAME_BONUS_DEF;
    COUNT[2] = 25;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = DURATION_POTION_TIMED_STRONG;
    TEXT[4] = PRINT_XPGAINED;
    COUNT[4] = XP_ITPO_TIMEDSTRONG;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_TIMED_DEF2() {
    GIVEPOTIONXP(SELF, XP_ITPO_TIMEDSTRONG);
    BUFF_APPLYEXT(SELF, 0x7eff, ((DURATION_POTION_TIMED_STRONG) * (60)) * (1000), FALSE, TRUE);
}

instance ITPO_DIVE(C_ITEM) {
    NAME = POTIONNAME_TIMED_DIVE;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_DIVE;
    VISUAL = "ItPo_Time_NoWaterDamage.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_DIVE;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[1] = POTIONDESC_TIMED_DIVE_TEXT01;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = 10;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_DIVE() {
    BUFF_APPLYORADDTIME(SELF, 0x7f08);
}

instance ITPO_STONESKIN(C_ITEM) {
    NAME = POTIONNAME_STONESKIN;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_STONESKIN;
    VISUAL = "ItPo_Perm_Def.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_STONESKIN;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[2] = NAME_PROT_WEAPONSALL;
    COUNT[2] = STONESKIN_PERMVALUE;
    TEXT[3] = NAME_PROT_MAGICANDFIRE;
    COUNT[3] = STONESKIN_MAGIC_PERMVALUE;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_STONESKIN() {
    PRINT_STONESKIN_PERMVALUE = INTTOSTRING(STONESKIN_PERMVALUE);
    PRINT_STONESKINBONUS = CONCATSTRINGS(PRINT_STONESKIN_INFOBONUS, PRINT_STONESKIN_PERMVALUE);
    PRINTSCREEN(PRINT_STONESKINBONUS, -(1), 45, FONT_SCREEN, 4);
    PRINT_MAGIC_STONESKIN_PERMVALUE = INTTOSTRING(STONESKIN_MAGIC_PERMVALUE);
    PRINT_MAGIC_STONESKINBONUS = CONCATSTRINGS(PRINT_STONESKIN_MAGIC_INFOBONUS, PRINT_MAGIC_STONESKIN_PERMVALUE);
    PRINTSCREEN(PRINT_MAGIC_STONESKINBONUS, -(1), 55, FONT_SCREEN, 4);
    SELF.PROTECTION[2] += STONESKIN_PERMVALUE;
    SELF.PROTECTION[1] += STONESKIN_PERMVALUE;
    SELF.PROTECTION[6] += STONESKIN_PERMVALUE;
    SELF.PROTECTION[5] += STONESKIN_MAGIC_PERMVALUE;
    SELF.PROTECTION[3] += STONESKIN_MAGIC_PERMVALUE;
    HERSHLIK_COUNTPERMPOTIONS();
}

var string USEITPO_STONESKIN.PRINT_STONESKIN_PERMVALUE = "";
var string USEITPO_STONESKIN.PRINT_STONESKINBONUS = "";
var string USEITPO_STONESKIN.PRINT_MAGIC_STONESKIN_PERMVALUE = "";
var string USEITPO_STONESKIN.PRINT_MAGIC_STONESKINBONUS = "";
instance ITPO_HPREGEN(C_ITEM) {
    NAME = POTIONNAME_HPREGEN;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_HPREGEN;
    VISUAL = "ItPo_Regeneration_health.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_HPREGEN;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[1] = POTIONDESC_HPREGEN_TEXT01;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = DURATION_POTION_REGEN;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_HPREGEN() {
    GIVEPOTIONXP(SELF, XP_ITPO_TIMED);
    BUFF_APPLYEXT(SELF, 0x7ebc, ((DURATION_POTION_REGEN) * (60)) * (1000), FALSE, TRUE);
}

instance ITPO_HPREGEN2(C_ITEM) {
    NAME = POTIONNAME_HPREGEN2;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_HPREGEN2;
    VISUAL = "ItPo_Regeneration_health.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_HPREGEN2;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[1] = POTIONDESC_HPREGEN_TEXT01;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = DURATION_POTION_REGEN_STRONG;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_HPREGEN2() {
    GIVEPOTIONXP(SELF, XP_ITPO_TIMEDSTRONG);
    BUFF_APPLYEXT(SELF, 0x7ebc, ((DURATION_POTION_REGEN_STRONG) * (60)) * (1000), FALSE, TRUE);
}

instance ITPO_MANAREGEN(C_ITEM) {
    NAME = POTIONNAME_MANAREGEN;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_MANAREGEN;
    VISUAL = "ItPo_Regeneration_mana.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_MANAREGEN;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[1] = POTIONDESC_MANAREGEN_TEXT01;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = DURATION_POTION_TIMED;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_MANAREGEN() {
    GIVEPOTIONXP(SELF, XP_ITPO_TIMED);
    BUFF_APPLYEXT(SELF, 0x7ec1, ((DURATION_POTION_TIMED) * (60)) * (1000), FALSE, TRUE);
}

instance ITPO_MANAREGEN2(C_ITEM) {
    NAME = POTIONNAME_MANAREGEN2;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_MANAREGEN2;
    VISUAL = "ItPo_Regeneration_mana.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_MANAREGEN2;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[1] = POTIONDESC_MANAREGEN_TEXT01;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = DURATION_POTION_TIMED_STRONG;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_MANAREGEN2() {
    GIVEPOTIONXP(SELF, XP_ITPO_TIMEDSTRONG);
    BUFF_APPLYEXT(SELF, 0x7ec1, ((DURATION_POTION_TIMED_STRONG) * (60)) * (1000), FALSE, TRUE);
}

instance ITPO_FALL(C_ITEM) {
    NAME = POTIONNAME_FALL;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_FALL;
    VISUAL = "ItPo_Time_NofallDamage.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEITPO_FALL;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_MANAPOTION";
    DESCRIPTION = NAME;
    TEXT[1] = POTIONDESC_FALL_TEXT01;
    TEXT[3] = NAME_DURATION;
    COUNT[3] = 2;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE;
}

func void USEITPO_FALL() {
    BUFF_APPLYORADDTIME(SELF, 0x7ebb);
}

instance ITPO_SQ313_TIME_STR(C_ITEM) {
    NAME = POTIONNAME_SQ313_TIME_STR;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = (ITEM_MULTI) | (ITEM_IMPORTANT);
    VALUE = 0;
    VISUAL = "ItPo_Time_Str.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USE_SQ313TIMESTR;
    SCEMENAME = SCEME_POTIONFAST;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_ITEMGLIMMER";
    DESCRIPTION = NAME;
    TEXT[1] = ITEMDESC_ITPO_SQ313_TIME_STR_1;
}

func void USE_SQ313TIMESTR() {
    WLD_SENDTRIGGER("SQ313_MOVER_INTER_KICKV2");
    MOB_CHANGEFOCUSNAME("SQ313_KICKDOORV2", "MOBNAME_KICK");
    SQ313_CANKICKDOOR_V2 = TRUE;
    SQ313_SUPERSTRENGTH = TRUE;
    BUFF_APPLYORADDTIME(SELF, 0x7f2a);
}

instance ITPO_JORNPOTION(C_ITEM) {
    NAME = POTIONNAME_JORNCURE;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_JORNPOTION;
    VISUAL = "KM_new_bottle_05.3ds";
    MATERIAL = MAT_GLAS;
    ON_STATE[0] = USEJORNPOTION;
    SCEMENAME = SCEME_POTION;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_HEALTHPOTION";
    DESCRIPTION = NAME;
    TEXT[1] = ITEMDESC_ITPO_JORNPOTION_1;
    TEXT[2] = ITEMDESC_ITPO_JORNPOTION_2;
}

func void USEJORNPOTION() {
    if ((Q405_INTERESTINGEVENT) == (0)) {
        B_RAISEATTRIBUTE(SELF, ATR_HITPOINTS_MAX, HPMAX_JORNPOTION);
        NPC_CHANGEATTRIBUTE(SELF, ATR_HITPOINTS, HPMAX_JORNPOTION);
        MARVINTRANSFORMHP = (MARVINTRANSFORMHP) + (HPMAX_JORNPOTION);
    };
    HERSHLIK_COUNTPERMPOTIONS();
}

instance ITPO_FAKEARTIFACT_BELIARSWISPER(C_ITEM) {
    NAME = POTIONNAME_BELIARWISPER;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_FAKEARTIFACT_BELIARSWISPER;
    VISUAL = "KM_FakeArtefact_BeliarsWisper.3DS";
    MATERIAL = MAT_LEATHER;
    SCEMENAME = SCEME_POTION;
    ON_STATE[0] = USE_FAKEARTIFACT_BELIARSWISPER;
    DESCRIPTION = NAME;
    TEXT[2] = NAME_BONUS_HP;
    COUNT[2] = HP_FAKEARTIFACT_BELIARSWISPER;
    TEXT[3] = NAME_BONUS_MANA;
    COUNT[3] = MANA_FAKEARTIFACT_BELIARSWISPER;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE_FAKEARTIFACT_BELIARSWISPER;
}

func void USE_FAKEARTIFACT_BELIARSWISPER() {
    if ((SELF.ATTRIBUTE[0]) > (5)) {
        NPC_CHANGEATTRIBUTE(SELF, ATR_HITPOINTS, HP_FAKEARTIFACT_BELIARSWISPER);
    };
    SELF.ATTRIBUTE[0] = 5;
    if ((SELF.ATTRIBUTE[2]) > (5)) {
        NPC_CHANGEATTRIBUTE(SELF, ATR_MANA, MANA_FAKEARTIFACT_BELIARSWISPER);
    };
    SELF.ATTRIBUTE[2] = 5;
    if ((STOPBEFOREISTOOLATE_CHECK) == (TRUE)) {
        if ((WLD_ISTIME(23, 20, 23, 22)) && ((NPC_GETDISTTOWP(HERO, "PART5_ARG_01")) <= (500))) {
            if ((ARG_03_CHECK) == (FALSE)) {
                ARG_03_CHECK = TRUE;
                WLD_SENDTRIGGER("ARG_SECRET03");
                WLD_INSERTITEM(0x9c4b, "FP_ARG_P5");
            };
        };
    };
}

var int USE_FAKEARTIFACT_BELIARSWISPER.ARG_03_CHECK = 0;
instance ITPO_HERSHLIKPOTION(C_ITEM) {
    NAME = POTIONNAME_HERSHLIKPOTION;
    MAINFLAG = ITEM_KAT_POTIONS;
    FLAGS = ITEM_MULTI;
    VALUE = VALUE_HERSHLIKPOTION;
    VISUAL = "KM_new_bottle_05.3DS";
    MATERIAL = MAT_GLAS;
    WEAR = WEAR_EFFECT;
    EFFECT = "SPELLFX_ITEMGLIMMER";
    SCEMENAME = SCEME_POTION;
    ON_STATE[0] = USE_HERSHLIKPOTION;
    DESCRIPTION = NAME;
    TEXT[1] = POTIONDESC_HERSHLIKPOTION_TEXT03;
    TEXT[2] = POTIONDESC_HERSHLIKPOTION_TEXT04;
    TEXT[5] = NAME_VALUE;
    COUNT[5] = VALUE_HERSHLIKPOTION;
}

func void USE_HERSHLIKPOTION() {
    if (((SELF.ATTRIBUTE[3]) > (SELF.ATTRIBUTE[5])) && ((SELF.ATTRIBUTE[3]) > (SELF.ATTRIBUTE[4]))) {
        B_RAISEATTRIBUTE(SELF, ATR_MANA_MAX, HERSHLIKPOTION_MANABONUS);
        NPC_CHANGEATTRIBUTE(SELF, ATR_MANA, HERSHLIKPOTION_MANABONUS);
    };
    if (((SELF.ATTRIBUTE[5]) > (SELF.ATTRIBUTE[4])) && ((SELF.ATTRIBUTE[5]) > (SELF.ATTRIBUTE[3]))) {
        B_RAISEATTRIBUTE(SELF, ATR_DEXTERITY, HERSHLIKPOTION_DEXBONUS);
    };
    if (((SELF.ATTRIBUTE[4]) > (SELF.ATTRIBUTE[5])) && ((SELF.ATTRIBUTE[4]) > (SELF.ATTRIBUTE[3]))) {
        B_RAISEATTRIBUTE(SELF, ATR_STRENGTH, HERSHLIKPOTION_STRBONUS);
    };
    NPC_CHANGEATTRIBUTE(SELF, ATR_DEXTERITY, HERSHLIKPOTION_STRDEXBONUS);
    NPC_CHANGEATTRIBUTE(SELF, ATR_STRENGTH, HERSHLIKPOTION_STRDEXBONUS);
    NPC_CHANGEATTRIBUTE(SELF, ATR_MANA_MAX, HERSHLIKPOTION_STRDEXBONUS);
    NPC_CHANGEATTRIBUTE(SELF, ATR_MANA, HERSHLIKPOTION_STRDEXBONUS);
    CONCATTEXT = CONCATSTRINGS(PRINT_LEARNMANA_MAX, INTTOSTRING(HERSHLIKPOTION_STRDEXBONUS));
    PRINTSCREEN(CONCATTEXT, -(1), 53, FONT_SCREEN, 3);
    CONCATTEXT2 = CONCATSTRINGS(PRINT_LEARNDEX, INTTOSTRING(HERSHLIKPOTION_STRDEXBONUS));
    PRINTSCREEN(CONCATTEXT2, -(1), 48, FONT_SCREEN, 3);
    CONCATTEXT3 = CONCATSTRINGS(PRINT_LEARNSTR, INTTOSTRING(HERSHLIKPOTION_STRDEXBONUS));
    PRINTSCREEN(CONCATTEXT3, -(1), 42, FONT_SCREEN, 3);
    SND_PLAY("LevelUp");
}

var string USE_HERSHLIKPOTION.CONCATTEXT = "";
var string USE_HERSHLIKPOTION.CONCATTEXT2 = "";
var string USE_HERSHLIKPOTION.CONCATTEXT3 = "";
