func void QM201_TELEPORTNPC() {
    if ((NPC_ISDEAD(VLK_13371_GIRL)) == (FALSE)) {
        NPC_REFRESH(VLK_13371_GIRL);
        B_STARTOTHERROUTINE(VLK_13371_GIRL, TOT);
        TELEPORTNPCTOWP(54186, VLK_13371_GIRL.WP);
    };
    if ((NPC_ISDEAD(VLK_13379_GIRL)) == (FALSE)) {
        NPC_REFRESH(VLK_13379_GIRL);
        B_STARTOTHERROUTINE(VLK_13379_GIRL, TOT);
        TELEPORTNPCTOWP(54206, VLK_13379_GIRL.WP);
    };
    if ((NPC_ISDEAD(VLK_6089_GUY)) == (FALSE)) {
        NPC_REFRESH(VLK_6089_GUY);
        B_STARTOTHERROUTINE(VLK_6089_GUY, TOT);
        TELEPORTNPCTOWP(54358, VLK_6089_GUY.WP);
    };
    if ((NPC_ISDEAD(VLK_6091_GUY)) == (FALSE)) {
        NPC_REFRESH(VLK_6091_GUY);
        B_STARTOTHERROUTINE(VLK_6091_GUY, TOT);
        TELEPORTNPCTOWP(54364, VLK_6091_GUY.WP);
    };
    if ((NPC_ISDEAD(MIL_4014_GUARD)) == (FALSE)) {
        NPC_REFRESH(MIL_4014_GUARD);
        B_STARTOTHERROUTINE(MIL_4014_GUARD, TOT);
        TELEPORTNPCTOWP(54869, MIL_4014_GUARD.WP);
    };
    if ((NPC_ISDEAD(MIL_4008_HARBGUARD)) == (FALSE)) {
        NPC_REFRESH(MIL_4008_HARBGUARD);
        B_STARTOTHERROUTINE(MIL_4008_HARBGUARD, TOT);
        TELEPORTNPCTOWP(54120, MIL_4008_HARBGUARD.WP);
    };
    if ((NPC_ISDEAD(MIL_4009_HARBGUARD)) == (FALSE)) {
        NPC_REFRESH(MIL_4009_HARBGUARD);
        B_STARTOTHERROUTINE(MIL_4009_HARBGUARD, TOT);
        TELEPORTNPCTOWP(54124, MIL_4009_HARBGUARD.WP);
    };
    if ((NPC_ISDEAD(VLK_6060_MYSTERIOUSMAN)) == (FALSE)) {
        NPC_REFRESH(VLK_6060_MYSTERIOUSMAN);
        B_STARTOTHERROUTINE(VLK_6060_MYSTERIOUSMAN, TOT);
        TELEPORTNPCTOWP(55085, VLK_6060_MYSTERIOUSMAN.WP);
    };
}

func void QM201_SPAWNNPC() {
    WLD_INSERTNPC(53890, TOT);
    WLD_INSERTNPC(53951, TOT);
    WLD_INSERTNPC(53954, TOT);
    WLD_INSERTNPC(53957, TOT);
    WLD_INSERTNPC(53960, TOT);
    WLD_INSERTNPC(53963, TOT);
}

func void QM201_WAITCUTSCENEENABLE() {
    FF_APPLYONCEEXT(62970, 75, 4);
}

func void QM201_WAITCUTSCENEENABLE_APPLY() {
    var int QM201_WAITCUTSCENEENABLE_COUNT;
    QM201_WAITCUTSCENEENABLE_COUNT = (QM201_WAITCUTSCENEENABLE_COUNT) + (1);
    if ((QM201_WAITCUTSCENEENABLE_COUNT) == (4)) {
        CUTSCENE_START(92821);
    };
}

func void QM201_WAITCUTSCENEEND() {
    FF_APPLYONCEEXT(62973, 75, 4);
}

func void QM201_WAITCUTSCENEEND_APPLY() {
    var int QM201_WAITCUTSCENEEND_COUNT;
    QM201_WAITCUTSCENEEND_COUNT = (QM201_WAITCUTSCENEEND_COUNT) + (1);
    if ((QM201_WAITCUTSCENEEND_COUNT) == (4)) {
        QM201_CUTSCENEFINISH = TRUE;
        MIL_13583_MILITIA.AIVAR[15] = TRUE;
        MIL_4016_WEGAR.AIVAR[15] = TRUE;
        NONE_13584_PRISONER.AIVAR[15] = TRUE;
        NONE_13585_THUG.GUILD = GIL_BDT;
        NPC_SETTRUEGUILD(NONE_13585_THUG, GIL_BDT);
        NONE_13586_THUG.GUILD = GIL_BDT;
        NPC_SETTRUEGUILD(NONE_13586_THUG, GIL_BDT);
        NONE_13587_THUG.GUILD = GIL_BDT;
        NPC_SETTRUEGUILD(NONE_13587_THUG, GIL_BDT);
        WLD_SENDUNTRIGGER("QM201_WAIT_01");
        WLD_SENDUNTRIGGER("QM201_WAIT_02");
        WLD_SENDUNTRIGGER("QM201_WAIT_03");
        WLD_SENDUNTRIGGER("QM201_WAIT_04");
        WLD_SENDUNTRIGGER("QM201_WAIT_05");
        WLD_SENDUNTRIGGER("QM201_WAIT_06");
        WLD_SENDUNTRIGGER("QM201_WAIT_07");
        HERO.AIVAR[4] = FALSE;
    };
}

func void QM201_TELEPORTLEADER() {
    NPC_REFRESH(NONE_13588_THUG);
    B_STARTOTHERROUTINE(NONE_13588_THUG, START);
    TELEPORTNPCTOWP(53963, NONE_13588_THUG.WP);
}

func void QM201_REMOVEMILITIA() {
    if ((NPC_ISDEAD(NONE_13588_THUG)) == (FALSE)) {
        B_REMOVENPC(53963);
    };
    if ((NPC_ISDEAD(MIL_13583_MILITIA)) == (FALSE)) {
        B_REMOVENPC(53890);
    };
    if ((NPC_ISDEAD(NONE_13584_PRISONER)) == (FALSE)) {
        B_REMOVENPC(53951);
    };
}

func void QM201_REMOVENPC() {
    if ((NPC_ISDEAD(VLK_13371_GIRL)) == (FALSE)) {
        NPC_REFRESH(VLK_13371_GIRL);
        B_STARTOTHERROUTINE(VLK_13371_GIRL, START);
        TELEPORTNPCTOWP(54186, VLK_13371_GIRL.WP);
    };
    if ((NPC_ISDEAD(VLK_13379_GIRL)) == (FALSE)) {
        NPC_REFRESH(VLK_13379_GIRL);
        B_STARTOTHERROUTINE(VLK_13379_GIRL, START);
        TELEPORTNPCTOWP(54206, VLK_13379_GIRL.WP);
    };
    if ((NPC_ISDEAD(VLK_6089_GUY)) == (FALSE)) {
        NPC_REFRESH(VLK_6089_GUY);
        B_STARTOTHERROUTINE(VLK_6089_GUY, START);
        TELEPORTNPCTOWP(54358, VLK_6089_GUY.WP);
    };
    if ((NPC_ISDEAD(VLK_6091_GUY)) == (FALSE)) {
        NPC_REFRESH(VLK_6091_GUY);
        B_STARTOTHERROUTINE(VLK_6091_GUY, START);
        TELEPORTNPCTOWP(54364, VLK_6091_GUY.WP);
    };
    if ((NPC_ISDEAD(MIL_4014_GUARD)) == (FALSE)) {
        NPC_REFRESH(MIL_4014_GUARD);
        B_STARTOTHERROUTINE(MIL_4014_GUARD, START);
        TELEPORTNPCTOWP(54869, MIL_4014_GUARD.WP);
    };
    if ((NPC_ISDEAD(MIL_4008_HARBGUARD)) == (FALSE)) {
        NPC_REFRESH(MIL_4008_HARBGUARD);
        B_STARTOTHERROUTINE(MIL_4008_HARBGUARD, START);
        TELEPORTNPCTOWP(54120, MIL_4008_HARBGUARD.WP);
    };
    if ((NPC_ISDEAD(MIL_4009_HARBGUARD)) == (FALSE)) {
        NPC_REFRESH(MIL_4009_HARBGUARD);
        B_STARTOTHERROUTINE(MIL_4009_HARBGUARD, START);
        TELEPORTNPCTOWP(54124, MIL_4009_HARBGUARD.WP);
    };
}

func void QM201_WEIGARPROMOTION() {
    var int NPCPTR;
    var C_NPC NPC;
    QM201_FINISHQUEST = TRUE;
    QM201_FINISHQUEST_DAY = WLD_GETDAY();
    NPC = HLP_GETNPC(1819);
    NPCPTR = _@(62979);
    FF_APPLYEXTDATAGT(62981, 75, -(1), NPCPTR);
}

func void QM201_WEIGARPROMOTION_APPLY() {
    if ((CURRENTLEVEL) == (ARCHOLOS_ZEN)) {
        if ((((NPC_GETDISTTONPC(HERO, MIL_4016_WEGAR)) >= (2500)) && ((QM201_FINISHQUEST) == (TRUE))) && ((QM201_FINISHQUEST_DAY) <= ((WLD_GETDAY()) - (1)))) {
            QM201_FINISHQUEST = 2;
            PRINTD("Awansujê Weigara");
            FF_REMOVE(62981);
            NPC_REFRESH(MIL_4016_WEGAR);
            B_STARTOTHERROUTINE(MIL_4016_WEGAR, "MasterCrossbow");
            TELEPORTNPCTOWP(52847, MIL_4016_WEGAR.WP);
            NPC_CHANGEARMOR(MIL_4016_WEGAR, 35498);
            NPC_REMOVEINVITEMS(MIL_4016_WEGAR, 35493, 1);
            B_SETATTRIBUTESTOCHAPTER(MIL_4016_WEGAR, 4);
            CREATEINVITEMS(MIL_4016_WEGAR, 39734, 20);
            QM201_REMOVENPC();
        } else {
            PRINTD("Oddal siê od Weigara + przeczekaj dzieñ to go awansujê");
        };
    };
    if (((CURRENTLEVEL) == (ARCHOLOS_ENDGAME_ZEN)) || ((CURRENTLEVEL) == (ARCHOLOS_VOLFZACKE_ZEN))) {
        PRINTD("I tak nie zobaczysz efektów");
        FF_REMOVE(62981);
    };
    PRINTD("Mogê funkcjê wykonaæ tylko w zenie Archolos! - QM201_WeigarPromotion_Apply");
}

