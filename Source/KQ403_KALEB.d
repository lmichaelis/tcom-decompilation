instance KQ403_KALEB(CUTSCENE) {
    ONSTART = FUNCTION(92339);
}

func void KQ403_KALEB_WAIT() {
    AI_WAITTILLEND(HERO, VLK_6003_KALEB);
    AI_WAITTILLEND(HERO, VLK_6065_OLDLADY);
    AI_WAITTILLEND(VLK_6003_KALEB, HERO);
    AI_WAITTILLEND(VLK_6003_KALEB, VLK_6065_OLDLADY);
    AI_WAITTILLEND(VLK_6065_OLDLADY, HERO);
    AI_WAITTILLEND(VLK_6065_OLDLADY, VLK_6003_KALEB);
}

func void KQ403_KALEB_START() {
    WLD_SENDTRIGGER("KMQ403_KALEBFINAL");
    TELEPORTNPCTOWP(1819, "HARBOUR_PATH_29");
    TELEPORTNPCTOWP(54554, VLK_6003_KALEB.WP);
    TELEPORTNPCTOWP(54082, VLK_6065_OLDLADY.WP);
    NPC_CLEARAIQUEUE(VLK_6003_KALEB);
    NPC_CLEARAIQUEUE(VLK_6065_OLDLADY);
    VLK_6003_KALEB.AIVAR[92] = TRUE;
    VLK_6065_OLDLADY.AIVAR[92] = TRUE;
    B_TURNTONPC(VLK_6003_KALEB, VLK_6065_OLDLADY);
    B_TURNTONPC(VLK_6065_OLDLADY, VLK_6003_KALEB);
    B_TURNTONPC(HERO, VLK_6003_KALEB);
    AI_LOOKATNPC(HERO, VLK_6065_OLDLADY);
    KQ403_KALEB_WAIT();
    AI_STARTFACEANI(VLK_6065_OLDLADY, S_ANGRY, 1, -(1));
    AI_STARTFACEANI(VLK_6003_KALEB, S_ANGRY, 1, -(1));
    AI_OUTPUT(VLK_6065_OLDLADY, HERO, "DIA_Kaleb_Cutscene_03_01");
    AI_OUTPUT(VLK_6065_OLDLADY, HERO, "DIA_Kaleb_Cutscene_03_02");
    KQ403_KALEB_WAIT();
    AI_OUTPUT(VLK_6003_KALEB, HERO, "DIA_Kaleb_Cutscene_03_03");
    KQ403_KALEB_WAIT();
    AI_OUTPUT(VLK_6065_OLDLADY, HERO, "DIA_Kaleb_Cutscene_03_04");
    KQ403_KALEB_WAIT();
    AI_OUTPUT(VLK_6003_KALEB, HERO, "DIA_Kaleb_Cutscene_03_05");
    KQ403_KALEB_WAIT();
    AI_TURNAWAY(VLK_6065_OLDLADY, VLK_6003_KALEB);
    KQ403_KALEB_WAIT();
    AI_PLAYANI(VLK_6003_KALEB, "T_PISSOFF");
    AI_FUNCTION(VLK_6003_KALEB, 92340);
}

func void KQ403_KALEB_END() {
    WLD_SENDUNTRIGGER("KMQ403_KALEBFINAL");
    KQ403_KALEBCUTSCENE = 3;
    NPC_REFRESH(VLK_6065_OLDLADY);
    NPC_REFRESH(VLK_6003_KALEB);
    VLK_6003_KALEB.AIVAR[92] = FALSE;
    VLK_6065_OLDLADY.AIVAR[92] = FALSE;
    AI_STOPLOOKAT(HERO);
    HERO.AIVAR[4] = FALSE;
}

