func void ZS_GOSITBEDTIRED() {
    if (((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(NONE_13692_WOUNDEDREFUGEE))) || ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(NONE_13695_WOUNDEDREFUGEE)))) {
        NPC_PERCENABLE(SELF, PERC_MOVEMOB, 41654);
        SELF.SENSES = (SENSE_HEAR) | (SENSE_SEE);
        SELF.SENSES_RANGE = 1;
    };
    PERCEPTION_SET_NORMAL();
    B_RESETALL(SELF);
    MDL_APPLYOVERLAYMDS(SELF, "HUMANS_SIT_BED_TIRED.mds");
    AI_SETWALKMODE(SELF, NPC_WALK);
    if ((HLP_STRCMP(NPC_GETNEARESTWP(SELF), SELF.WP)) == (FALSE)) {
        AI_GOTOWP(SELF, SELF.WP);
    };
    AI_STARTSTATE(SELF, 46517, 0, "");
}

func void ZS_SIT_BED_TIRED() {
    if (((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(NONE_13692_WOUNDEDREFUGEE))) || ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(NONE_13695_WOUNDEDREFUGEE)))) {
        NPC_PERCENABLE(SELF, PERC_MOVEMOB, 41654);
        SELF.SENSES = (SENSE_HEAR) | (SENSE_SEE);
        SELF.SENSES_RANGE = 1;
    };
    NPC_PERCENABLE(SELF, PERC_ASSESSQUIETSOUND, 41644);
    NPC_PERCENABLE(SELF, PERC_ASSESSDAMAGE, 41635);
    NPC_PERCENABLE(SELF, PERC_ASSESSTALK, 46675);
    NPC_PERCENABLE(SELF, PERC_ASSESSPLAYER, 43306);
    AI_SETWALKMODE(SELF, NPC_WALK);
}

func int ZS_SIT_BED_TIRED_LOOP() {
    if (!(C_BODYSTATECONTAINS(SELF, BS_SIT))) {
        if (WLD_ISMOBAVAILABLE(SELF, "BED")) {
        } else if (WLD_ISMOBAVAILABLE(SELF, "BEDHIGH")) {
        } else if ((((PLAYER_GETOUTOFMYBEDCOMMENT) == (FALSE)) && (C_BODYSTATECONTAINS(HERO, BS_SIT))) && ((NPC_GETDISTTONPC(SELF, HERO)) <= (500))) {
            B_TURNTONPC(SELF, HERO);
            B_SAY(SELF, OTHER, "$GETOUTOFMYBED");
            PLAYER_GETOUTOFMYBEDCOMMENT = TRUE;
        };
    };
    return LOOP_CONTINUE;
}

func void ZS_SIT_BED_TIRED_END() {
    AI_USEMOB(SELF, "BED", -(1));
}

func void RTN_REMOVESITBEDTIREDMDS() {
    MDL_REMOVEOVERLAYMDS(SELF, "HUMANS_SIT_BED_TIRED.mds");
}

func void ZS_GOSITBEDTIRED_Q602() {
    PERCEPTION_SET_NORMAL();
    B_RESETALL(SELF);
    MDL_APPLYOVERLAYMDS(SELF, "HUMANS_SIT_BED_TIRED.mds");
    AI_SETWALKMODE(SELF, NPC_WALK);
    if ((HLP_STRCMP(NPC_GETNEARESTWP(SELF), SELF.WP)) == (FALSE)) {
        AI_GOTOWP(SELF, SELF.WP);
    };
    AI_STARTSTATE(SELF, 46522, 0, "");
}

func void ZS_SIT_BED_TIRED_Q602() {
    NPC_PERCENABLE(SELF, PERC_ASSESSDAMAGE, 41635);
    if ((C_NPC_ICANTTALK(SELF)) == (FALSE)) {
        NPC_PERCENABLE(SELF, PERC_ASSESSTALK, 46675);
    };
    if ((C_NPC_ICANTTALK(SELF)) == (TRUE)) {
        NPC_PERCENABLE(SELF, PERC_ASSESSENEMY, 41633);
        NPC_PERCENABLE(SELF, PERC_ASSESSFIGHTSOUND, 41641);
    };
    NPC_PERCENABLE(SELF, PERC_ASSESSPLAYER, 43306);
    AI_SETWALKMODE(SELF, NPC_WALK);
}

func int ZS_SIT_BED_TIRED_Q602_LOOP() {
    if (!(C_BODYSTATECONTAINS(SELF, BS_SIT))) {
        if (WLD_ISMOBAVAILABLE(SELF, "BED")) {
        } else if (WLD_ISMOBAVAILABLE(SELF, "BEDHIGH")) {
        } else if ((((PLAYER_GETOUTOFMYBEDCOMMENT) == (FALSE)) && (C_BODYSTATECONTAINS(HERO, BS_SIT))) && ((NPC_GETDISTTONPC(SELF, HERO)) <= (500))) {
            B_TURNTONPC(SELF, HERO);
            B_SAY(SELF, OTHER, "$GETOUTOFMYBED");
            PLAYER_GETOUTOFMYBEDCOMMENT = TRUE;
        };
    };
    return LOOP_CONTINUE;
}

func void ZS_SIT_BED_TIRED_Q602_END() {
    AI_USEMOB(SELF, "BED", -(1));
}

func void RTN_REMOVESITBEDTIREDQ602MDS() {
    MDL_REMOVEOVERLAYMDS(SELF, "HUMANS_SIT_BED_TIRED.mds");
}

