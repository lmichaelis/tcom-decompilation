var int SMITH_SWORD1HREMEMBER;
instance PC_MILITIA_SWORD_2H(C_INFO) {
    NPC = 50091;
    NR = 900;
    CONDITION = PC_MILITIA_SWORD_2H_CONDITION;
    INFORMATION = PC_MILITIA_SWORD_2H_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_MILITIA_SWORD_2H;
}

func int PC_MILITIA_SWORD_2H_CONDITION() {
    if (((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SMITHWEAPON)) && ((SMITHWEAPON_MODE) == (0))) {
        if ((BECOMEAGUARD_MAKE2HSWORDMYSELF) == (TRUE)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void SMITH_REMOVE1HMILITIASWORD() {
    if ((NPC_HASITEMS(HERO, 39498)) >= (1)) {
        NPC_REMOVEINVITEMS(HERO, 39498, 1);
        SMITH_SWORD1HREMEMBER = 1;
    };
    if ((NPC_HASITEMS(HERO, 39499)) >= (1)) {
        NPC_REMOVEINVITEMS(HERO, 39499, 1);
        SMITH_SWORD1HREMEMBER = 2;
    };
    if ((NPC_HASITEMS(HERO, 39500)) >= (1)) {
        NPC_REMOVEINVITEMS(HERO, 39500, 1);
        SMITH_SWORD1HREMEMBER = 2;
    };
    if ((NPC_HASITEMS(HERO, 39501)) >= (1)) {
        NPC_REMOVEINVITEMS(HERO, 39501, 1);
        SMITH_SWORD1HREMEMBER = 3;
    };
}

func void SMITH_GIVE2HMILITIASWORD() {
    if ((SMITH_SWORD1HREMEMBER) == (1)) {
        CREATEINVITEMS(HERO, 39502, 1);
    };
    if ((SMITH_SWORD1HREMEMBER) == (2)) {
        CREATEINVITEMS(HERO, 39503, 1);
    };
    if ((SMITH_SWORD1HREMEMBER) == (3)) {
        CREATEINVITEMS(HERO, 39504, 1);
    };
}

func void PC_MILITIA_SWORD_2H_INFO() {
    if (((((NPC_HASITEMS(HERO, 39498)) >= (1)) || ((NPC_HASITEMS(HERO, 39499)) >= (1))) || ((NPC_HASITEMS(HERO, 39500)) >= (1))) || ((NPC_HASITEMS(HERO, 39501)) >= (1))) {
        AI_FUNCTION(HERO, 48915);
        AI_FUNCTION(HERO, 48916);
        PRINT(PRINT_SMITHSUCCESS);
        BECOMEAGUARD_MAKE2HSWORDMYSELF = 2;
    };
    PRINT(PRINT_PRODITEMSMISSING);
    CREATEINVITEMS(HERO, 34183, 1);
    B_ENDPRODUCTIONDIALOG();
}

