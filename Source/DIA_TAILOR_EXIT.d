instance DIA_TAILOR_EXIT(C_INFO) {
    NPC = 52541;
    NR = 999;
    CONDITION = DIA_TAILOR_EXIT_CONDITION;
    INFORMATION = DIA_TAILOR_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_TAILOR_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_TAILOR_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_TAILOR_HELLO(C_INFO) {
    NPC = 52541;
    NR = 1;
    CONDITION = DIA_TAILOR_HELLO_CONDITION;
    INFORMATION = DIA_TAILOR_HELLO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What do you do here?";
}

func int DIA_TAILOR_HELLO_CONDITION() {
    return TRUE;
}

func void DIA_TAILOR_HELLO_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Tailor_Hello_15_01");
    AI_STARTFACEANI(SELF, "S_SURPRISE", 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Tailor_Hello_03_02");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Tailor_Hello_03_03");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    TRADER_LOGENTRY_TAILOR();
}

instance DIA_TAILOR_BUY(C_INFO) {
    NPC = 52541;
    NR = 950;
    CONDITION = DIA_TAILOR_BUY_CONDITION;
    INFORMATION = DIA_TAILOR_BUY_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I'd like to buy some clothes.";
}

func int DIA_TAILOR_BUY_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 72447)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int TAILOR_VLK_RICH_HAT;
var int TAILOR_VLK_RICH;
var int TAILOR_VLK_NORMAL;
var int TAILOR_VLK_POOR;
func void DIA_TAILOR_CHOICES() {
    TAILOR_VLK_RICH = 0;
    TAILOR_VLK_NORMAL = 0;
    TAILOR_VLK_POOR = 0;
    INFO_CLEARCHOICES(72450);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_07, 72458);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_08, 72466);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_09, 72474);
    INFO_ADDCHOICE(72450, DIALOG_BACK, 72481);
}

func void DIA_TAILOR_BUY_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Tailor_BUY_15_01");
    if ((((HERO.GUILD) == (GIL_VLK)) || ((HERO.GUILD) == (GIL_MIL))) || ((HERO.GUILD) == (GIL_SLD))) {
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Tailor_BUY_03_04");
        DIA_TAILOR_CHOICES();
    };
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Tailor_BUY_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Tailor_BUY_03_03");
    AI_RESETFACEANI(SELF);
}

func void DIA_TAILOR_BUY_RICH_CHOICES() {
    INFO_CLEARCHOICES(72450);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_10, 72461);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_11, 72462);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_12, 72463);
    INFO_ADDCHOICE(72450, DIALOG_BACK, 72456);
}

func void DIA_TAILOR_BUY_RICH_CHOICES_HAT() {
    INFO_CLEARCHOICES(72450);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_13, 72464);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_14, 72465);
    INFO_ADDCHOICE(72450, DIALOG_BACK, 72458);
}

func void DIA_TAILOR_BUY_RICH() {
    if ((NPC_HASITEMS(OTHER, 34203)) >= (VALUE_ITAR_VLK_OLDCITY)) {
        if ((TAILOR_VLK_RICH_HAT) == (1)) {
            if ((TAILOR_VLK_RICH) == (1)) {
                CREATEINVITEMS(SELF, 35530, 1);
                B_GIVEINVITEMS(SELF, OTHER, 35530, 1);
                AI_EQUIPARMOR(OTHER, 35530);
            } else if ((TAILOR_VLK_RICH) == (2)) {
                CREATEINVITEMS(SELF, 35528, 1);
                B_GIVEINVITEMS(SELF, OTHER, 35528, 1);
                AI_EQUIPARMOR(OTHER, 35528);
            } else if ((TAILOR_VLK_RICH) == (3)) {
                CREATEINVITEMS(SELF, 35529, 1);
                B_GIVEINVITEMS(SELF, OTHER, 35529, 1);
                AI_EQUIPARMOR(OTHER, 35529);
            };
        } else if ((TAILOR_VLK_RICH) == (1)) {
            CREATEINVITEMS(SELF, 35533, 1);
            B_GIVEINVITEMS(SELF, OTHER, 35533, 1);
            AI_EQUIPARMOR(OTHER, 35533);
        } else if ((TAILOR_VLK_RICH) == (2)) {
            CREATEINVITEMS(SELF, 35531, 1);
            B_GIVEINVITEMS(SELF, OTHER, 35531, 1);
            AI_EQUIPARMOR(OTHER, 35531);
        } else if ((TAILOR_VLK_RICH) == (3)) {
            CREATEINVITEMS(SELF, 35532, 1);
            B_GIVEINVITEMS(SELF, OTHER, 35532, 1);
            AI_EQUIPARMOR(OTHER, 35532);
        };
        NPC_REMOVEINVITEMS(SELF, 34203, VALUE_ITAR_VLK_OLDCITY);
        DIA_TAILOR_BUY_RICH_CHOICES();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_TAILOR_BUY_RICH_CHOICES();
}

func void DIA_TAILOR_BUY_RICH_V1() {
    TAILOR_VLK_RICH = 1;
    DIA_TAILOR_BUY_RICH_CHOICES_HAT();
}

func void DIA_TAILOR_BUY_RICH_V2() {
    TAILOR_VLK_RICH = 2;
    DIA_TAILOR_BUY_RICH_CHOICES_HAT();
}

func void DIA_TAILOR_BUY_RICH_V3() {
    TAILOR_VLK_RICH = 3;
    DIA_TAILOR_BUY_RICH_CHOICES_HAT();
}

func void DIA_TAILOR_BUY_RICH_HAT_V1() {
    TAILOR_VLK_RICH_HAT = 1;
    DIA_TAILOR_BUY_RICH();
}

func void DIA_TAILOR_BUY_RICH_HAT_V2() {
    TAILOR_VLK_RICH_HAT = 2;
    DIA_TAILOR_BUY_RICH();
}

func void DIA_TAILOR_BUY_NORMAL_CHOICES() {
    INFO_CLEARCHOICES(72450);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_15, 72468);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_16, 72469);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_17, 72470);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_18, 72471);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_19, 72472);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_41, 72473);
    INFO_ADDCHOICE(72450, DIALOG_BACK, 72456);
}

func void DIA_TAILOR_BUY_NORMAL() {
    if ((NPC_HASITEMS(OTHER, 34203)) >= (VALUE_ITAR_VLK_CITY)) {
        if ((TAILOR_VLK_NORMAL) == (1)) {
            CREATEINVITEMS(SELF, 35543, 1);
            B_GIVEINVITEMS(SELF, OTHER, 35543, 1);
            AI_EQUIPARMOR(OTHER, 35543);
        } else if ((TAILOR_VLK_NORMAL) == (2)) {
            CREATEINVITEMS(SELF, 35544, 1);
            B_GIVEINVITEMS(SELF, OTHER, 35544, 1);
            AI_EQUIPARMOR(OTHER, 35544);
        } else if ((TAILOR_VLK_NORMAL) == (3)) {
            CREATEINVITEMS(SELF, 35545, 1);
            B_GIVEINVITEMS(SELF, OTHER, 35545, 1);
            AI_EQUIPARMOR(OTHER, 35545);
        } else if ((TAILOR_VLK_NORMAL) == (4)) {
            CREATEINVITEMS(SELF, 35548, 1);
            B_GIVEINVITEMS(SELF, OTHER, 35548, 1);
            AI_EQUIPARMOR(SELF, 35548);
            AI_EQUIPARMOR(OTHER, 35548);
        } else if ((TAILOR_VLK_NORMAL) == (5)) {
            CREATEINVITEMS(SELF, 35550, 1);
            B_GIVEINVITEMS(SELF, OTHER, 35550, 1);
            AI_EQUIPARMOR(OTHER, 35550);
        } else if ((TAILOR_VLK_NORMAL) == (6)) {
            CREATEINVITEMS(SELF, 35552, 1);
            B_GIVEINVITEMS(SELF, OTHER, 35552, 1);
            AI_EQUIPARMOR(OTHER, 35552);
        };
        NPC_REMOVEINVITEMS(SELF, 34203, VALUE_ITAR_VLK_CITY);
        DIA_TAILOR_BUY_NORMAL_CHOICES();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_TAILOR_BUY_NORMAL_CHOICES();
}

func void DIA_TAILOR_BUY_NORMAL_V1() {
    TAILOR_VLK_NORMAL = 1;
    DIA_TAILOR_BUY_NORMAL();
}

func void DIA_TAILOR_BUY_NORMAL_V2() {
    TAILOR_VLK_NORMAL = 2;
    DIA_TAILOR_BUY_NORMAL();
}

func void DIA_TAILOR_BUY_NORMAL_V3() {
    TAILOR_VLK_NORMAL = 3;
    DIA_TAILOR_BUY_NORMAL();
}

func void DIA_TAILOR_BUY_NORMAL_V4() {
    TAILOR_VLK_NORMAL = 4;
    DIA_TAILOR_BUY_NORMAL();
}

func void DIA_TAILOR_BUY_NORMAL_V5() {
    TAILOR_VLK_NORMAL = 5;
    DIA_TAILOR_BUY_NORMAL();
}

func void DIA_TAILOR_BUY_NORMAL_V6() {
    TAILOR_VLK_NORMAL = 6;
    DIA_TAILOR_BUY_NORMAL();
}

func void DIA_TAILOR_BUY_POOR_CHOICES() {
    INFO_CLEARCHOICES(72450);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_20, 72476);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_21, 72477);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_22, 72478);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_23, 72479);
    INFO_ADDCHOICE(72450, TXT_ARMORTRADE_24, 72480);
    INFO_ADDCHOICE(72450, DIALOG_BACK, 72456);
}

func void DIA_TAILOR_BUY_POOR() {
    if ((NPC_HASITEMS(OTHER, 34203)) >= (VALUE_ITAR_VLK_SLUMS)) {
        if ((TAILOR_VLK_POOR) == (1)) {
            CREATEINVITEMS(SELF, 35542, 1);
            B_GIVEINVITEMS(SELF, OTHER, 35542, 1);
            AI_EQUIPARMOR(OTHER, 35542);
        } else if ((TAILOR_VLK_POOR) == (2)) {
            CREATEINVITEMS(SELF, 35546, 1);
            B_GIVEINVITEMS(SELF, OTHER, 35546, 1);
            AI_EQUIPARMOR(OTHER, 35546);
        } else if ((TAILOR_VLK_POOR) == (3)) {
            CREATEINVITEMS(SELF, 35549, 1);
            B_GIVEINVITEMS(SELF, OTHER, 35549, 1);
            AI_EQUIPARMOR(OTHER, 35549);
        } else if ((TAILOR_VLK_POOR) == (4)) {
            CREATEINVITEMS(SELF, 35547, 1);
            B_GIVEINVITEMS(SELF, OTHER, 35547, 1);
            AI_EQUIPARMOR(OTHER, 35547);
        } else if ((TAILOR_VLK_POOR) == (5)) {
            CREATEINVITEMS(SELF, 35551, 1);
            B_GIVEINVITEMS(SELF, OTHER, 35551, 1);
            AI_EQUIPARMOR(OTHER, 35551);
        };
        NPC_REMOVEINVITEMS(SELF, 34203, VALUE_ITAR_VLK_SLUMS);
        DIA_TAILOR_BUY_POOR_CHOICES();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
    DIA_TAILOR_BUY_POOR_CHOICES();
}

func void DIA_TAILOR_BUY_POOR_V1() {
    TAILOR_VLK_POOR = 1;
    DIA_TAILOR_BUY_POOR();
}

func void DIA_TAILOR_BUY_POOR_V2() {
    TAILOR_VLK_POOR = 2;
    DIA_TAILOR_BUY_POOR();
}

func void DIA_TAILOR_BUY_POOR_V3() {
    TAILOR_VLK_POOR = 3;
    DIA_TAILOR_BUY_POOR();
}

func void DIA_TAILOR_BUY_POOR_V4() {
    TAILOR_VLK_POOR = 4;
    DIA_TAILOR_BUY_POOR();
}

func void DIA_TAILOR_BUY_POOR_V5() {
    TAILOR_VLK_POOR = 5;
    DIA_TAILOR_BUY_POOR();
}

func void DIA_TAILOR_BUY_BACK() {
    INFO_CLEARCHOICES(72450);
    AI_RESETFACEANI(SELF);
}

instance DIA_TAILOR_PEON(C_INFO) {
    NPC = 52541;
    NR = 1;
    CONDITION = DIA_TAILOR_PEON_CONDITION;
    INFORMATION = DIA_TAILOR_PEON_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Can I be your apprentice?";
}

func int DIA_TAILOR_PEON_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 72447)) {
        if (((WHONEEDPEON) == (TRUE)) && ((IAM_PEON) == (FALSE))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_TAILOR_PEON_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Tailor_Peon_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Tailor_Peon_03_02");
    AI_RESETFACEANI(OTHER);
}

instance DIA_TAILOR_PICKPOCKET(C_INFO) {
    NPC = 52541;
    NR = 900;
    CONDITION = DIA_TAILOR_PICKPOCKET_CONDITION;
    INFORMATION = DIA_TAILOR_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_80;
}

func int DIA_TAILOR_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_TAILOR_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(72485);
    INFO_ADDCHOICE(72485, DIALOG_BACK, 72489);
    INFO_ADDCHOICE(72485, DIALOG_PICKPOCKET, 72488);
}

func void DIA_TAILOR_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (2)) {
        B_PICKPOCKET_AMBIENT_TIER_2();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(72485);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(72485);
}

func void DIA_TAILOR_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(72485);
}

