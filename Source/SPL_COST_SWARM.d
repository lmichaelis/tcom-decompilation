const int SPL_COST_SWARM = 20;
const int SPL_SWARM_DAMAGE = 80;
const int SPL_TIME_SWARM = 6;
instance SPELL_SWARM(C_SPELL_PROTO) {
    C_SPELL_PROTO();
    TIME_PER_MANA = 0;
    TARGETCOLLECTALGO = TARGET_COLLECT_FOCUS;
}

func int SPELL_LOGIC_SWARM(var int MANAINVESTED) {
    if (((NPC_GETACTIVESPELLISSCROLL(SELF)) && ((SELF.ATTRIBUTE[2]) >= (SPL_COST_SCROLL))) || ((SELF.ATTRIBUTE[2]) >= (SPL_COST_SWARM))) {
        SELF.ATTRIBUTE[2] = (SELF.ATTRIBUTE[2]) - (SPL_COST_SWARM);
        return SPL_SENDCAST;
    };
    return SPL_SENDSTOP;
}

