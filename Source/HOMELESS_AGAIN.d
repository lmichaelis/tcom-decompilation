var int HOMELESS_AGAIN;
var int HOMELESS_ASK;
var int HOMELESS_COUNT;
var int HOMELESS_HELP;
instance DIA_HOMELESS_EXIT(C_INFO) {
    NPC = 51889;
    NR = 999;
    CONDITION = DIA_HOMELESS_EXIT_CONDITION;
    INFORMATION = DIA_HOMELESS_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_BEGGAREND;
}

func int DIA_HOMELESS_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_HOMELESS_EXIT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Homeless_EXIT_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Homeless_EXIT_03_02");
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_HOMELESS_HOMELESSHELLO(C_INFO) {
    NPC = 51889;
    NR = 1;
    CONDITION = DIA_HOMELESS_HOMELESSHELLO_CONDITION;
    INFORMATION = DIA_HOMELESS_HOMELESSHELLO_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_HOMELESS_HOMELESSHELLO_CONDITION() {
    if ((FMQ001_INSTRUCTORRUN) == (0)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_HOMELESS_HOMELESSHELLO_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Homeless_HomelessHello_03_01");
}

instance DIA_HOMELESS_WHATUP(C_INFO) {
    NPC = 51889;
    NR = 1;
    CONDITION = DIA_HOMELESS_WHATUP_CONDITION;
    INFORMATION = DIA_HOMELESS_WHATUP_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "What is it?";
}

func int DIA_HOMELESS_WHATUP_CONDITION() {
    return TRUE;
}

func void DIA_HOMELESS_WHATUP_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Homeless_WhatUp_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Homeless_WhatUp_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Homeless_WhatUp_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Homeless_WhatUp_03_04");
}

instance DIA_HOMELESS_HOMELESSGOLD(C_INFO) {
    NPC = 51889;
    NR = 2;
    CONDITION = DIA_HOMELESS_HOMELESSGOLD_CONDITION;
    INFORMATION = DIA_HOMELESS_HOMELESSGOLD_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_BEGGARMONEY;
}

func int DIA_HOMELESS_HOMELESSGOLD_CONDITION() {
    if (((NPC_HASITEMS(OTHER, 34203)) >= (HOMELESS_ASKFORMONEY)) && (NPC_KNOWSINFO(OTHER, 71895))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_HOMELESS_HOMELESSGOLD_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Homeless_HomelessGold_15_01");
    Q602_HOMELESSDUDE_COUNTGOLD = (Q602_HOMELESSDUDE_COUNTGOLD) + (1);
    B_GIVEINVITEMS(OTHER, SELF, 34203, HOMELESS_ASKFORMONEY);
    AI_OUTPUT(SELF, OTHER, "DIA_Homeless_HomelessGold_03_02");
    HOMELESS_AGAIN = WLD_GETDAY();
    HOMELESS_HELP = TRUE;
    HOMELESS_COUNT = (HOMELESS_COUNT) + (1);
    if ((((HOMELESS_COUNT) == (7)) || ((HOMELESS_COUNT) == (14))) || ((HOMELESS_COUNT) == (21))) {
        B_GIVEPLAYERXP(XP_EVENT_HOMLESS_BONUS);
    };
    if ((((HOMELESS_COUNT) == (28)) || ((HOMELESS_COUNT) == (35))) || ((HOMELESS_COUNT) == (42))) {
        B_GIVEPLAYERXP((XP_EVENT_HOMLESS_BONUS) / (2));
    };
    if ((((HOMELESS_COUNT) == (49)) || ((HOMELESS_COUNT) == (56))) || ((HOMELESS_COUNT) == (63))) {
        B_GIVEPLAYERXP((XP_EVENT_HOMLESS_BONUS) / (5));
    };
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_HOMELESS_AMBIENTTALK(C_INFO) {
    NPC = 51889;
    NR = 3;
    CONDITION = DIA_HOMELESS_AMBIENTTALK_CONDITION;
    INFORMATION = DIA_HOMELESS_AMBIENTTALK_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_HOMELESS_AMBIENTTALK_CONDITION() {
    if (((((HOMELESS_AGAIN) == (WLD_GETDAY())) && (NPC_ISINSTATE(SELF, 61599))) && ((HOMELESS_HELP) == (TRUE))) && ((SELF.AIVAR[66]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_HOMELESS_AMBIENTTALK_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Homeless_AmbientTalk_03_01");
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_HOMELESS_INEEDGOLD(C_INFO) {
    NPC = 51889;
    NR = 4;
    CONDITION = DIA_HOMELESS_INEEDGOLD_CONDITION;
    INFORMATION = DIA_HOMELESS_INEEDGOLD_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_HOMELESS_INEEDGOLD_CONDITION() {
    if (((((HOMELESS_AGAIN) != (WLD_GETDAY())) && ((HOMELESS_ASK) != (WLD_GETDAY()))) && ((HOMELESS_HELP) == (TRUE))) && ((SELF.AIVAR[66]) == (FALSE))) {
        if ((FMQ001_INSTRUCTORRUN) == (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_HOMELESS_INEEDGOLD_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Homeless_INeedGold_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Homeless_INeedGold_03_02");
    HOMELESS_ASK = WLD_GETDAY();
}

instance DIA_HOMELESS_IHELPED(C_INFO) {
    NPC = 51889;
    NR = 5;
    CONDITION = DIA_HOMELESS_IHELPED_CONDITION;
    INFORMATION = DIA_HOMELESS_IHELPED_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I already helped you once.";
}

func int DIA_HOMELESS_IHELPED_CONDITION() {
    if ((HOMELESS_HELP) == (TRUE)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_HOMELESS_IHELPED_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Homeless_IHelped_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Homeless_IHelped_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Homeless_IHelped_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Homeless_IHelped_03_04");
}

instance DIA_HOMELESS_SCARED(C_INFO) {
    NPC = 51889;
    NR = 6;
    CONDITION = DIA_HOMELESS_SCARED_CONDITION;
    INFORMATION = DIA_HOMELESS_SCARED_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_HOMELESS_SCARED_CONDITION() {
    if (((SELF.AIVAR[66]) == (TRUE)) && (NPC_ISINSTATE(SELF, 61599))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_HOMELESS_SCARED_INFO() {
    AI_STARTFACEANI(SELF, S_FRIGHTENED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Homeless_SCARED_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Homeless_SCARED_03_02");
    AI_STOPPROCESSINFOS(SELF);
}

