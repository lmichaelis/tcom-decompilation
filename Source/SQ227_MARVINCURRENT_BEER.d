var int SQ227_MARVINCURRENT_BEER;
var int SQ227_MARVINCURRENT_OWBEER;
var int SQ227_MARVINCURRENT_BEER_02;
var int SQ227_MARVINCURRENT_BEER_03;
var int SQ227_MARVINCURRENT_DARKBEER;
var int SQ227_EZEKIELBEERCOUNT;
var int SQ227_EZEKIELBEEROWCOUNT;
var int SQ227_EZEKIELBEER02COUNT;
var int SQ227_EZEKIELBEER03COUNT;
var int SQ227_EZEKIELDARKBEERCOUNT;
var int EZEKIEL_SQ227_GOTBEER;
var int EZEKIEL_SQ227_GOTPARSLEY;
func void DIA_EZEKIEL_SQ227_GOTEVERYTHING() {
    if (((EZEKIEL_SQ227_GOTBEER) == (TRUE)) && ((EZEKIEL_SQ227_GOTPARSLEY) == (TRUE))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Ezekiel_SQ227_GotParsley_GotEverything_03_01");
        AI_OUTPUT(SELF, OTHER, "DIA_Ezekiel_SQ227_GotParsley_GotEverything_03_02");
        AI_LOGENTRY(TOPIC_SQ227, LOG_SQ227_EZEKIEL_GOTEVERYTHING);
        AI_FUNCTION(SELF, 62628);
    };
}

func void DIA_EZEKIEL_SQ227_NOBEER() {
    AI_STARTFACEANI(SELF, S_THINK, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Ezekiel_SQ227_GotBeer_03_03");
    AI_RESETFACEANI(SELF);
}

func void DIA_EZEKIEL_SQ227_GIVEBEER() {
    EZEKIEL_SQ227_GOTBEER = TRUE;
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Ezekiel_SQ227_GotBeer_03_02");
    AI_LOGENTRY(TOPIC_SQ227, LOG_SQ227_EZEKIEL_GOTBEER);
    DIA_EZEKIEL_SQ227_GOTEVERYTHING();
}

func void SQ227_MARVIN_GIVEDARK() {
    SQ227_MARVINCURRENT_DARKBEER = NPC_HASITEMS(OTHER, 36364);
    SQ227_EZEKIELDARKBEERCOUNT = NPC_HASITEMS(SELF, 36364);
    if ((NPC_HASITEMS(OTHER, 36364)) >= (1)) {
        if ((NPC_HASITEMS(OTHER, 36364)) < ((10) - (SQ227_EZEKIELBEERCOUNT))) {
        } else {
            SQ227_EZEKIELBEERCOUNT = (SQ227_EZEKIELBEERCOUNT) + (SQ227_MARVINCURRENT_DARKBEER);
        };
    };
    DIA_EZEKIEL_SQ227_GIVEBEER();
}

func void SQ227_MARVIN_GIVEBEER03() {
    SQ227_MARVINCURRENT_BEER_03 = NPC_HASITEMS(OTHER, 36375);
    SQ227_EZEKIELBEER03COUNT = NPC_HASITEMS(SELF, 36375);
    if ((NPC_HASITEMS(OTHER, 36375)) >= (1)) {
        if ((NPC_HASITEMS(OTHER, 36375)) < ((10) - (SQ227_EZEKIELBEERCOUNT))) {
        } else {
            SQ227_EZEKIELBEERCOUNT = (SQ227_EZEKIELBEERCOUNT) + (SQ227_MARVINCURRENT_BEER_03);
        };
    };
    if ((SQ227_EZEKIELBEERCOUNT) < (10)) {
        SQ227_MARVIN_GIVEDARK();
    };
    DIA_EZEKIEL_SQ227_GIVEBEER();
}

func void SQ227_MARVIN_GIVEBEER02() {
    SQ227_MARVINCURRENT_BEER_02 = NPC_HASITEMS(OTHER, 36368);
    SQ227_EZEKIELBEER02COUNT = NPC_HASITEMS(SELF, 36368);
    if ((NPC_HASITEMS(OTHER, 36368)) >= (1)) {
        if ((NPC_HASITEMS(OTHER, 36368)) < ((10) - (SQ227_EZEKIELBEERCOUNT))) {
        } else {
            SQ227_EZEKIELBEERCOUNT = (SQ227_EZEKIELBEERCOUNT) + (SQ227_MARVINCURRENT_BEER_02);
        };
    };
    if ((SQ227_EZEKIELBEERCOUNT) < (10)) {
        SQ227_MARVIN_GIVEBEER03();
    };
    DIA_EZEKIEL_SQ227_GIVEBEER();
}

func void SQ227_MARVIN_GIVEOWBEER() {
    SQ227_MARVINCURRENT_OWBEER = NPC_HASITEMS(OTHER, 36363);
    SQ227_EZEKIELBEEROWCOUNT = NPC_HASITEMS(SELF, 36363);
    if ((NPC_HASITEMS(OTHER, 36363)) >= (1)) {
        if ((NPC_HASITEMS(OTHER, 36363)) < ((10) - (SQ227_EZEKIELBEERCOUNT))) {
        } else {
            SQ227_EZEKIELBEERCOUNT = (SQ227_EZEKIELBEERCOUNT) + (SQ227_MARVINCURRENT_OWBEER);
        };
    };
    if ((SQ227_EZEKIELBEERCOUNT) < (10)) {
        SQ227_MARVIN_GIVEBEER02();
    };
    DIA_EZEKIEL_SQ227_GIVEBEER();
}

func void SQ227_MARVIN_GIVEBEER() {
    SQ227_MARVINCURRENT_BEER = NPC_HASITEMS(OTHER, 33984);
    if ((NPC_HASITEMS(OTHER, 33984)) >= (10)) {
        B_GIVEINVITEMS(OTHER, SELF, 33984, 10);
        SQ227_EZEKIELBEERCOUNT = 10;
        DIA_EZEKIEL_SQ227_GIVEBEER();
    };
    B_GIVEINVITEMS(OTHER, SELF, 33984, SQ227_MARVINCURRENT_BEER);
    SQ227_EZEKIELBEERCOUNT = (SQ227_EZEKIELBEERCOUNT) + (SQ227_MARVINCURRENT_BEER);
    SQ227_MARVIN_GIVEOWBEER();
}

func void SQ227_CHECKMARVINBEER() {
    SQ227_MARVINCURRENT_BEER = NPC_HASITEMS(OTHER, 33984);
    SQ227_MARVINCURRENT_OWBEER = NPC_HASITEMS(OTHER, 36363);
    SQ227_MARVINCURRENT_BEER_02 = NPC_HASITEMS(OTHER, 36368);
    SQ227_MARVINCURRENT_BEER_03 = NPC_HASITEMS(OTHER, 36375);
    SQ227_MARVINCURRENT_DARKBEER = NPC_HASITEMS(OTHER, 36364);
    if ((((((SQ227_MARVINCURRENT_BEER) + (SQ227_MARVINCURRENT_OWBEER)) + (SQ227_MARVINCURRENT_BEER_02)) + (SQ227_MARVINCURRENT_BEER_03)) + (SQ227_MARVINCURRENT_DARKBEER)) >= (10)) {
        SQ227_MARVIN_GIVEBEER();
    };
    DIA_EZEKIEL_SQ227_NOBEER();
}

func void SQ227_TELEPORTALBYN() {
    B_STARTOTHERROUTINE(BAU_700_ALBYN, "SQ227_FOLLOW");
    NPC_REFRESH(BAU_700_ALBYN);
    TELEPORTNPCTOWP(57501, BAU_700_ALBYN.WP);
}

func void SQ227_EZEKIELMARKET_APPLY() {
    var ZCMOVER MOVER1;
    var int MOVPTR1;
    var int SQ227_EZEKIELMARKET_COLLISION;
    if ((SQ227_EZEKIELMARKET_COLLISION) == (0)) {
        PRINTD("Rozpoczynam - SQ227_EzekielMarket_Apply");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("SQ227_MOVER_EZEKIELMARKET");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_02", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_03", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_03", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_TABLE_01", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("SQ227_MOVER_EZEKIELMARKET");
        SQ227_EZEKIELMARKET_COLLISION = 1;
    };
    if (((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ227_EzekielMarket_Apply");
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_02", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_03", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_BOX_03", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_MARKET_EZEKIEL_TABLE_01", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(62629);
        SQ227_EZEKIELMARKET_COLLISION = 0;
    };
}

func void SQ227_REMOVEVEIT() {
    if ((SQ227_VEITMARKET) == (0)) {
        SQ227_VEITMARKET = 1;
        SQ227_VEITMARKET_DAY = WLD_GETDAY();
    };
}

func void SQ227_VEITMARKET_APPLY() {
    var ZCMOVER MOVER2;
    var int MOVPTR2;
    var ZCMOVER MOVER1;
    var int MOVPTR1;
    var int SQ227_VEITMARKET_COLLISION;
    if ((SQ227_VEITMARKET_COLLISION) == (0)) {
        PRINTD("Rozpoczynam - SQ227_VeitMarket_Apply");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("SQ227_MOVER_VEITMARKET");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("SQ227_MOVER_VEITMARKET_CITY");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BENCH_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_CART_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BOX_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BOX_02", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BOX_03", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_MARKET_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_MARKET_02", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_BOX_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_BOX_02", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("SQ227_MOVER_VEITMARKET");
        WLD_SENDTRIGGER("SQ227_MOVER_VEITMARKET_CITY");
        SQ227_VEITMARKET_COLLISION = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ227_VeitMarket_Apply");
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BENCH_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_CART_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BOX_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BOX_02", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEITMARKET_BOX_03", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_MARKET_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_MARKET_02", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_BOX_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ227_VEIT_CITY_BOX_02", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(62634);
        SQ227_VEITMARKET_COLLISION = 0;
    };
}

