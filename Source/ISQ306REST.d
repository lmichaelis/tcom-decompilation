var int ISQ306REST;
func void PC_SLEEP(var int T) {
    AI_STOPPROCESSINFOS(SELF);
    TELEMETRY_PLAYERSLEEP(T);
    T = (T) + (24);
    WLD_SETTIME(T, 0);
    WLD_STOPEFFECT("DEMENTOR_FX");
    if ((PLAYER_MOBSI_PRODUCTION) != (MOBSI_BENCH)) {
        if ((Q105_MARVINDRUNKKURTHOUSE) == (TRUE)) {
            HERO.ATTRIBUTE[0] = HERO.ATTRIBUTE[1];
            HERO.ATTRIBUTE[2] = HERO.ATTRIBUTE[3];
        } else if ((ISQ306REST) == (TRUE)) {
            PRINTSCREEN(PRINT_TOURNAMENTREST, -(1), -(1), FONT_SCREEN, 2);
            HERO.ATTRIBUTE[0] = HERO.ATTRIBUTE[1];
            HERO.ATTRIBUTE[2] = HERO.ATTRIBUTE[3];
            ISQ306REST = FALSE;
        } else if ((LOG_GETSTATUS(MIS_Q501)) == (LOG_RUNNING)) {
        } else {
            HERO.ATTRIBUTE[0] = HERO.ATTRIBUTE[1];
            HERO.ATTRIBUTE[2] = HERO.ATTRIBUTE[3];
        };
    };
    PRINTSCREEN(PRINT_THATWASFAST, -(1), -(1), FONT_SCREEN, 2);
    PLAYER_MOBSI_PRODUCTION = MOBSI_NONE;
    HERO.AIVAR[4] = FALSE;
    SETHOLDTIME(FALSE);
    PRINTGLOBALS(PD_ITEM_MOBSI);
    NPC_SENDPASSIVEPERC(HERO, PERC_ASSESSENTERROOM, $INSTANCE_HELP, HERO);
}

func void SLEEPABIT_S1() {
    var C_NPC ROCK;
    var C_NPC HER;
    HER = HLP_GETNPC(50091);
    ROCK = HLP_GETNPC(60260);
    if (((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(HER))) || ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(ROCK)))) {
        if ((KAPITEL) == (6)) {
            B_SAY(HERO, HERO, "$MARVIN_QuestRefused2");
        } else if (((Q307_POISONWAY) >= (1)) && ((Q307_WAITPOISONWAIT) == (FALSE))) {
            AI_FUNCTION(HERO, 64637);
        } else if ((Q301_BLOCKTELEPORT) == (1)) {
            AI_OUTPUT(HERO, HERO, "DIA_Marvin_CantSleepRightNow_15_00");
            AI_USEMOB(HERO, NPC_GETDETECTEDMOB(HERO), -(1));
            PLAYER_MOBSI_PRODUCTION = MOBSI_NONE;
            AI_STOPPROCESSINFOS(HERO);
        } else if ((SILBACHSLEEP) == (1)) {
            if ((LOG_GETSTATUS(MIS_Q501)) == (LOG_RUNNING)) {
                SELF.AIVAR[4] = TRUE;
                PLAYER_MOBSI_PRODUCTION = MOBSI_SLEEPABIT;
                AI_PROCESSINFOS(HER);
            } else if ((NPC_GETDISTTOWP(SELF, "VILLAGE_PUB_ROOM02_BED01")) <= (500)) {
                AI_FUNCTION(HERO, 47997);
            } else {
                AI_OUTPUT(OTHER, SELF, "DIA_Marvin_WrongBed_15_00");
                AI_USEMOB(HERO, NPC_GETDETECTEDMOB(HERO), -(1));
                PLAYER_MOBSI_PRODUCTION = MOBSI_NONE;
                AI_STOPPROCESSINFOS(HERO);
            };
        } else {
            SELF.AIVAR[4] = TRUE;
            PLAYER_MOBSI_PRODUCTION = MOBSI_SLEEPABIT;
            AI_PROCESSINFOS(HER);
        };
    };
}

func void Q103_UNLOCKVILLAGE() {
    WLD_SENDTRIGGER("VILLAGE_DOOR_01");
    WLD_SENDTRIGGER("VILLAGE_DOOR_02");
    WLD_SENDTRIGGER("VILLAGE_DOOR_03");
    WLD_SENDTRIGGER("VILLAGE_DOOR_04");
    WLD_SENDTRIGGER("VILLAGE_DOOR_05");
    WLD_SENDTRIGGER("VILLAGE_DOOR_06");
    WLD_SENDTRIGGER("VILLAGE_DOOR_07");
    WLD_SENDTRIGGER("VILLAGE_DOOR_08");
    WLD_SENDTRIGGER("VILLAGE_DOOR_09");
    WLD_SENDTRIGGER("VILLAGE_DOOR_10");
    WLD_SENDTRIGGER("VILLAGE_DOOR_11");
    WLD_SENDTRIGGER("VILLAGE_DOOR_12");
    WLD_SENDTRIGGER("VILLAGE_DOOR_13");
    WLD_SENDTRIGGER("VILLAGE_DOOR_14");
    WLD_SENDTRIGGER("VILLAGE_DOOR_15");
    WLD_SENDTRIGGER("VILLAGE_DOOR_16");
    WLD_SENDTRIGGER("VILLAGE_DOOR_17");
    WLD_SENDTRIGGER("VILLAGE_DOOR_18");
    WLD_SENDTRIGGER("VILLAGE_DOOR_19");
    WLD_SENDTRIGGER("VILLAGE_DOOR_20");
    WLD_SENDTRIGGER("VILLAGE_DOOR_21");
    B_STARTOTHERROUTINE(BAU_713_OSVALD, START);
    B_STARTOTHERROUTINE(BAU_714_REMY, START);
    B_STARTOTHERROUTINE(NONE_11006_VEIT, START);
    B_STARTOTHERROUTINE(BAU_715_HEREFORD, START);
    B_STARTOTHERROUTINE(BAU_11008_FARMER, START);
    B_STARTOTHERROUTINE(BAU_716_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11010_FARMER, "PreStart");
    B_STARTOTHERROUTINE(BAU_11300_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11011_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11012_FARMER, START);
    B_STARTOTHERROUTINE(BAU_717_FINJA, "SQ106_WORK");
    B_STARTOTHERROUTINE(BAU_11015_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11016_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11017_FARMER, START);
    B_STARTOTHERROUTINE(BAU_718_JENS, START);
    B_STARTOTHERROUTINE(BAU_11019_FARMER, START);
    B_STARTOTHERROUTINE(BAU_719_BAKER, START);
    B_STARTOTHERROUTINE(BAU_720_FARMER, START);
    B_STARTOTHERROUTINE(BAU_721_SEVERIN, START);
    B_STARTOTHERROUTINE(BAU_11024_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11025_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11026_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11027_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11028_FARMER, START);
    B_STARTOTHERROUTINE(BAU_711_THORSTEN, START);
    B_STARTOTHERROUTINE(BAU_705_GABRIEN, START);
    B_STARTOTHERROUTINE(BAU_11031_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11032_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11033_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11035_FARMER, START);
    B_STARTOTHERROUTINE(BAU_706_LOKVAR, START);
    B_STARTOTHERROUTINE(BAU_700_ALBYN, START);
    B_STARTOTHERROUTINE(BAU_722_RASCO, START);
    B_STARTOTHERROUTINE(BAU_11041_SHEPHERD, START);
    B_STARTOTHERROUTINE(SLD_5002_SUNDER, START);
    B_STARTOTHERROUTINE(BAU_724_PAULUS, START);
    B_STARTOTHERROUTINE(BAU_725_ELSA, START);
    B_STARTOTHERROUTINE(BAU_726_RIK, START);
    B_STARTOTHERROUTINE(BAU_727_FARMER, START);
    B_STARTOTHERROUTINE(BAU_728_OTHO, START);
    B_STARTOTHERROUTINE(NONE_11048_HENKER, START);
    B_STARTOTHERROUTINE(BAU_729_NOB, START);
    B_STARTOTHERROUTINE(BAU_712_STONE, START);
    B_STARTOTHERROUTINE(NONE_6262_CARDEN, START);
    B_STARTOTHERROUTINE(BAU_730_UWE, START);
    B_STARTOTHERROUTINE(BAU_731_MAIK, START);
    B_STARTOTHERROUTINE(NONE_13795_DISMAS, START);
    B_STARTOTHERROUTINE(NONE_11049_WOODCUTTER, START);
    B_STARTOTHERROUTINE(BAU_11036_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11039_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11038_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11040_FARMER, START);
    WLD_INSERTNPC(57822, "PART13_BANDIT_01");
    WLD_INSERTNPC(57824, "PART13_BANDIT_02");
    WLD_INSERTNPC(57826, "PART13_BANDIT_03");
    WLD_INSERTNPC(50705, "PART_13_SPAWN_SCAVENGER_01");
    WLD_INSERTNPC(50609, "PART_13_SPAWN_SCAVENGER_03");
    WLD_INSERTNPC(50609, "PART_13_SPAWN_SCAVENGER_03");
    WLD_INSERTNPC(50609, "PART_13_SPAWN_SCAVENGER_03");
    WLD_INSERTNPC(50705, "PART_13_SPAWN_SCAVENGER_05");
    WLD_INSERTNPC(50587, "PART_13_SPAWN_LURKER_04");
    WLD_INSERTNPC(50332, "PART_13_SPAWN_BLOODFLY_01");
    WLD_INSERTNPC(50705, "PART13_MOB_03");
    WLD_INSERTNPC(50183, "PART13_MOB_04");
    WLD_INSERTNPC(50705, "PART13_MOB_05");
    WLD_INSERTNPC(50332, "PART13_MOB_06");
    WLD_INSERTNPC(50705, RNG_TRAP37_WAYPOINT);
    WLD_INSERTNPC(50705, "PART13_MOB_15");
    WLD_INSERTNPC(50705, "PART13_MOB_10");
    WLD_INSERTNPC(50602, "PART13_MOB_17");
    WLD_INSERTNPC(50332, "PART13_MOB_23");
    WLD_INSERTNPC(50332, "PART13_MOB_25");
    WLD_INSERTNPC(50705, "PART13_MOB_27");
    WLD_INSERTNPC(50705, "PART13_MOB_30");
    WLD_INSERTNPC(51082, "PART13_MOB_38");
    WLD_INSERTNPC(50183, "PART13_MOB_39");
    WLD_INSERTNPC(50705, "PART13_MOB_45");
    WLD_INSERTNPC(50183, "PART13_MOB_46");
}

func void Q103_NPCINVILLAGE() {
    Q103_VILLAGEDISTANCELIMIT = 0;
    B_STARTOTHERROUTINE(BAU_701_KURT, START);
    TELEPORTNPCTOWP(57510, BAU_701_KURT.WP);
    B_STARTOTHERROUTINE(BAU_703_MARTHA, START);
    TELEPORTNPCTOWP(57542, BAU_703_MARTHA.WP);
    B_STARTOTHERROUTINE(BAU_702_VIKTOR, "WakeUp");
    TELEPORTNPCTOWP(57528, BAU_702_VIKTOR.WP);
    B_STARTOTHERROUTINE(NONE_5_FABIO, PUB01);
    TELEPORTNPCTOWP(51512, NONE_5_FABIO.WP);
    B_STARTOTHERROUTINE(NONE_100007_RUPERT, PUB01);
    TELEPORTNPCTOWP(51549, NONE_100007_RUPERT.WP);
    B_STARTOTHERROUTINE(NONE_100012_KAZEEM, PUB01);
    TELEPORTNPCTOWP(51411, NONE_100012_KAZEEM.WP);
    B_STARTOTHERROUTINE(NONE_100008_ANA, PUB01);
    TELEPORTNPCTOWP(51576, NONE_100008_ANA.WP);
    B_STARTOTHERROUTINE(NONE_1_JORN, "SilbachPub");
    NPC_REFRESH(NONE_1_JORN);
    TELEPORTNPCTOWP(51439, NONE_1_JORN.WP);
    if (Q101_TIMOSURVIVE) {
        B_STARTOTHERROUTINE(NONE_6_TIMO, PUB01);
        TELEPORTNPCTOWP(51532, NONE_6_TIMO.WP);
    };
    if (Q101_LEASURVIVE) {
        B_STARTOTHERROUTINE(NONE_100009_LEA, PUB01);
        TELEPORTNPCTOWP(51599, NONE_100009_LEA.WP);
    };
    if ((Q102_EZEKIELSURVIVED) == (1)) {
        B_STARTOTHERROUTINE(NONE_3_EZEKIEL, PUB01);
        TELEPORTNPCTOWP(51492, NONE_3_EZEKIEL.WP);
    };
    if ((NPC_ISDEAD(CAVE_MOLERAT_01)) == (FALSE)) {
        B_REMOVENPC(50664);
    };
    if ((NPC_ISDEAD(CAVE_MOLERAT_02)) == (FALSE)) {
        B_REMOVENPC(50665);
    };
    if ((NPC_ISDEAD(CAVE_MOLERAT_03)) == (FALSE)) {
        B_REMOVENPC(50666);
    };
}

func void SILBACHFIRSTSLEEP_FADESCREEN() {
    SILBACHSLEEP = 2;
    SETHOLDTIME(FALSE);
    PC_SLEEP(10);
    Q103_NPCINVILLAGE();
    Q103_UNLOCKVILLAGE();
    HERO.AIVAR[4] = FALSE;
    FADESCREENFROMBLACK(1);
    AI_USEMOB(HERO, NPC_GETDETECTEDMOB(HERO), -(1));
    PLAYER_MOBSI_PRODUCTION = MOBSI_NONE;
    AI_STOPPROCESSINFOS(HERO);
}

func void SILBACHFIRSTSLEEP() {
    FADESCREENTOBLACKF(1, 47996, 1000);
}

instance PC_SQ416_REST(C_INFO) {
    NPC = 50091;
    NR = 999;
    CONDITION = PC_SQ416_REST_CONDITION;
    INFORMATION = PC_SQ416_REST_INFO;
    IMPORTANT = TRUE;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int PC_SQ416_REST_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SLEEPABIT)) && ((LOG_GETSTATUS(MIS_SQ416)) == (LOG_RUNNING))) && ((SQ416_HUNTERSSLEEP) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void SQ416_MOVERS_APPLY() {
    var ZCMOVER MOVER6;
    var int MOVPTR5;
    var int MOVPTR6;
    var int MOVPTR4;
    var ZCMOVER MOVER2;
    var ZCMOVER MOVER4;
    var int MOVPTR2;
    var ZCMOVER MOVER5;
    var ZCMOVER MOVER3;
    var int MOVPTR3;
    var ZCMOVER MOVER1;
    var int MOVPTR1;
    var int SQ416_MOVERS_COUNT;
    if ((SQ416_MOVERS_COUNT) == (0)) {
        PRINTD("Rozpoczynam - SQ416_Movers_Apply");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("SQ416_MOVER_CORPSE_RUDI");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("SQ416_MOVER_CLUES_01");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        MOVPTR3 = MEM_SEARCHVOBBYNAME("SQ416_MOVER_CLUES_02");
        MOVER3 = MEM_PTRTOINST(MOVPTR3);
        MOVPTR4 = MEM_SEARCHVOBBYNAME("SQ416_MOVER_CLUES_03");
        MOVER4 = MEM_PTRTOINST(MOVPTR4);
        MOVPTR5 = MEM_SEARCHVOBBYNAME("Q205_MOVER_DOOR_LOCKED");
        MOVER5 = MEM_PTRTOINST(MOVPTR5);
        MOVPTR6 = MEM_SEARCHVOBBYNAME("Q205_MOVER_DOOR_OPEN");
        MOVER6 = MEM_PTRTOINST(MOVPTR6);
        CHANGEVOBCOLLISION("SQ416_CORPSE_RUDI", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ416_MOLERAT", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ416_WOLF", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("SQ416_CORPSE_RUDI", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q205_DOOR_LOCKED", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q205_DOOR_OPEN", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("SQ416_MOVER_CORPSE_RUDI");
        WLD_SENDTRIGGER("SQ416_MOVER_CLUES_01");
        WLD_SENDTRIGGER("SQ416_MOVER_CLUES_02");
        WLD_SENDTRIGGER("SQ416_MOVER_CLUES_03");
        WLD_SENDTRIGGER("Q205_MOVER_DOOR_LOCKED");
        WLD_SENDTRIGGER("Q205_MOVER_DOOR_OPEN");
        SQ416_MOVERS_COUNT = 1;
    };
    if (((((((((((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER3.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER3.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER4.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER4.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER5.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER5.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER6.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER6.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ416_Movers_Apply");
        CHANGEVOBCOLLISION("SQ416_CORPSE_RUDI", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ416_CORPSE_RUDI", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ416_MOLERAT", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("SQ416_WOLF", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q205_DOOR_LOCKED", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q205_DOOR_OPEN", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(48000);
        SQ416_MOVERS_COUNT = 0;
    };
}

func void SQ416_HUNTERSWAKEUP() {
    SQ416_HUNTERSSLEEP = 2;
    B_STARTOTHERROUTINE(BAU_11033_FARMER, START);
    B_STARTOTHERROUTINE(BAU_11015_FARMER, START);
    RESTOREROUTINE_SUNDER();
    if ((SQ227_BOUGHTVEITLIST) == (FALSE)) {
        B_STARTOTHERROUTINE(NONE_11006_VEIT, START);
    };
    B_REMOVENPC(52059);
    B_REMOVENPC(52497);
    B_STARTOTHERROUTINE(SLD_11050_GERKE, "SQ416_CAVE");
    MDL_APPLYOVERLAYMDS(SLD_11050_GERKE, "HumanS_Wounded.mds");
    B_STARTOTHERROUTINE(VLK_3015_DETLOW, TOT);
    SQ416_DETLOW_RTNCHECK = 4;
    NPC_REMOVEINVITEMS(VLK_3015_DETLOW, 34387, 1);
    FF_APPLYONCEEXTGT(48000, 0, -(1));
    PC_SLEEP(10);
    SELF.AIVAR[4] = FALSE;
    PLAYER_MOBSI_PRODUCTION = MOBSI_NONE;
}

func void PC_SQ416_REST_INFO() {
    if ((NPC_GETDISTTOWP(SELF, "VILLAGE_PUB_ROOM02_BED01")) <= (500)) {
        SQ416_HUNTERSWAKEUP();
    };
    AI_OUTPUT(OTHER, SELF, "DIA_Marvin_WrongBed_15_00");
    AI_STOPPROCESSINFOS(SELF);
}

instance PC_Q501SLEEP_01(C_INFO) {
    NPC = 50091;
    NR = 999;
    CONDITION = PC_Q501SLEEP_01_CONDITION;
    INFORMATION = PC_Q501SLEEP_01_INFO;
    IMPORTANT = TRUE;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int PC_Q501SLEEP_01_CONDITION() {
    if (((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SLEEPABIT)) && ((LOG_GETSTATUS(MIS_Q501)) == (LOG_RUNNING))) {
        if ((((Q501_MARVINGOTOSLEEP) == (1)) || ((Q501_MARVINGOTOSLEEP) == (3))) || ((Q501_MARVINGOTOSLEEP) == (5))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_Q501SLEEP_01_INFO() {
    AI_FUNCTION(SELF, 63371);
    AI_USEMOB(HERO, NPC_GETDETECTEDMOB(HERO), -(1));
    HERO.AIVAR[4] = FALSE;
    PLAYER_MOBSI_PRODUCTION = MOBSI_NONE;
}

instance PC_Q306_REST(C_INFO) {
    NPC = 50091;
    NR = 999;
    CONDITION = PC_Q306_REST_CONDITION;
    INFORMATION = PC_Q306_REST_INFO;
    IMPORTANT = TRUE;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int PC_Q306_REST_CONDITION() {
    if ((((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SLEEPABIT)) && (Q306_READY)) && (Q306_PLAYERSIGNEDIN)) && ((LOG_GETSTATUS(MIS_Q306)) == (LOG_RUNNING))) && (NPC_KNOWSINFO(HERO, 84079))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PROXIMO_PREPAREARENA() {
    Q306_READYFORFIGHT = 1;
    WLD_SENDTRIGGER("KM_Q306_ARENAFIGHT");
    AI_FUNCTION(SELF, 64140);
    AI_FUNCTION(SELF, 63282);
    NPC_EXCHANGEROUTINE(PIR_1307_PROXIMO, "ArenaSpeaker");
}

func void PC_Q306_REST_INFO() {
    ISQ306REST = TRUE;
    PC_SLEEP((WLD_GETTIMEHOUR()) + (1));
}

instance PC_Q105SLEEP(C_INFO) {
    NPC = 50091;
    NR = 999;
    CONDITION = PC_Q105_CONDITION;
    INFORMATION = PC_Q105_INFO;
    IMPORTANT = TRUE;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int PC_Q105_CONDITION() {
    if (((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SLEEPABIT)) && ((Q105_MARVINDRUNKKURTHOUSE) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void Q105() {
    Q105_MARVINDRUNKKURTHOUSE = FALSE;
    B_ENDPRODUCTIONDIALOG();
    HERO.AIVAR[4] = FALSE;
}

func void PC_Q105_INFO() {
    if ((NPC_GETDISTTOWP(SELF, "VILLAGE_KURTHOUSE_06")) <= (500)) {
        Q105();
    };
    AI_OUTPUT(OTHER, SELF, "DIA_Marvin_WrongBed_15_00");
    AI_STOPPROCESSINFOS(SELF);
}

instance PC_NOSLEEP(C_INFO) {
    NPC = 50091;
    NR = 999;
    CONDITION = PC_REGULARSLEEP_CONDITION;
    INFORMATION = PC_NOSLEEP_INFO;
    IMPORTANT = FALSE;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int PC_REGULARSLEEP_CONDITION() {
    if ((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SLEEPABIT)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_NOSLEEP_INFO() {
    AI_STOPPROCESSINFOS(SELF);
    WLD_STOPEFFECT("DEMENTOR_FX");
    SELF.AIVAR[4] = FALSE;
    PLAYER_MOBSI_PRODUCTION = MOBSI_NONE;
}

instance PC_SLEEPTIME_MORNING(C_INFO) {
    NPC = 50091;
    CONDITION = PC_REGULARSLEEP_CONDITION;
    INFORMATION = PC_SLEEPTIME_MORNING_INFO;
    IMPORTANT = FALSE;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_SLEEP_MORNING;
}

func int PC_SLEEPTIME_MORNING_CONDITION() {
    if ((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SLEEPABIT)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_SLEEPTIME_MORNING_INFO() {
    PC_SLEEP(8);
}

instance PC_SLEEPTIME_NOON(C_INFO) {
    NPC = 50091;
    CONDITION = PC_REGULARSLEEP_CONDITION;
    INFORMATION = PC_SLEEPTIME_NOON_INFO;
    IMPORTANT = FALSE;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_SLEEP_NOON;
}

func int PC_SLEEPTIME_NOON_CONDITION() {
    if ((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SLEEPABIT)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_SLEEPTIME_NOON_INFO() {
    PC_SLEEP(12);
}

instance PC_SLEEPTIME_EVENING(C_INFO) {
    NPC = 50091;
    CONDITION = PC_REGULARSLEEP_CONDITION;
    INFORMATION = PC_SLEEPTIME_EVENING_INFO;
    IMPORTANT = FALSE;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_SLEEP_EVENING;
}

func int PC_SLEEPTIME_EVENING_CONDITION() {
    if ((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SLEEPABIT)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_SLEEPTIME_EVENING_INFO() {
    PC_SLEEP(20);
}

instance PC_SLEEPTIME_MIDNIGHT(C_INFO) {
    NPC = 50091;
    CONDITION = PC_REGULARSLEEP_CONDITION;
    INFORMATION = PC_SLEEPTIME_MIDNIGHT_INFO;
    IMPORTANT = FALSE;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_SLEEP_MIDNIGHT;
}

func int PC_SLEEPTIME_MIDNIGHT_CONDITION() {
    if ((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SLEEPABIT)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_SLEEPTIME_MIDNIGHT_INFO() {
    PC_SLEEP(0);
}

instance PC_SLEEPTIME_WAIT_SQ311(C_INFO) {
    NPC = 50091;
    CONDITION = PC_SLEEPTIME_CONDITION_SQ311;
    INFORMATION = PC_SLEEPTIME_WAIT_SQ311_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_WAIT_SQ311;
}

func int PC_SLEEPTIME_CONDITION_SQ311() {
    if (((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SLEEPABIT)) && ((NPC_GETDISTTOWP(SELF, "PART10_MINE_31")) <= (10000))) && (NPC_KNOWSINFO(SELF, 80903))) && ((NPC_KNOWSINFO(SELF, 80916)) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_SLEEPTIME_WAIT_SQ311_INFO() {
    PC_SLEEP(3);
}

