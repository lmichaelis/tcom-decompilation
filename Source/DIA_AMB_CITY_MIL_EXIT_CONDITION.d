func int DIA_AMB_CITY_MIL_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_AMB_CITY_MIL_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_AMB_CITY_MIL_HOWTOJOIN(C_INFO) {
    NR = 1;
    CONDITION = DIA_AMB_CITY_MIL_HOWTOJOIN_CONDITION;
    INFORMATION = DIA_AMB_CITY_MIL_HOWTOJOIN_INFO;
    PERMANENT = TRUE;
    IMPORTANT = FALSE;
    DESCRIPTION = "What should I do to join the guard?";
}

func int DIA_AMB_CITY_MIL_HOWTOJOIN_CONDITION() {
    if ((KAPITEL) == (2)) {
        if (((HERO.GUILD) != (GIL_MIL)) && ((HERO.GUILD) != (GIL_SLD))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_AMB_CITY_MIL_HOWTOJOIN_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    B_SAY(OTHER, SELF, "$MARVIN_TellMeAboutJoiningMIL");
    if ((((SELF.VOICE) == (37)) || ((SELF.VOICE) == (49))) || ((SELF.VOICE) == (72))) {
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_NOGUILD_JOIN_V1_01");
        AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_NOGUILD_JOIN_V1_02");
    };
    if ((((SELF.VOICE) == (6)) || ((SELF.VOICE) == (25))) || ((SELF.VOICE) == (59))) {
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_NOGUILD_JOIN_V2_01");
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_NOGUILD_JOIN_V2_02");
    };
    if (((SELF.VOICE) == (28)) || ((SELF.VOICE) == (61))) {
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_NOGUILD_JOIN_V3_01");
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_NOGUILD_JOIN_V3_02");
    };
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
}

instance DIA_AMB_CITY_MIL_ABOUTGUILD(C_INFO) {
    NR = 2;
    CONDITION = DIA_AMB_CITY_MIL_ABOUTGUILD_CONDITION;
    INFORMATION = DIA_AMB_CITY_MIL_ABOUTGUILD_INFO;
    PERMANENT = TRUE;
    IMPORTANT = FALSE;
    DESCRIPTION = "What can you tell me about the city guard?";
}

func int DIA_AMB_CITY_MIL_ABOUTGUILD_CONDITION() {
    return TRUE;
}

func void DIA_AMB_CITY_MIL_ABOUTGUILD_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    B_SAY(OTHER, SELF, "$MARVIN_TellMeAboutMIL");
    if ((((SELF.VOICE) == (37)) || ((SELF.VOICE) == (49))) || ((SELF.VOICE) == (72))) {
        AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_ABOUTCITYGUARD_V1_01");
        AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_ABOUTCITYGUARD_V1_02");
    };
    if ((((SELF.VOICE) == (6)) || ((SELF.VOICE) == (25))) || ((SELF.VOICE) == (59))) {
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_ABOUTCITYGUARD_V2_01");
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_ABOUTCITYGUARD_V2_02");
    };
    if (((SELF.VOICE) == (28)) || ((SELF.VOICE) == (61))) {
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_ABOUTCITYGUARD_V3_01");
        AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_ABOUTCITYGUARD_V3_02");
    };
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
}

instance DIA_AMB_CITY_MIL_RODERICH(C_INFO) {
    NR = 3;
    CONDITION = DIA_AMB_CITY_MIL_RODERICH_CONDITION;
    INFORMATION = DIA_AMB_CITY_MIL_RODERICH_INFO;
    PERMANENT = TRUE;
    IMPORTANT = FALSE;
    DESCRIPTION = "Tell me about Roderich.";
}

func int DIA_AMB_CITY_MIL_RODERICH_CONDITION() {
    return TRUE;
}

func void DIA_AMB_CITY_MIL_RODERICH_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    B_SAY(OTHER, SELF, "$MARVIN_OpinionAboutRoderich");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    if ((((SELF.VOICE) == (37)) || ((SELF.VOICE) == (49))) || ((SELF.VOICE) == (72))) {
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_ABOUTRODERICH_V1_01");
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_ABOUTRODERICH_V1_02");
    };
    if ((((SELF.VOICE) == (6)) || ((SELF.VOICE) == (25))) || ((SELF.VOICE) == (59))) {
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_ABOUTRODERICH_V2_01");
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_ABOUTRODERICH_V2_02");
    };
    if (((SELF.VOICE) == (28)) || ((SELF.VOICE) == (61))) {
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_ABOUTRODERICH_V3_01");
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_ABOUTRODERICH_V3_02");
    };
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
}

instance DIA_AMB_CITY_MIL_WHATSUP(C_INFO) {
    NR = 4;
    CONDITION = DIA_AMB_CITY_MIL_WHATSUP_CONDITION;
    INFORMATION = DIA_AMB_CITY_MIL_WHATSUP_INFO;
    PERMANENT = TRUE;
    IMPORTANT = FALSE;
    DESCRIPTION = "How are you doing?";
}

func int DIA_AMB_CITY_MIL_WHATSUP_CONDITION() {
    return TRUE;
}

func void DIA_AMB_CITY_MIL_WHATSUP_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    B_SAY(OTHER, SELF, "$MARVIN_WhatNew4");
    if ((KAPITEL) == (2)) {
        AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_WHATSNEW_CH2");
    };
    if ((KAPITEL) == (3)) {
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_WHATSNEW_CH3");
    };
    if ((KAPITEL) == (4)) {
        AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_WHATSNEW_CH4");
    };
    if ((KAPITEL) == (5)) {
        AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
        B_SAY(SELF, OTHER, "$AMB_CITYGUARD_WHATSNEW_CH5");
    };
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
}

func void B_ASSIGNAMBIENTINFOS_AMB_CITY_MIL(var C_NPC SLF) {
    DIA_AMB_CITY_MIL_EXIT.NPC = HLP_GETINSTANCEID(SLF);
    DIA_AMB_CITY_MIL_HOWTOJOIN.NPC = HLP_GETINSTANCEID(SLF);
    DIA_AMB_CITY_MIL_ABOUTGUILD.NPC = HLP_GETINSTANCEID(SLF);
    DIA_AMB_CITY_MIL_RODERICH.NPC = HLP_GETINSTANCEID(SLF);
    DIA_AMB_CITY_MIL_WHATSUP.NPC = HLP_GETINSTANCEID(SLF);
}

