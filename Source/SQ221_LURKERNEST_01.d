var int SQ221_LURKERNEST_01;
var int SQ221_LURKERNEST_02;
var int SQ221_LURKERNEST_03;
var int SQ221_LURKERNEST_04;
var int SQ221_LURKERNEST_05;
var int SQ221_ENTRYGIVEN;
func void LURKERNEST_EXIT() {
    AI_USEMOB(HERO, NPC_GETDETECTEDMOB(HERO), -(1));
    HERO.AIVAR[4] = FALSE;
}

func void LURKERNEST_WORK() {
    B_GIVEPLAYERXP(XP_SQ112_DESTROYEDNEST);
    SQ112_LURKERNESTCOUNT = (SQ112_LURKERNESTCOUNT) + (1);
    PRINTD(CS2("Rozwalone gniazda: ", INTTOSTRING(SQ112_LURKERNESTCOUNT)));
    FF_APPLYONCEEXTGT(47380, 0, -(1));
    if ((((SQ112_LURKERNESTCOUNT) == (5)) && ((SQ221_ENTRYGIVEN) == (FALSE))) && ((LOG_GETSTATUS(MIS_SQ112)) == (LOG_RUNNING))) {
        B_LOGENTRY(TOPIC_SQ112, LOG_SQ112_ALLNESTS);
        SQ221_ENTRYGIVEN = TRUE;
    };
}

func void LURKERNEST_S1() {
    var C_NPC HER;
    HER = HLP_GETNPC(50091);
    if ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(HER))) {
        if (HLP_STRCMP(NPC_GETNEARESTWP(HERO), "PART13_SQ112_LURKERNEST_01")) {
            if ((SQ221_LURKERNEST_01) == (FALSE)) {
                SQ221_LURKERNEST_01 = 1;
                LURKERNEST_WORK();
            } else {
                LURKERNEST_EXIT();
            };
        } else if (HLP_STRCMP(NPC_GETNEARESTWP(HERO), "PART13_SQ112_LURKERNEST_02")) {
            if ((SQ221_LURKERNEST_02) == (FALSE)) {
                SQ221_LURKERNEST_02 = 1;
                LURKERNEST_WORK();
            } else {
                LURKERNEST_EXIT();
            };
        } else if (HLP_STRCMP(NPC_GETNEARESTWP(HERO), "PART13_SQ112_LURKERNEST_03")) {
            if ((SQ221_LURKERNEST_03) == (FALSE)) {
                SQ221_LURKERNEST_03 = 1;
                LURKERNEST_WORK();
            } else {
                LURKERNEST_EXIT();
            };
        } else if (HLP_STRCMP(NPC_GETNEARESTWP(HERO), "PART13_SQ112_LURKERNEST_04")) {
            if ((SQ221_LURKERNEST_04) == (FALSE)) {
                SQ221_LURKERNEST_04 = 1;
                LURKERNEST_WORK();
            } else {
                LURKERNEST_EXIT();
            };
        } else if (HLP_STRCMP(NPC_GETNEARESTWP(HERO), "PART13_SQ112_LURKERNEST_05")) {
            if ((SQ221_LURKERNEST_05) == (FALSE)) {
                SQ221_LURKERNEST_05 = 1;
                LURKERNEST_WORK();
            } else {
                LURKERNEST_EXIT();
            };
        } else {
            LURKERNEST_EXIT();
        };
    };
}

func void LURKERNEST_S0() {
    HERO.AIVAR[4] = FALSE;
    B_ENDPRODUCTIONDIALOG();
}

func void SQ112_SOUND() {
    SND_PLAY("ROCKS_KICK_01");
    SND_PLAY("ROCKS_FALL_01");
    SND_PLAY("PSILAB_DRAWLIQUID");
}

func void SQ112_REMOVE_LURKERNEST() {
    var ZCMOVER MOVER10;
    var int MOVPTR10;
    var ZCMOVER MOVER9;
    var int MOVPTR9;
    var ZCMOVER MOVER8;
    var int SQ221_LURKERNEST_04_COUNT;
    var int MOVPTR6;
    var int SQ221_LURKERNEST_01_COUNT;
    var int MOVPTR3;
    var ZCMOVER MOVER3;
    var int MOVPTR7;
    var ZCMOVER MOVER5;
    var int MOVPTR8;
    var ZCMOVER MOVER7;
    var ZCMOVER MOVER1;
    var int MOVPTR2;
    var ZCMOVER MOVER4;
    var int SQ221_LURKERNEST_05_COUNT;
    var ZCMOVER MOVER6;
    var ZCMOVER MOVER2;
    var int MOVPTR1;
    var int MOVPTR4;
    var int SQ221_LURKERNEST_02_COUNT;
    var int MOVPTR5;
    var int SQ221_LURKERNEST_03_COUNT;
    if ((SQ221_LURKERNEST_01) == (1)) {
        if ((SQ221_LURKERNEST_01_COUNT) == (0)) {
            PRINTD("Rozpoczynam - SQ112_REMOVE_LURKERNEST");
            MOVPTR1 = MEM_SEARCHVOBBYNAME("MOVER_SQ112_LURKERNEST_01");
            MOVER1 = MEM_PTRTOINST(MOVPTR1);
            MOVPTR2 = MEM_SEARCHVOBBYNAME("MOVER_SQ112_LURKERNEST_DESTROYED_01");
            MOVER2 = MEM_PTRTOINST(MOVPTR2);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_01", FALSE, FALSE, FALSE, TRUE);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_DESTROYED_01", FALSE, FALSE, FALSE, TRUE);
            WLD_SENDTRIGGER("MOVER_SQ112_LURKERNEST_01");
            WLD_SENDTRIGGER("MOVER_SQ112_LURKERNEST_DESTROYED_01");
            SQ112_SOUND();
            SQ221_LURKERNEST_01_COUNT = 1;
        } else if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
            PRINTD("Sko刃zy쓴m - SQ112_REMOVE_LURKERNEST");
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_01", TRUE, TRUE, TRUE, TRUE);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_DESTROYED_01", TRUE, TRUE, TRUE, TRUE);
            FF_REMOVE(47380);
            SQ221_LURKERNEST_01_COUNT = 0;
            SQ221_LURKERNEST_01 = 2;
        };
    };
    if ((SQ221_LURKERNEST_02) == (1)) {
        if ((SQ221_LURKERNEST_02_COUNT) == (0)) {
            PRINTD("Rozpoczynam - SQ112_REMOVE_LURKERNEST");
            MOVPTR3 = MEM_SEARCHVOBBYNAME("MOVER_SQ112_LURKERNEST_02");
            MOVER3 = MEM_PTRTOINST(MOVPTR3);
            MOVPTR4 = MEM_SEARCHVOBBYNAME("MOVER_SQ112_LURKERNEST_DESTROYED_02");
            MOVER4 = MEM_PTRTOINST(MOVPTR4);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_02", FALSE, FALSE, FALSE, TRUE);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_DESTROYED_02", FALSE, FALSE, FALSE, TRUE);
            WLD_SENDTRIGGER("MOVER_SQ112_LURKERNEST_02");
            WLD_SENDTRIGGER("MOVER_SQ112_LURKERNEST_DESTROYED_02");
            SQ112_SOUND();
            SQ221_LURKERNEST_02_COUNT = 1;
        } else if (((((MOVER3.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER3.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER4.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER4.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
            PRINTD("Sko刃zy쓴m - SQ112_REMOVE_LURKERNEST");
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_02", TRUE, TRUE, TRUE, TRUE);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_DESTROYED_02", TRUE, TRUE, TRUE, TRUE);
            FF_REMOVE(47380);
            SQ221_LURKERNEST_02_COUNT = 0;
            SQ221_LURKERNEST_02 = 2;
        };
    };
    if ((SQ221_LURKERNEST_03) == (1)) {
        if ((SQ221_LURKERNEST_03_COUNT) == (0)) {
            PRINTD("Rozpoczynam - SQ112_REMOVE_LURKERNEST");
            MOVPTR5 = MEM_SEARCHVOBBYNAME("MOVER_SQ112_LURKERNEST_03");
            MOVER5 = MEM_PTRTOINST(MOVPTR5);
            MOVPTR6 = MEM_SEARCHVOBBYNAME("MOVER_SQ112_LURKERNEST_DESTROYED_03");
            MOVER6 = MEM_PTRTOINST(MOVPTR6);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_03", FALSE, FALSE, FALSE, TRUE);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_DESTROYED_03", FALSE, FALSE, FALSE, TRUE);
            WLD_SENDTRIGGER("MOVER_SQ112_LURKERNEST_03");
            WLD_SENDTRIGGER("MOVER_SQ112_LURKERNEST_DESTROYED_03");
            SQ112_SOUND();
            SQ221_LURKERNEST_03_COUNT = 1;
        } else if (((((MOVER5.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER5.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER6.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER6.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
            PRINTD("Sko刃zy쓴m - SQ112_REMOVE_LURKERNEST");
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_03", TRUE, TRUE, TRUE, TRUE);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_DESTROYED_03", TRUE, TRUE, TRUE, TRUE);
            FF_REMOVE(47380);
            SQ221_LURKERNEST_03_COUNT = 0;
            SQ221_LURKERNEST_03 = 2;
        };
    };
    if ((SQ221_LURKERNEST_04) == (1)) {
        if ((SQ221_LURKERNEST_04_COUNT) == (0)) {
            PRINTD("Rozpoczynam - SQ112_REMOVE_LURKERNEST");
            MOVPTR7 = MEM_SEARCHVOBBYNAME("MOVER_SQ112_LURKERNEST_04");
            MOVER7 = MEM_PTRTOINST(MOVPTR7);
            MOVPTR8 = MEM_SEARCHVOBBYNAME("MOVER_SQ112_LURKERNEST_DESTROYED_04");
            MOVER8 = MEM_PTRTOINST(MOVPTR8);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_04", FALSE, FALSE, FALSE, TRUE);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_DESTROYED_04", FALSE, FALSE, FALSE, TRUE);
            WLD_SENDTRIGGER("MOVER_SQ112_LURKERNEST_04");
            WLD_SENDTRIGGER("MOVER_SQ112_LURKERNEST_DESTROYED_04");
            SQ112_SOUND();
            SQ221_LURKERNEST_04_COUNT = 1;
        } else if (((((MOVER7.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER7.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER8.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER8.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
            PRINTD("Sko刃zy쓴m - SQ112_REMOVE_LURKERNEST");
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_04", TRUE, TRUE, TRUE, TRUE);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_DESTROYED_04", TRUE, TRUE, TRUE, TRUE);
            FF_REMOVE(47380);
            SQ221_LURKERNEST_04_COUNT = 0;
            SQ221_LURKERNEST_04 = 2;
        };
    };
    if ((SQ221_LURKERNEST_05) == (1)) {
        if ((SQ221_LURKERNEST_05_COUNT) == (0)) {
            PRINTD("Rozpoczynam - SQ112_REMOVE_LURKERNEST");
            MOVPTR9 = MEM_SEARCHVOBBYNAME("MOVER_SQ112_LURKERNEST_05");
            MOVER9 = MEM_PTRTOINST(MOVPTR9);
            MOVPTR10 = MEM_SEARCHVOBBYNAME("MOVER_SQ112_LURKERNEST_DESTROYED_05");
            MOVER10 = MEM_PTRTOINST(MOVPTR10);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_05", FALSE, FALSE, FALSE, TRUE);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_DESTROYED_05", FALSE, FALSE, FALSE, TRUE);
            WLD_SENDTRIGGER("MOVER_SQ112_LURKERNEST_05");
            WLD_SENDTRIGGER("MOVER_SQ112_LURKERNEST_DESTROYED_05");
            SQ112_SOUND();
            SQ221_LURKERNEST_05_COUNT = 1;
        } else if (((((MOVER9.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER9.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER10.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER10.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
            PRINTD("Sko刃zy쓴m - SQ112_REMOVE_LURKERNEST");
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_05", TRUE, TRUE, TRUE, TRUE);
            CHANGEVOBCOLLISION("SQ112_LURKERNEST_DESTROYED_05", TRUE, TRUE, TRUE, TRUE);
            FF_REMOVE(47380);
            SQ221_LURKERNEST_05_COUNT = 0;
            SQ221_LURKERNEST_05 = 2;
        };
    };
}

