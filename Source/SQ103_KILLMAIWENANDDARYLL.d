func void SQ103_KILLMAIWENANDDARYLL() {
    PRINTD("Maiwen i Darryl rip");
    SQ103_MAIWENDEAD = 1;
    B_REMOVENPC(51398);
    B_REMOVENPC(51388);
    FF_APPLYONCEEXTGT(62357, 0, -(1));
    FF_APPLYONCEEXTGT(62365, 0, -(1));
}

func void SQ103_KILLRUPERT() {
    PRINTD("Rupert nie czuje siê dobrze, Mr.Stark");
    B_REMOVENPC(51549);
    B_REMOVENPC(51398);
    B_REMOVENPC(51388);
    B_STARTOTHERROUTINE(MIL_708_DICKON, START);
    FF_APPLYONCEEXTGT(62361, 0, -(1));
    FF_APPLYONCEEXTGT(62365, 0, -(1));
    FF_APPLYONCEEXTGT(62357, 0, -(1));
}

func void SQ103_PREPARERUPERT() {
    SQ103_RUPERTREADY = 1;
    B_STARTOTHERROUTINE(NONE_100007_RUPERT, "SQ103_OUTSIDEPUB");
    NPC_REFRESH(NONE_100007_RUPERT);
    TELEPORTNPCTOWP(51549, NONE_100007_RUPERT.WP);
    PRINTD("Rupert ready");
}

func void SQ103_RUPERTSEARCHWPN() {
    B_STARTOTHERROUTINE(BAU_11026_FARMER, "SQ103_VILLAGE");
    NPC_REFRESH(BAU_11026_FARMER);
    B_STARTOTHERROUTINE(BAU_11027_FARMER, "SQ103_VILLAGE");
    NPC_REFRESH(BAU_11027_FARMER);
    B_STARTOTHERROUTINE(BAU_711_THORSTEN, "SQ103_VILLAGE");
    NPC_REFRESH(BAU_711_THORSTEN);
    NPC_EXCHANGEROUTINE(SELF, "SQ103_VILLAGE");
}

func void SQ103_RUPERTSEARCHHELP() {
    B_STARTOTHERROUTINE(MIL_708_DICKON, "SQ103_VILLAGE");
    NPC_REFRESH(MIL_708_DICKON);
    NPC_EXCHANGEROUTINE(SELF, "SQ103_VILLAGEV2");
}

func void SQ103_READYTOGOFINDMAIWEN() {
    B_STARTOTHERROUTINE(BAU_11026_FARMER, START);
    NPC_REFRESH(BAU_11026_FARMER);
    B_STARTOTHERROUTINE(BAU_11027_FARMER, START);
    NPC_REFRESH(BAU_11027_FARMER);
    B_STARTOTHERROUTINE(BAU_711_THORSTEN, START);
    NPC_REFRESH(BAU_711_THORSTEN);
    NPC_EXCHANGEROUTINE(SELF, "SQ103_OUTSIDEPUB");
}

func void SQ103_MAIWENFIGHT() {
    SND_PLAY("LUR_Warn_A1");
    WLD_INSERTNPC(50596, "PART_13_FABIO_CAVE_01");
    B_REMOVENPC(51388);
    if ((SQ103_MAIWENDEAD) == (0)) {
        FF_APPLYONCEEXTGT(62357, 0, -(1));
    };
}

func void SQ103_DARRYLCORPSE_APPLY() {
    var ZCMOVER MOVER1;
    var int MOVPTR1;
    var int SQ103_DARRYLCORPSE_COUNT;
    if ((SQ103_DARRYLCORPSE_COUNT) == (0)) {
        PRINTD("Rozpoczynam - SQ103_DARRYLCORPSE_APPLY");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("MOVER_SQ118_DARRYL");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        CHANGEVOBCOLLISION("SQ118_DARRYL", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("MOVER_SQ118_DARRYL");
        SQ103_DARRYLCORPSE_COUNT = 1;
    };
    if (((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ103_DARRYLCORPSE_APPLY");
        CHANGEVOBCOLLISION("SQ118_DARRYL", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(62357);
        SQ103_DARRYLCORPSE_COUNT = 0;
    };
}

func void SQ103_RUPERTCORPSE_APPLY() {
    var ZCMOVER MOVER1;
    var int MOVPTR1;
    var int SQ103_RUPERTCORPSE_COUNT;
    if ((SQ103_RUPERTCORPSE_COUNT) == (0)) {
        PRINTD("Rozpoczynam - SQ103_RUPERTCORPSE_APPLY");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("MOVER_SQ118_RUPERT");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        CHANGEVOBCOLLISION("SQ118_RUPERT", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("MOVER_SQ118_RUPERT");
        SQ103_RUPERTCORPSE_COUNT = 1;
    };
    if (((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ103_RUPERTCORPSE_APPLY");
        CHANGEVOBCOLLISION("SQ118_RUPERT", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(62361);
        SQ103_RUPERTCORPSE_COUNT = 0;
    };
}

func void SQ103_MAIWENCORPSE_APPLY() {
    var ZCMOVER MOVER1;
    var int MOVPTR1;
    var int SQ103_MAIWENCORPSE_COUNT;
    if ((SQ103_MAIWENCORPSE_COUNT) == (0)) {
        PRINTD("Rozpoczynam - SQ103_MAIWENCORPSE_APPLY");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("MOVER_SQ118_MAIWEN");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        CHANGEVOBCOLLISION("SQ118_MAIWEN", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("MOVER_SQ118_MAIWEN");
        SQ103_MAIWENCORPSE_COUNT = 1;
    };
    if (((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ103_MAIWENCORPSE_APPLY");
        CHANGEVOBCOLLISION("SQ118_MAIWEN", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(62365);
        SQ103_MAIWENCORPSE_COUNT = 0;
    };
}

