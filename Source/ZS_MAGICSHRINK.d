func int ZS_MAGICSHRINK() {
    if (!(NPC_HASBODYFLAG(SELF, BS_FLAG_INTERRUPTABLE))) {
        AI_STANDUP(SELF);
    };
    AI_STANDUPQUICK(SELF);
    SELF.AIVAR[42] = 0;
    return 0 /* !broken stack! */;
}

func int ZS_MAGICSHRINK_LOOP() {
    if ((SELF.AIVAR[42]) == (0)) {
        MDL_SETMODELSCALE(SELF, 1063675494, 1063675494, 1063675494);
        SELF.AIVAR[42] = 1;
    };
    if ((SELF.AIVAR[42]) == (1)) {
        MDL_SETMODELSCALE(SELF, 1062836634, 1062836634, 1062836634);
        SELF.AIVAR[42] = 2;
    };
    if ((SELF.AIVAR[42]) == (2)) {
        MDL_SETMODELSCALE(SELF, 1061997773, 1061997773, 1061997773);
        SELF.AIVAR[42] = 3;
    };
    if ((SELF.AIVAR[42]) == (3)) {
        MDL_SETMODELSCALE(SELF, 1061158912, 1061158912, 1061158912);
        SELF.AIVAR[42] = 4;
    };
    if ((SELF.AIVAR[42]) == (4)) {
        MDL_SETMODELSCALE(SELF, 1060320051, 1060320051, 1060320051);
        SELF.AIVAR[42] = 5;
    };
    if ((SELF.AIVAR[42]) == (5)) {
        MDL_SETMODELSCALE(SELF, 1059481190, 1059481190, 1059481190);
        SELF.AIVAR[42] = 6;
    };
    if ((SELF.AIVAR[42]) == (6)) {
        MDL_SETMODELSCALE(SELF, 1058642330, 1058642330, 1058642330);
        SELF.AIVAR[42] = 7;
    };
    if ((SELF.AIVAR[42]) == (7)) {
        MDL_SETMODELSCALE(SELF, 1057803469, 1057803469, 1057803469);
        SELF.AIVAR[42] = 8;
    };
    if ((SELF.AIVAR[42]) == (8)) {
        MDL_SETMODELSCALE(SELF, 1056964608, 1056964608, 1056964608);
        SELF.AIVAR[42] = 9;
    };
    if ((SELF.AIVAR[42]) == (9)) {
        MDL_SETMODELSCALE(SELF, 1055286886, 1055286886, 1055286886);
        SELF.AIVAR[42] = 10;
    };
    if ((SELF.AIVAR[42]) == (10)) {
        MDL_SETMODELSCALE(SELF, 1053609165, 1053609165, 1053609165);
        SELF.AIVAR[42] = 11;
    };
    if ((SELF.AIVAR[42]) == (11)) {
        MDL_SETMODELSCALE(SELF, 1051931443, 1051931443, 1051931443);
        SELF.AIVAR[42] = 12;
    };
    if ((SELF.AIVAR[42]) == (12)) {
        MDL_SETMODELSCALE(SELF, 1050253722, 1050253722, 1050253722);
        SELF.AIVAR[42] = 13;
    };
    if ((SELF.AIVAR[42]) == (13)) {
        NPC_CHANGEATTRIBUTE(SELF, ATR_HITPOINTS, -(((SELF.ATTRIBUTE[0]) * (9)) / (10)));
        NPC_CHANGEATTRIBUTE(SELF, ATR_HITPOINTS_MAX, -(((SELF.ATTRIBUTE[1]) * (9)) / (10)));
        NPC_CHANGEATTRIBUTE(SELF, ATR_STRENGTH, -(((SELF.ATTRIBUTE[4]) * (9)) / (10)));
        SELF.PROTECTION[1] = (SELF.PROTECTION[1]) / (10);
        SELF.PROTECTION[2] = (SELF.PROTECTION[2]) / (10);
        SELF.PROTECTION[3] = (SELF.PROTECTION[3]) / (10);
        SELF.PROTECTION[4] = 0;
        SELF.PROTECTION[5] = (SELF.PROTECTION[5]) / (10);
        SELF.PROTECTION[6] = (SELF.PROTECTION[6]) / (10);
        SELF.AIVAR[42] = 14;
    };
    if ((SELF.AIVAR[42]) == (14)) {
        NPC_CLEARAIQUEUE(SELF);
        SELF.START_AISTATE = ZS_MAGICSHRUNK;
        AI_STARTSTATE(SELF, 43867, 1, "");
        return LOOP_END;
    };
    AI_WAIT(SELF, 1052938076);
    return LOOP_CONTINUE;
}

func void ZS_MAGICSHRINK_END() {
}

func void ZS_MAGICSHRUNK() {
    NPC_SETTARGET(SELF, HERO);
}

func int ZS_MAGICSHRUNK_LOOP() {
    AI_FLEE(SELF);
    return LOOP_CONTINUE;
}

func void ZS_MAGICSHRUNK_END() {
}

