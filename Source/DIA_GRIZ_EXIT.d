instance DIA_GRIZ_EXIT(C_INFO) {
    NPC = 57706;
    NR = 999;
    CONDITION = DIA_GRIZ_EXIT_CONDITION;
    INFORMATION = DIA_GRIZ_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_GRIZ_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_GRIZ_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_GRIZ_QA301_ADELARD(C_INFO) {
    NPC = 57706;
    NR = 1;
    CONDITION = DIA_GRIZ_QA301_ADELARD_CONDITION;
    INFORMATION = DIA_GRIZ_QA301_ADELARD_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Adelard sent me.";
}

func int DIA_GRIZ_QA301_ADELARD_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QA301)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 70149))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GRIZ_QA301_ADELARD_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_Adelard_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_Adelard_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_Adelard_15_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_Adelard_15_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_Adelard_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_Adelard_03_06");
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_Adelard_15_07");
}

instance DIA_GRIZ_QA301_READY(C_INFO) {
    NPC = 57706;
    NR = 1;
    CONDITION = DIA_GRIZ_QA301_READY_CONDITION;
    INFORMATION = DIA_GRIZ_QA301_READY_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Let's do it.";
}

func int DIA_GRIZ_QA301_READY_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QA301)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 85857))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GRIZ_QA301_READY_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_Ready_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_Ready_03_02");
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_QA301, LOG_QA301_GRIZ_GO);
    AI_FUNCTION(SELF, 85863);
    SELF.AIVAR[15] = TRUE;
    NPC_EXCHANGEROUTINE(SELF, "QA301_FOLLOW");
}

func void GRIZ_QA301_CHANGERTN() {
    B_STARTOTHERROUTINE(SLD_11054_ARAXOS_QA301, "QA301_FOLLOW");
    B_STARTOTHERROUTINE(SLD_11055_ARAXOS_QA301, "QA301_FOLLOW");
    SLD_11054_ARAXOS_QA301.AIVAR[15] = TRUE;
    SLD_11055_ARAXOS_QA301.AIVAR[15] = TRUE;
    QA301_SPAWNMONSTERS();
    QA301_FIREPLACE();
}

instance DIA_GRIZ_QA301_WRONGWAY(C_INFO) {
    NPC = 57706;
    NR = 1;
    CONDITION = DIA_GRIZ_QA301_WRONGWAY_CONDITION;
    INFORMATION = DIA_GRIZ_QA301_WRONGWAY_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_GRIZ_QA301_WRONGWAY_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QA301)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 85860))) {
        if ((QA301_FOREST) == (0)) {
            if (((((NPC_GETDISTTOWP(SELF, "PART12_PATH_41")) >= (9500)) || ((NPC_GETDISTTOWP(SELF, "PART12_MOB_61")) <= (1500))) || ((NPC_GETDISTTOWP(SELF, "PART12_MOB_60")) <= (1500))) || ((NPC_GETDISTTOWP(SELF, "PART12_MOB_83")) <= (1000))) {
                return TRUE;
            };
        };
        if ((QA301_FOREST) == (1)) {
            if ((NPC_GETDISTTOWP(SELF, "PART12_PATH_45")) >= (3500)) {
                return TRUE;
            };
        };
        if ((QA301_FOREST) == (2)) {
            if ((NPC_GETDISTTOWP(SELF, "PART12_PATH_85")) >= (3500)) {
                return TRUE;
            };
        };
        if ((QA301_FOREST) == (3)) {
            if ((NPC_GETDISTTOWP(SELF, "PART12_MOB_68")) >= (7000)) {
                return TRUE;
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_GRIZ_QA301_WRONGWAY_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_WrongWay_03_01");
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 85867);
}

func void GRIZ_QA301_WRONGWAY() {
    FADESCREENTOBLACKF(1, 85868, 1000);
}

func void GRIZ_QA301_WRONGWAY_FADESCREEN() {
    if ((QA301_FOREST) == (0)) {
        TELEPORTNPCTOWP(1819, "PART12_PATH_02");
        TELEPORTNPCTOWP(57379, "PART12_QA301_SLD_01");
        AI_TELEPORTALWAYS(SLD_11054_ARAXOS_QA301, "PART12_QA301_SLD_01", TRUE);
        TELEPORTNPCTOWP(57386, "PART12_QA301_SLD_02");
        AI_TELEPORTALWAYS(SLD_11055_ARAXOS_QA301, "PART12_QA301_SLD_02", TRUE);
        TELEPORTNPCTOWP(57706, "PART12_QA301_SLD_03");
        AI_TELEPORTALWAYS(SLD_11056_GRIZ, "PART12_QA301_SLD_03", TRUE);
        NPC_REFRESH(SLD_11054_ARAXOS_QA301);
        NPC_REFRESH(SLD_11055_ARAXOS_QA301);
        NPC_REFRESH(SLD_11056_GRIZ);
    };
    if ((QA301_FOREST) == (1)) {
        TELEPORTNPCTOWP(1819, "PART12_PATH_44");
        TELEPORTNPCTOWP(57386, "PART12_MOB_30");
        AI_TELEPORTALWAYS(SLD_11055_ARAXOS_QA301, "PART12_MOB_30", TRUE);
        TELEPORTNPCTOWP(57706, "PART12_MOB_31");
        AI_TELEPORTALWAYS(SLD_11056_GRIZ, "PART12_MOB_31", TRUE);
        NPC_REFRESH(SLD_11055_ARAXOS_QA301);
        NPC_REFRESH(SLD_11056_GRIZ);
    };
    if ((QA301_FOREST) == (2)) {
        TELEPORTNPCTOWP(1819, "PART12_PATH_82");
        TELEPORTNPCTOWP(57706, "PART12_PATH_75");
        AI_TELEPORTALWAYS(SLD_11056_GRIZ, "PART12_PATH_75", TRUE);
        NPC_REFRESH(SLD_11056_GRIZ);
    };
    HERO.AIVAR[4] = FALSE;
    FADESCREENFROMBLACK(1);
}

instance DIA_GRIZ_QA301_SEETHAT(C_INFO) {
    NPC = 57706;
    NR = 1;
    CONDITION = DIA_GRIZ_QA301_SEETHAT_CONDITION;
    INFORMATION = DIA_GRIZ_QA301_SEETHAT_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_GRIZ_QA301_SEETHAT_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_QA301)) == (LOG_RUNNING)) && ((QA301_FOREST) == (2))) && ((QA301_TALKWITHARAXOSGUARD) == (3))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GRIZ_QA301_SEETHAT_INFO() {
    QA301_TALKWITHARAXOSGUARD = 3;
    SLD_11056_GRIZ.FLAGS = 0;
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_SeeThat_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_SeeThat_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_SeeThat_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_SeeThat_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_SeeThat_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_SeeThat_03_06");
    INFO_CLEARCHOICES(85869);
    INFO_ADDCHOICE(85869, "There's no need for that. Stay here.", 85873);
    INFO_ADDCHOICE(85869, "You're right, let's go hunt it down.", 85872);
}

func void DIA_GRIZ_QA301_SEETHAT_YES() {
    QA301_FOREST = 3;
    QA301_KILLSHADOWBEAST = 1;
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_SeeThat_Yes_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_SeeThat_Yes_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_SeeThat_Yes_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_SeeThat_Yes_03_04");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    AI_LOGENTRY(TOPIC_QA301, LOG_QA301_GRIZ_SHADOWBEAST_V1);
    INFO_CLEARCHOICES(85869);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "QA301_GUIDE_V1");
    QA301_SPAWNSHADOWBEAST();
}

func void DIA_GRIZ_QA301_SEETHAT_NO() {
    QA301_FOREST = 4;
    QA301_KILLSHADOWBEAST = 2;
    MOB_CHANGEFOCUSNAME("KM_QA301_BONFIRE", "MOBNAME_BONFIREENLIGHT");
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_SeeThat_No_15_01");
    AI_STARTFACEANI(OTHER, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_SeeThat_No_03_02");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_SeeThat_No_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_SeeThat_No_03_04");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_SeeThat_No_15_05");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    AI_LOGENTRY(TOPIC_QA301, LOG_QA301_GRIZ_SHADOWBEAST_V2);
    INFO_CLEARCHOICES(85869);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "QA301_GUARD");
}

instance DIA_GRIZ_QA301_SHADOWBEAST(C_INFO) {
    NPC = 57706;
    NR = 1;
    CONDITION = DIA_GRIZ_QA301_SHADOWBEAST_CONDITION;
    INFORMATION = DIA_GRIZ_QA301_SHADOWBEAST_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_GRIZ_QA301_SHADOWBEAST_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_QA301)) == (LOG_RUNNING)) && ((QA301_FOREST) == (3))) && (NPC_ISDEAD(SHADOWBEAST_QA301))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GRIZ_QA301_SHADOWBEAST_INFO() {
    QA301_FOREST = 5;
    SLD_11056_GRIZ.FLAGS = 2;
    MOB_CHANGEFOCUSNAME("KM_QA301_BONFIRE", "MOBNAME_BONFIREENLIGHT");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_Shadowbeast_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_Shadowbeast_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_Shadowbeast_03_03");
    AI_LOGENTRY(TOPIC_QA301, LOG_QA301_GRIZ_SHADOWBEASTDEAD);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "QA301_GUARD");
}

instance DIA_GRIZ_QA301_FINISHJOB(C_INFO) {
    NPC = 57706;
    NR = 1;
    CONDITION = DIA_GRIZ_QA301_FINISHJOB_CONDITION;
    INFORMATION = DIA_GRIZ_QA301_FINISHJOB_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_GRIZ_QA301_FINISHJOB_CONDITION() {
    if (((LOG_GETSTATUS(MIS_QA301)) == (LOG_RUNNING)) && ((QA301_FINISHJOB) == (3))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GRIZ_QA301_FINISHJOB_INFO() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_FinishJob_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_FinishJob_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_FinishJob_03_03");
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_GRIZ_QA301_AFTERQUEST(C_INFO) {
    NPC = 57706;
    NR = 1;
    CONDITION = DIA_GRIZ_QA301_AFTERQUEST_CONDITION;
    INFORMATION = DIA_GRIZ_QA301_AFTERQUEST_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_GRIZ_QA301_AFTERQUEST_CONDITION() {
    if ((LOG_GETSTATUS(MIS_QA301)) == (LOG_SUCCESS)) {
        if (((QA301_FINISHJOB) == (2)) || ((QA301_FINISHJOB) == (3))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_GRIZ_QA301_AFTERQUEST_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_AfterQuest_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Griz_QA301_AfterQuest_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_AfterQuest_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Griz_QA301_AfterQuest_03_04");
    CREATEINVITEMS(SELF, 34373, 1);
    B_GIVEINVITEMS(SELF, OTHER, 34373, 1);
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_GRIZ_PICKPOCKET(C_INFO) {
    NPC = 57706;
    NR = 900;
    CONDITION = DIA_GRIZ_PICKPOCKET_CONDITION;
    INFORMATION = DIA_GRIZ_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_80;
}

func int DIA_GRIZ_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_GRIZ_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(85883);
    INFO_ADDCHOICE(85883, DIALOG_BACK, 85887);
    INFO_ADDCHOICE(85883, DIALOG_PICKPOCKET, 85886);
}

func void DIA_GRIZ_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (2)) {
        B_PICKPOCKET_AMBIENT_TIER_2();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(85883);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(85883);
}

func void DIA_GRIZ_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(85883);
}

