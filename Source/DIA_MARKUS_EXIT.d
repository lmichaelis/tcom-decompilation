instance DIA_MARKUS_EXIT(C_INFO) {
    NPC = 58050;
    NR = 999;
    CONDITION = DIA_MARKUS_EXIT_CONDITION;
    INFORMATION = DIA_MARKUS_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_MARKUS_EXIT_CONDITION() {
    return TRUE;
}

var int MARKUS_CANSELLSTUFF;
func void DIA_MARKUS_EXIT_INFO() {
    if ((MARKUS_CANSELLSTUFF) == (FALSE)) {
        MARKUS_CANSELLSTUFF = TRUE;
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_Exit_13_01");
        LOG_CREATETOPIC(TOPIC_BARTER, LOG_NOTE);
        AI_LOGENTRY(TOPIC_BARTER, LOG_SILBACHBARTER_MARKUS);
    };
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_MARKUS_AMBIENT(C_INFO) {
    NPC = 58050;
    NR = 990;
    CONDITION = DIA_MARKUS_AMBIENT_CONDITION;
    INFORMATION = DIA_MARKUS_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How are you doing?";
}

func int DIA_MARKUS_AMBIENT_CONDITION() {
    if (((NPC_ISINSTATE(SELF, 61599)) && (NPC_KNOWSINFO(OTHER, 89681))) && ((Q504_TAKEWORKERS) != (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_AMBIENT_INFO() {
    NPC_INITAMBIENTS(SELF, 2);
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Ambient_15_00");
    if ((NPC_GETLASTAMBIENT(SELF)) == (1)) {
        AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_Ambient_13_03");
        AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_Ambient_13_04");
        AI_RESETFACEANI(SELF);
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_Ambient_13_05");
    };
    if ((NPC_GETLASTAMBIENT(SELF)) == (2)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_Ambient_13_01");
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_Ambient_13_02");
    };
}

instance DIA_MARKUS_HELLO(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_HELLO_CONDITION;
    INFORMATION = DIA_MARKUS_HELLO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Who are you?";
}

func int DIA_MARKUS_HELLO_CONDITION() {
    if ((Q504_TAKEWORKERS) != (2)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_HELLO_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Hello_15_00");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hello_13_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hello_13_02");
}

instance DIA_MARKUS_REFUGEE(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_REFUGEE_CONDITION;
    INFORMATION = DIA_MARKUS_REFUGEE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Are you local and haven't started complaining about refugees yet?";
}

func int DIA_MARKUS_REFUGEE_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 89681)) {
        if ((Q504_TAKEWORKERS) != (2)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_REFUGEE_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Refugee_15_01");
    AI_RESETFACEANI(OTHER);
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Refugee_13_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Refugee_13_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Refugee_13_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Refugee_13_05");
}

instance DIA_MARKUS_TIPS(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_TIPS_CONDITION;
    INFORMATION = DIA_MARKUS_TIPS_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Can you give me some advice on archery?";
}

func int DIA_MARKUS_TIPS_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 89681)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_TIPS_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_tips_15_00");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_tips_13_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_tips_13_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_tips_13_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_tips_13_04");
    LOG_CREATETOPIC(TOPIC_GOODADVICE, LOG_NOTE);
    AI_LOGENTRY(TOPIC_GOODADVICE, LOG_GOODADVICE_BOWANDCROSSBOW);
}

instance DIA_MARKUS_OTHSHEEP(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_OTHSHEEP_CONDITION;
    INFORMATION = DIA_MARKUS_OTHSHEEP_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Haven't you seen a sheep wandering around on its own?";
}

func int DIA_MARKUS_OTHSHEEP_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 89039)) {
        if ((Q504_TAKEWORKERS) != (2)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_OTHSHEEP_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_OthSheep_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_OthSheep_13_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_OthSheep_15_03");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_OthSheep_13_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_OthSheep_13_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_OthSheep_13_06");
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_OthSheep_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_OthSheep_13_08");
    if ((LOG_GETSTATUS(MIS_SQ102)) == (LOG_RUNNING)) {
        AI_LOGENTRY(TOPIC_SQ102, LOG_SQ102_MARKUS_OTHSHEEP);
    };
}

instance DIA_MARKUS_SQ115_BOAR(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_SQ115_BOAR_CONDITION;
    INFORMATION = DIA_MARKUS_SQ115_BOAR_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Where could I find a boar?";
}

func int DIA_MARKUS_SQ115_BOAR_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ115)) == (LOG_RUNNING)) && ((SQ115_KNOWWHEREAREBOARS) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_SQ115_BOAR_INFO() {
    SQ115_KNOWWHEREAREBOARS = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_SQ115_Boar_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ115_Boar_03_02");
    if ((KAPITEL) == (1)) {
        AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ115_Boar_03_03");
        AI_OUTPUT(OTHER, SELF, "DIA_Markus_SQ115_Boar_15_04");
        AI_RESETFACEANI(SELF);
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ115_Boar_03_05");
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ115_Boar_03_06");
    };
    AI_LOGENTRY(TOPIC_SQ115, LOG_SQ115_MARKUS_BOARS);
}

instance DIA_MARKUS_SQ118_HELP(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_SQ118_HELP_CONDITION;
    INFORMATION = DIA_MARKUS_SQ118_HELP_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Could you replace Folkard on the gate for a while?";
}

func int DIA_MARKUS_SQ118_HELP_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ118)) == (LOG_RUNNING)) && ((SQ118_GUARDSCOUNT) < (2))) && ((SQ118_FOLKARD_NEEDHELP) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_SQ118_HELP_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_SQ118_Help_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ118_Help_03_02");
    AI_LOGENTRY(TOPIC_SQ118, LOG_SQ118_MARKUS_NEEDFOOD);
}

instance DIA_MARKUS_SQ118_GOTFOOD(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_SQ118_GOTFOOD_CONDITION;
    INFORMATION = DIA_MARKUS_SQ118_GOTFOOD_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I have provision for you.";
}

func int DIA_MARKUS_SQ118_GOTFOOD_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ118)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 89696))) && ((SQ118_GUARDSCOUNT) < (2))) {
        if ((C_GOTANYKINDOFWINE(OTHER)) && ((NPC_HASITEMS(OTHER, 33968)) >= (1))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_SQ118_GOTFOOD_INFO() {
    SQ118_FOLKARD_NEEDHELP = 2;
    B_STANDUP();
    B_GIVEANYWINE_USEIT();
    B_GIVEINVITEMS(OTHER, SELF, 33968, 1);
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_SQ118_GotFood_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ118_GotFood_03_02");
    NPC_EXCHANGEROUTINE(SELF, "SQ118_GUARD");
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_MARKUS_TRAINME(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_TRAINME_CONDITION;
    INFORMATION = DIA_MARKUS_TRAINME_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I would like to know more about archery.";
}

func int DIA_MARKUS_TRAINME_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 89687)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_TRAINME_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_trainMe_15_00");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_trainMe_13_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_trainMe_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_trainMe_13_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_trainMe_13_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_trainMe_13_05");
    TEACHER_LOGENTRY_MARKUS();
    LOG_CREATETOPIC(TOPIC_SILBACHTEACHER, LOG_NOTE);
    AI_LOGENTRY(TOPIC_SILBACHTEACHER, LOG_MARKUS_TRAINME);
}

var int MARKUS_GOODSTUDENT;
var int MARKUS_GOODSTUDENT_GIFT;
var int MARKUS_NOMORE;
var string MARKUS_PRINTS;
var int MARKUS_CURRENTBLEVEL;
var int MARKUS_CURRENTDEXLEVEL;
instance DIA_MARKUS_TEACH(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_TEACH_CONDITION;
    INFORMATION = DIA_MARKUS_TEACH_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "Teach me.";
}

func int DIA_MARKUS_TEACH_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 89702)) && ((MARKUS_NOMORE) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_TEACH_CHOICES() {
    var int MARKUS_GOLDCOST;
    MARKUS_GOLDCOST = 3;
    MARKUS_CURRENTBLEVEL = OTHER.AIVAR[86];
    MARKUS_CURRENTDEXLEVEL = OTHER.AIVAR[82];
    INFO_CLEARCHOICES(89711);
    INFO_ADDCHOICE(89711, DIALOG_BACK, 89716);
    INFO_ADDCHOICE(89711, B_BUILDLEARNSTRING2(PRINT_LEARNBOW1, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_BOW, 1), MARKUS_GOLDCOST), 89717);
    INFO_ADDCHOICE(89711, B_BUILDLEARNSTRING2(PRINT_LEARNBOW5, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_BOW, 5), (MARKUS_GOLDCOST) * (5)), 89718);
    INFO_ADDCHOICE(89711, B_BUILDLEARNSTRING2(PRINT_LEARNDEX1, B_GETLEARNCOSTATTRIBUTE(OTHER, ATR_DEXTERITY, 1), MARKUS_GOLDCOST), 89719);
    INFO_ADDCHOICE(89711, B_BUILDLEARNSTRING2(PRINT_LEARNDEX5, B_GETLEARNCOSTATTRIBUTE(OTHER, ATR_DEXTERITY, 5), (MARKUS_GOLDCOST) * (5)), 89720);
    if (((OTHER.AIVAR[86]) >= (30)) && ((OTHER.AIVAR[82]) >= (40))) {
        MARKUS_NOMORE = TRUE;
    };
}

func void DIA_MARKUS_TEACH_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Teach_15_00");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Teach_13_01");
    DIA_MARKUS_TEACH_CHOICES();
}

func void DIA_MARKUS_TEACH_BACK() {
    INFO_CLEARCHOICES(89711);
    if (((MARKUS_GOODSTUDENT) >= (25)) && ((MARKUS_GOODSTUDENT_GIFT) == (FALSE))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_TeachBack_13_01");
        AI_OUTPUT(OTHER, SELF, "DIA_Markus_TeachBack_15_02");
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_TeachBack_13_03");
        CREATEINVITEMS(SELF, 34373, 1);
        B_GIVEINVITEMS(SELF, OTHER, 34373, 1);
        MARKUS_GOODSTUDENT_GIFT = TRUE;
        AI_OUTPUT(OTHER, SELF, "DIA_Markus_TeachBack_15_04");
    };
}

func void DIA_MARKUS_TEACH_BOW1() {
    if ((NPC_HASITEMS(OTHER, 34203)) >= (MARKUS_PAYMENT1)) {
        if ((MARKUS_CURRENTBLEVEL) < (OTHER.AIVAR[86])) {
            SND_PLAY(GELDBEUTEL);
            B_GIVEINVITEMS(OTHER, SELF, 34203, MARKUS_PAYMENT1);
            MARKUS_GOODSTUDENT += 1;
            NPC_REMOVEINVITEMS(SELF, 34203, MARKUS_PAYMENT1);
        };
        B_TEACHFIGHTTALENTPERCENT(SELF, OTHER, NPC_TALENT_BOW, 1, 30);
        DIA_MARKUS_TEACH_CHOICES();
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (MARKUS_PAYMENT1)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_Teach_BOW1_13_01");
        MARKUS_PRINTS = CONCATSTRINGS(PRINT_RGOLD, INTTOSTRING(MARKUS_PAYMENT1));
        PRINTSCREEN(MARKUS_PRINTS, -(1), -(1), FONT_SCREEN, 2);
        DIA_MARKUS_TEACH_CHOICES();
    };
}

func void DIA_MARKUS_TEACH_BOW5() {
    if ((NPC_HASITEMS(OTHER, 34203)) >= (MARKUS_PAYMENT5)) {
        if ((MARKUS_CURRENTBLEVEL) < (OTHER.AIVAR[86])) {
            B_GIVEINVITEMS(OTHER, SELF, 34203, MARKUS_PAYMENT5);
            SND_PLAY(GELDBEUTEL);
            MARKUS_GOODSTUDENT += 5;
            NPC_REMOVEINVITEMS(SELF, 34203, MARKUS_PAYMENT5);
        };
        B_TEACHFIGHTTALENTPERCENT(SELF, OTHER, NPC_TALENT_BOW, 5, 30);
        DIA_MARKUS_TEACH_CHOICES();
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (MARKUS_PAYMENT5)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_Teach_BOW5_13_01");
        MARKUS_PRINTS = CONCATSTRINGS(PRINT_RGOLD, INTTOSTRING(MARKUS_PAYMENT5));
        PRINTSCREEN(MARKUS_PRINTS, -(1), -(1), FONT_SCREEN, 2);
        DIA_MARKUS_TEACH_CHOICES();
    };
}

func void DIA_MARKUS_TEACHDEX1() {
    if ((NPC_HASITEMS(OTHER, 34203)) >= (MARKUS_PAYMENT1)) {
        if ((MARKUS_CURRENTDEXLEVEL) < (OTHER.AIVAR[82])) {
            SND_PLAY(GELDBEUTEL);
            B_GIVEINVITEMS(OTHER, SELF, 34203, MARKUS_PAYMENT1);
            MARKUS_GOODSTUDENT += 1;
            NPC_REMOVEINVITEMS(SELF, 34203, MARKUS_PAYMENT1);
        };
        B_TEACHATTRIBUTEPOINTS(SELF, OTHER, ATR_DEXTERITY, 1, 40);
        DIA_MARKUS_TEACH_CHOICES();
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (MARKUS_PAYMENT1)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_TeachDEX_13_01");
        MARKUS_PRINTS = CONCATSTRINGS(PRINT_RGOLD, INTTOSTRING(MARKUS_PAYMENT1));
        PRINTSCREEN(MARKUS_PRINTS, -(1), -(1), FONT_SCREEN, 2);
        DIA_MARKUS_TEACH_CHOICES();
    };
}

func void DIA_MARKUS_TEACHDEX5() {
    if ((NPC_HASITEMS(OTHER, 34203)) >= (MARKUS_PAYMENT5)) {
        if ((MARKUS_CURRENTDEXLEVEL) < (OTHER.AIVAR[82])) {
            SND_PLAY(GELDBEUTEL);
            B_GIVEINVITEMS(OTHER, SELF, 34203, MARKUS_PAYMENT5);
            MARKUS_GOODSTUDENT += 5;
            NPC_REMOVEINVITEMS(SELF, 34203, MARKUS_PAYMENT5);
        };
        B_TEACHATTRIBUTEPOINTS(SELF, OTHER, ATR_DEXTERITY, 5, 40);
        DIA_MARKUS_TEACH_CHOICES();
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (MARKUS_PAYMENT5)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_Teach_13_05");
        MARKUS_PRINTS = CONCATSTRINGS(PRINT_RGOLD, INTTOSTRING(MARKUS_PAYMENT5));
        PRINTSCREEN(MARKUS_PRINTS, -(1), -(1), FONT_SCREEN, 2);
        DIA_MARKUS_TEACH_CHOICES();
    };
}

instance DIA_MARKUS_FLETCHERY(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_FLETCHERY_CONDITION;
    INFORMATION = DIA_MARKUS_FLETCHERY_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = B_BUILDLEARNSTRING2(PRINT_LEARN_FLETCHERY1, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_FLETCHERY, 1), MARKUS_FLETCHERY);
}

func int DIA_MARKUS_FLETCHERY_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 89702)) && ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_FLETCHERY)) == (0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_FLETCHERY_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Fletchery_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (MARKUS_FLETCHERY)) {
        if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_FLETCHERY)) == (1)) {
            B_GIVEINVITEMS(OTHER, SELF, 34203, MARKUS_FLETCHERY);
            AI_OUTPUT(SELF, OTHER, "DIA_Markus_Fletchery_13_01");
            AI_OUTPUT(SELF, OTHER, "DIA_Markus_Fletchery_13_02");
            PRINTSCREEN(PRINT_LEARNFLETCHERY, -(1), -(1), FONT_SCREEN, 2);
            NPC_REMOVEINVITEMS(SELF, 34203, MARKUS_FLETCHERY);
        };
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Fletchery_13_03");
}

instance DIA_MARKUS_Q205_FOREST(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_Q205_FOREST_CONDITION;
    INFORMATION = DIA_MARKUS_Q205_FOREST_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_MARKUS_Q205_FOREST_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q205)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 89408))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_Q205_FOREST_INFO() {
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Forest_03_01");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Forest_03_02");
    B_STANDUP();
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Forest_03_03");
    INFO_CLEARCHOICES(89724);
    INFO_ADDCHOICE(89724, "There's something else I need to do.", 89729);
    INFO_ADDCHOICE(89724, "All right, let's go.", 89728);
}

var int MARKUS_Q205_FOLLOW;
func void DIA_MARKUS_Q205_FOREST_YES() {
    MARKUS_Q205_FOLLOW = 2;
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Q205_Forest_Yes_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Forest_Yes_03_02");
    INFO_CLEARCHOICES(89724);
    AI_STOPPROCESSINFOS(SELF);
    SELF.AIVAR[15] = TRUE;
    NPC_EXCHANGEROUTINE(SELF, "Q205_GUIDE_01");
    AI_LOGENTRY(TOPIC_Q205, LOG_Q205_MARKUS_LETSGO);
}

func void DIA_MARKUS_Q205_FOREST_NO() {
    MARKUS_Q205_FOLLOW = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Q205_Forest_No_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Forest_No_03_02");
    INFO_CLEARCHOICES(89724);
    AI_LOGENTRY(TOPIC_Q205, LOG_Q205_MARKUS_NOTNOW);
}

instance DIA_MARKUS_Q205_LETSGO(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_Q205_LETSGO_CONDITION;
    INFORMATION = DIA_MARKUS_Q205_LETSGO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "All right, let's go.";
}

func int DIA_MARKUS_Q205_LETSGO_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q205)) == (LOG_RUNNING)) && ((MARKUS_Q205_FOLLOW) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_Q205_LETSGO_INFO() {
    DIA_MARKUS_Q205_FOREST_YES();
}

instance DIA_MARKUS_Q205_BEER(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_Q205_BEER_CONDITION;
    INFORMATION = DIA_MARKUS_Q205_BEER_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_MARKUS_Q205_BEER_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_Q205)) == (LOG_RUNNING)) && ((NPC_GETDISTTOWP(SELF, "PART12_PATH_40")) <= (500))) && ((MARKUS_Q205_FOLLOW) == (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_Q205_BEER_INFO() {
    AI_GOTOWP(SELF, "PART12_PATH_42");
    AI_WAITTILLEND(OTHER, SELF);
    AI_TURNTONPC(OTHER, SELF);
    AI_GOTONPC(OTHER, SELF);
    AI_PLAYANI(SELF, T_PLUNDER);
    AI_TURNTONPC(SELF, OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Beer_03_01");
    AI_LOGENTRY(TOPIC_Q205, LOG_Q205_MARKUS_BEER);
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, "Q205_GUIDE_02");
}

instance DIA_MARKUS_Q205_CAMP(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_Q205_CAMP_CONDITION;
    INFORMATION = DIA_MARKUS_Q205_CAMP_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_MARKUS_Q205_CAMP_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_Q205)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 89733))) && ((NPC_GETDISTTOWP(SELF, "PART12_PATH_116")) <= (500))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_Q205_CAMP_NEXT() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_STARTFACEANI(OTHER, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Camp_Next_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Q205_Camp_Next_15_02");
    B_LOGENTRY(TOPIC_Q205, LOG_Q205_MARKUS_GOODLUCK);
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
    INFO_CLEARCHOICES(89736);
    AI_STOPPROCESSINFOS(SELF);
    SELF.AIVAR[15] = FALSE;
    NPC_EXCHANGEROUTINE(SELF, START);
    Q205_SPAWNRENEGADES();
}

var int MARKUS_Q205_CAMP_GUARDS;
var int MARKUS_Q205_CAMP_MORE;
func void DIA_MARKUS_Q205_CAMP_CHOICES() {
    if (((MARKUS_Q205_CAMP_GUARDS) == (FALSE)) || ((MARKUS_Q205_CAMP_MORE) == (FALSE))) {
        INFO_CLEARCHOICES(89736);
        if ((MARKUS_Q205_CAMP_GUARDS) == (FALSE)) {
            INFO_ADDCHOICE(89736, "Are the guards responsible for these dead animals?", 89744);
        };
        if ((MARKUS_Q205_CAMP_MORE) == (FALSE)) {
            INFO_ADDCHOICE(89736, "See anything else?", 89743);
        };
    };
    DIA_MARKUS_Q205_CAMP_NEXT();
}

func void DIA_MARKUS_Q205_CAMP_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Camp_03_01");
    AI_TURNAWAY(SELF, OTHER);
    AI_PLAYANI(SELF, T_SEARCH);
    AI_TURNTONPC(SELF, OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Camp_03_02");
    DIA_MARKUS_Q205_CAMP_CHOICES();
}

func void DIA_MARKUS_Q205_CAMP_MORE() {
    MARKUS_Q205_CAMP_MORE = TRUE;
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Q205_Camp_More_15_01");
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Camp_More_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Camp_More_03_03");
    AI_TURNAWAY(SELF, OTHER);
    AI_PLAYANI(SELF, T_PLUNDER);
    AI_TURNTONPC(SELF, OTHER);
    AI_STARTFACEANI(SELF, S_THINK, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Camp_More_03_04");
    AI_RESETFACEANI(SELF);
    DIA_MARKUS_Q205_CAMP_CHOICES();
}

func void DIA_MARKUS_Q205_CAMP_GUARDS() {
    MARKUS_Q205_CAMP_GUARDS = TRUE;
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Q205_Camp_Guards_15_01");
    AI_RESETFACEANI(OTHER);
    AI_STARTFACEANI(SELF, S_THINK, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Camp_Guards_03_02");
    AI_STARTFACEANI(SELF, S_DOUBT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Camp_Guards_03_03");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Camp_Guards_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Camp_Guards_03_05");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Camp_Guards_03_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q205_Camp_Guards_03_07");
    DIA_MARKUS_Q205_CAMP_CHOICES();
}

instance DIA_MARKUS_SQ416_SMALLTALKBEAST(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_SQ416_SMALLTALKBEAST_CONDITION;
    INFORMATION = DIA_MARKUS_SQ416_SMALLTALKBEAST_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_MARKUS_SQ416_SMALLTALKBEAST_CONDITION() {
    if (((KAPITEL) == (4)) && ((LOG_GETSTATUS(MIS_Q403)) != (LOG_SUCCESS))) {
        if (((NPC_GETDISTTOWP(NONE_11037_MARKUS, "VILLAGE_SMALLTALK_14")) <= (500)) && ((NPC_GETDISTTOWP(NONE_6262_CARDEN, "VILLAGE_SMALLTALK_13")) <= (500))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_SQ416_SMALLTALKBEAST_INFO() {
    TRIA_INVITE(NONE_6262_CARDEN);
    TRIA_STARTEXT(FALSE);
    AI_LOOKATNPC(OTHER, SELF);
    B_TURNTONPC(NONE_11037_MARKUS, NONE_6262_CARDEN);
    B_TURNTONPC(NONE_6262_CARDEN, NONE_11037_MARKUS);
    TRIA_WAIT();
    TRIA_NEXT(NONE_6262_CARDEN);
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ416_SmalltalkBeast_03_01");
    TRIA_WAIT();
    TRIA_NEXT(NONE_11037_MARKUS);
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ416_SmalltalkBeast_03_02");
    INFO_CLEARCHOICES(89745);
    INFO_ADDCHOICE(89745, "Is something wrong?", 89748);
}

func void DIA_MARKUS_SQ416_SMALLTALKBEAST_WHAT() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_SQ416_SmalltalkBeast_What_15_01");
    TRIA_WAIT();
    AI_TURNTONPC(SELF, OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ416_SmalltalkBeast_What_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ416_SmalltalkBeast_What_03_03");
    INFO_CLEARCHOICES(89745);
    INFO_ADDCHOICE(89745, DIALOG_ENDE, 89751);
    INFO_ADDCHOICE(89745, "Who did it get?", 89749);
}

func void DIA_MARKUS_SQ416_SMALLTALKBEAST_WHAT_WHO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_SQ416_SmalltalkBeast_Who_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ416_SmalltalkBeast_Who_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ416_SmalltalkBeast_Who_03_03");
    INFO_ADDCHOICE(89745, "What now? Do you need some help?", 89750);
}

func void DIA_MARKUS_SQ416_SMALLTALKBEAST_WHAT_HELP() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_SQ416_SmalltalkBeast_Help_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ416_SmalltalkBeast_Help_03_02");
}

func void DIA_MARKUS_SQ416_SMALLTALKBEAST_BACK() {
    TRIA_FINISH();
    AI_STOPLOOKAT(SELF);
    AI_STOPLOOKAT(OTHER);
    INFO_CLEARCHOICES(89745);
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 89752);
}

func void MARKUS_SQ416_BRINGBACKRTN() {
    NPC_EXCHANGEROUTINE(NONE_6262_CARDEN, START);
    NPC_EXCHANGEROUTINE(NONE_11037_MARKUS, START);
}

instance DIA_MARKUS_Q504_FEEL(C_INFO) {
    NPC = 58050;
    NR = 90;
    CONDITION = DIA_MARKUS_Q504_FEEL_CONDITION;
    INFORMATION = DIA_MARKUS_Q504_FEEL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How's the morale?";
}

func int DIA_MARKUS_Q504_FEEL_CONDITION() {
    if (((Q504_TAKEWORKERS) == (2)) && ((NPC_GETDISTTOWP(SELF, "PART5_Q505_MARKUS")) <= (2000))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_Q504_FEEL_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    B_SAY(OTHER, SELF, "$MARVIN_VolfzackMorale3");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q504_Feel_03_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Q504_Feel_03_02");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

instance DIA_MARKUS_HUNTING_BASE(C_INFO) {
    NPC = 58050;
    NR = 940;
    CONDITION = DIA_MARKUS_HUNTING_BASE_CONDITION;
    INFORMATION = DIA_MARKUS_HUNTING_BASE_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = B_BUILDLEARNSTRING2(PRINT_LEARN_HUNTING_BASE, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_FUR), MARKUS_BASETROPHY);
}

func int DIA_MARKUS_HUNTING_BASE_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 89702)) && ((PLAYER_TALENT_TAKEANIMALTROPHY[2]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_HUNTING_BASE_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Hunting_Base_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (MARKUS_BASETROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[2]) == (TRUE)) {
            if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_SNEAK)) == (0)) {
                PRINTSCREEN(PRINT_LEARNSNEAK, -(1), YPOS_LEVELUP, FONT_SCREEN, 2);
                AI_OUTPUT(SELF, OTHER, "DIA_Markus_Base_Sneak_03_01");
                B_TEACHTHIEFTALENT(NONE_11037_MARKUS, HERO, NPC_TALENT_SNEAK, 1);
                AI_OUTPUT(SELF, OTHER, "DIA_Markus_Base_Sneak_03_02");
            };
            B_GIVEINVITEMS(OTHER, SELF, 34203, MARKUS_BASETROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Base_03_02");
            AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Base_03_03");
            AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Base_03_04");
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHY, -(1), -(1), FONT_SCREEN, 2);
            NPC_REMOVEINVITEMS(SELF, 34203, MARKUS_BASETROPHY);
        };
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (MARKUS_BASETROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Base_03_05");
    };
}

var int MARKUS_ALLHUNT;
instance DIA_MARKUS_HUNTING_SPECIAL(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_HUNTING_SPECIAL_CONDITION;
    INFORMATION = DIA_MARKUS_HUNTING_SPECIAL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "Can you teach me something about hunting?";
}

func int DIA_MARKUS_HUNTING_SPECIAL_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 89702)) && ((PLAYER_TALENT_TAKEANIMALTROPHY[2]) == (TRUE))) && ((MARKUS_ALLHUNT) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_HUNTING_SPECIAL_CHOICES() {
    INFO_CLEARCHOICES(89760);
    INFO_ADDCHOICE(89760, DIALOG_BACK, 89764);
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[7]) == (FALSE)) {
        INFO_ADDCHOICE(89760, B_BUILDLEARNSTRING2(PRINT_TEACHBFSTING, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_BFSTING), MARKUS_STINGSTROPHY), 89765);
    };
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[8]) == (FALSE)) {
        INFO_ADDCHOICE(89760, B_BUILDLEARNSTRING2(PRINT_TEACHMANDIBLES, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_MANDIBLES), MARKUS_MANDIBLESTROPHY), 89766);
    };
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[6]) == (FALSE)) {
        INFO_ADDCHOICE(89760, B_BUILDLEARNSTRING2(PRINT_TEACHBFWING, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_BFWING), MARKUS_WINGSTROPHY), 89767);
    };
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[1]) == (FALSE)) {
        INFO_ADDCHOICE(89760, B_BUILDLEARNSTRING2(PRINT_TEACHCLAWS, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_CLAWS), MARKUS_CLAWSTROPHY), 89768);
    };
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[0]) == (FALSE)) {
        INFO_ADDCHOICE(89760, B_BUILDLEARNSTRING2(PRINT_TEACHTEETH, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_TEETH), MARKUS_CLAWSTROPHY), 94879);
    };
}

func void DIA_MARKUS_HUNTING_SPECIAL_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_CanYouTeachMeHunting");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Special_03_01");
    DIA_MARKUS_HUNTING_SPECIAL_CHOICES();
}

func void DIA_MARKUS_HUNTING_SPECIAL_BACK() {
    INFO_CLEARCHOICES(89760);
    if ((((((PLAYER_TALENT_TAKEANIMALTROPHY[7]) == (TRUE)) && ((PLAYER_TALENT_TAKEANIMALTROPHY[8]) == (TRUE))) && ((PLAYER_TALENT_TAKEANIMALTROPHY[6]) == (TRUE))) && ((PLAYER_TALENT_TAKEANIMALTROPHY[1]) == (TRUE))) && ((PLAYER_TALENT_TAKEANIMALTROPHY[0]) == (TRUE))) {
        MARKUS_ALLHUNT = TRUE;
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_AllHunt_03_01");
    };
}

func void DIA_MARKUS_HUNTING_SPECIAL_BFSTING() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Hunting_Special_BFSting_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (MARKUS_STINGSTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[7]) == (TRUE)) {
            B_GIVEINVITEMS(OTHER, SELF, 34203, MARKUS_STINGSTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Special_BFSting_03_02");
            AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Special_BFSting_03_03");
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYSTING, -(1), -(1), FONT_SCREEN, 2);
            NPC_REMOVEINVITEMS(SELF, 34203, MARKUS_STINGSTROPHY);
        };
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (MARKUS_STINGSTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Special_BFSting_03_04");
    };
    DIA_MARKUS_HUNTING_SPECIAL_CHOICES();
}

func void DIA_MARKUS_HUNTING_SPECIAL_MANDIBLES() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Hunting_Special_Mandibles_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (MARKUS_MANDIBLESTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[8]) == (TRUE)) {
            B_GIVEINVITEMS(OTHER, SELF, 34203, MARKUS_MANDIBLESTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Special_Mandibles_03_02");
            AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Special_Mandibles_03_03");
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYMANDIBLES, -(1), -(1), FONT_SCREEN, 2);
            NPC_REMOVEINVITEMS(SELF, 34203, MARKUS_MANDIBLESTROPHY);
        };
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (MARKUS_MANDIBLESTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Special_Mandibles_03_04");
    };
    DIA_MARKUS_HUNTING_SPECIAL_CHOICES();
}

func void DIA_MARKUS_HUNTING_SPECIAL_BFWING() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Hunting_Special_BFWing_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (MARKUS_WINGSTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[6]) == (TRUE)) {
            B_GIVEINVITEMS(OTHER, SELF, 34203, MARKUS_WINGSTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Special_BFWing_03_02");
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYWING, -(1), -(1), FONT_SCREEN, 2);
            NPC_REMOVEINVITEMS(SELF, 34203, MARKUS_WINGSTROPHY);
        };
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (MARKUS_WINGSTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Special_BFWing_03_03");
    };
    DIA_MARKUS_HUNTING_SPECIAL_CHOICES();
}

func void DIA_MARKUS_HUNTING_SPECIAL_CLAWS() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_Hunting_Special_Claws_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (MARKUS_CLAWSTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[1]) == (TRUE)) {
            B_GIVEINVITEMS(OTHER, SELF, 34203, MARKUS_CLAWSTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Special_Claws_03_02");
            AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Special_Claws_03_03");
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYCLAWS, -(1), -(1), FONT_SCREEN, 2);
            NPC_REMOVEINVITEMS(SELF, 34203, MARKUS_CLAWSTROPHY);
        };
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (MARKUS_CLAWSTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_Hunting_Special_Claws_03_04");
    };
    DIA_MARKUS_HUNTING_SPECIAL_CHOICES();
}

instance DIA_MARKUS_SQ101_GUIDE(C_INFO) {
    NPC = 58050;
    NR = 1;
    CONDITION = DIA_MARKUS_SQ101_GUIDE_CONDITION;
    INFORMATION = DIA_MARKUS_SQ101_GUIDE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Bastian sent me for wood...";
}

func int DIA_MARKUS_SQ101_GUIDE_CONDITION() {
    if ((LOG_GETSTATUS(MIS_SQ101)) == (LOG_RUNNING)) {
        if (((NPC_KNOWSINFO(OTHER, 86307)) == (FALSE)) && ((NPC_KNOWSINFO(OTHER, 85269)) == (FALSE))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_SQ101_GUIDE_INFO() {
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_SQ101_Guide_15_01");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ101_Guide_03_02");
    AI_RESETFACEANI(OTHER);
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ101_Guide_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ101_Guide_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ101_Guide_03_05");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ101_Guide_03_06");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SQ101_Guide_03_07");
    AI_LOGENTRY(TOPIC_SQ101, LOG_SQ101_MARKUS_GUIDE);
}

instance DIA_MARKUS_SELLTROPHY(C_INFO) {
    NPC = 58050;
    NR = 970;
    CONDITION = DIA_MARKUS_SELLTROPHY_CONDITION;
    INFORMATION = DIA_MARKUS_SELLTROPHY_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I brought the trophies.";
}

func int DIA_MARKUS_SELLTROPHY_CONDITION() {
    if ((MARKUS_CANSELLSTUFF) == (TRUE)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int MARKUS_TROHPYINSTANCE;
var int MARKUS_TROPHYVALUE;
var int MARKUS_TROPHYAMOUNT;
var int MARKUSTEETH_GOLD;
var int MARKUSTEETH_COUNT;
var int MAXCLAW;
var int MAXLURKERCLAW;
var int MAXSEALURKERCLAW;
var int MAXTEETH;
var int MAXBOARTUSK;
var int MAXTROLLTOOTH;
var int MAXSHARKTEETH;
var int GOLDCLAW;
var int GOLDLURKERCLAW;
var int GOLDSEALURKERCLAW;
var int GOLDTEETH;
var int GOLDBOARTUSK;
var int GOLDTROLLTOOTH;
var int GOLDSHARKTEETH;
func void DIA_MARKUS_SELLTROPHY_CHOICES() {
    var string ALL_STRING_TEETH;
    MAXCLAW = NPC_HASITEMS(HERO, 33850);
    MAXLURKERCLAW = NPC_HASITEMS(HERO, 33851);
    MAXSEALURKERCLAW = NPC_HASITEMS(HERO, 35353);
    MAXTEETH = NPC_HASITEMS(HERO, 33852);
    MAXBOARTUSK = NPC_HASITEMS(HERO, 35372);
    MAXTROLLTOOTH = NPC_HASITEMS(HERO, 33870);
    MAXSHARKTEETH = NPC_HASITEMS(HERO, 33869);
    RESERVED_VAR_INT_28 = NPC_HASITEMS(HERO, 35352);
    GOLDCLAW = 0;
    GOLDLURKERCLAW = 0;
    GOLDSEALURKERCLAW = 0;
    GOLDTEETH = 0;
    GOLDBOARTUSK = 0;
    GOLDTROLLTOOTH = 0;
    GOLDSHARKTEETH = 0;
    RESERVED_VAR_INT_29 = 0;
    MARKUSTEETH_COUNT = (((((((MAXCLAW) + (MAXLURKERCLAW)) + (MAXSEALURKERCLAW)) + (MAXTEETH)) + (MAXBOARTUSK)) + (MAXTROLLTOOTH)) + (MAXSHARKTEETH)) + (RESERVED_VAR_INT_28);
    RESERVED_VAR_INT_30 = -(1);
    RESERVED_VAR_INT_31 = 0;
    RESERVED_VAR_STRING_06 = CS4(DIALOG_ALL, RESERVED_CONST_STRING_19, I2S(RESERVED_VAR_INT_28), RESERVED_CONST_STRING_20);
    INFO_CLEARCHOICES(89772);
    if ((NPC_HASITEMS(OTHER, 33850)) >= (1)) {
        INFO_ADDCHOICE(89772, "(Give common claws)", 89803);
    };
    if ((NPC_HASITEMS(OTHER, 33851)) >= (1)) {
        INFO_ADDCHOICE(89772, "(Give lurker claws)", 89804);
    };
    if ((NPC_HASITEMS(OTHER, 35353)) >= (1)) {
        INFO_ADDCHOICE(89772, "(Give sea lurker claws)", 89805);
    };
    if ((NPC_HASITEMS(OTHER, 33852)) >= (1)) {
        INFO_ADDCHOICE(89772, "(Give common fangs)", 89809);
    };
    if ((NPC_HASITEMS(OTHER, 35372)) >= (1)) {
        INFO_ADDCHOICE(89772, "(Give boar tusks)", 89806);
    };
    if ((NPC_HASITEMS(OTHER, 33870)) >= (1)) {
        INFO_ADDCHOICE(89772, "(Give troll fangs)", 89808);
    };
    if ((NPC_HASITEMS(OTHER, 33869)) >= (1)) {
        INFO_ADDCHOICE(89772, "(Give swampshark teeth)", 89807);
    };
    if ((NPC_HASITEMS(OTHER, 35352)) >= (1)) {
        INFO_ADDCHOICE(89772, "(Give seashark teeth)", 2431);
    };
    ALL_STRING_TEETH = CS4(DIALOG_ALL, " (", I2S(MARKUSTEETH_COUNT), ")");
    INFO_ADDCHOICE(89772, ALL_STRING_TEETH, 89796);
    INFO_ADDCHOICE(89772, DIALOG_BACK, 89798);
}

func void DIA_MARKUS_NOTHINGCOMMENT() {
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SellTrophy_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Markus_SellTrophy_03_04");
}

func void DIA_MARKUS_SELLTROPHY_EVERYTHING() {
    MAXCLAW = NPC_HASITEMS(HERO, 33850);
    MAXLURKERCLAW = NPC_HASITEMS(HERO, 33851);
    MAXSEALURKERCLAW = NPC_HASITEMS(HERO, 35353);
    MAXTEETH = NPC_HASITEMS(HERO, 33852);
    MAXBOARTUSK = NPC_HASITEMS(HERO, 35372);
    MAXTROLLTOOTH = NPC_HASITEMS(HERO, 33870);
    MAXSHARKTEETH = NPC_HASITEMS(HERO, 33869);
    RESERVED_VAR_INT_28 = NPC_HASITEMS(HERO, 35352);
    GOLDCLAW = ((MAXCLAW) * (VALUE_CLAW)) / (3);
    GOLDLURKERCLAW = ((MAXLURKERCLAW) * (VALUE_LURKERCLAW)) / (3);
    GOLDSEALURKERCLAW = ((MAXSEALURKERCLAW) * (VALUE_SEALURKERCLAW)) / (3);
    GOLDTEETH = ((MAXTEETH) * (VALUE_TEETH)) / (3);
    GOLDBOARTUSK = ((MAXBOARTUSK) * (VALUE_BOARTUSK)) / (3);
    GOLDTROLLTOOTH = ((MAXTROLLTOOTH) * (VALUE_TROLLTOOTH)) / (5);
    GOLDSHARKTEETH = ((MAXSHARKTEETH) * (VALUE_SHARKTEETH)) / (3);
    RESERVED_VAR_INT_29 = ((RESERVED_VAR_INT_28) * (VALUE_SEASHARKTEETH)) / (3);
    MARKUSTEETH_COUNT = (((((((MAXCLAW) + (MAXLURKERCLAW)) + (MAXSEALURKERCLAW)) + (MAXTEETH)) + (MAXBOARTUSK)) + (MAXTROLLTOOTH)) + (MAXSHARKTEETH)) + (RESERVED_VAR_INT_28);
    MARKUSTEETH_GOLD = ((((((((GOLDCLAW) + (GOLDLURKERCLAW)) + (GOLDSEALURKERCLAW)) + (GOLDTEETH)) + (GOLDBOARTUSK)) + (GOLDTROLLTOOTH)) + (GOLDSHARKTEETH)) + (MARKUSTEETH_GOLD)) + (RESERVED_VAR_INT_29);
    if ((MARKUSTEETH_COUNT) >= (1)) {
        MARKUS_TROPHYAMOUNT = (MARKUS_TROPHYAMOUNT) + (MARKUSTEETH_COUNT);
        if ((NPC_HASITEMS(OTHER, 33850)) >= (1)) {
            B_GIVEINVITEMS(OTHER, SELF, 33850, MAXCLAW);
        };
        if ((NPC_HASITEMS(OTHER, 33851)) >= (1)) {
            B_GIVEINVITEMS(OTHER, SELF, 33851, MAXLURKERCLAW);
        };
        if ((NPC_HASITEMS(OTHER, 35353)) >= (1)) {
            B_GIVEINVITEMS(OTHER, SELF, 35353, MAXSEALURKERCLAW);
        };
        if ((NPC_HASITEMS(OTHER, 33852)) >= (1)) {
            B_GIVEINVITEMS(OTHER, SELF, 33852, MAXTEETH);
        };
        if ((NPC_HASITEMS(OTHER, 35372)) >= (1)) {
            B_GIVEINVITEMS(OTHER, SELF, 35372, MAXBOARTUSK);
        };
        if ((NPC_HASITEMS(OTHER, 33870)) >= (1)) {
            B_GIVEINVITEMS(OTHER, SELF, 33870, MAXTROLLTOOTH);
        };
        if ((NPC_HASITEMS(OTHER, 33869)) >= (1)) {
            B_GIVEINVITEMS(OTHER, SELF, 33869, MAXSHARKTEETH);
        };
        if ((NPC_HASITEMS(OTHER, 35352)) >= (1)) {
            B_GIVEINVITEMS(OTHER, SELF, 35352, RESERVED_VAR_INT_28);
        };
        AI_WAIT(SELF, 1056964608);
        AI_FUNCTION(SELF, 89797);
        DIA_MARKUS_SELLTROPHY_CHOICES();
    };
    DIA_MARKUS_NOTHINGCOMMENT();
    DIA_MARKUS_SELLTROPHY_CHOICES();
}

func void MARKUS_SELLALLSTUFF() {
    B_GIVEINVITEMS(NONE_11037_MARKUS, HERO, 34203, MARKUSTEETH_GOLD);
}

func void DIA_MARKUS_SELLTROPHY_BACK() {
    MARKUSTEETH_GOLD = 0;
    if ((MARKUS_TROPHYAMOUNT) >= (10)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Markus_SellTrophy_03_02");
    };
    MARKUS_TROPHYAMOUNT = 0;
    INFO_CLEARCHOICES(89772);
}

func void DIA_MARKUS_SELLTROPHY_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Markus_SellTrophy_15_01");
    DIA_MARKUS_SELLTROPHY_CHOICES();
}

func void DIA_MARKUS_SELLTROPHY_AMMOUNT() {
    var string ALL_STRING;
    var int MAX;
    INFO_CLEARCHOICES(89772);
    MAX = NPC_HASITEMS(HERO, RESERVED_VAR_INT_30);
    ALL_STRING = CS4(DIALOG_ALL, " (", I2S(MAX), ")");
    INFO_ADDCHOICE(89772, ALL_STRING, 89810);
    INFO_ADDCHOICE(89772, CHOICE_NUMBER_25, 89812);
    INFO_ADDCHOICE(89772, CHOICE_NUMBER_10, 89814);
    INFO_ADDCHOICE(89772, CHOICE_NUMBER_5, 89816);
    INFO_ADDCHOICE(89772, CHOICE_NUMBER_1, 89818);
    INFO_ADDCHOICE(89772, DIALOG_BACK, 89793);
}

func void DIA_MARKUS_SELLTROPHY_CLAWS() {
    RESERVED_VAR_INT_30 = 33850;
    RESERVED_VAR_INT_31 = VALUE_CLAW;
    DIA_MARKUS_SELLTROPHY_AMMOUNT();
}

func void DIA_MARKUS_SELLTROPHY_CLAWSLURKER() {
    RESERVED_VAR_INT_30 = 33851;
    RESERVED_VAR_INT_31 = VALUE_LURKERCLAW;
    DIA_MARKUS_SELLTROPHY_AMMOUNT();
}

func void DIA_MARKUS_SELLTROPHY_CLAWSSEALURKER() {
    RESERVED_VAR_INT_30 = 35353;
    RESERVED_VAR_INT_31 = VALUE_SEALURKERCLAW;
    DIA_MARKUS_SELLTROPHY_AMMOUNT();
}

func void DIA_MARKUS_SELLTROPHY_BOARTEETH() {
    RESERVED_VAR_INT_30 = 35372;
    RESERVED_VAR_INT_31 = VALUE_BOARTUSK;
    DIA_MARKUS_SELLTROPHY_AMMOUNT();
}

func void DIA_MARKUS_SELLTROPHY_SWAMPSHARKTEETH() {
    RESERVED_VAR_INT_30 = 33869;
    RESERVED_VAR_INT_31 = VALUE_SHARKTEETH;
    DIA_MARKUS_SELLTROPHY_AMMOUNT();
}

func void DIA_MARKUS_SELLTROPHY_TROLLTEETH() {
    RESERVED_VAR_INT_30 = 33870;
    RESERVED_VAR_INT_31 = VALUE_TROLLTOOTH;
    DIA_MARKUS_SELLTROPHY_AMMOUNT();
}

func void DIA_MARKUS_SELLTROPHY_TEETH() {
    RESERVED_VAR_INT_30 = 33852;
    RESERVED_VAR_INT_31 = VALUE_TEETH;
    DIA_MARKUS_SELLTROPHY_AMMOUNT();
}

func void DIA_MARKUS_SELLTROPHY_ALL() {
    var int MAX;
    if ((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) >= (1)) {
        MAX = NPC_HASITEMS(HERO, RESERVED_VAR_INT_30);
        if ((RESERVED_VAR_INT_30) == (33870)) {
            PRINTD("Troll");
            CREATEINVITEMS(SELF, 34203, ((MAX) * (RESERVED_VAR_INT_31)) / (5));
        } else {
            PRINTD("Reszta");
            CREATEINVITEMS(SELF, 34203, ((MAX) * (RESERVED_VAR_INT_31)) / (3));
            B_GIVEINVITEMS(SELF, OTHER, 34203, ((MAX) * (RESERVED_VAR_INT_31)) / (3));
        };
        B_GIVEINVITEMS(OTHER, SELF, RESERVED_VAR_INT_30, MAX);
        MARKUS_TROPHYAMOUNT = (MARKUS_TROPHYAMOUNT) + (MAX);
        DIA_MARKUS_SELLTROPHY_CHOICES();
    };
    DIA_MARKUS_NOTHINGCOMMENT();
    DIA_MARKUS_SELLTROPHY_CHOICES();
}

func void DIA_MARKUS_SELLTROPHY_25() {
    var int MAX;
    if ((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) >= (25)) {
        if ((RESERVED_VAR_INT_30) == (33870)) {
            PRINTD("Troll");
            CREATEINVITEMS(SELF, 34203, ((25) * (RESERVED_VAR_INT_31)) / (5));
        } else {
            PRINTD("Reszta");
            CREATEINVITEMS(SELF, 34203, ((25) * (RESERVED_VAR_INT_31)) / (3));
            B_GIVEINVITEMS(SELF, OTHER, 34203, ((25) * (RESERVED_VAR_INT_31)) / (3));
        };
        B_GIVEINVITEMS(OTHER, SELF, RESERVED_VAR_INT_30, 25);
        MARKUS_TROPHYAMOUNT = (MARKUS_TROPHYAMOUNT) + (25);
        DIA_MARKUS_SELLTROPHY_AMMOUNT();
    };
    if (((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) >= (1)) && ((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) < (25))) {
        MAX = NPC_HASITEMS(HERO, RESERVED_VAR_INT_30);
        if ((RESERVED_VAR_INT_30) == (33870)) {
            PRINTD("Troll");
            CREATEINVITEMS(SELF, 34203, ((MAX) * (RESERVED_VAR_INT_31)) / (5));
        } else {
            PRINTD("Reszta");
            CREATEINVITEMS(SELF, 34203, ((MAX) * (RESERVED_VAR_INT_31)) / (3));
            B_GIVEINVITEMS(SELF, OTHER, 34203, ((MAX) * (RESERVED_VAR_INT_31)) / (3));
        };
        B_GIVEINVITEMS(OTHER, SELF, RESERVED_VAR_INT_30, MAX);
        MARKUS_TROPHYAMOUNT = (MARKUS_TROPHYAMOUNT) + (MAX);
        DIA_MARKUS_SELLTROPHY_AMMOUNT();
    };
    if ((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) == (0)) {
        DIA_MARKUS_NOTHINGCOMMENT();
        DIA_MARKUS_SELLTROPHY_CHOICES();
    };
}

func void DIA_MARKUS_SELLTROPHY_10() {
    var int MAX;
    if ((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) >= (10)) {
        if ((RESERVED_VAR_INT_30) == (33870)) {
            PRINTD("Troll");
            CREATEINVITEMS(SELF, 34203, ((10) * (RESERVED_VAR_INT_31)) / (5));
        } else {
            PRINTD("Reszta");
            CREATEINVITEMS(SELF, 34203, ((10) * (RESERVED_VAR_INT_31)) / (3));
            B_GIVEINVITEMS(SELF, OTHER, 34203, ((10) * (RESERVED_VAR_INT_31)) / (3));
        };
        B_GIVEINVITEMS(OTHER, SELF, RESERVED_VAR_INT_30, 10);
        MARKUS_TROPHYAMOUNT = (MARKUS_TROPHYAMOUNT) + (10);
        DIA_MARKUS_SELLTROPHY_AMMOUNT();
    };
    if (((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) >= (1)) && ((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) < (10))) {
        MAX = NPC_HASITEMS(HERO, RESERVED_VAR_INT_30);
        if ((RESERVED_VAR_INT_30) == (33870)) {
            PRINTD("Troll");
            CREATEINVITEMS(SELF, 34203, ((MAX) * (RESERVED_VAR_INT_31)) / (5));
        } else {
            PRINTD("Reszta");
            CREATEINVITEMS(SELF, 34203, ((MAX) * (RESERVED_VAR_INT_31)) / (3));
            B_GIVEINVITEMS(SELF, OTHER, 34203, ((MAX) * (RESERVED_VAR_INT_31)) / (3));
        };
        B_GIVEINVITEMS(OTHER, SELF, RESERVED_VAR_INT_30, MAX);
        MARKUS_TROPHYAMOUNT = (MARKUS_TROPHYAMOUNT) + (MAX);
        DIA_MARKUS_SELLTROPHY_AMMOUNT();
    };
    if ((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) == (0)) {
        DIA_MARKUS_NOTHINGCOMMENT();
        DIA_MARKUS_SELLTROPHY_CHOICES();
    };
}

func void DIA_MARKUS_SELLTROPHY_5() {
    var int MAX;
    if ((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) >= (5)) {
        if ((RESERVED_VAR_INT_30) == (33870)) {
            PRINTD("Troll");
            CREATEINVITEMS(SELF, 34203, ((5) * (RESERVED_VAR_INT_31)) / (5));
        } else {
            PRINTD("Reszta");
            CREATEINVITEMS(SELF, 34203, ((5) * (RESERVED_VAR_INT_31)) / (3));
            B_GIVEINVITEMS(SELF, OTHER, 34203, ((5) * (RESERVED_VAR_INT_31)) / (3));
        };
        B_GIVEINVITEMS(OTHER, SELF, RESERVED_VAR_INT_30, 5);
        MARKUS_TROPHYAMOUNT = (MARKUS_TROPHYAMOUNT) + (5);
        DIA_MARKUS_SELLTROPHY_AMMOUNT();
    };
    if (((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) >= (1)) && ((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) < (5))) {
        MAX = NPC_HASITEMS(HERO, RESERVED_VAR_INT_30);
        if ((RESERVED_VAR_INT_30) == (33870)) {
            PRINTD("Troll");
            CREATEINVITEMS(SELF, 34203, ((MAX) * (RESERVED_VAR_INT_31)) / (5));
        } else {
            PRINTD("Reszta");
            CREATEINVITEMS(SELF, 34203, ((MAX) * (RESERVED_VAR_INT_31)) / (3));
            B_GIVEINVITEMS(SELF, OTHER, 34203, ((MAX) * (RESERVED_VAR_INT_31)) / (3));
        };
        B_GIVEINVITEMS(OTHER, SELF, RESERVED_VAR_INT_30, MAX);
        MARKUS_TROPHYAMOUNT = (MARKUS_TROPHYAMOUNT) + (MAX);
        DIA_MARKUS_SELLTROPHY_AMMOUNT();
    };
    if ((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) == (0)) {
        DIA_MARKUS_NOTHINGCOMMENT();
        DIA_MARKUS_SELLTROPHY_CHOICES();
    };
}

func void DIA_MARKUS_SELLTROPHY_1() {
    if ((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) >= (1)) {
        if ((RESERVED_VAR_INT_30) == (33870)) {
            PRINTD("Troll");
            CREATEINVITEMS(SELF, 34203, (RESERVED_VAR_INT_31) / (5));
        } else {
            PRINTD("Reszta");
            CREATEINVITEMS(SELF, 34203, (RESERVED_VAR_INT_31) / (3));
            B_GIVEINVITEMS(SELF, OTHER, 34203, (RESERVED_VAR_INT_31) / (3));
        };
        B_GIVEINVITEMS(OTHER, SELF, RESERVED_VAR_INT_30, 1);
        MARKUS_TROPHYAMOUNT = (MARKUS_TROPHYAMOUNT) + (1);
        DIA_MARKUS_SELLTROPHY_AMMOUNT();
    };
    if ((NPC_HASITEMS(OTHER, RESERVED_VAR_INT_30)) == (0)) {
        DIA_MARKUS_NOTHINGCOMMENT();
        DIA_MARKUS_SELLTROPHY_CHOICES();
    };
}

instance DIA_MARKUS_TRADE(C_INFO) {
    NPC = 58050;
    NR = 850;
    CONDITION = DIA_MARKUS_TRADE_CONDITION;
    INFORMATION = DIA_MARKUS_TRADE_INFO;
    PERMANENT = TRUE;
    TRADE = TRUE;
    DESCRIPTION = "Show me your wares.";
}

func int DIA_MARKUS_TRADE_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 89681)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_TRADE_INFO() {
    var int MARKUS_TRADE_CHECKINFO;
    B_SAY(OTHER, SELF, "$MARVIN_LetsTrade2");
    B_GIVETRADEINV(SELF);
    if ((MARKUS_TRADE_CHECKINFO) == (FALSE)) {
        MARKUS_TRADE_CHECKINFO = TRUE;
        LOG_CREATETOPIC(TOPIC_SILBACHTRADER, LOG_NOTE);
        AI_LOGENTRY(TOPIC_SILBACHTRADER, LOG_TRADER_MARKUS);
    };
}

instance DIA_MARKUS_PICKPOCKET(C_INFO) {
    NPC = 58050;
    NR = 900;
    CONDITION = DIA_MARKUS_PICKPOCKET_CONDITION;
    INFORMATION = DIA_MARKUS_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_80;
}

func int DIA_MARKUS_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MARKUS_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(89823);
    INFO_ADDCHOICE(89823, DIALOG_BACK, 89827);
    INFO_ADDCHOICE(89823, DIALOG_PICKPOCKET, 89826);
}

func void DIA_MARKUS_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (2)) {
        CREATEINVITEMS(SELF, 35982, 1);
        B_GIVEINVITEMS(SELF, OTHER, 35982, 1);
        B_PICKPOCKET_AMBIENT_TIER_2();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(89823);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(89823);
}

func void DIA_MARKUS_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(89823);
}

