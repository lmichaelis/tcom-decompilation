func int ZS_MAGICSCALE() {
    if (!(NPC_HASBODYFLAG(SELF, BS_FLAG_INTERRUPTABLE))) {
        AI_STANDUP(SELF);
    };
    AI_STANDUPQUICK(SELF);
    SELF.AIVAR[42] = 0;
    return 0 /* !broken stack! */;
}

func void ZS_MAGICSCALE_BUFFSTUFF() {
    NPC_CHANGEATTRIBUTE(SELF, ATR_HITPOINTS, +(((SELF.ATTRIBUTE[0]) * (9)) / (10)));
    NPC_CHANGEATTRIBUTE(SELF, ATR_HITPOINTS_MAX, +(((SELF.ATTRIBUTE[1]) * (9)) / (10)));
    NPC_CHANGEATTRIBUTE(SELF, ATR_STRENGTH, +(((SELF.ATTRIBUTE[4]) * (9)) / (10)));
    SELF.PROTECTION[1] = (SELF.PROTECTION[1]) * (2);
    SELF.PROTECTION[2] = (SELF.PROTECTION[2]) * (2);
    SELF.PROTECTION[3] = (SELF.PROTECTION[3]) * (2);
    SELF.PROTECTION[4] = (SELF.PROTECTION[4]) * (2);
    SELF.PROTECTION[5] = (SELF.PROTECTION[5]) * (2);
    SELF.PROTECTION[6] = (SELF.PROTECTION[6]) * (2);
}

func void ZS_MAGICSCALE_STOPSCALE() {
    NPC_CLEARAIQUEUE(SELF);
    SELF.START_AISTATE = ZS_MAGICSCALED;
    AI_STARTSTATE(SELF, 43875, 1, "");
}

func int ZS_MAGICSCALE_LOOP() {
    if ((SELF.AIVAR[42]) == (0)) {
        MDL_SETMODELSCALE(SELF, 1051931443, 1050253722, 1050253722);
        SELF.AIVAR[42] = 1;
    };
    if ((SELF.AIVAR[42]) == (1)) {
        MDL_SETMODELSCALE(SELF, 1055286886, 1053609165, 1053609165);
        SELF.AIVAR[42] = 2;
    };
    if ((SELF.AIVAR[42]) == (2)) {
        MDL_SETMODELSCALE(SELF, 1057803469, 1056964608, 1056964608);
        SELF.AIVAR[42] = 3;
    };
    if ((SELF.AIVAR[42]) == (3)) {
        MDL_SETMODELSCALE(SELF, 1059481190, 1058642330, 1058642330);
        SELF.AIVAR[42] = 4;
    };
    if ((SELF.AIVAR[42]) == (4)) {
        MDL_SETMODELSCALE(SELF, 1061158912, 1060320051, 1060320051);
        SELF.AIVAR[42] = 5;
    };
    if ((SELF.AIVAR[42]) == (5)) {
        MDL_SETMODELSCALE(SELF, 1062836634, 1061997773, 1061997773);
        SELF.AIVAR[42] = 6;
    };
    if ((SELF.AIVAR[42]) == (6)) {
        MDL_SETMODELSCALE(SELF, 1064514355, 1063675494, 1063675494);
        SELF.AIVAR[42] = 7;
    };
    if ((SELF.AIVAR[42]) == (7)) {
        MDL_SETMODELSCALE(SELF, 1065772646, 1065353216, 1065353216);
        SELF.AIVAR[42] = 8;
    };
    if ((SELF.AIVAR[42]) == (8)) {
        MDL_SETMODELSCALE(SELF, 1066611507, 1066192077, 1066192077);
        SELF.AIVAR[42] = 9;
    };
    if ((SELF.AIVAR[42]) == (9)) {
        MDL_SETMODELSCALE(SELF, 1067450368, 1067030938, 1067030938);
        SELF.AIVAR[42] = 10;
    };
    if ((SELF.AIVAR[42]) == (10)) {
        MDL_SETMODELSCALE(SELF, 1068289229, 1067869798, 1067869798);
        SELF.AIVAR[42] = 11;
    };
    if ((SELF.AIVAR[42]) == (11)) {
        MDL_SETMODELSCALE(SELF, 1069128090, 1068708659, 1068708659);
        SELF.AIVAR[42] = 12;
    };
    if ((SELF.AIVAR[42]) == (12)) {
        MDL_SETMODELSCALE(SELF, 1069966950, 1069547520, 1069547520);
        SELF.AIVAR[42] = 13;
    };
    if ((SELF.AIVAR[42]) == (13)) {
        ZS_MAGICSCALE_BUFFSTUFF();
        SELF.AIVAR[42] = 14;
    };
    if ((SELF.AIVAR[42]) == (14)) {
        ZS_MAGICSCALE_STOPSCALE();
        return LOOP_END;
    };
    AI_WAIT(SELF, 1052938076);
    return LOOP_CONTINUE;
}

func void ZS_MAGICSCALE_END() {
}

func void ZS_MAGICSCALED() {
    NPC_SETTARGET(SELF, HERO);
}

func int ZS_MAGICSCALED_LOOP() {
    AI_ATTACK(SELF);
    return LOOP_CONTINUE;
}

func void ZS_MAGICSCALED_END() {
}

