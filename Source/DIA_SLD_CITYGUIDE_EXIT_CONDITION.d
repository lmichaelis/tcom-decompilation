func int DIA_SLD_CITYGUIDE_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_SLD_CITYGUIDE_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_SLD_CITYGUIDE_HELLO(C_INFO) {
    NR = 999;
    CONDITION = DIA_SLD_CITYGUIDE_HELLO_CONDITION;
    INFORMATION = DIA_SLD_CITYGUIDE_HELLO_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_SLD_CITYGUIDE_HELLO_CONDITION() {
    if ((NPC_ISINSTATE(SELF, 61599)) && ((CITYGUIDE_ONRUN) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_SLD_CITYGUIDE_HELLO_INFO() {
    if ((HLP_GETINSTANCEID(SELF)) != (HLP_GETINSTANCEID(SLD_11067_DRUNKENGUIDE))) {
        if ((NPC_GETDISTTOWP(SELF, SELF.WP)) <= (CITYGUIDE_DIST)) {
            B_SAY(SELF, OTHER, "$CITYGUIDE_HELLO");
            FASTTRAVEL_CITYGUIDES_LOGENTRY();
        } else {
            DIA_IMBUSY_CALM();
        };
    };
}

instance DIA_SLD_CITYGUIDE_TRAVEL(C_INFO) {
    NR = 1;
    CONDITION = DIA_SLD_CITYGUIDE_TRAVEL_CONDITION;
    INFORMATION = DIA_SLD_CITYGUIDE_TRAVEL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_GUIDEMETO;
}

const int CITYGUIDE_DIST = 2500;
func int DIA_SLD_CITYGUIDE_TRAVEL_CONDITION() {
    if (((CITYGUIDE_ONRUN) == (0)) && ((NPC_GETDISTTOWP(SELF, SELF.WP)) <= (CITYGUIDE_DIST))) {
        return TRUE;
    };
    if ((((CITYGUIDE_ONRUN) == (1)) && ((NPC_GETDISTTOWP(SELF, SELF.WP)) <= (CITYGUIDE_DIST))) && ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(SLD_11067_DRUNKENGUIDE)))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_SLD_CITYGUIDE_TRAVEL_CHOICES() {
    INFO_CLEARCHOICES(42517);
    if ((NPC_GETDISTTOWP(SELF, PARTM4_PATH_85)) >= (CITYGUIDE_DIST)) {
        INFO_ADDCHOICE(42517, CHOICE_CITYGUIDE_GATEEAST, 42524);
    };
    if ((NPC_GETDISTTOWP(SELF, PARTM2_PATH_05)) >= (CITYGUIDE_DIST)) {
        INFO_ADDCHOICE(42517, CHOICE_CITYGUIDE_GATEWEST, 42525);
    };
    if ((NPC_GETDISTTOWP(SELF, PARTM8_PATH_12)) >= (CITYGUIDE_DIST)) {
        INFO_ADDCHOICE(42517, CHOICE_CITYGUIDE_INNOS, 42526);
    };
    if ((NPC_GETDISTTOWP(SELF, HARBOUR_PATH_74)) >= (CITYGUIDE_DIST)) {
        INFO_ADDCHOICE(42517, CHOICE_CITYGUIDE_ADANOS, 42527);
    };
    if ((NPC_GETDISTTOWP(SELF, PARTM4_PATH_40)) >= (CITYGUIDE_DIST)) {
        INFO_ADDCHOICE(42517, CHOICE_CITYGUIDE_VOLKER, 42528);
    };
    if ((NPC_GETDISTTOWP(SELF, HARBOUR_PATH_179)) >= (CITYGUIDE_DIST)) {
        INFO_ADDCHOICE(42517, CHOICE_CITYGUIDE_SHIPYARD, 42529);
    };
    if ((NPC_GETDISTTOWP(SELF, SLUMS_PATH_30)) >= (CITYGUIDE_DIST)) {
        INFO_ADDCHOICE(42517, CHOICE_CITYGUIDE_SLUMS, 42530);
    };
    if ((NPC_GETDISTTOWP(SELF, HARBOUR_PATH_19)) >= (CITYGUIDE_DIST)) {
        INFO_ADDCHOICE(42517, CHOICE_CITYGUIDE_HARBOURMARKET, 42531);
    };
    if ((NPC_GETDISTTOWP(SELF, PARTM2_PATH_19)) >= (CITYGUIDE_DIST)) {
        INFO_ADDCHOICE(42517, CHOICE_CITYGUIDE_MARKET, 42532);
    };
    if ((NPC_GETDISTTOWP(SELF, PARTM3_PATH_40)) >= (CITYGUIDE_DIST)) {
        INFO_ADDCHOICE(42517, CHOICE_CITYGUIDE_CRAFT, 42533);
    };
    if ((NPC_GETDISTTOWP(SELF, PARTM3_PATH_04)) >= (CITYGUIDE_DIST)) {
        INFO_ADDCHOICE(42517, CHOICE_CITYGUIDE_BARRACK, 42534);
    };
    if ((NPC_GETDISTTOWP(SELF, PARTM1_PATH_89)) >= (CITYGUIDE_DIST)) {
        INFO_ADDCHOICE(42517, CHOICE_CITYGUIDE_ARAXOS, 42535);
    };
    if ((NPC_GETDISTTOWP(SELF, PARTM4_TAVERN_03)) >= (CITYGUIDE_DIST)) {
        INFO_ADDCHOICE(42517, CHOICE_CITYGUIDE_GERSTAND, 42537);
    };
    if ((NPC_GETDISTTOWP(SELF, HARBOUR_PATH_129)) >= (CITYGUIDE_DIST)) {
        INFO_ADDCHOICE(42517, CHOICE_CITYGUIDE_OLAF, 42536);
    };
    INFO_ADDCHOICE(42517, DIALOG_BACK, 42538);
}

func void DIA_SLD_CITYGUIDE_TRAVEL_INFO() {
    B_SAY(OTHER, SELF, "$CITYGUIDE_TAKEME");
    DIA_SLD_CITYGUIDE_TRAVEL_CHOICES();
}

func void ARAXOS_CITYGUIDE() {
    PRINTD("Prowadzi");
    if ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(SLD_11067_DRUNKENGUIDE))) {
        CITYGUIDE_ONRUN = 0;
        if ((SQ223_FOUNDDRUNKENGUIDE) == (FALSE)) {
            SQ223_FOUNDDRUNKENGUIDE = TRUE;
            B_LOGENTRY(TOPIC_SQ223, LOG_SQ223_DRUNKENGUIDE);
        };
    };
    CITYGUIDE_ONRUN = 1;
    if ((CITYGUIDE_PLACE_GATEEAST) == (1)) {
        NPC_EXCHANGEROUTINE(SELF, "CITYGUIDE_GATEEAST");
    };
    if ((CITYGUIDE_PLACE_GATEWEST) == (1)) {
        NPC_EXCHANGEROUTINE(SELF, "CITYGUIDE_GATEWEST");
    };
    if ((CITYGUIDE_PLACE_INNOS) == (1)) {
        NPC_EXCHANGEROUTINE(SELF, "CITYGUIDE_INNOS");
    };
    if ((CITYGUIDE_PLACE_ADANOS) == (1)) {
        NPC_EXCHANGEROUTINE(SELF, "CITYGUIDE_ADANOS");
    };
    if ((CITYGUIDE_PLACE_VOLKER) == (1)) {
        NPC_EXCHANGEROUTINE(SELF, "CITYGUIDE_VOLKER");
    };
    if ((CITYGUIDE_PLACE_SHIPYARD) == (1)) {
        NPC_EXCHANGEROUTINE(SELF, "CITYGUIDE_SHIPYARD");
    };
    if ((CITYGUIDE_PLACE_SLUMS) == (1)) {
        NPC_EXCHANGEROUTINE(SELF, "CITYGUIDE_SLUMS");
    };
    if ((CITYGUIDE_PLACE_HARBOURMARKET) == (1)) {
        NPC_EXCHANGEROUTINE(SELF, "CITYGUIDE_HARBOURMARKET");
    };
    if ((CITYGUIDE_PLACE_MARKET) == (1)) {
        NPC_EXCHANGEROUTINE(SELF, "CITYGUIDE_MARKET");
    };
    if ((CITYGUIDE_PLACE_CRAFT) == (1)) {
        NPC_EXCHANGEROUTINE(SELF, "CITYGUIDE_CRAFT");
    };
    if ((CITYGUIDE_PLACE_ARAXOS) == (1)) {
        NPC_EXCHANGEROUTINE(SELF, "CITYGUIDE_ARAXOS");
    };
    if ((CITYGUIDE_PLACE_BARRACK) == (1)) {
        NPC_EXCHANGEROUTINE(SELF, "CITYGUIDE_BARRACK");
    };
    if ((CITYGUIDE_PLACE_GERSTAND) == (1)) {
        NPC_EXCHANGEROUTINE(SELF, "CITYGUIDE_GERSTAND");
    };
    if ((CITYGUIDE_PLACE_OLAF) == (1)) {
        NPC_EXCHANGEROUTINE(SELF, "CITYGUIDE_OLAF");
    };
}

func void DIA_SLD_CITYGUIDE_TRAVEL_LETSGO() {
    if ((NPC_HASITEMS(OTHER, 34203)) >= (CITYGUID_SLD)) {
        B_SAY(SELF, OTHER, "$CITYGUIDE_YES");
        B_GIVEINVITEMS(OTHER, SELF, 34203, CITYGUID_SLD);
        INFO_CLEARCHOICES(42517);
        AI_STOPPROCESSINFOS(SELF);
        ARAXOS_CITYGUIDE();
    };
    B_SAY(SELF, OTHER, "$CITYGUIDE_NO");
    INFO_CLEARCHOICES(42517);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_SLD_CITYGUIDE_TRAVEL_GATEEAST() {
    CITYGUIDE_PLACE_GATEEAST = 1;
    CITYGUIDE_PLACE_GATEWEST = 0;
    CITYGUIDE_PLACE_MARKET = 0;
    CITYGUIDE_PLACE_ARAXOS = 0;
    CITYGUIDE_PLACE_INNOS = 0;
    CITYGUIDE_PLACE_SLUMS = 0;
    CITYGUIDE_PLACE_OLAF = 0;
    CITYGUIDE_PLACE_GERSTAND = 0;
    CITYGUIDE_PLACE_HARBOURMARKET = 0;
    CITYGUIDE_PLACE_SHIPYARD = 0;
    CITYGUIDE_PLACE_ADANOS = 0;
    CITYGUIDE_PLACE_CRAFT = 0;
    CITYGUIDE_PLACE_BARRACK = 0;
    CITYGUIDE_PLACE_VOLKER = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_CITYGUIDE_Travel_15_01");
    DIA_SLD_CITYGUIDE_TRAVEL_LETSGO();
}

func void DIA_SLD_CITYGUIDE_TRAVEL_GATEWEST() {
    CITYGUIDE_PLACE_GATEWEST = 1;
    CITYGUIDE_PLACE_GATEEAST = 0;
    CITYGUIDE_PLACE_MARKET = 0;
    CITYGUIDE_PLACE_ARAXOS = 0;
    CITYGUIDE_PLACE_INNOS = 0;
    CITYGUIDE_PLACE_SLUMS = 0;
    CITYGUIDE_PLACE_OLAF = 0;
    CITYGUIDE_PLACE_GERSTAND = 0;
    CITYGUIDE_PLACE_HARBOURMARKET = 0;
    CITYGUIDE_PLACE_SHIPYARD = 0;
    CITYGUIDE_PLACE_ADANOS = 0;
    CITYGUIDE_PLACE_CRAFT = 0;
    CITYGUIDE_PLACE_BARRACK = 0;
    CITYGUIDE_PLACE_VOLKER = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_CITYGUIDE_Travel_15_02");
    DIA_SLD_CITYGUIDE_TRAVEL_LETSGO();
}

func void DIA_SLD_CITYGUIDE_TRAVEL_INNOS() {
    CITYGUIDE_PLACE_INNOS = 1;
    CITYGUIDE_PLACE_GATEWEST = 0;
    CITYGUIDE_PLACE_GATEEAST = 0;
    CITYGUIDE_PLACE_MARKET = 0;
    CITYGUIDE_PLACE_ARAXOS = 0;
    CITYGUIDE_PLACE_SLUMS = 0;
    CITYGUIDE_PLACE_OLAF = 0;
    CITYGUIDE_PLACE_GERSTAND = 0;
    CITYGUIDE_PLACE_HARBOURMARKET = 0;
    CITYGUIDE_PLACE_SHIPYARD = 0;
    CITYGUIDE_PLACE_ADANOS = 0;
    CITYGUIDE_PLACE_CRAFT = 0;
    CITYGUIDE_PLACE_BARRACK = 0;
    CITYGUIDE_PLACE_VOLKER = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_CITYGUIDE_Travel_15_03");
    DIA_SLD_CITYGUIDE_TRAVEL_LETSGO();
}

func void DIA_SLD_CITYGUIDE_TRAVEL_ADANOS() {
    CITYGUIDE_PLACE_ADANOS = 1;
    CITYGUIDE_PLACE_GATEWEST = 0;
    CITYGUIDE_PLACE_GATEEAST = 0;
    CITYGUIDE_PLACE_MARKET = 0;
    CITYGUIDE_PLACE_ARAXOS = 0;
    CITYGUIDE_PLACE_INNOS = 0;
    CITYGUIDE_PLACE_SLUMS = 0;
    CITYGUIDE_PLACE_OLAF = 0;
    CITYGUIDE_PLACE_GERSTAND = 0;
    CITYGUIDE_PLACE_HARBOURMARKET = 0;
    CITYGUIDE_PLACE_SHIPYARD = 0;
    CITYGUIDE_PLACE_CRAFT = 0;
    CITYGUIDE_PLACE_BARRACK = 0;
    CITYGUIDE_PLACE_VOLKER = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_CITYGUIDE_Travel_15_04");
    DIA_SLD_CITYGUIDE_TRAVEL_LETSGO();
}

func void DIA_SLD_CITYGUIDE_TRAVEL_VOLKER() {
    CITYGUIDE_PLACE_VOLKER = 1;
    CITYGUIDE_PLACE_GATEWEST = 0;
    CITYGUIDE_PLACE_GATEEAST = 0;
    CITYGUIDE_PLACE_MARKET = 0;
    CITYGUIDE_PLACE_ARAXOS = 0;
    CITYGUIDE_PLACE_INNOS = 0;
    CITYGUIDE_PLACE_SLUMS = 0;
    CITYGUIDE_PLACE_OLAF = 0;
    CITYGUIDE_PLACE_GERSTAND = 0;
    CITYGUIDE_PLACE_HARBOURMARKET = 0;
    CITYGUIDE_PLACE_SHIPYARD = 0;
    CITYGUIDE_PLACE_ADANOS = 0;
    CITYGUIDE_PLACE_CRAFT = 0;
    CITYGUIDE_PLACE_BARRACK = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_CITYGUIDE_Travel_15_05");
    DIA_SLD_CITYGUIDE_TRAVEL_LETSGO();
}

func void DIA_SLD_CITYGUIDE_TRAVEL_SHIPYARD() {
    CITYGUIDE_PLACE_SHIPYARD = 1;
    CITYGUIDE_PLACE_GATEWEST = 0;
    CITYGUIDE_PLACE_GATEEAST = 0;
    CITYGUIDE_PLACE_MARKET = 0;
    CITYGUIDE_PLACE_ARAXOS = 0;
    CITYGUIDE_PLACE_INNOS = 0;
    CITYGUIDE_PLACE_SLUMS = 0;
    CITYGUIDE_PLACE_OLAF = 0;
    CITYGUIDE_PLACE_GERSTAND = 0;
    CITYGUIDE_PLACE_HARBOURMARKET = 0;
    CITYGUIDE_PLACE_ADANOS = 0;
    CITYGUIDE_PLACE_CRAFT = 0;
    CITYGUIDE_PLACE_BARRACK = 0;
    CITYGUIDE_PLACE_VOLKER = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_CITYGUIDE_Travel_15_06");
    DIA_SLD_CITYGUIDE_TRAVEL_LETSGO();
}

func void DIA_SLD_CITYGUIDE_TRAVEL_SLUMS() {
    CITYGUIDE_PLACE_SLUMS = 1;
    CITYGUIDE_PLACE_GATEWEST = 0;
    CITYGUIDE_PLACE_GATEEAST = 0;
    CITYGUIDE_PLACE_MARKET = 0;
    CITYGUIDE_PLACE_ARAXOS = 0;
    CITYGUIDE_PLACE_INNOS = 0;
    CITYGUIDE_PLACE_OLAF = 0;
    CITYGUIDE_PLACE_GERSTAND = 0;
    CITYGUIDE_PLACE_HARBOURMARKET = 0;
    CITYGUIDE_PLACE_SHIPYARD = 0;
    CITYGUIDE_PLACE_ADANOS = 0;
    CITYGUIDE_PLACE_CRAFT = 0;
    CITYGUIDE_PLACE_BARRACK = 0;
    CITYGUIDE_PLACE_VOLKER = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_CITYGUIDE_Travel_15_07");
    DIA_SLD_CITYGUIDE_TRAVEL_LETSGO();
}

func void DIA_SLD_CITYGUIDE_TRAVEL_HARBOURMARKET() {
    CITYGUIDE_PLACE_HARBOURMARKET = 1;
    CITYGUIDE_PLACE_GATEWEST = 0;
    CITYGUIDE_PLACE_GATEEAST = 0;
    CITYGUIDE_PLACE_MARKET = 0;
    CITYGUIDE_PLACE_ARAXOS = 0;
    CITYGUIDE_PLACE_INNOS = 0;
    CITYGUIDE_PLACE_SLUMS = 0;
    CITYGUIDE_PLACE_OLAF = 0;
    CITYGUIDE_PLACE_GERSTAND = 0;
    CITYGUIDE_PLACE_SHIPYARD = 0;
    CITYGUIDE_PLACE_ADANOS = 0;
    CITYGUIDE_PLACE_CRAFT = 0;
    CITYGUIDE_PLACE_BARRACK = 0;
    CITYGUIDE_PLACE_VOLKER = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_CITYGUIDE_Travel_15_08");
    DIA_SLD_CITYGUIDE_TRAVEL_LETSGO();
}

func void DIA_SLD_CITYGUIDE_TRAVEL_MARKET() {
    CITYGUIDE_PLACE_MARKET = 1;
    CITYGUIDE_PLACE_GATEWEST = 0;
    CITYGUIDE_PLACE_GATEEAST = 0;
    CITYGUIDE_PLACE_ARAXOS = 0;
    CITYGUIDE_PLACE_INNOS = 0;
    CITYGUIDE_PLACE_SLUMS = 0;
    CITYGUIDE_PLACE_OLAF = 0;
    CITYGUIDE_PLACE_GERSTAND = 0;
    CITYGUIDE_PLACE_HARBOURMARKET = 0;
    CITYGUIDE_PLACE_SHIPYARD = 0;
    CITYGUIDE_PLACE_ADANOS = 0;
    CITYGUIDE_PLACE_CRAFT = 0;
    CITYGUIDE_PLACE_BARRACK = 0;
    CITYGUIDE_PLACE_VOLKER = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_CITYGUIDE_Travel_15_09");
    DIA_SLD_CITYGUIDE_TRAVEL_LETSGO();
}

func void DIA_SLD_CITYGUIDE_TRAVEL_CRAFT() {
    CITYGUIDE_PLACE_CRAFT = 1;
    CITYGUIDE_PLACE_GATEWEST = 0;
    CITYGUIDE_PLACE_GATEEAST = 0;
    CITYGUIDE_PLACE_MARKET = 0;
    CITYGUIDE_PLACE_ARAXOS = 0;
    CITYGUIDE_PLACE_INNOS = 0;
    CITYGUIDE_PLACE_SLUMS = 0;
    CITYGUIDE_PLACE_OLAF = 0;
    CITYGUIDE_PLACE_GERSTAND = 0;
    CITYGUIDE_PLACE_HARBOURMARKET = 0;
    CITYGUIDE_PLACE_SHIPYARD = 0;
    CITYGUIDE_PLACE_ADANOS = 0;
    CITYGUIDE_PLACE_BARRACK = 0;
    CITYGUIDE_PLACE_VOLKER = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_CITYGUIDE_Travel_15_10");
    DIA_SLD_CITYGUIDE_TRAVEL_LETSGO();
}

func void DIA_SLD_CITYGUIDE_TRAVEL_BARRACK() {
    CITYGUIDE_PLACE_BARRACK = 1;
    CITYGUIDE_PLACE_GATEWEST = 0;
    CITYGUIDE_PLACE_GATEEAST = 0;
    CITYGUIDE_PLACE_MARKET = 0;
    CITYGUIDE_PLACE_ARAXOS = 0;
    CITYGUIDE_PLACE_INNOS = 0;
    CITYGUIDE_PLACE_SLUMS = 0;
    CITYGUIDE_PLACE_OLAF = 0;
    CITYGUIDE_PLACE_GERSTAND = 0;
    CITYGUIDE_PLACE_HARBOURMARKET = 0;
    CITYGUIDE_PLACE_SHIPYARD = 0;
    CITYGUIDE_PLACE_ADANOS = 0;
    CITYGUIDE_PLACE_CRAFT = 0;
    CITYGUIDE_PLACE_VOLKER = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_CITYGUIDE_Travel_15_11");
    DIA_SLD_CITYGUIDE_TRAVEL_LETSGO();
}

func void DIA_SLD_CITYGUIDE_TRAVEL_ARAXOS() {
    CITYGUIDE_PLACE_ARAXOS = 1;
    CITYGUIDE_PLACE_GATEWEST = 0;
    CITYGUIDE_PLACE_GATEEAST = 0;
    CITYGUIDE_PLACE_MARKET = 0;
    CITYGUIDE_PLACE_INNOS = 0;
    CITYGUIDE_PLACE_SLUMS = 0;
    CITYGUIDE_PLACE_OLAF = 0;
    CITYGUIDE_PLACE_GERSTAND = 0;
    CITYGUIDE_PLACE_HARBOURMARKET = 0;
    CITYGUIDE_PLACE_SHIPYARD = 0;
    CITYGUIDE_PLACE_ADANOS = 0;
    CITYGUIDE_PLACE_CRAFT = 0;
    CITYGUIDE_PLACE_BARRACK = 0;
    CITYGUIDE_PLACE_VOLKER = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_CITYGUIDE_Travel_15_12");
    DIA_SLD_CITYGUIDE_TRAVEL_LETSGO();
}

func void DIA_SLD_CITYGUIDE_TRAVEL_OLAF() {
    CITYGUIDE_PLACE_OLAF = 1;
    CITYGUIDE_PLACE_GATEWEST = 0;
    CITYGUIDE_PLACE_GATEEAST = 0;
    CITYGUIDE_PLACE_MARKET = 0;
    CITYGUIDE_PLACE_ARAXOS = 0;
    CITYGUIDE_PLACE_INNOS = 0;
    CITYGUIDE_PLACE_SLUMS = 0;
    CITYGUIDE_PLACE_GERSTAND = 0;
    CITYGUIDE_PLACE_HARBOURMARKET = 0;
    CITYGUIDE_PLACE_SHIPYARD = 0;
    CITYGUIDE_PLACE_ADANOS = 0;
    CITYGUIDE_PLACE_CRAFT = 0;
    CITYGUIDE_PLACE_BARRACK = 0;
    CITYGUIDE_PLACE_VOLKER = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_CITYGUIDE_Travel_15_13");
    DIA_SLD_CITYGUIDE_TRAVEL_LETSGO();
}

func void DIA_SLD_CITYGUIDE_TRAVEL_GERSTAND() {
    CITYGUIDE_PLACE_GERSTAND = 1;
    CITYGUIDE_PLACE_GATEWEST = 0;
    CITYGUIDE_PLACE_GATEEAST = 0;
    CITYGUIDE_PLACE_MARKET = 0;
    CITYGUIDE_PLACE_ARAXOS = 0;
    CITYGUIDE_PLACE_INNOS = 0;
    CITYGUIDE_PLACE_SLUMS = 0;
    CITYGUIDE_PLACE_OLAF = 0;
    CITYGUIDE_PLACE_HARBOURMARKET = 0;
    CITYGUIDE_PLACE_SHIPYARD = 0;
    CITYGUIDE_PLACE_ADANOS = 0;
    CITYGUIDE_PLACE_CRAFT = 0;
    CITYGUIDE_PLACE_BARRACK = 0;
    CITYGUIDE_PLACE_VOLKER = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_SLD_CITYGUIDE_Travel_15_14");
    DIA_SLD_CITYGUIDE_TRAVEL_LETSGO();
}

func void DIA_SLD_CITYGUIDE_TRAVEL_BACK() {
    B_SAY(OTHER, SELF, "$CITYGUIDE_NEVERMIND");
    INFO_CLEARCHOICES(42517);
}

instance DIA_SLD_CITYGUIDE_FINISH(C_INFO) {
    NR = 999;
    CONDITION = DIA_SLD_CITYGUIDE_FINISH_CONDITION;
    INFORMATION = DIA_SLD_CITYGUIDE_FINISH_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

const int CITYGUIDE_NEARRIGHTPLACE = 500;
func int DIA_SLD_CITYGUIDE_FINISH_CONDITION() {
    if ((CITYGUIDE_ONRUN) == (1)) {
        if ((((((((((((((((CITYGUIDE_PLACE_GATEEAST) == (1)) && ((NPC_GETDISTTOWP(SELF, PARTM4_PATH_85)) <= (CITYGUIDE_NEARRIGHTPLACE))) || (((CITYGUIDE_PLACE_GATEWEST) == (1)) && ((NPC_GETDISTTOWP(SELF, PARTM2_PATH_05)) <= (CITYGUIDE_NEARRIGHTPLACE)))) || (((CITYGUIDE_PLACE_MARKET) == (1)) && ((NPC_GETDISTTOWP(SELF, PARTM2_PATH_19)) <= (CITYGUIDE_NEARRIGHTPLACE)))) || (((CITYGUIDE_PLACE_ARAXOS) == (1)) && ((NPC_GETDISTTOWP(SELF, PARTM1_PATH_89)) <= (CITYGUIDE_NEARRIGHTPLACE)))) || (((CITYGUIDE_PLACE_INNOS) == (1)) && ((NPC_GETDISTTOWP(SELF, PARTM8_PATH_12)) <= (CITYGUIDE_NEARRIGHTPLACE)))) || (((CITYGUIDE_PLACE_SLUMS) == (1)) && ((NPC_GETDISTTOWP(SELF, SLUMS_PATH_30)) <= (CITYGUIDE_NEARRIGHTPLACE)))) || (((CITYGUIDE_PLACE_OLAF) == (1)) && ((NPC_GETDISTTOWP(SELF, HARBOUR_PATH_129)) <= (CITYGUIDE_NEARRIGHTPLACE)))) || (((CITYGUIDE_PLACE_GERSTAND) == (2)) && ((NPC_GETDISTTOWP(SELF, PARTM4_TAVERN_03)) <= (CITYGUIDE_NEARRIGHTPLACE)))) || (((CITYGUIDE_PLACE_HARBOURMARKET) == (1)) && ((NPC_GETDISTTOWP(SELF, HARBOUR_PATH_19)) <= (CITYGUIDE_NEARRIGHTPLACE)))) || (((CITYGUIDE_PLACE_SHIPYARD) == (1)) && ((NPC_GETDISTTOWP(SELF, HARBOUR_PATH_179)) <= (CITYGUIDE_NEARRIGHTPLACE)))) || (((CITYGUIDE_PLACE_ADANOS) == (1)) && ((NPC_GETDISTTOWP(SELF, HARBOUR_PATH_74)) <= (CITYGUIDE_NEARRIGHTPLACE)))) || (((CITYGUIDE_PLACE_CRAFT) == (1)) && ((NPC_GETDISTTOWP(SELF, PARTM3_PATH_40)) <= (CITYGUIDE_NEARRIGHTPLACE)))) || (((CITYGUIDE_PLACE_BARRACK) == (1)) && ((NPC_GETDISTTOWP(SELF, PARTM3_PATH_04)) <= (CITYGUIDE_NEARRIGHTPLACE)))) || (((CITYGUIDE_PLACE_VOLKER) == (1)) && ((NPC_GETDISTTOWP(SELF, PARTM4_PATH_40)) <= (CITYGUIDE_NEARRIGHTPLACE)))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_SLD_CITYGUIDE_FINISH_INFO() {
    B_SAY(SELF, OTHER, "$CITYGUIDE_FINISH");
    AI_STOPPROCESSINFOS(SELF);
    NPC_EXCHANGEROUTINE(SELF, START);
    CITYGUIDE_ONRUN = 0;
    CITYGUIDE_PLACE_GATEEAST = 0;
    CITYGUIDE_PLACE_GATEWEST = 0;
    CITYGUIDE_PLACE_MARKET = 0;
    CITYGUIDE_PLACE_ARAXOS = 0;
    CITYGUIDE_PLACE_INNOS = 0;
    CITYGUIDE_PLACE_SLUMS = 0;
    CITYGUIDE_PLACE_OLAF = 0;
    CITYGUIDE_PLACE_GERSTAND = 0;
    CITYGUIDE_PLACE_HARBOURMARKET = 0;
    CITYGUIDE_PLACE_SHIPYARD = 0;
    CITYGUIDE_PLACE_ADANOS = 0;
    CITYGUIDE_PLACE_CRAFT = 0;
    CITYGUIDE_PLACE_BARRACK = 0;
    CITYGUIDE_PLACE_VOLKER = 0;
}

func void B_ASSIGNAMBIENTINFOS_SLD_CITYGUIDE(var C_NPC SLF) {
    DIA_SLD_CITYGUIDE_EXIT.NPC = HLP_GETINSTANCEID(SLF);
    DIA_SLD_CITYGUIDE_TRAVEL.NPC = HLP_GETINSTANCEID(SLF);
    DIA_SLD_CITYGUIDE_HELLO.NPC = HLP_GETINSTANCEID(SLF);
    DIA_SLD_CITYGUIDE_FINISH.NPC = HLP_GETINSTANCEID(SLF);
}

