var int GQ001_THIAGOINFORMATION;
var int GQ001_THIAGO_RULES;
var int GQ001_THIAGO_WHO;
var int GQ001_THIAGO_CORTEZ;
var int GQ001_THIAGO_MAN;
var int GQ001_THIAGO_BEN;
var int GQ001_THIAGO_MILITIAARMOR;
instance DIA_THIAGO_EXIT(C_INFO) {
    NPC = 58743;
    NR = 999;
    CONDITION = DIA_THIAGO_EXIT_CONDITION;
    INFORMATION = DIA_THIAGO_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_THIAGO_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_THIAGO_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_THIAGO_HEYYOU(C_INFO) {
    NPC = 58743;
    NR = 1;
    CONDITION = DIA_THIAGO_HEYYOU_CONDITION;
    INFORMATION = DIA_THIAGO_HEYYOU_INFO;
    IMPORTANT = TRUE;
}

func int DIA_THIAGO_HEYYOU_CONDITION() {
    if (HAVEN_THIAGOENCOUNTER) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_HEYYOU_INFO() {
    var C_ITEM ITM;
    AI_LOOKATNPC(OTHER, SELF);
    AI_LOOKATNPC(SELF, OTHER);
    AI_LOOKATNPC(PIR_6322_GHOST, HERO);
    if ((NPC_HASREADIEDRANGEDWEAPON(SELF)) == (FALSE)) {
        AI_EQUIPBESTRANGEDWEAPON(SELF);
        AI_READYRANGEDWEAPON(SELF);
    };
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_13_01");
    if (NPC_HASGUILDARMOREQUIPPED(OTHER, GIL_MIL)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_13_02");
    };
    if (NPC_HASGUILDARMOREQUIPPED(OTHER, GIL_SLD)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_13_03");
    };
    AI_FUNCTION(SELF, 64258);
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_13_04");
    INFO_CLEARCHOICES(84430);
    INFO_ADDCHOICE(84430, "You don't want to do that.", 84438);
    if ((((LOG_GETSTATUS(MIS_Q207)) == (LOG_RUNNING)) && ((LOG_GETSTATUS(MIS_Q205)) == (LOG_SUCCESS))) && ((Q207_GONZALOGUIDE) >= (4))) {
        if ((Q207_LETTER_READ) == (TRUE)) {
            INFO_ADDCHOICE(84430, "I'm one of Slasher's men...", 84439);
        };
        ITM = NPC_GETEQUIPPEDARMOR(OTHER);
        if ((((NPC_HASEQUIPPEDARMOR(OTHER)) == (TRUE)) && ((HLP_ISITEM(ITM, 35509)) == (TRUE))) || (NPC_HASGUILDARMOREQUIPPED(OTHER, GIL_MIL))) {
            INFO_ADDCHOICE(84430, "I'm one of Salvi's men...", 84440);
        };
    };
    if ((((LOG_GETSTATUS(MIS_Q208)) == (LOG_RUNNING)) && ((LOG_GETSTATUS(MIS_Q206)) == (LOG_SUCCESS))) && (NPC_KNOWSINFO(OTHER, 77977))) {
        INFO_ADDCHOICE(84430, "I came with Yannick.", 84444);
        INFO_ADDCHOICE(84430, "I'm one of the smugglers.", 84446);
    };
    if ((NPC_HASITEMS(OTHER, 34203)) > (0)) {
        INFO_ADDCHOICE(84430, "I'm sure we'll get along somehow... (Bribe)", 84437);
    };
}

func void DIA_THIAGO_HEYYOU_KILLPLAYER() {
    if ((NPC_HASREADIEDRANGEDWEAPON(SELF)) == (FALSE)) {
        AI_EQUIPBESTRANGEDWEAPON(SELF);
        AI_READYRANGEDWEAPON(SELF);
    };
    AI_STOPLOOKAT(SELF);
    AI_STOPLOOKAT(OTHER);
    AI_STOPLOOKAT(PIR_6322_GHOST);
    B_TURNTONPC(SELF, OTHER);
    AI_SHOOTAT(SELF, OTHER);
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 84435);
    AI_FUNCTION(SELF, 64270);
}

func void THIAGO_KILLMARVIN() {
    HERO.FLAGS = 0;
    HERO.ATTRIBUTE[1] = -(1);
    HERO.ATTRIBUTE[0] = -(1);
}

func void DIA_THIAGO_HEYYOU_CHANGEROUTINEANDTRIGGERCHAPTER() {
    HAVEN_THIAGOENCOUNTER = 2;
    B_STARTOTHERROUTINE(NOV_200_HIERRO, START);
    NPC_REFRESH(NOV_200_HIERRO);
    B_STARTOTHERROUTINE(PIR_13556_PIRATE, START);
    NPC_REFRESH(PIR_13556_PIRATE);
    PIR_13556_PIRATE.FLAGS = 0;
    AI_REMOVEWEAPON(SELF);
    PIR_1311_THIAGO.HITCHANCE[3] = 60;
    AI_WAITTILLEND(PIR_6322_GHOST, PIR_1311_THIAGO);
    AI_REMOVEWEAPON(PIR_6322_GHOST);
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_End_13_01");
    NPC_EXCHANGEROUTINE(SELF, "GUIDE_IN");
    Q301_CORTEZ_RTNCHECK = 1;
    B_STARTOTHERROUTINE(PIR_1303_CORTEZ, "GQ001");
    AI_STOPPROCESSINFOS(SELF);
    AI_RESETFACEANI(SELF);
    AI_STOPLOOKAT(SELF);
    AI_STOPLOOKAT(OTHER);
    AI_STOPLOOKAT(PIR_6322_GHOST);
    if ((LOG_GETSTATUS(MIS_Q207)) == (LOG_RUNNING)) {
        LOG_SETSTATUS(_@(MIS_Q207), TOPIC_Q207, LOG_SUCCESS);
        B_GIVEPLAYERXP(XP_Q207_FINISH);
    };
    if ((LOG_GETSTATUS(MIS_Q208)) == (LOG_RUNNING)) {
        LOG_SETSTATUS(_@(MIS_Q208), TOPIC_Q208, LOG_SUCCESS);
        B_GIVEPLAYERXP(XP_Q208_FINISH);
        Q208_REMOVENPC();
    };
    Q207_REMOVEMONSTERS();
    AI_FUNCTION(SELF, 64270);
}

func void DIA_THIAGO_HEYYOU_LETSTALK() {
    AI_FUNCTION(SELF, 64259);
    AI_STARTFACEANI(OTHER, S_SMUG, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Heyyou_LetsTalk_15_01");
    B_MARVIN_USEFAKEBAG_THROW();
    AI_WAITTILLEND(SELF, OTHER);
    AI_LOOKATNPC(OTHER, SELF);
    AI_FUNCTION(SELF, 64260);
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_LetsTalk_13_02");
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Heyyou_LetsTalk_15_03");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_LetsTalk_13_04");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_LetsTalk_13_05");
    AI_RESETFACEANI(OTHER);
}

func void DIA_THIAGO_HEYYOU_YOUDONTWANTTODOTHIS() {
    AI_FUNCTION(SELF, 64257);
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Heyyou_YouDontWantToDoThis_15_01");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_YouDontWantToDoThis_13_02");
    AI_WAITTILLEND(OTHER, SELF);
    AI_WAIT(OTHER, 1045220557);
    AI_PLAYANI(OTHER, R_SCRATCHHEAD);
    AI_WAITTILLEND(SELF, OTHER);
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_YouDontWantToDoThis_13_03");
    DIA_THIAGO_HEYYOU_KILLPLAYER();
}

func void DIA_THIAGO_HEYYOU_FROMHERE() {
    AI_FUNCTION(SELF, 64261);
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Heyyou_FromHere_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 64256);
    if (NPC_HASGUILDARMOREQUIPPED(OTHER, GIL_MIL)) {
        AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_FromHere_03_02");
    };
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_FromHere_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_FromHere_03_04");
    DIA_THIAGO_HEYYOU_CHANGEROUTINEANDTRIGGERCHAPTER();
}

func void DIA_THIAGO_HEYYOU_FROMSALVI() {
    var C_ITEM ITM;
    AI_FUNCTION(SELF, 64261);
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Heyyou_FromSalvi_15_01");
    ITM = NPC_GETEQUIPPEDARMOR(OTHER);
    if (((NPC_HASEQUIPPEDARMOR(OTHER)) == (TRUE)) && ((HLP_ISITEM(ITM, 35509)) == (TRUE))) {
        AI_WAITTILLEND(SELF, OTHER);
        AI_FUNCTION(SELF, 64256);
        AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_FromSalvi_03_02");
        DIA_THIAGO_HEYYOU_CHANGEROUTINEANDTRIGGERCHAPTER();
    };
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 64262);
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_FromSalvi_03_03");
    INFO_CLEARCHOICES(84430);
    INFO_ADDCHOICE(84430, "I have a message directly to Cortez.", 84442);
    INFO_ADDCHOICE(84430, "I came to recruit some people...", 84443);
}

func void DIA_THIAGO_HEYYOU_FROMSALVI_CORTEZ() {
    AI_FUNCTION(SELF, 64263);
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Heyyou_Cortez_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 64257);
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_Cortez_03_02");
    DIA_THIAGO_HEYYOU_KILLPLAYER();
}

func void DIA_THIAGO_HEYYOU_FROMSALVI_SOMEBODY() {
    AI_FUNCTION(SELF, 64263);
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Heyyou_Somebody_15_01");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 64256);
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_Somebody_03_02");
    DIA_THIAGO_HEYYOU_CHANGEROUTINEANDTRIGGERCHAPTER();
}

func void DIA_THIAGO_HEYYOU_YANNICK() {
    AI_FUNCTION(SELF, 64264);
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Heyyou_Yannick_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_Yannick_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Heyyou_Yannick_15_03");
    AI_FUNCTION(SELF, 64265);
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_Yannick_03_04");
    if ((((NPC_HASITEMS(OTHER, 37151)) >= (1)) || ((NPC_HASITEMS(OTHER, 37122)) >= (1))) || ((NPC_HASITEMS(OTHER, 37205)) >= (1))) {
        INFO_ADDCHOICE(84430, "I bring something straight from the fishermen. (Give swampweed)", 84445);
    };
}

func void DIA_THIAGO_HEYYOU_YANNICK_JOINT() {
    AI_FUNCTION(SELF, 64266);
    if ((NPC_HASITEMS(OTHER, 37151)) >= (1)) {
    };
    if ((NPC_HASITEMS(OTHER, 37122)) >= (1)) {
    };
    if ((NPC_HASITEMS(OTHER, 37205)) >= (1)) {
        if ((LOG_GETSTATUS(MIS_SQ229)) == (LOG_RUNNING)) {
            LOG_SETSTATUS(_@(MIS_SQ229), TOPIC_SQ229, LOG_SUCCESS);
            B_LOGENTRY(TOPIC_SQ229, LOG_SQ229_VZ_FAIL);
            NPC_EXCHANGEROUTINE(NONE_6266_NEVIL, TOT);
            B_GIVEPLAYERXP(XP_SQ228_ENDINGV1);
        };
        B_GIVEINVITEMS(OTHER, SELF, 37205, 1);
        NPC_REMOVEINVITEMS(SELF, 37205, 1);
    };
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Heyyou_Joint_15_01");
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_Joint_03_02");
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 64256);
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_Joint_03_03");
    DIA_THIAGO_HEYYOU_CHANGEROUTINEANDTRIGGERCHAPTER();
}

func void DIA_THIAGO_HEYYOU_SMUGGLER() {
    AI_FUNCTION(SELF, 64267);
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Heyyou_Smuggler_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 64268);
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_Smuggler_03_02");
    INFO_CLEARCHOICES(84430);
    INFO_ADDCHOICE(84430, "We operate on the Amber Coast.", 84447);
    INFO_ADDCHOICE(84430, "I wanted to offer Cortez a regular delivery...", 84448);
}

func void DIA_THIAGO_HEYYOU_SMUGGLER_BEACH() {
    AI_FUNCTION(SELF, 64269);
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Heyyou_Beach_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 64257);
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_Beach_03_02");
    DIA_THIAGO_HEYYOU_KILLPLAYER();
}

func void DIA_THIAGO_HEYYOU_SMUGGLER_BUISNESS() {
    AI_FUNCTION(SELF, 64269);
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Heyyou_Buisness_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_FUNCTION(SELF, 64256);
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_Buisness_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Heyyou_Buisness_15_03");
    AI_STARTFACEANI(SELF, S_TIRED, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Heyyou_Buisness_03_04");
    DIA_THIAGO_HEYYOU_CHANGEROUTINEANDTRIGGERCHAPTER();
}

instance DIA_THIAGO_SQ317_WHAT(C_INFO) {
    NPC = 58743;
    NR = 1;
    CONDITION = DIA_THIAGO_SQ317_WHAT_CONDITION;
    INFORMATION = DIA_THIAGO_SQ317_WHAT_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_THIAGO_SQ317_WHAT_CONDITION() {
    if ((((KAPITEL) == (3)) && ((LOG_GETSTATUS(MIS_Q306)) == (LOG_SUCCESS))) || (NPC_KNOWSINFO(OTHER, 84453))) {
        return FALSE;
    };
    if (((LOG_GETSTATUS(MIS_SQ317)) == (LOG_RUNNING)) && ((SQ317_FOLLOWSAFTEY) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_SQ317_WHAT_INFO() {
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_SQ317_What_03_01");
    INFO_CLEARCHOICES(84449);
    INFO_ADDCHOICE(84449, "Cortez wants us to repair palisade by his house.", 84452);
}

func void DIA_THIAGO_SQ317_WHAT_CORTEZ() {
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_SQ317_What_Cortez_15_01");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_SQ317_What_Cortez_03_02");
    INFO_CLEARCHOICES(84449);
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_THIAGO_SQ317_WHERE(C_INFO) {
    NPC = 58743;
    NR = 1;
    CONDITION = DIA_THIAGO_SQ317_WHERE_CONDITION;
    INFORMATION = DIA_THIAGO_SQ317_WHERE_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_THIAGO_SQ317_WHERE_CONDITION() {
    if (((LOG_GETSTATUS(MIS_SQ317)) == (LOG_RUNNING)) && ((SQ317_HOMERESCAPED) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_SQ317_WHERE_INFO() {
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_SQ317_Where_03_01");
    INFO_CLEARCHOICES(84453);
    if ((NPC_HASITEMS(OTHER, 34203)) >= (SQ317_THIAGOGOLD)) {
        INFO_ADDCHOICE(84453, "Let's forget the whole thing. (50 GP)", 84458);
    };
    INFO_ADDCHOICE(84453, "Homer was eaten by swampsharks.", 84457);
}

func void DIA_THIAGO_SQ317_WHERE_NEXT() {
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_SQ317_Where_Swampsharks_03_03");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
    INFO_CLEARCHOICES(84453);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_THIAGO_SQ317_WHERE_SWAMPSHARKS() {
    AI_STARTFACEANI(OTHER, S_TIRED, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_SQ317_Where_Swampsharks_15_01");
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_SQ317_Where_Swampsharks_03_02");
    DIA_THIAGO_SQ317_WHERE_NEXT();
}

func void DIA_THIAGO_SQ317_WHERE_FORGET() {
    AI_STARTFACEANI(OTHER, S_SMUG, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_SQ317_Where_Forget_15_01");
    B_MARVIN_USEFAKEBAG_THROW();
    B_GIVEINVITEMS(OTHER, SELF, 34203, SQ317_THIAGOGOLD);
    DIA_THIAGO_SQ317_WHERE_NEXT();
}

instance DIA_THIAGO_IWILLTEACHYOU(C_INFO) {
    NPC = 58743;
    NR = 10;
    CONDITION = DIA_THIAGO_IWILLTEACHYOU_CONDITION;
    INFORMATION = DIA_THIAGO_IWILLTEACHYOU_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_THIAGO_IWILLTEACHYOU_CONDITION() {
    if (((GQ001_THIAGO_WHO) == (TRUE)) && (NPC_KNOWSINFO(OTHER, 83704))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_IWILLTEACHYOU_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Iwillteachyou_13_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Iwillteachyou_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Iwillteachyou_13_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Iwillteachyou_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Iwillteachyou_13_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Iwillteachyou_13_06");
    LOG_CREATETOPIC(TOPIC_HAVENTEACHER, LOG_NOTE);
    AI_LOGENTRY(TOPIC_HAVENTEACHER, LOG_HAVENTEACHER_THIAGO);
}

var string THIAGO_PRINTS;
var int THIAGO_CURRENTCBLEVEL;
var int THIAGO_CURRENTBOWLEVEL;
var int THIAGO_NOMORE;
instance DIA_THIAGO_TRAIN(C_INFO) {
    NPC = 58743;
    NR = 7;
    CONDITION = DIA_THIAGO_TRAIN_CONDITION;
    INFORMATION = DIA_THIAGO_TRAIN_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I want to practice shooting.";
}

func int DIA_THIAGO_TRAIN_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 84459)) && ((THIAGO_NOMORE) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_TRAIN_CHOICES() {
    var int THIAGO_GOLDCOST;
    THIAGO_GOLDCOST = 10;
    THIAGO_CURRENTCBLEVEL = OTHER.AIVAR[87];
    THIAGO_CURRENTBOWLEVEL = OTHER.AIVAR[86];
    INFO_CLEARCHOICES(84466);
    INFO_ADDCHOICE(84466, DIALOG_BACK, 84471);
    INFO_ADDCHOICE(84466, B_BUILDLEARNSTRING2(PRINT_LEARNCROSSBOW1, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_CROSSBOW, 1), THIAGO_GOLDCOST), 84472);
    INFO_ADDCHOICE(84466, B_BUILDLEARNSTRING2(PRINT_LEARNCROSSBOW5, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_CROSSBOW, 5), (THIAGO_GOLDCOST) * (5)), 84473);
    INFO_ADDCHOICE(84466, B_BUILDLEARNSTRING2(PRINT_LEARNBOW1, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_BOW, 1), THIAGO_GOLDCOST), 84474);
    INFO_ADDCHOICE(84466, B_BUILDLEARNSTRING2(PRINT_LEARNBOW5, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_BOW, 5), (THIAGO_GOLDCOST) * (5)), 84475);
}

func void DIA_THIAGO_TRAIN_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_TRAIN_15_00");
    if (((OTHER.AIVAR[87]) >= (60)) && ((OTHER.AIVAR[86]) >= (60))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_TRAIN_03_01");
        THIAGO_NOMORE = TRUE;
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_TRAIN_03_02");
    DIA_THIAGO_TRAIN_CHOICES();
}

func void DIA_THIAGO_TRAIN_BACK() {
    INFO_CLEARCHOICES(84466);
}

func void DIA_THIAGO_TRAIN_CROSSBOW1() {
    if ((NPC_HASITEMS(OTHER, 34203)) >= (THIAGO_PAYMENT1)) {
        if ((THIAGO_CURRENTCBLEVEL) < (OTHER.AIVAR[87])) {
            SND_PLAY(GELDBEUTEL);
            B_GIVEINVITEMS(OTHER, SELF, 34203, THIAGO_PAYMENT1);
            NPC_REMOVEINVITEMS(SELF, 34203, THIAGO_PAYMENT1);
        };
        B_TEACHFIGHTTALENTPERCENT(SELF, OTHER, NPC_TALENT_CROSSBOW, 1, 60);
        DIA_THIAGO_TRAIN_CHOICES();
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (THIAGO_PAYMENT1)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Train_CROSSBOW1_03_01");
        THIAGO_PRINTS = CONCATSTRINGS(PRINT_RGOLD, INTTOSTRING(THIAGO_PAYMENT1));
        PRINTSCREEN(THIAGO_PRINTS, -(1), -(1), FONT_SCREEN, 2);
        DIA_THIAGO_TRAIN_CHOICES();
    };
}

func void DIA_THIAGO_TRAIN_CROSSBOW5() {
    if ((NPC_HASITEMS(OTHER, 34203)) >= (THIAGO_PAYMENT5)) {
        if ((THIAGO_CURRENTCBLEVEL) < (OTHER.AIVAR[87])) {
            B_GIVEINVITEMS(OTHER, SELF, 34203, THIAGO_PAYMENT5);
            SND_PLAY(GELDBEUTEL);
            NPC_REMOVEINVITEMS(SELF, 34203, THIAGO_PAYMENT5);
        };
        B_TEACHFIGHTTALENTPERCENT(SELF, OTHER, NPC_TALENT_CROSSBOW, 5, 60);
        DIA_THIAGO_TRAIN_CHOICES();
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (THIAGO_PAYMENT5)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Train_CROSSBOW5_03_01");
        THIAGO_PRINTS = CONCATSTRINGS(PRINT_RGOLD, INTTOSTRING(THIAGO_PAYMENT5));
        PRINTSCREEN(THIAGO_PRINTS, -(1), -(1), FONT_SCREEN, 2);
        DIA_THIAGO_TRAIN_CHOICES();
    };
}

func void DIA_THIAGO_TRAIN_BOW1() {
    if ((NPC_HASITEMS(OTHER, 34203)) >= (THIAGO_PAYMENT1)) {
        if ((THIAGO_CURRENTBOWLEVEL) < (OTHER.AIVAR[86])) {
            SND_PLAY(GELDBEUTEL);
            B_GIVEINVITEMS(OTHER, SELF, 34203, THIAGO_PAYMENT1);
            NPC_REMOVEINVITEMS(SELF, 34203, THIAGO_PAYMENT1);
        };
        B_TEACHFIGHTTALENTPERCENT(SELF, OTHER, NPC_TALENT_BOW, 1, 60);
        DIA_THIAGO_TRAIN_CHOICES();
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (THIAGO_PAYMENT1)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Train_BOW1_03_01");
        THIAGO_PRINTS = CONCATSTRINGS(PRINT_RGOLD, INTTOSTRING(THIAGO_PAYMENT1));
        PRINTSCREEN(THIAGO_PRINTS, -(1), -(1), FONT_SCREEN, 2);
        DIA_THIAGO_TRAIN_CHOICES();
    };
}

func void DIA_THIAGO_TRAIN_BOW5() {
    if ((NPC_HASITEMS(OTHER, 34203)) >= (THIAGO_PAYMENT5)) {
        if ((THIAGO_CURRENTBOWLEVEL) < (OTHER.AIVAR[86])) {
            B_GIVEINVITEMS(OTHER, SELF, 34203, THIAGO_PAYMENT5);
            SND_PLAY(GELDBEUTEL);
            NPC_REMOVEINVITEMS(SELF, 34203, THIAGO_PAYMENT5);
        };
        B_TEACHFIGHTTALENTPERCENT(SELF, OTHER, NPC_TALENT_BOW, 5, 60);
        DIA_THIAGO_TRAIN_CHOICES();
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (THIAGO_PAYMENT5)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Train_BOW5_03_01");
        THIAGO_PRINTS = CONCATSTRINGS(PRINT_RGOLD, INTTOSTRING(THIAGO_PAYMENT5));
        PRINTSCREEN(THIAGO_PRINTS, -(1), -(1), FONT_SCREEN, 2);
        DIA_THIAGO_TRAIN_CHOICES();
    };
}

instance DIA_THIAGO_TRAIN_PICKLOCK(C_INFO) {
    NPC = 58743;
    NR = 7;
    CONDITION = DIA_THIAGO_TRAIN_PICKLOCK_CONDITION;
    INFORMATION = DIA_THIAGO_TRAIN_PICKLOCK_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = B_BUILDLEARNSTRING2(PRINT_LEARN_PICKLOCK2, 0, THIAGO_PICKLOCK);
}

func int DIA_THIAGO_TRAIN_PICKLOCK_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 84459)) && ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKLOCK)) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_TRAIN_PICKLOCK_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_TRAIN_Picklock_15_00");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (THIAGO_PICKLOCK)) {
        if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKLOCK)) == (2)) {
            if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_SNEAK)) == (0)) {
                PRINTSCREEN(PRINT_LEARNSNEAK, -(1), YPOS_LEVELUP, FONT_SCREEN, 2);
                AI_OUTPUT(SELF, OTHER, "DIA_Thiago_TRAIN_Sneak_03_01");
                B_TEACHTHIEFTALENT(PIR_1311_THIAGO, HERO, NPC_TALENT_SNEAK, 1);
                AI_OUTPUT(SELF, OTHER, "DIA_Thiago_TRAIN_Sneak_03_02");
            };
            NPC_REMOVEINVITEMS(SELF, 34203, THIAGO_PICKLOCK);
            AI_OUTPUT(SELF, OTHER, "DIA_Thiago_TRAIN_Picklock_03_01");
            B_GIVEINVITEMS(OTHER, SELF, 34203, THIAGO_PICKLOCK);
            AI_OUTPUT(SELF, OTHER, "DIA_Thiago_TRAIN_Picklock_03_02");
        };
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_TRAIN_Picklock_03_03");
}

instance DIA_THIAGO_AMBIENT(C_INFO) {
    NPC = 58743;
    NR = 997;
    CONDITION = DIA_THIAGO_AMBIENT_CONDITION;
    INFORMATION = DIA_THIAGO_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "Did something happen?";
}

func int DIA_THIAGO_AMBIENT_CONDITION() {
    if (NPC_KNOWSINFO(OTHER, 84482)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_AMBIENT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Ambient_15_00");
    if (!(NPC_KNOWSINFO(OTHER, 83704))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Ambient_13_13");
    };
    if (((NPC_KNOWSINFO(OTHER, 83704)) && ((Q306_TOURNAMENTSTATUS) != (1))) && ((Q306_TOURNAMENTSTATUS) != (2))) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Ambient_13_14");
    };
    if ((Q306_TOURNAMENTSTATUS) == (1)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Ambient_13_15");
    };
    if ((Q306_TOURNAMENTSTATUS) == (2)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Ambient_13_16");
    };
}

instance DIA_THIAGO_WELCOME(C_INFO) {
    NPC = 58743;
    NR = 1;
    CONDITION = DIA_THIAGO_WELCOME_CONDITION;
    INFORMATION = DIA_THIAGO_WELCOME_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_THIAGO_WELCOME_CONDITION() {
    if (((KAPITEL) == (3)) && ((NPC_GETDISTTOWP(SELF, "P17_HAVEN_IN_12")) <= (600))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_WELCOME_INFO() {
    NPC_EXCHANGEROUTINE(SELF, START);
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_03_01");
    INFO_CLEARCHOICES(84482);
    INFO_ADDCHOICE(84482, "What exactly is this place?", 84486);
}

func void DIA_THIAGO_WELCOME_CHOICES() {
    if ((LOG_GETSTATUS(MIS_Q301)) == (LOG_RUNNING)) {
        INFO_CLEARCHOICES(84493);
        INFO_CLEARCHOICES(84496);
    };
    INFO_CLEARCHOICES(84482);
    if ((GQ001_THIAGO_RULES) == (FALSE)) {
        INFO_ADDCHOICE(84482, "Are there any rules here?", 84487);
    };
    if ((HERO.GUILD) == (GIL_MIL)) {
        if ((GQ001_THIAGO_MAN) == (FALSE)) {
            INFO_ADDCHOICE(84482, "Any three men come in here recently?", 84490);
        };
        if ((GQ001_THIAGO_MILITIAARMOR) == (FALSE)) {
            INFO_ADDCHOICE(84482, "No one will attack me because of my guard uniform?", 84521);
        };
    };
    if ((HERO.GUILD) == (GIL_SLD)) {
        if ((GQ001_THIAGO_BEN) == (FALSE)) {
            INFO_ADDCHOICE(84482, "Has there been a big guy here lately?", 84491);
        };
    };
    if ((GQ001_THIAGOINFORMATION) == (2)) {
        INFO_ADDCHOICE(84482, "Where do I go now?", 84492);
    };
}

func void DIA_THIAGO_WELCOME_PLACE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_WELCOME_Place_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Place_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Place_03_03");
    DIA_THIAGO_WELCOME_CHOICES();
}

func void DIA_THIAGO_WELCOME_PLACE_RULES() {
    GQ001_THIAGO_RULES = TRUE;
    GQ001_THIAGOINFORMATION = (GQ001_THIAGOINFORMATION) + (1);
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_WELCOME_Rules_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Rules_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Rules_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Rules_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_WELCOME_Rules_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Rules_03_06");
    DIA_THIAGO_WELCOME_CHOICES();
}

func void DIA_THIAGO_WELCOME_PLACE_WHO() {
    GQ001_THIAGO_WHO = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_WELCOME_Who_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Who_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Who_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Who_03_05");
    DIA_THIAGO_WELCOME_CHOICES();
}

func void DIA_THIAGO_WELCOME_PLACE_CORTEZ() {
    GQ001_THIAGO_CORTEZ = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_WELCOME_Cortez_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Cortez_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_WELCOME_Cortez_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Cortez_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Cortez_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Cortez_03_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Cortez_03_07");
    DIA_THIAGO_WELCOME_CHOICES();
}

func void DIA_THIAGO_WELCOME_PLACE_MAN() {
    GQ001_THIAGO_MAN = TRUE;
    GQ001_THIAGOINFORMATION = (GQ001_THIAGOINFORMATION) + (1);
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_WELCOME_Man_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Man_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_WELCOME_Man_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Man_03_04");
    DIA_THIAGO_WELCOME_CHOICES();
}

func void DIA_THIAGO_WELCOME_PLACE_BEN() {
    GQ001_THIAGO_BEN = TRUE;
    GQ001_THIAGOINFORMATION = (GQ001_THIAGOINFORMATION) + (1);
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_WELCOME_Ben_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Ben_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_WELCOME_Ben_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Ben_03_08");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Ben_03_09");
    DIA_THIAGO_WELCOME_CHOICES();
}

func void DIA_THIAGO_WELCOME_PLACE_WHERE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_WELCOME_Where_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_TURNTONPC(SELF, PIR_1303_CORTEZ);
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Where_03_02");
    AI_TURNTONPC(SELF, OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Where_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Where_03_04");
    if ((HERO.GUILD) == (GIL_SLD)) {
        AI_FUNCTION(SELF, 64107);
        AI_STANDUPQUICK(SELF);
        AI_TURNTONPC(SELF, PIR_1303_CORTEZ);
        AI_WAIT(SELF, 1073741824);
        AI_TURNTONPC(SELF, OTHER);
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Where_03_08");
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Where_03_05");
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_WELCOME_Where_15_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_WELCOME_Where_03_07");
    NPC_EXCHANGEROUTINE(SELF, START);
    INFO_CLEARCHOICES(84482);
    AI_STOPPROCESSINFOS(SELF);
    LOG_CREATETOPIC(TOPIC_Q301, LOG_MISSION);
    LOG_SETSTATUS(_@(MIS_Q301), TOPIC_Q301, LOG_RUNNING);
    if ((HERO.GUILD) == (GIL_MIL)) {
        AI_LOGENTRY(TOPIC_Q301, LOG_Q301_START_MIL);
    };
    if ((HERO.GUILD) == (GIL_SLD)) {
        AI_LOGENTRY(TOPIC_Q301, LOG_Q301_START_ARX);
    };
}

instance DIA_THIAGO_WHO(C_INFO) {
    NPC = 58743;
    NR = 1;
    CONDITION = DIA_THIAGO_WHO_CONDITION;
    INFORMATION = DIA_THIAGO_WHO_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Who are you?";
}

func int DIA_THIAGO_WHO_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 84482)) && ((GQ001_THIAGO_WHO) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_WHO_INFO() {
    DIA_THIAGO_WELCOME_PLACE_WHO();
}

instance DIA_THIAGO_CORTEZ(C_INFO) {
    NPC = 58743;
    NR = 1;
    CONDITION = DIA_THIAGO_CORTEZ_CONDITION;
    INFORMATION = DIA_THIAGO_CORTEZ_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Tell me about Cortez.";
}

func int DIA_THIAGO_CORTEZ_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 84482)) && ((GQ001_THIAGO_CORTEZ) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_CORTEZ_INFO() {
    DIA_THIAGO_WELCOME_PLACE_CORTEZ();
}

instance DIA_THIAGO_Q306_AFTERTOURNAMENT(C_INFO) {
    NPC = 58743;
    NR = 1;
    CONDITION = DIA_THIAGO_Q306_AFTERTOURNAMENT_CONDITION;
    INFORMATION = DIA_THIAGO_Q306_AFTERTOURNAMENT_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_THIAGO_Q306_AFTERTOURNAMENT_CONDITION() {
    if (((NPC_ISINSTATE(SELF, 61599)) && ((Q301_AFTERQ306) == (TRUE))) && ((KAPITEL) < (4))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_Q306_AFTERTOURNAMENT_INFO() {
    if ((Q306_TOURNAMENTSTATUS) == (1)) {
        AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Q306_AfterTournament_03_01");
    };
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Q306_AfterTournament_03_02");
    AI_RESETFACEANI(SELF);
    AI_STOPPROCESSINFOS(SELF);
}

var int THIAGO_ALLHUNT;
instance DIA_THIAGO_HUNTING_SPECIAL(C_INFO) {
    NPC = 58743;
    NR = 1;
    CONDITION = DIA_THIAGO_HUNTING_SPECIAL_CONDITION;
    INFORMATION = DIA_THIAGO_HUNTING_SPECIAL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "Can you teach me something about hunting?";
}

func int DIA_THIAGO_HUNTING_SPECIAL_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 84459)) && ((THIAGO_ALLHUNT) == (FALSE))) && ((PLAYER_TALENT_TAKEANIMALTROPHY[2]) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_HUNTING_SPECIAL_CHOICES() {
    INFO_CLEARCHOICES(84503);
    INFO_ADDCHOICE(84503, DIALOG_BACK, 84507);
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[7]) == (FALSE)) {
        INFO_ADDCHOICE(84503, B_BUILDLEARNSTRING2(PRINT_TEACHBFSTING, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_BFSTING), THIAGO_BFSTINGTROPHY), 84508);
    };
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[8]) == (FALSE)) {
        INFO_ADDCHOICE(84503, B_BUILDLEARNSTRING2(PRINT_TEACHMANDIBLES, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_MANDIBLES), THIAGO_MANDIBLESTROPHY), 84509);
    };
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[6]) == (FALSE)) {
        INFO_ADDCHOICE(84503, B_BUILDLEARNSTRING2(PRINT_TEACHBFWING, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_BFWING), THIAGO_BFWINGTROPHY), 84510);
    };
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[15]) == (FALSE)) {
        INFO_ADDCHOICE(84503, B_BUILDLEARNSTRING2(PRINT_TEACHFATS, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_FATS), THIAGO_FATSTROPHY), 84511);
    };
    if ((PLAYER_TALENT_TAKEANIMALTROPHY[13]) == (FALSE)) {
        INFO_ADDCHOICE(84503, B_BUILDLEARNSTRING2(PRINT_TEACHREPTILESKIN, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_TAKEANIMALTROPHY, TROPHY_REPTILESKIN), THIAGO_REPTILESKINTROPHY), 84512);
    };
}

func void DIA_THIAGO_HUNTING_SPECIAL_INFO() {
    B_SAY(OTHER, SELF, "$MARVIN_CanYouTeachMeHunting");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Hunting_Special_03_01");
    DIA_THIAGO_HUNTING_SPECIAL_CHOICES();
}

func void DIA_THIAGO_HUNTING_SPECIAL_BACK() {
    INFO_CLEARCHOICES(84503);
    if ((((((PLAYER_TALENT_TAKEANIMALTROPHY[7]) == (TRUE)) && ((PLAYER_TALENT_TAKEANIMALTROPHY[8]) == (TRUE))) && ((PLAYER_TALENT_TAKEANIMALTROPHY[6]) == (TRUE))) && ((PLAYER_TALENT_TAKEANIMALTROPHY[15]) == (TRUE))) && ((PLAYER_TALENT_TAKEANIMALTROPHY[13]) == (TRUE))) {
        THIAGO_ALLHUNT = TRUE;
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_AllHunt_03_01");
    };
}

func void DIA_THIAGO_HUNTING_SPECIAL_BFSTING() {
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Hunting_Special_BFSting_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (THIAGO_BFSTINGTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[7]) == (TRUE)) {
            NPC_REMOVEINVITEMS(SELF, 34203, THIAGO_BFSTINGTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Hunting_Special_BFSting_03_02");
            B_GIVEINVITEMS(OTHER, SELF, 34203, THIAGO_BFSTINGTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Hunting_Special_BFSting_03_03");
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYSTING, -(1), -(1), FONT_SCREEN, 2);
        };
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (THIAGO_BFSTINGTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Hunting_Special_BFSting_03_04");
    };
    DIA_THIAGO_HUNTING_SPECIAL_CHOICES();
}

func void DIA_THIAGO_HUNTING_SPECIAL_MANDIBLES() {
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Hunting_Special_Mandibles_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (THIAGO_MANDIBLESTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[8]) == (TRUE)) {
            NPC_REMOVEINVITEMS(SELF, 34203, THIAGO_MANDIBLESTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Hunting_Special_Mandibles_03_02");
            B_GIVEINVITEMS(OTHER, SELF, 34203, THIAGO_MANDIBLESTROPHY);
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYMANDIBLES, -(1), -(1), FONT_SCREEN, 2);
        };
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (THIAGO_MANDIBLESTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Hunting_Special_Mandibles_03_03");
    };
    DIA_THIAGO_HUNTING_SPECIAL_CHOICES();
}

func void DIA_THIAGO_HUNTING_SPECIAL_BFWING() {
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Hunting_Special_BFWing_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (THIAGO_BFWINGTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[6]) == (TRUE)) {
            NPC_REMOVEINVITEMS(SELF, 34203, THIAGO_BFWINGTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Hunting_Special_BFWing_03_02");
            B_GIVEINVITEMS(OTHER, SELF, 34203, THIAGO_BFWINGTROPHY);
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYWING, -(1), -(1), FONT_SCREEN, 2);
        };
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (THIAGO_BFWINGTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Hunting_Special_BFWing_03_03");
    };
    DIA_THIAGO_HUNTING_SPECIAL_CHOICES();
}

func void DIA_THIAGO_HUNTING_SPECIAL_FATS() {
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Hunting_Special_Fats_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (THIAGO_FATSTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[15]) == (TRUE)) {
            NPC_REMOVEINVITEMS(SELF, 34203, THIAGO_FATSTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Hunting_Special_Fats_03_02");
            B_GIVEINVITEMS(OTHER, SELF, 34203, THIAGO_FATSTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Hunting_Special_Fats_03_03");
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYFAT, -(1), -(1), FONT_SCREEN, 2);
        };
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (THIAGO_FATSTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Hunting_Special_Fats_03_04");
    };
    DIA_THIAGO_HUNTING_SPECIAL_CHOICES();
}

func void DIA_THIAGO_HUNTING_SPECIAL_REPTILESKIN() {
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_Hunting_Special_ReptileSkin_15_01");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (THIAGO_REPTILESKINTROPHY)) {
        if ((PLAYER_TALENT_TAKEANIMALTROPHY[13]) == (TRUE)) {
            NPC_REMOVEINVITEMS(SELF, 34203, THIAGO_REPTILESKINTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Hunting_Special_ReptileSkin_03_02");
            B_GIVEINVITEMS(OTHER, SELF, 34203, THIAGO_REPTILESKINTROPHY);
            AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Hunting_Special_ReptileSkin_03_03");
            PRINTSCREEN(PRINT_LEARNTAKEANIMALTROPHYREPTILESKIN, -(1), -(1), FONT_SCREEN, 2);
        };
    };
    if ((NPC_HASITEMS(OTHER, 34203)) < (THIAGO_REPTILESKINTROPHY)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Thiago_Hunting_Special_ReptileSkin_03_04");
    };
    DIA_THIAGO_HUNTING_SPECIAL_CHOICES();
}

instance DIA_THIAGO_IWILLTEACHACROBAT(C_INFO) {
    NPC = 58743;
    NR = 10;
    CONDITION = DIA_THIAGO_IWILLTEACHACROBAT_CONDITION;
    INFORMATION = DIA_THIAGO_IWILLTEACHACROBAT_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_THIAGO_IWILLTEACHACROBAT_CONDITION() {
    if (((GQ001_THIAGO_WHO) == (TRUE)) && (NPC_KNOWSINFO(OTHER, 84459))) {
        if (((LOG_GETSTATUS(MIS_Q303)) == (LOG_SUCCESS)) || ((LOG_GETSTATUS(MIS_Q304)) == (LOG_SUCCESS))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_IWILLTEACHACROBAT_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_IwillTeachAcrobat_13_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_IwillTeachAcrobat_13_02");
    LOG_CREATETOPIC(TOPIC_HAVENTEACHER, LOG_NOTE);
    AI_LOGENTRY(TOPIC_HAVENTEACHER, LOG_HAVENTEACHER_THIAGO_ACROBAT);
}

instance DIA_THIAGO_TRAIN_ACROBAT(C_INFO) {
    NPC = 58743;
    NR = 7;
    CONDITION = DIA_THIAGO_TRAIN_ACROBAT_CONDITION;
    INFORMATION = DIA_THIAGO_TRAIN_ACROBAT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = B_BUILDLEARNSTRING2(PRINT_LEARN_ACROBAT, B_GETLEARNCOSTTALENT(OTHER, NPC_TALENT_ACROBAT, 1), THIAGO_ACROBAT);
}

func int DIA_THIAGO_TRAIN_ACROBAT_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 84513)) && ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_ACROBAT)) == (0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_TRAIN_ACROBAT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_TRAIN_Acrobat_15_00");
    if ((NPC_HASITEMS(OTHER, 34203)) >= (THIAGO_ACROBAT)) {
        if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_ACROBAT)) == (1)) {
            NPC_REMOVEINVITEMS(SELF, 34203, THIAGO_ACROBAT);
            AI_OUTPUT(SELF, OTHER, "DIA_Thiago_TRAIN_Acrobat_03_01");
            B_GIVEINVITEMS(OTHER, SELF, 34203, THIAGO_ACROBAT);
            AI_OUTPUT(SELF, OTHER, "DIA_Thiago_TRAIN_Acrobat_03_02");
        };
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_TRAIN_Acrobat_03_03");
}

instance DIA_THIAGO_MILITIAARMOR(C_INFO) {
    NPC = 58743;
    NR = 1;
    CONDITION = DIA_THIAGO_MILITIAARMOR_CONDITION;
    INFORMATION = DIA_THIAGO_MILITIAARMOR_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "No one will attack me because of my guard uniform?";
}

func int DIA_THIAGO_MILITIAARMOR_CONDITION() {
    if (((((HERO.GUILD) == (GIL_MIL)) && ((KAPITEL) == (3))) && ((GQ001_THIAGO_MILITIAARMOR) == (FALSE))) && (NPC_KNOWSINFO(OTHER, 84482))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_WELCOME_PLACE_MILITIAARMOR() {
    GQ001_THIAGO_MILITIAARMOR = TRUE;
    AI_STARTFACEANI(OTHER, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Thiago_MilitiaArmor_15_01");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_MilitiaArmor_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Thiago_MilitiaArmor_03_03");
    AI_RESETFACEANI(SELF);
    AI_RESETFACEANI(OTHER);
}

func void DIA_THIAGO_MILITIAARMOR_INFO() {
    GQ001_THIAGO_MILITIAARMOR = TRUE;
    DIA_THIAGO_WELCOME_PLACE_MILITIAARMOR();
}

instance DIA_THIAGO_PICKPOCKET(C_INFO) {
    NPC = 58743;
    NR = 900;
    CONDITION = DIA_THIAGO_PICKPOCKET_CONDITION;
    INFORMATION = DIA_THIAGO_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_120;
}

func int DIA_THIAGO_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_THIAGO_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(84523);
    INFO_ADDCHOICE(84523, DIALOG_BACK, 84527);
    INFO_ADDCHOICE(84523, DIALOG_PICKPOCKET, 84526);
}

func void DIA_THIAGO_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (3)) {
        CREATEINVITEMS(SELF, 34383, 11);
        B_GIVEINVITEMS(SELF, OTHER, 34383, 11);
        B_PICKPOCKET_AMBIENT_TIER_3();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(84523);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(84523);
}

func void DIA_THIAGO_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(84523);
}

