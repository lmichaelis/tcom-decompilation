func void WORRIEDCITIZENSOUT() {
    NPC_EXCHANGEROUTINE(VLK_14009_WORRIEDCITIZENMAIN, TOT);
    NPC_EXCHANGEROUTINE(VLK_14011_WORRIEDCITIZEN, TOT);
    NPC_REFRESH(VLK_14011_WORRIEDCITIZEN);
    NPC_EXCHANGEROUTINE(VLK_14010_WORRIEDCITIZEN, TOT);
    NPC_REFRESH(VLK_14010_WORRIEDCITIZEN);
}

func void WORRIEDCITIZENSOUTFLEE() {
    NPC_EXCHANGEROUTINE(VLK_14009_WORRIEDCITIZENMAIN, FLEE);
    NPC_EXCHANGEROUTINE(VLK_14011_WORRIEDCITIZEN, FLEE);
    NPC_REFRESH(VLK_14011_WORRIEDCITIZEN);
    NPC_EXCHANGEROUTINE(VLK_14010_WORRIEDCITIZEN, FLEE);
    NPC_REFRESH(VLK_14010_WORRIEDCITIZEN);
}

instance DIA_WORRIEDCITIZENMAIN_EXIT(C_INFO) {
    NPC = 53866;
    NR = 999;
    CONDITION = DIA_WORRIEDCITIZENMAIN_EXIT_CONDITION;
    INFORMATION = DIA_WORRIEDCITIZENMAIN_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_WORRIEDCITIZENMAIN_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_WORRIEDCITIZENMAIN_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_WORRIEDCITIZENMAIN_BELIAREVENT(C_INFO) {
    NPC = 53866;
    NR = 1;
    CONDITION = DIA_WORRIEDCITIZENMAIN_BELIAREVENT_CONDITION;
    INFORMATION = DIA_WORRIEDCITIZENMAIN_BELIAREVENT_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_WORRIEDCITIZENMAIN_BELIAREVENT_CONDITION() {
    return TRUE;
}

func void DIA_WORRIEDCITIZENMAIN_BELIAREVENT_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_WorriedCitizenMain_BeliarEvent_03_01");
    AI_OUTPUT(OTHER, SELF, "DIA_WorriedCitizenMain_BeliarEvent_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_WorriedCitizenMain_BeliarEvent_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_WorriedCitizenMain_BeliarEvent_03_04");
    INFO_CLEARCHOICES(73453);
    INFO_ADDCHOICE(73453, "Every god deserves to be worshiped.", 73456);
    INFO_ADDCHOICE(73453, "If you don't leave me alone, I'll put a curse on you...", 73457);
    INFO_ADDCHOICE(73453, "It's none of your business what I have in my garden.", 73458);
}

func void DIA_WORRIEDCITIZENMAIN_ILOVEBELIAR() {
    B_GIVEPLAYERXP(XP_EVENT_TAXCOLLECTORV2);
    AI_OUTPUT(OTHER, SELF, "DIA_WorriedCitizenMain_ILoveBeliar_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_WorriedCitizenMain_ILoveBeliar_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_WorriedCitizenMain_ILoveBeliar_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_WorriedCitizenMain_ILoveBeliar_03_04");
    AI_FUNCTION(SELF, 73448);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_WORRIEDCITIZENMAIN_CURSES() {
    B_GIVEPLAYERXP(XP_EVENT_TAXCOLLECTORV2);
    AI_OUTPUT(OTHER, SELF, "DIA_WorriedCitizenMain_Curses_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_WorriedCitizenMain_Curses_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_WorriedCitizenMain_Curses_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_WorriedCitizenMain_Curses_03_04");
    AI_FUNCTION(SELF, 73449);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_WORRIEDCITIZENMAIN_GARDEN() {
    B_GIVEPLAYERXP(XP_EVENT_TAXCOLLECTORV2);
    AI_OUTPUT(OTHER, SELF, "DIA_WorriedCitizenMain_Garden_15_01");
    DUMMYFUNCWITHSTRINGPARAMETER("But you have a shrine of Beliar in your garden! You will bring disaster on this city!");
    AI_OUTPUT(OTHER, SELF, "DIA_WorriedCitizenMain_Garden_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_WorriedCitizenMain_Garden_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_WorriedCitizenMain_Garden_03_05");
    AI_FUNCTION(SELF, 73448);
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_WORRIEDCITIZENMAIN_AFTERBELIAREVENT(C_INFO) {
    NPC = 53866;
    NR = 5;
    CONDITION = DIA_WORRIEDCITIZENMAIN_AFTERBELIAREVENT_CONDITION;
    INFORMATION = DIA_WORRIEDCITIZENMAIN_AFTERBELIAREVENT_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_WORRIEDCITIZENMAIN_AFTERBELIAREVENT_CONDITION() {
    if ((NPC_KNOWSINFO(OTHER, 73453)) && (NPC_ISINSTATE(SELF, 61599))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_WORRIEDCITIZENMAIN_AFTERBELIAREVENT_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_WorriedCitizenMain_AfterBeliarEvent_03_01");
    AI_STOPPROCESSINFOS(SELF);
}

