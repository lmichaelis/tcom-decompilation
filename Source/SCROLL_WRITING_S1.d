func void SCROLL_WRITING_S1() {
    var C_NPC HER;
    HER = HLP_GETNPC(50091);
    if ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(HER))) {
        SELF.AIVAR[4] = TRUE;
        PLAYER_MOBSI_PRODUCTION = MOBSI_SCROLL_WRITING;
        AI_PROCESSINFOS(HER);
    };
}

const int SCROLLWRITING_MODE = 0;
const int SCROLL_WRITING_INFO = -1;
const int SCROLL_WRITING_INSTANCE = -1;
func void PC_SCROLL_WRITING_AMOUNTCHOICES() {
    var string ALL_STRING;
    var int MAX;
    INFO_CLEARCHOICES(SCROLL_WRITING_INFO);
    MAX = PC_CRAFTRECIPEITEM_MAX(SCROLL_WRITING_INSTANCE);
    if ((MAX) > (0)) {
        ALL_STRING = CS4(DIALOG_ALL, " (", I2S(MAX), ")");
        INFO_ADDCHOICE(SCROLL_WRITING_INFO, ALL_STRING, 47793);
        if ((MAX) > (9)) {
            INFO_ADDCHOICE(SCROLL_WRITING_INFO, CHOICE_NUMBER_10, 47795);
        };
        if ((MAX) > (4)) {
            INFO_ADDCHOICE(SCROLL_WRITING_INFO, CHOICE_NUMBER_5, 47796);
        };
        INFO_ADDCHOICE(SCROLL_WRITING_INFO, CHOICE_NUMBER_1, 47797);
        INFO_ADDCHOICE(SCROLL_WRITING_INFO, DIALOG_BACK, 47792);
    };
    SCROLL_WRITING_INSTANCE = -(1);
}

func void PC_SCROLL_WRITING_CHECKAMOUNTCHOICES() {
    if ((PC_CRAFTRECIPEITEM_MAX(SCROLL_WRITING_INSTANCE)) > (0)) {
        PC_SCROLL_WRITING_AMOUNTCHOICES();
    };
    SCROLL_WRITING_INSTANCE = -(1);
    PRINTS_EXT(PRINT_PRODITEMSMISSING, RGBA(255, 50, 50, 255));
}

func void PC_SCROLL_WRITING_AMOUNTBACK() {
    INFO_CLEARCHOICES(SCROLL_WRITING_INFO);
    SCROLL_WRITING_INSTANCE = -(1);
}

func void PC_SCROLL_WRITING_AMOUNTALL() {
    var int MAX;
    MAX = PC_CRAFTRECIPEITEM_MAX(SCROLL_WRITING_INSTANCE);
    PC_CRAFTRECIPEITEMS(SCROLL_WRITING_INSTANCE, MAX);
    PC_SCROLL_WRITING_AMOUNTCHOICES();
}

func void PC_SCROLL_WRITING_AMOUNT10() {
    PC_CRAFTRECIPEITEMS(SCROLL_WRITING_INSTANCE, 10);
    PC_SCROLL_WRITING_AMOUNTCHOICES();
}

func void PC_SCROLL_WRITING_AMOUNT5() {
    PC_CRAFTRECIPEITEMS(SCROLL_WRITING_INSTANCE, 5);
    PC_SCROLL_WRITING_AMOUNTCHOICES();
}

func void PC_SCROLL_WRITING_AMOUNT1() {
    PC_CRAFTRECIPEITEMS(SCROLL_WRITING_INSTANCE, 1);
    PC_SCROLL_WRITING_AMOUNTCHOICES();
}

instance PC_SCROLL_WRITING_END(C_INFO) {
    NPC = 50091;
    NR = 999;
    CONDITION = PC_SCROLL_WRITING_END_CONDITION;
    INFORMATION = PC_SCROLL_WRITING_END_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int PC_SCROLL_WRITING_END_CONDITION() {
    if (((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_SCROLL_WRITING_END_INFO() {
    AI_STOPPROCESSINFOS(SELF);
    SELF.AIVAR[4] = FALSE;
    PLAYER_MOBSI_PRODUCTION = MOBSI_NONE;
}

instance PC_SCROLL_WRITING_DEVTALENT(C_INFO) {
    NPC = 50091;
    NR = 1;
    CONDITION = PC_SCROLL_WRITING_DEVTALENT_CONDITION;
    INFORMATION = PC_SCROLL_WRITING_DEVTALENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "DEV: Daj skilla";
}

func int PC_SCROLL_WRITING_DEVTALENT_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (0))) && ((GAME_RUNTIMECONFIG) == (TARGET_DEBUG))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_SCROLL_WRITING_DEVTALENT_INFO() {
    NPC_SETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING, 1);
}

instance PC_SCROLL_WRITING_SCROLL(C_INFO) {
    NPC = 50091;
    NR = 1;
    CONDITION = PC_SCROLL_WRITING_CONDITION;
    INFORMATION = PC_SCROLL_WRITING_SCROLL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_REWRITESCROLL;
}

func int PC_SCROLL_WRITING_CONDITION() {
    if (((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (0))) {
        if (((LOG_GETSTATUS(MIS_SQ121)) == (LOG_RUNNING)) || ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_SCROLL_WRITING_SCROLL_INFO() {
    SCROLLWRITING_MODE = 1;
}

instance PC_SCROLL_WRITING_SCROLL_BACK(C_INFO) {
    NPC = 50091;
    NR = 1;
    CONDITION = PC_SCROLL_WRITING_SCROLL_BACK_CONDITION;
    INFORMATION = PC_SCROLL_WRITING_SCROLL_BACK_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_BACK;
}

func int PC_SCROLL_WRITING_SCROLL_BACK_CONDITION() {
    if (((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_SCROLL_WRITING_SCROLL_BACK_INFO() {
    SCROLLWRITING_MODE = 0;
}

instance PC_ITSC_LIGHT(C_INFO) {
    NR = 10300;
    NPC = 50091;
    CONDITION = PC_ITSC_LIGHT_CONDITION;
    INFORMATION = PC_ITSC_LIGHT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_LIGHT;
}

func int PC_ITSC_LIGHT_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 34686)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_LIGHT_INFO() {
    SCROLL_WRITING_INSTANCE = 38149;
    SCROLL_WRITING_INFO = 47810;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_ZAP(C_INFO) {
    NR = 10301;
    NPC = 50091;
    CONDITION = PC_ITSC_ZAP_CONDITION;
    INFORMATION = PC_ITSC_ZAP_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_ZAP;
}

func int PC_ITSC_ZAP_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 34692)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_ZAP_INFO() {
    SCROLL_WRITING_INSTANCE = 38150;
    SCROLL_WRITING_INFO = 47813;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_SKULL(C_INFO) {
    NR = 10323;
    NPC = 50091;
    CONDITION = PC_ITSC_SKULL_CONDITION;
    INFORMATION = PC_ITSC_SKULL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_SKULL;
}

func int PC_ITSC_SKULL_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 38189)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_SKULL_INFO() {
    SCROLL_WRITING_INSTANCE = 38151;
    SCROLL_WRITING_INFO = 47816;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_LIGHTHEAL(C_INFO) {
    NR = 10302;
    NPC = 50091;
    CONDITION = PC_ITSC_LIGHTHEAL_CONDITION;
    INFORMATION = PC_ITSC_LIGHTHEAL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_LIGHTHEAL;
}

func int PC_ITSC_LIGHTHEAL_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 34689)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_LIGHTHEAL_INFO() {
    SCROLL_WRITING_INSTANCE = 38152;
    SCROLL_WRITING_INFO = 47819;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_ICEBOLT(C_INFO) {
    NR = 10303;
    NPC = 50091;
    CONDITION = PC_ITSC_ICEBOLT_CONDITION;
    INFORMATION = PC_ITSC_ICEBOLT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_ICEBOLT;
}

func int PC_ITSC_ICEBOLT_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 34688)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_ICEBOLT_INFO() {
    SCROLL_WRITING_INSTANCE = 38153;
    SCROLL_WRITING_INFO = 47822;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_SCROLL_WRITING_SCROLL_SQ121_ICEBOLT(C_INFO) {
    NPC = 50091;
    NR = 10303;
    CONDITION = PC_SCROLL_WRITING_SCROLL_SQ121_ICEBOLT_CONDITION;
    INFORMATION = PC_SCROLL_WRITING_SCROLL_SQ121_ICEBOLT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_ICEBOLT;
}

func int PC_SCROLL_WRITING_SCROLL_SQ121_ICEBOLT_CONDITION() {
    if (((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) {
        if ((LOG_GETSTATUS(MIS_SQ121)) == (LOG_RUNNING)) {
            if ((((NPC_HASITEMS(SELF, 34688)) >= (1)) && ((SQ121_CREATESCROLLCOUNT) != (5))) && (NPC_KNOWSINFO(SELF, 79597))) {
                return TRUE;
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_SCROLL_WRITING_SCROLL_SQ121_ICEBOLT_INFO() {
    var int RANDOM;
    if (((NPC_HASITEMS(HERO, 35988)) >= (1)) && ((NPC_HASITEMS(HERO, 35989)) >= (1))) {
        NPC_REMOVEINVITEMS(HERO, 35989, 3);
        RANDOM = HLP_RANDOM(2);
        if ((RANDOM) == (0)) {
            PRINTS_EXT(PRINT_SCROLLSUCCESS, RGBA(50, 255, 50, 255));
            SQ121_CREATESCROLLSUCCESSCOUNT = (SQ121_CREATESCROLLSUCCESSCOUNT) + (1);
            CREATEINVITEMS(HERO, 34688, 1);
            SND_PLAY3D(HERO, "SCROLL_SUCCESS");
        } else if ((RANDOM) == (1)) {
            PRINTS_EXT(PRINT_SCROLLFAILED, COL_RED);
            SND_PLAY3D(HERO, "SCROLL_FAILED");
        };
        NPC_REMOVEINVITEMS(HERO, 35988, 1);
        SQ121_CREATESCROLLCOUNT = (SQ121_CREATESCROLLCOUNT) + (1);
        if ((SQ121_CREATESCROLLCOUNT) == (1)) {
            AI_PLAYANI(SELF, "R_WRITING_SQ505_01");
        } else if ((SQ121_CREATESCROLLCOUNT) == (3)) {
            AI_PLAYANI(SELF, "R_WRITING_SQ505_02");
        } else if ((SQ121_CREATESCROLLCOUNT) == (5)) {
            AI_PLAYANI(SELF, "R_WRITING_SQ505_02");
            B_LOGENTRY(TOPIC_SQ121, LOG_SQ121_ICEBOLTSCROLLDONE);
            PC_SCROLL_WRITING_END_INFO();
        };
    };
    PRINTS_EXT(PRINT_PRODITEMSMISSING, COL_RED);
}

instance PC_ITSC_SUMWOLF(C_INFO) {
    NR = 10304;
    NPC = 50091;
    CONDITION = PC_ITSC_SUMWOLF_CONDITION;
    INFORMATION = PC_ITSC_SUMWOLF_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_SUMMONWOLF;
}

func int PC_ITSC_SUMWOLF_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 34693)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_SUMWOLF_INFO() {
    SCROLL_WRITING_INSTANCE = 38154;
    SCROLL_WRITING_INFO = 47829;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_WINDFIST(C_INFO) {
    NR = 10305;
    NPC = 50091;
    CONDITION = PC_ITSC_WINDFIST_CONDITION;
    INFORMATION = PC_ITSC_WINDFIST_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_WINDFIST;
}

func int PC_ITSC_WINDFIST_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 34694)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_WINDFIST_INFO() {
    SCROLL_WRITING_INSTANCE = 38155;
    SCROLL_WRITING_INFO = 47832;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_ICELANCE(C_INFO) {
    NR = 10306;
    NPC = 50091;
    CONDITION = PC_ITSC_ICELANCE_CONDITION;
    INFORMATION = PC_ITSC_ICELANCE_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_ICELANCE;
}

func int PC_ITSC_ICELANCE_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 33715)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_ICELANCE_INFO() {
    SCROLL_WRITING_INSTANCE = 38156;
    SCROLL_WRITING_INFO = 47835;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_WHIRLWIND(C_INFO) {
    NR = 10307;
    NPC = 50091;
    CONDITION = PC_ITSC_WHIRLWIND_CONDITION;
    INFORMATION = PC_ITSC_WHIRLWIND_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_WHIRLWIND;
}

func int PC_ITSC_WHIRLWIND_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 33718)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_WHIRLWIND_INFO() {
    SCROLL_WRITING_INSTANCE = 38157;
    SCROLL_WRITING_INFO = 47838;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_SUMSNAPPER(C_INFO) {
    NR = 10308;
    NPC = 50091;
    CONDITION = PC_ITSC_SUMSNAPPER_CONDITION;
    INFORMATION = PC_ITSC_SUMSNAPPER_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_SUMMONSNAPPER;
}

func int PC_ITSC_SUMSNAPPER_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 38181)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_SUMSNAPPER_INFO() {
    SCROLL_WRITING_INSTANCE = 38158;
    SCROLL_WRITING_INFO = 47841;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_MEDIUMHEAL(C_INFO) {
    NR = 10309;
    NPC = 50091;
    CONDITION = PC_ITSC_MEDIUMHEAL_CONDITION;
    INFORMATION = PC_ITSC_MEDIUMHEAL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_MEDIUMHEAL;
}

func int PC_ITSC_MEDIUMHEAL_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 34696)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_MEDIUMHEAL_INFO() {
    SCROLL_WRITING_INSTANCE = 38159;
    SCROLL_WRITING_INFO = 47844;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_ICECUBE(C_INFO) {
    NR = 10310;
    NPC = 50091;
    CONDITION = PC_ITSC_ICECUBE_CONDITION;
    INFORMATION = PC_ITSC_ICECUBE_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_ICECUBE;
}

func int PC_ITSC_ICECUBE_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 34701)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_ICECUBE_INFO() {
    SCROLL_WRITING_INSTANCE = 38160;
    SCROLL_WRITING_INFO = 47847;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_SCROLL_WRITING_SCROLL_SQ121_ICECUBE(C_INFO) {
    NPC = 50091;
    NR = 10310;
    CONDITION = PC_SCROLL_WRITING_SCROLL_SQ121_ICECUBE_CONDITION;
    INFORMATION = PC_SCROLL_WRITING_SCROLL_SQ121_ICECUBE_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_ICECUBE;
}

func int PC_SCROLL_WRITING_SCROLL_SQ121_ICECUBE_CONDITION() {
    if (((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) {
        if ((LOG_GETSTATUS(MIS_SQ121)) == (LOG_RUNNING)) {
            if ((((NPC_HASITEMS(SELF, 34701)) >= (1)) && ((SQ121_CREATESCROLLCOUNT) == (5))) && (NPC_KNOWSINFO(SELF, 79597))) {
                return TRUE;
            };
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_SCROLL_WRITING_SCROLL_SQ121_ICECUBE_INFO() {
    if (((NPC_HASITEMS(HERO, 35988)) >= (1)) && ((NPC_HASITEMS(HERO, 35989)) >= (15))) {
        SQ121_CREATEFINALSCROLL = TRUE;
        B_LOGENTRY(TOPIC_SQ121, LOG_SQ121_FINALSCROLL);
        NPC_REMOVEINVITEMS(HERO, 35989, 15);
        PRINTS_EXT(PRINT_SCROLLFAILED, COL_RED);
        NPC_REMOVEINVITEMS(HERO, 35988, 1);
        SND_PLAY3D(HERO, "SCROLL_FAILED");
        AI_PLAYANI(SELF, "R_WRITING_SQ505_02");
        PC_SCROLL_WRITING_END_INFO();
    };
    PRINTS_EXT(PRINT_PRODITEMSMISSING, COL_RED);
}

instance PC_ITSC_THUNDERBALL(C_INFO) {
    NR = 10311;
    NPC = 50091;
    CONDITION = PC_ITSC_THUNDERBALL_CONDITION;
    INFORMATION = PC_ITSC_THUNDERBALL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_CHARGEZAP;
}

func int PC_ITSC_THUNDERBALL_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 34702)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_THUNDERBALL_INFO() {
    SCROLL_WRITING_INSTANCE = 38161;
    SCROLL_WRITING_INFO = 47853;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_GEYSER(C_INFO) {
    NR = 10312;
    NPC = 50091;
    CONDITION = PC_ITSC_GEYSER_CONDITION;
    INFORMATION = PC_ITSC_GEYSER_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_GEYSER;
}

func int PC_ITSC_GEYSER_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 33714)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_GEYSER_INFO() {
    SCROLL_WRITING_INSTANCE = 38162;
    SCROLL_WRITING_INFO = 47856;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_SUMBEAR(C_INFO) {
    NR = 10313;
    NPC = 50091;
    CONDITION = PC_ITSC_SUMBEAR_CONDITION;
    INFORMATION = PC_ITSC_SUMBEAR_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_SUMMONBEAR;
}

func int PC_ITSC_SUMBEAR_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 38180)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_SUMBEAR_INFO() {
    SCROLL_WRITING_INSTANCE = 38163;
    SCROLL_WRITING_INFO = 47859;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_LIGHTNINGFLASH(C_INFO) {
    NR = 10314;
    NPC = 50091;
    CONDITION = PC_ITSC_LIGHTNINGFLASH_CONDITION;
    INFORMATION = PC_ITSC_LIGHTNINGFLASH_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_LIGHTNINGFLASH;
}

func int PC_ITSC_LIGHTNINGFLASH_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 34697)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_LIGHTNINGFLASH_INFO() {
    SCROLL_WRITING_INSTANCE = 38164;
    SCROLL_WRITING_INFO = 47862;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_SUMGOL(C_INFO) {
    NR = 10315;
    NPC = 50091;
    CONDITION = PC_ITSC_SUMGOL_CONDITION;
    INFORMATION = PC_ITSC_SUMGOL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_SUMMONGOLEM;
}

func int PC_ITSC_SUMGOL_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 34703)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_SUMGOL_INFO() {
    SCROLL_WRITING_INSTANCE = 38165;
    SCROLL_WRITING_INFO = 47865;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_WATERFIST(C_INFO) {
    NR = 10316;
    NPC = 50091;
    CONDITION = PC_ITSC_WATERFIST_CONDITION;
    INFORMATION = PC_ITSC_WATERFIST_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_WATERFIST;
}

func int PC_ITSC_WATERFIST_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 33716)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_WATERFIST_INFO() {
    SCROLL_WRITING_INSTANCE = 38166;
    SCROLL_WRITING_INFO = 47868;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_FULLHEAL(C_INFO) {
    NR = 10317;
    NPC = 50091;
    CONDITION = PC_ITSC_FULLHEAL_CONDITION;
    INFORMATION = PC_ITSC_FULLHEAL_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_FULLHEAL;
}

func int PC_ITSC_FULLHEAL_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 34709)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_FULLHEAL_INFO() {
    SCROLL_WRITING_INSTANCE = 38167;
    SCROLL_WRITING_INFO = 47871;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_PICKLOCK(C_INFO) {
    NR = 10318;
    NPC = 50091;
    CONDITION = PC_ITSC_PICKLOCK_CONDITION;
    INFORMATION = PC_ITSC_PICKLOCK_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_PICKLOCK;
}

func int PC_ITSC_PICKLOCK_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 38186)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_PICKLOCK_INFO() {
    SCROLL_WRITING_INSTANCE = 38168;
    SCROLL_WRITING_INFO = 47874;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_TELEKINESIS(C_INFO) {
    NR = 10319;
    NPC = 50091;
    CONDITION = PC_ITSC_TELEKINESIS_CONDITION;
    INFORMATION = PC_ITSC_TELEKINESIS_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_TELEKINESIS;
}

func int PC_ITSC_TELEKINESIS_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 38182)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_TELEKINESIS_INFO() {
    SCROLL_WRITING_INSTANCE = 38169;
    SCROLL_WRITING_INFO = 47877;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_SLOWDOWN(C_INFO) {
    NR = 10320;
    NPC = 50091;
    CONDITION = PC_ITSC_SLOWDOWN_CONDITION;
    INFORMATION = PC_ITSC_SLOWDOWN_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_SLOWDOWN;
}

func int PC_ITSC_SLOWDOWN_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 38183)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_SLOWDOWN_INFO() {
    SCROLL_WRITING_INSTANCE = 38170;
    SCROLL_WRITING_INFO = 47880;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_SLEEP(C_INFO) {
    NR = 10321;
    NPC = 50091;
    CONDITION = PC_ITSC_SLEEP_CONDITION;
    INFORMATION = PC_ITSC_SLEEP_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_SLEEP;
}

func int PC_ITSC_SLEEP_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 34695)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_SLEEP_INFO() {
    SCROLL_WRITING_INSTANCE = 38171;
    SCROLL_WRITING_INFO = 47883;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_ITSC_ICEWAVE(C_INFO) {
    NR = 10322;
    NPC = 50091;
    CONDITION = PC_ITSC_ICEWAVE_CONDITION;
    INFORMATION = PC_ITSC_ICEWAVE_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = NAME_SPL_ICEWAVE;
}

func int PC_ITSC_ICEWAVE_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SCROLLWRITING_MODE) == (1))) && ((NPC_GETTALENTSKILL(HERO, NPC_TALENT_SCROLLWRITING)) == (TRUE))) {
        if ((NPC_HASITEMS(SELF, 34707)) > (0)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void PC_ITSC_ICEWAVE_INFO() {
    SCROLL_WRITING_INSTANCE = 38172;
    SCROLL_WRITING_INFO = 47886;
    PC_SCROLL_WRITING_CHECKAMOUNTCHOICES();
}

instance PC_SCROLL_WRITING_SQ505_VOLKERNOTE(C_INFO) {
    NPC = 50091;
    NR = 90;
    CONDITION = PC_SCROLL_WRITING_SQ505_VOLKERNOTE_CONDITION;
    INFORMATION = PC_SCROLL_WRITING_SQ505_VOLKERNOTE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = DIALOG_WRITESPEECH;
}

func int PC_SCROLL_WRITING_SQ505_VOLKERNOTE_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_SCROLL_WRITING)) && ((SQ505_CANUSEWRITETABLE) == (TRUE))) && ((SCROLLWRITING_MODE) == (0))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_END() {
    SQ505_CANUSEWRITETABLE = 0;
    MOB_CHANGEFOCUSNAME("SQ505_WRITETABLE", "MOBNAME_NOTHING");
    AI_PLAYANI(SELF, "R_WRITING_SQ505_02");
    B_PLAYERFINDITEM(37465, 1);
    NPC_REMOVEINVITEMS(HERO, 36110, 1);
    AI_STOPPROCESSINFOS(SELF);
    SELF.AIVAR[4] = FALSE;
    PLAYER_MOBSI_PRODUCTION = MOBSI_NONE;
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V5_CHOICES() {
    AI_PLAYANI(SELF, "R_WRITING_SQ505_02");
    INFO_CLEARCHOICES(47889);
    INFO_ADDCHOICE(47889, "We'll get back to you tomorrow with more slander and libel!", 47905);
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V4_CHOICES() {
    AI_PLAYANI(SELF, "R_WRITING_SQ505_01");
    INFO_CLEARCHOICES(47889);
    INFO_ADDCHOICE(47889, "Volker spits on the pushovers of the Guard and the Merchant's Guild...", 47904);
    INFO_ADDCHOICE(47889, "forget the Guard and the Merchant's Guild...", 47903);
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V3_CHOICES() {
    AI_PLAYANI(SELF, "R_WRITING_SQ505_02");
    INFO_CLEARCHOICES(47889);
    INFO_ADDCHOICE(47889, "we'll take everyone, but only a few will get paid...", 47902);
    INFO_ADDCHOICE(47889, "no one is useless to us, you will be great cannon fodder...", 47901);
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V2_CHOICES() {
    AI_PLAYANI(SELF, "R_WRITING_SQ505_01");
    INFO_CLEARCHOICES(47889);
    INFO_ADDCHOICE(47889, "we're offering you the opportunity to join the murderers in Volker's service...", 47900);
    INFO_ADDCHOICE(47889, "we want to offer you exploitation and torment...", 47899);
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_INFO() {
    INFO_CLEARCHOICES(47889);
    INFO_ADDCHOICE(47889, "The mindless citizens of Archolos...", 47897);
    INFO_ADDCHOICE(47889, "Dear desperate and poor...", 47898);
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V1_B() {
    SQ505_VOLKERNOTE_DIALOGUE_V1 = 2;
    PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V2_CHOICES();
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V1_A() {
    SQ505_VOLKERNOTE_DIALOGUE_V1 = 1;
    PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V2_CHOICES();
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V2_A() {
    SQ505_VOLKERNOTE_DIALOGUE_V2 = 1;
    PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V3_CHOICES();
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V2_B() {
    SQ505_VOLKERNOTE_DIALOGUE_V2 = 2;
    PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V3_CHOICES();
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V3_A() {
    SQ505_VOLKERNOTE_DIALOGUE_V3 = 1;
    PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V4_CHOICES();
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V3_B() {
    SQ505_VOLKERNOTE_DIALOGUE_V3 = 2;
    PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V4_CHOICES();
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V4_A() {
    SQ505_VOLKERNOTE_DIALOGUE_V4 = 1;
    PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V5_CHOICES();
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V4_B() {
    SQ505_VOLKERNOTE_DIALOGUE_V4 = 2;
    PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V5_CHOICES();
}

func void PC_SCROLL_WRITING_SQ505_VOLKERNOTE_V5_A() {
    SQ505_VOLKERNOTE_DIALOGUE_V5 = 1;
    PC_SCROLL_WRITING_SQ505_VOLKERNOTE_END();
}

