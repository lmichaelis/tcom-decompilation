instance DIA_BLAKE_Q602_EXIT(C_INFO) {
    NPC = 59970;
    NR = 999;
    CONDITION = DIA_BLAKE_Q602_EXIT_CONDITION;
    INFORMATION = DIA_BLAKE_Q602_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_BLAKE_Q602_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_BLAKE_Q602_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_BLAKE_Q602_HELLO(C_INFO) {
    NPC = 59970;
    NR = 1;
    CONDITION = DIA_BLAKE_Q602_HELLO_CONDITION;
    INFORMATION = DIA_BLAKE_Q602_HELLO_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_BLAKE_Q602_HELLO_CONDITION() {
    if ((LOG_GETSTATUS(MIS_Q602)) == (LOG_RUNNING)) {
        if ((((NPC_GETDISTTOWP(NONE_6410_BLAKE_Q602, "PARTE3_BLAKE")) <= (500)) && ((NPC_GETDISTTOWP(NONE_6411_HASMETH_Q602, "PARTE3_HASMETH")) <= (500))) && ((NPC_GETDISTTOWP(NONE_6412_THULSA_Q602, "PARTE3_THULSA")) <= (500))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_BLAKE_Q602_HELLO_INFO() {
    if (HLP_ISVALIDNPC(NONE_6411_HASMETH_Q602)) {
        if (!(NPC_ISDEAD(NONE_6411_HASMETH_Q602))) {
            TRIA_INVITE(NONE_6411_HASMETH_Q602);
        };
    };
    if (HLP_ISVALIDNPC(NONE_6412_THULSA_Q602)) {
        if (!(NPC_ISDEAD(NONE_6412_THULSA_Q602))) {
            TRIA_INVITE(NONE_6412_THULSA_Q602);
        };
    };
    if ((HLP_ISVALIDNPC(NONE_6411_HASMETH_Q602)) || (HLP_ISVALIDNPC(NONE_6412_THULSA_Q602))) {
        if ((!(NPC_ISDEAD(NONE_6411_HASMETH_Q602))) || (!(NPC_ISDEAD(NONE_6412_THULSA_Q602)))) {
            TRIA_START();
        };
    };
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Blake_Q602_Hello_03_01");
    INFO_CLEARCHOICES(90610);
    INFO_ADDCHOICE(90610, "The city is engulfed in battle, and you steal from innocent people?", 90613);
}

func void DIA_BLAKE_Q602_HELLO_CITY() {
    AI_STARTFACEANI(OTHER, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Blake_Q602_Hello_City_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Blake_Q602_Hello_City_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Blake_Q602_Hello_City_03_03");
    INFO_CLEARCHOICES(90610);
    INFO_ADDCHOICE(90610, "Letting you go was a mistake.", 90614);
    INFO_ADDCHOICE(90610, "Do what you want. It's none of my business.", 90615);
}

func void DIA_BLAKE_Q602_HELLO_CITY_FIGHT() {
    AI_OUTPUT(OTHER, SELF, "DIA_Blake_Q602_Hello_Fight_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Blake_Q602_Hello_Fight_03_02");
    AI_RESETFACEANI(OTHER);
    TRIA_FINISH();
    INFO_CLEARCHOICES(90610);
    AI_STOPPROCESSINFOS(SELF);
    AI_FUNCTION(SELF, 90616);
}

func void DIA_BLAKE_Q602_HELLO_CITY_LEAVE() {
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(OTHER, SELF, "DIA_Blake_Q602_Hello_Leave_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Blake_Q602_Hello_Leave_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Blake_Q602_Hello_Leave_03_03");
    if ((HLP_ISVALIDNPC(NONE_6411_HASMETH_Q602)) || (HLP_ISVALIDNPC(NONE_6412_THULSA_Q602))) {
        if ((!(NPC_ISDEAD(NONE_6411_HASMETH_Q602))) || (!(NPC_ISDEAD(NONE_6412_THULSA_Q602)))) {
            TRIA_FINISH();
        };
    };
    INFO_CLEARCHOICES(90610);
    AI_STOPPROCESSINFOS(SELF);
    CREATEINVITEMS(SELF, 34210, 2);
    B_GIVEINVITEMS(SELF, OTHER, 34210, 2);
    CREATEINVITEMS(SELF, 35171, 1);
    B_GIVEINVITEMS(SELF, OTHER, 35171, 1);
    CREATEINVITEMS(SELF, 34505, 1);
    B_GIVEINVITEMS(SELF, OTHER, 34505, 1);
}

func void BLAKE_Q602_FIGHT() {
    Q602_FIGHTWITHBLAKE();
}

