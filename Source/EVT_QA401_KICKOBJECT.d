func void EVT_QA401_KICKOBJECT() {
    var int QA401_COUNTDESTROYEDOBJECT;
    QA401_COUNTDESTROYEDOBJECT = (QA401_COUNTDESTROYEDOBJECT) + (1);
    if ((QA401_COUNTDESTROYEDOBJECT) == (1)) {
        PRINTD("Attack");
        NONE_13541_WORKER.AIVAR[96] = -(1);
        NONE_13542_WORKER.AIVAR[96] = -(1);
        NONE_13543_WORKER.AIVAR[96] = -(1);
        B_IMMEDIATEATTACKPLAYER(NONE_13541_WORKER, AR_KILL);
        B_IMMEDIATEATTACKPLAYER(NONE_13542_WORKER, AR_KILL);
        B_IMMEDIATEATTACKPLAYER(NONE_13543_WORKER, AR_KILL);
        TELEPORTNPCTOWP(53930, "HARBOUR_SHIPYARD_06");
        B_LOGENTRY(TOPIC_QA401, LOG_QA401_WORKER_FIGHT);
    };
    if ((QA401_COUNTDESTROYEDOBJECT) == (4)) {
        QA401_WORKERRESULT = 2;
        B_LOGENTRY(TOPIC_QA401, LOG_QA401_WORKER_DESTROYED);
        QA401_COUNTTASKS();
    };
    B_GIVEPLAYERXP(XP_QA401_DESTROYWORKERSTUFF);
    SND_PLAY("DESTROY_WOOD");
    SND_PLAY("DOOR_SLAM");
}

func void EVT_QA401_CRATE_01() {
    QA401_WORKER_CHEST_01 = TRUE;
    MOB_CHANGEFOCUSNAME("QA401_CRATE_01", "MOBNAME_NOTHING");
    EVT_QA401_KICKOBJECT();
    FF_APPLYONCEEXTGT(91876, 0, -(1));
}

func void QA401_CRATE_01_KICKED() {
    var ZCMOVER MOVER2;
    var int MOVPTR2;
    var ZCMOVER MOVER1;
    var int MOVPTR1;
    var int QA401_CRATE_01_KICKED_APPLY;
    if ((QA401_CRATE_01_KICKED_APPLY) == (0)) {
        PRINTD("Rozpoczynam - QA401_CRATE_01_Kicked");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_CRATE_DESTROY_01");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_CRATE_01");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("QA401_CRATE_01", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_CRATE_DESTROY_01");
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_CRATE_01");
        QA401_CRATE_01_KICKED_APPLY = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Sko刃zy쓴m - QA401_CRATE_01_Kicked");
        CHANGEVOBCOLLISION("QA401_CRATE_01", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(91876);
        QA401_CRATE_01_KICKED_APPLY = 0;
    };
}

func void EVT_QA401_CRATE_02() {
    QA401_WORKER_CHEST_02 = TRUE;
    MOB_CHANGEFOCUSNAME("QA401_CRATE_02", "MOBNAME_NOTHING");
    EVT_QA401_KICKOBJECT();
    FF_APPLYONCEEXTGT(91883, 0, -(1));
}

func void QA401_CRATE_02_KICKED() {
    var ZCMOVER MOVER2;
    var int MOVPTR2;
    var ZCMOVER MOVER1;
    var int MOVPTR1;
    var int QA401_CRATE_02_KICKED_APPLY;
    if ((QA401_CRATE_02_KICKED_APPLY) == (0)) {
        PRINTD("Rozpoczynam - QA401_CRATE_02_Kicked");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_CRATE_DESTROY_02");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_CRATE_02");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("QA401_CRATE_02", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_CRATE_DESTROY_02");
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_CRATE_02");
        QA401_CRATE_02_KICKED_APPLY = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Sko刃zy쓴m - QA401_CRATE_02_Kicked");
        CHANGEVOBCOLLISION("QA401_CRATE_02", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(91883);
        QA401_CRATE_02_KICKED_APPLY = 0;
    };
}

func void EVT_QA401_BARREL_01() {
    QA401_WORKER_BARREL_01 = TRUE;
    MOB_CHANGEFOCUSNAME("QA401_BARREL_01", "MOBNAME_NOTHING");
    EVT_QA401_KICKOBJECT();
    FF_APPLYONCEEXTGT(91890, 0, -(1));
}

func void QA401_BARREL_01_KICKED() {
    var ZCMOVER MOVER2;
    var int MOVPTR2;
    var ZCMOVER MOVER1;
    var int MOVPTR1;
    var int QA401_BARREL_01_KICKED_APPLY;
    if ((QA401_BARREL_01_KICKED_APPLY) == (0)) {
        PRINTD("Rozpoczynam - QA401_BARREL_01_Kicked");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_BARREL_DESTROY_01");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_BARREL_01");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("QA401_BARREL_01", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_BARREL_DESTROY_01");
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_BARREL_01");
        QA401_BARREL_01_KICKED_APPLY = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Sko刃zy쓴m - QA401_BARREL_01_Kicked");
        CHANGEVOBCOLLISION("QA401_BARREL_01", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(91890);
        QA401_BARREL_01_KICKED_APPLY = 0;
    };
}

func void EVT_QA401_BARREL_02() {
    QA401_WORKER_BARREL_02 = TRUE;
    MOB_CHANGEFOCUSNAME("QA401_BARREL_02", "MOBNAME_NOTHING");
    EVT_QA401_KICKOBJECT();
    FF_APPLYONCEEXTGT(91897, 0, -(1));
}

func void QA401_BARREL_02_KICKED() {
    var ZCMOVER MOVER2;
    var ZCMOVER MOVER1;
    var int MOVPTR1;
    var int MOVPTR2;
    var int QA401_BARREL_02_KICKED_APPLY;
    if ((QA401_BARREL_02_KICKED_APPLY) == (0)) {
        PRINTD("Rozpoczynam - QA401_BARREL_02_Kicked");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_BARREL_DESTROY_01");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("QA401_MOVER_WORKER_BARREL_01");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("QA401_BARREL_02", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_BARREL_DESTROY_02");
        WLD_SENDTRIGGER("QA401_MOVER_WORKER_BARREL_02");
        QA401_BARREL_02_KICKED_APPLY = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Sko刃zy쓴m - QA401_BARREL_02_Kicked");
        CHANGEVOBCOLLISION("QA401_BARREL_02", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(91897);
        QA401_BARREL_02_KICKED_APPLY = 0;
    };
}

func void QA401_BIGCRATE_REFUSETOUSE() {
    AI_USEMOB(HERO, NPC_GETDETECTEDMOB(HERO), -(1));
    B_SAY(HERO, HERO, "$MARVIN_WRONGTIME");
}

func void QA401_BIGCRATE_USE() {
    MOB_CHANGEFOCUSNAME("QA401_BIGCRATE_02", "MOBNAME_NOTHING");
    AI_WAIT(HERO, 1069547520);
    AI_USEMOB(HERO, NPC_GETDETECTEDMOB(HERO), -(1));
    B_GIVEPLAYERXP(XP_QA401_DESTROYBRIDGECRATES);
    MOB_CHANGEFOCUSNAME("QA401_BIGCRATE_01", "MOBNAME_NOTHING");
    QA401_COUNTTASKS();
}

func void EVT_QA401_BIGCRATE_01() {
    if (WLD_ISTIME(20, 0, 3, 0)) {
        QA401_BRIDGEBIGCRATERESULT = 1;
        B_LOGENTRY(TOPIC_QA401, LOG_QA401_BRDIGE_FIRE);
        QA401_BIGCRATE_USE();
        SND_PLAY("TORCH_ENLIGHT");
        NPC_REMOVEINVITEM(HERO, 34742);
        WLD_SENDTRIGGER("QA401_MOVER_BRIDGE_FIRE");
        QA401_LEAVEGUILD_MOVER_01 = TRUE;
        QA401_REMOVEFIRECRATES();
    };
    QA401_BIGCRATE_REFUSETOUSE();
}

func void EVT_QA401_BIGCRATE_02() {
    if (WLD_ISTIME(20, 0, 3, 0)) {
        QA401_BRIDGEBIGCRATERESULT = 2;
        B_LOGENTRY(TOPIC_QA401, LOG_QA401_BRIDGE_POISON);
        QA401_BIGCRATE_USE();
        NPC_REMOVEINVITEM(HERO, 37111);
        QA401_REMOVEFIRECRATES();
    };
    QA401_BIGCRATE_REFUSETOUSE();
}

func void EVT_QA401_MEATBUG_LOGENTRY_01() {
    var int QA401_MEATBUG_LOGENTRY_01;
    if ((NPC_KNOWSINFO(HERO, 71462)) && ((HERO.GUILD) == (GIL_MEATBUG))) {
        if ((QA401_MEATBUG_LOGENTRY_01) == (FALSE)) {
            QA401_MEATBUG_LOGENTRY_01 = TRUE;
            B_LOGENTRY(TOPIC_QA401, LOG_QA401_MEATBUG_V1);
        };
    };
}

func void EVT_QA401_MEATBUG_LOGENTRY_04() {
    var int QA401_MEATBUG_LOGENTRY_04;
    if ((NPC_KNOWSINFO(HERO, 71462)) && ((HERO.GUILD) == (GIL_MEATBUG))) {
        if ((QA401_MEATBUG_LOGENTRY_04) == (FALSE)) {
            QA401_MEATBUG_LOGENTRY_04 = TRUE;
            B_LOGENTRY(TOPIC_QA401, LOG_QA401_MEATBUG_V4);
        };
    };
}

func void EVT_QA401_MEATBUG_TELEPORTARAXOS() {
    PRINTD("Araxos gotowe");
    NPC_CLEARAIQUEUE(SLD_1009_CARAMON);
    QA401_CARAMON_RTNCHECK = 2;
    NPC_EXCHANGEROUTINE(SLD_1009_CARAMON, "QA401_BEACH_WAIT2");
    TELEPORTNPCTOWP(51996, SLD_1009_CARAMON.WP);
    if ((MARVIN_ARAXOSSPECIALIZATION) == (ARAXOS_SPECIALIZATION_FIGHTER)) {
        NPC_CHANGEARMOR(SLD_1009_CARAMON, 35454);
    };
    if ((MARVIN_ARAXOSSPECIALIZATION) == (ARAXOS_SPECIALIZATION_ARCHER)) {
        NPC_CHANGEARMOR(SLD_1009_CARAMON, 35470);
    };
    NPC_CHANGEARMOR(SLD_1009_CARAMON, 35465);
    NPC_REMOVEINVITEMS(SLD_1009_CARAMON, 33907, 1);
    NPC_CLEARAIQUEUE(SLD_5002_SUNDER);
    QA401_SUNDER_RTNCHECK = 4;
    B_STARTOTHERROUTINE(SLD_5002_SUNDER, "QA401_BEACH_WAIT3");
    TELEPORTNPCTOWP(57718, SLD_5002_SUNDER.WP);
    NPC_CHANGEARMOR(SLD_5002_SUNDER, 35465);
    NPC_REMOVEINVITEMS(SLD_5002_SUNDER, 35572, 1);
    NPC_CLEARAIQUEUE(SLD_1000_ADELARD);
    QA401_ADELARD_RTNCHECK = 3;
    B_STARTOTHERROUTINE(SLD_1000_ADELARD, "QA401_BEACH_WAIT2");
    TELEPORTNPCTOWP(51978, SLD_1000_ADELARD.WP);
    NPC_CHANGEARMOR(SLD_1000_ADELARD, 35459);
    NPC_REMOVEINVITEMS(SLD_1000_ADELARD, 33907, 1);
    NPC_CLEARAIQUEUE(SLD_13548_ARAXOS);
    B_STARTOTHERROUTINE(SLD_13548_ARAXOS, "QA401_BEACH_WAIT2");
    TELEPORTNPCTOWP(55878, SLD_13548_ARAXOS.WP);
    NPC_CHANGEARMOR(SLD_13548_ARAXOS, 35454);
    NPC_REMOVEINVITEMS(SLD_13548_ARAXOS, 35571, 1);
    NPC_CLEARAIQUEUE(SLD_13549_ARAXOS);
    B_STARTOTHERROUTINE(SLD_13549_ARAXOS, "QA401_BEACH_WAIT2");
    TELEPORTNPCTOWP(55632, SLD_13549_ARAXOS.WP);
    NPC_CHANGEARMOR(SLD_13549_ARAXOS, 35470);
    NPC_REMOVEINVITEMS(SLD_13549_ARAXOS, 33906, 1);
}

func void EVT_QA401_KICKDOOR() {
    var int QA401_KICKDOOR_CHECK;
    if ((QA401_KICKDOOR_CHECK) == (FALSE)) {
        QA401_KICKDOOR_CHECK = TRUE;
        WLD_SENDTRIGGER("QA401_BROKENDOOR_01");
        WLD_SENDTRIGGER("QA401_BROKENDOOR_02");
        WLD_SENDTRIGGER("QA401_BROKENDOOR_03");
        WLD_PLAYEFFECT("FX_DUST", HERO, HERO, 0, 0, 0, FALSE);
        SND_PLAY("ROCKS_KICK_01");
        SND_PLAY("PLACEHOLDER_SlamDoor01");
        SND_PLAY("DESTROY_WOOD");
    };
}

func void EVT_QA401_DOOR() {
    var int QA401_DOOR_CHANGESMUGGLERS;
    if ((QA401_DOOR_CHANGESMUGGLERS) == (FALSE)) {
        QA401_DOOR_CHANGESMUGGLERS = TRUE;
        BDT_13564_SMUGGLER.FLAGS = 0;
        BDT_13565_SMUGGLER.FLAGS = 0;
        BDT_13566_SMUGGLER.FLAGS = 0;
        BDT_13567_SMUGGLER.FLAGS = 0;
        BDT_13568_SMUGGLER.FLAGS = 0;
        NPC_CLEARAIQUEUE(BDT_13564_SMUGGLER);
        B_STARTOTHERROUTINE(BDT_13564_SMUGGLER, START);
        TELEPORTNPCTOWP(55553, BDT_13564_SMUGGLER.WP);
        NPC_CLEARAIQUEUE(BDT_13565_SMUGGLER);
        B_STARTOTHERROUTINE(BDT_13565_SMUGGLER, START);
        TELEPORTNPCTOWP(55556, BDT_13565_SMUGGLER.WP);
        NPC_CLEARAIQUEUE(BDT_13566_SMUGGLER);
        B_STARTOTHERROUTINE(BDT_13566_SMUGGLER, START);
        TELEPORTNPCTOWP(55559, BDT_13566_SMUGGLER.WP);
        NPC_CLEARAIQUEUE(BDT_13567_SMUGGLER);
        B_STARTOTHERROUTINE(BDT_13567_SMUGGLER, START);
        TELEPORTNPCTOWP(55562, BDT_13567_SMUGGLER.WP);
        NPC_CLEARAIQUEUE(BDT_13568_SMUGGLER);
        B_STARTOTHERROUTINE(BDT_13568_SMUGGLER, START);
        TELEPORTNPCTOWP(55565, BDT_13568_SMUGGLER.WP);
    };
}

func void EVT_QA401_LEVER() {
    if ((QA401_LEVER_CHANGESMUGGLERS) == (FALSE)) {
        QA401_LEVER_CHANGESMUGGLERS = TRUE;
        QA401_FINAL_CUTSCENEENABLE = 1;
        WLD_SENDTRIGGER("QA401_SMUGGLERS_CRATE_01");
        WLD_SENDTRIGGER("QA401_SMUGGLERS_CRATE_02");
        WLD_SENDTRIGGER("QA401_SMUGGLERS_CHEST_01");
        B_LOGENTRY(TOPIC_QA401, LOG_QA401_FIGHT_LEVER);
        FF_APPLYONCEEXTGT(62912, 0, -(1));
        QA401_FIGHTSMUGGLERS_ROUND02();
    };
}

func void EVT_QA401_TOUCHPLATE() {
    if ((QA401_PABLOUSETOUCHPLATE) == (1)) {
        QA401_PABLOUSETOUCHPLATE = 2;
        QA401_FIGHTWITHBANDITS_SEWERS = 1;
        WLD_INSERTNPC(58963, "S1_QA401_ROOM_BANDIT_04");
        WLD_INSERTNPC(58972, "S1_QA401_ROOM_BANDIT_03");
        WLD_INSERTNPC(58969, "S1_QA401_ROOM_BANDIT_02");
        WLD_INSERTNPC(58966, "S1_QA401_ROOM_BANDIT_01");
    };
    WLD_SENDTRIGGER("QA401_WALL");
}

