func void ZS_MM_THREATENENEMY() {
    NPC_SETPERCTIME(SELF, 1073741824);
    NPC_PERCENABLE(SELF, PERC_ASSESSBODY, 91626);
    NPC_PERCENABLE(SELF, PERC_ASSESSMAGIC, 43309);
    NPC_PERCENABLE(SELF, PERC_ASSESSDAMAGE, 91628);
    NPC_PERCENABLE(SELF, PERC_ASSESSOTHERSDAMAGE, 91631);
    NPC_PERCENABLE(SELF, PERC_ASSESSMURDER, 91631);
    AI_STANDUP(SELF);
    NPC_SENDPASSIVEPERC(SELF, PERC_ASSESSWARN, OTHER, SELF);
}

func int ZS_MM_THREATENENEMY_LOOP() {
    if ((NPC_GETDISTTONPC(SELF, OTHER)) > (PERC_DIST_MONSTER_ACTIVE_MAX)) {
        NPC_CLEARAIQUEUE(SELF);
        return LOOP_END;
    };
    if ((NPC_GETDISTTONPC(SELF, OTHER)) <= (FIGHT_DIST_MONSTER_ATTACKRANGE)) {
        NPC_CLEARAIQUEUE(SELF);
        NPC_SETTARGET(SELF, OTHER);
        AI_STARTSTATE(SELF, 91674, 0, "");
        return LOOP_END;
    };
    if ((NPC_GETSTATETIME(SELF)) >= (MONSTER_THREATEN_TIME)) {
        NPC_CLEARAIQUEUE(SELF);
        NPC_SETTARGET(SELF, OTHER);
        AI_STARTSTATE(SELF, 91674, 0, "");
        return LOOP_END;
    };
    AI_TURNTONPC(SELF, OTHER);
    AI_PLAYANI(SELF, T_WARN);
    return LOOP_CONTINUE;
}

func void ZS_MM_THREATENENEMY_END() {
}

