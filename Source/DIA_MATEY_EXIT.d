instance DIA_MATEY_EXIT(C_INFO) {
    NPC = 52102;
    NR = 999;
    CONDITION = DIA_MATEY_EXIT_CONDITION;
    INFORMATION = DIA_MATEY_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_MATEY_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_MATEY_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_MATEY_Q202_START(C_INFO) {
    NPC = 52102;
    NR = 1;
    CONDITION = DIA_MATEY_Q202_START_CONDITION;
    INFORMATION = DIA_MATEY_Q202_START_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_MATEY_Q202_START_CONDITION() {
    if ((NPC_ISINSTATE(SELF, 61599)) && ((LOG_GETSTATUS(MIS_Q202)) == (LOG_RUNNING))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_Q202_START_INFO() {
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Start_03_01");
    INFO_CLEARCHOICES(73577);
    INFO_ADDCHOICE(73577, "The rest of those waiting let me pass.", 73582);
    INFO_ADDCHOICE(73577, "I don't have that much time, it's urgent.", 73581);
}

func void DIA_MATEY_Q202_START_NEXT() {
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Start_NoTime_03_03");
    INFO_CLEARCHOICES(73577);
    INFO_ADDCHOICE(73577, "I can read.", 73583);
}

func void DIA_MATEY_Q202_START_NOTIME() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Q202_Start_NoTime_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Start_NoTime_03_02");
    DIA_MATEY_Q202_START_NEXT();
}

func void DIA_MATEY_Q202_START_NOTIME_PASS() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Q202_Start_Pass_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Start_Pass_03_02");
    DIA_MATEY_Q202_START_NEXT();
}

func void DIA_MATEY_Q202_START_NOTIME_CANREAD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Q202_Start_CanRead_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Start_CanRead_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Start_CanRead_03_03");
    CREATEINVITEMS(SELF, 37069, 1);
    B_GIVEINVITEMS(SELF, OTHER, 37069, 1);
    AI_LOGENTRY(TOPIC_Q202, LOG_Q202_START);
    INFO_CLEARCHOICES(73577);
}

instance DIA_MATEY_Q202_QUESTIONS(C_INFO) {
    NPC = 52102;
    NR = 1;
    CONDITION = DIA_MATEY_Q202_QUESTIONS_CONDITION;
    INFORMATION = DIA_MATEY_Q202_QUESTIONS_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I have a few questions about citizenship...";
}

var int Q202_QUESTIONS_OLDSTYLE;
var int Q202_QUESTIONS_GOLD;
var int Q202_QUESTIONS_WHO;
func int DIA_MATEY_Q202_QUESTIONS_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q202)) == (LOG_RUNNING)) && ((Q202_LETTERREAD) == (TRUE))) {
        if ((((Q202_QUESTIONS_OLDSTYLE) == (FALSE)) || ((Q202_QUESTIONS_GOLD) == (FALSE))) || ((Q202_QUESTIONS_WHO) == (FALSE))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_Q202_QUESTIONS_CHOICES() {
    INFO_CLEARCHOICES(73584);
    INFO_ADDCHOICE(73584, DIALOG_BACK, 73590);
    if ((Q202_QUESTIONS_WHO) == (FALSE)) {
        INFO_ADDCHOICE(73584, "Who can give me a letter of recommendation?", 73597);
    };
    if ((Q202_QUESTIONS_GOLD) == (FALSE)) {
        INFO_ADDCHOICE(73584, "The citizenship is a big expense...", 73593);
    };
    if ((Q202_QUESTIONS_OLDSTYLE) == (FALSE)) {
        INFO_ADDCHOICE(73584, "From time immemorial, to become a citizen...", 73592);
    };
}

func void DIA_MATEY_Q202_QUESTIONS_BACK() {
    INFO_CLEARCHOICES(73584);
}

func void DIA_MATEY_Q202_QUESTIONS_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Q202_Questions_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Questions_03_02");
    DIA_MATEY_Q202_QUESTIONS_CHOICES();
}

func void DIA_MATEY_Q202_QUESTIONS_OLDSTYLE() {
    Q202_QUESTIONS_OLDSTYLE = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Q202_Questions_OldStyle_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Questions_OldStyle_03_02");
    CREATEINVITEMS(SELF, 37072, 1);
    B_GIVEINVITEMS(SELF, OTHER, 37072, 1);
    DIA_MATEY_Q202_QUESTIONS_CHOICES();
}

func void DIA_MATEY_Q202_QUESTIONS_GOLD() {
    Q202_QUESTIONS_GOLD = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Q202_Questions_Gold_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ226_Start_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ226_Start_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ226_Start_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ226_Start_03_05");
    CREATEINVITEMS(SELF, 34186, 1);
    B_GIVEINVITEMS(SELF, OTHER, 34186, 1);
    INFO_CLEARCHOICES(73584);
    INFO_ADDCHOICE(73584, "A broom?", 73595);
    INFO_ADDCHOICE(73584, "You want me to sweep your floor?", 73596);
}

func void DIA_MATEY_SQ226_START_CLEAN_NEXT() {
    AI_RESETFACEANI(OTHER);
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ226_Start_Next_03_01");
    INFO_CLEARCHOICES(73584);
}

func void DIA_MATEY_SQ226_START_BROOM() {
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ226_Start_Broom_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ226_Start_Broom_03_02");
    DIA_MATEY_SQ226_START_CLEAN_NEXT();
}

func void DIA_MATEY_SQ226_START_CLEAN() {
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ226_Start_Clean_15_01");
    if ((LOG_GETSTATUS(MIS_SQ105)) == (LOG_RUNNING)) {
        AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ226_Start_Clean_15_02");
    };
    DIA_MATEY_SQ226_START_CLEAN_NEXT();
}

func void DIA_MATEY_Q202_QUESTIONS_WHO() {
    Q202_QUESTIONS_WHO = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Q202_Questions_Who_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Questions_Who_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Questions_Who_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Questions_Who_03_04");
    AI_LOGENTRY(TOPIC_Q202, LOG_Q202_MATEY_WHO);
    DIA_MATEY_Q202_QUESTIONS_CHOICES();
}

instance DIA_MATEY_SQ226_WHERE(C_INFO) {
    NPC = 52102;
    NR = 1;
    CONDITION = DIA_MATEY_SQ226_WHERE_CONDITION;
    INFORMATION = DIA_MATEY_SQ226_WHERE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Where exactly should I go?";
}

func int DIA_MATEY_SQ226_WHERE_CONDITION() {
    if (((Q202_QUESTIONS_GOLD) == (TRUE)) && ((LOG_GETSTATUS(MIS_Q202)) != (LOG_SUCCESS))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_SQ226_WHERE_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ226_Where_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ226_Where_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ226_Where_03_03");
    LOG_CREATETOPIC(TOPIC_SQ226, LOG_MISSION);
    LOG_SETSTATUS(_@(MIS_SQ226), TOPIC_SQ226, LOG_RUNNING);
    AI_LOGENTRY(TOPIC_SQ226, LOG_SQ226_START);
}

instance DIA_MATEY_SQ226_CLEAN(C_INFO) {
    NPC = 52102;
    NR = 1;
    CONDITION = DIA_MATEY_SQ226_CLEAN_CONDITION;
    INFORMATION = DIA_MATEY_SQ226_CLEAN_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "As for the dirty streets...";
}

func int DIA_MATEY_SQ226_CLEAN_CONDITION() {
    if ((LOG_GETSTATUS(MIS_SQ226)) == (LOG_RUNNING)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_SQ226_CLEAN_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ226_Clean_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ226_Clean_03_02");
    if ((SQ226_JOBDONE) == (TRUE)) {
        AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ226_Clean_15_03");
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ226_Clean_03_04");
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ226_Clean_03_05");
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ226_Clean_03_06");
        if ((LOG_GETSTATUS(MIS_Q202)) != (LOG_SUCCESS)) {
            AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ226_Clean_03_07");
            AI_LOGENTRY(TOPIC_SQ226, LOG_SQ226_FINISH_V1);
        } else {
            AI_LOGENTRY(TOPIC_SQ226, LOG_SQ226_FINISH_V2);
        };
        LOG_SETSTATUS(_@(MIS_SQ226), TOPIC_SQ226, LOG_SUCCESS);
        B_GIVEPLAYERXP(XP_SQ226_FINISH);
        CREATEINVITEMS(SELF, 34203, SQ226_REWARD);
        B_GIVEINVITEMS(SELF, OTHER, 34203, SQ226_REWARD);
        AI_RESETFACEANI(SELF);
    };
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ226_Clean_15_08");
}

var int CQ001_IWANTTOBUYBOOK;
instance DIA_MATEY_CHESS(C_INFO) {
    NPC = 52102;
    NR = 10;
    CONDITION = DIA_MATEY_CHESS_CONDITION;
    INFORMATION = DIA_MATEY_CHESS_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I hear you like to play chess.";
}

func int DIA_MATEY_CHESS_CONDITION() {
    if (((LOG_GETSTATUS(MIS_CQ001)) == (LOG_RUNNING)) && ((CQ001_CHESSBOOK) == (1))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_CHESS_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Chess_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Chess_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Chess_03_03");
    INFO_CLEARCHOICES(73605);
    INFO_ADDCHOICE(73605, "Kuno sent me.", 73608);
}

func void DIA_MATEY_CHESS_KUNO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Chess_Kuno_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Chess_Kuno_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Chess_Kuno_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Chess_Kuno_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Chess_Kuno_03_05");
    INFO_CLEARCHOICES(73605);
    INFO_ADDCHOICE(73605, "Bloody expensive. I'm not paying.", 73611);
    if ((NPC_HASITEMS(OTHER, 34203)) >= (MATEY_CHESS_KUNOGOLD)) {
        INFO_ADDCHOICE(73605, "Here you go, here's 50 gold pieces.", 73610);
    };
}

func void DIA_MATEY_CHESS_LEON() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Chess_Leon_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Chess_Leon_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Chess_Leon_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Chess_Leon_03_04");
    INFO_CLEARCHOICES(73605);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_CQ001, LOG_CQ001_MATEYCHESS);
    CREATEINVITEMS(SELF, 37154, 1);
    B_GIVEINVITEMS(SELF, OTHER, 37154, 1);
    CQ001_CHESSBOOK = 2;
}

func void DIA_MATEY_CHESS_KUNO_GOLD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Chess_Gold_15_01");
    B_GIVEINVITEMS(OTHER, SELF, 34203, MATEY_CHESS_KUNOGOLD);
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Chess_Gold_03_02");
    CREATEINVITEMS(SELF, 37154, 1);
    B_GIVEINVITEMS(SELF, OTHER, 37154, 1);
    INFO_CLEARCHOICES(73605);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_CQ001, LOG_CQ001_MATEYCHESSV2);
    CQ001_CHESSBOOK = 2;
}

func void DIA_MATEY_CHESS_KUNO_NOWAY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Chess_NoWay_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Chess_NoWay_03_02");
    CQ001_IWANTTOBUYBOOK = TRUE;
    INFO_CLEARCHOICES(73605);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_CQ001, LOG_CQ001_MATEYGREED);
    CQ001_CHESSBOOK = 3;
}

instance DIA_MATEY_CHESSBOOK(C_INFO) {
    NPC = 52102;
    NR = 11;
    CONDITION = DIA_MATEY_CHESSBOOK_CONDITION;
    INFORMATION = DIA_MATEY_CHESSBOOK_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Here you go, here's 50 gold pieces.";
}

func int DIA_MATEY_CHESSBOOK_CONDITION() {
    if (((((LOG_GETSTATUS(MIS_CQ001)) == (LOG_RUNNING)) && ((CQ001_CHESSBOOK) == (1))) && ((CQ001_IWANTTOBUYBOOK) == (TRUE))) && ((NPC_HASITEMS(OTHER, 34203)) >= (MATEY_CHESS_KUNOGOLD))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_CHESSBOOK_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Chess_Gold_15_01");
    B_GIVEINVITEMS(OTHER, SELF, 34203, MATEY_CHESS_KUNOGOLD);
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Chess_Gold_03_02");
    CREATEINVITEMS(SELF, 37154, 1);
    B_GIVEINVITEMS(SELF, OTHER, 37154, 1);
    INFO_CLEARCHOICES(73605);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_CQ001, LOG_CQ001_MATEYCHESSV2);
    CQ001_CHESSBOOK = 2;
}

instance DIA_MATEY_Q202_FINISH(C_INFO) {
    NPC = 52102;
    NR = 1;
    CONDITION = DIA_MATEY_Q202_FINISH_CONDITION;
    INFORMATION = DIA_MATEY_Q202_FINISH_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "As for the collected letters of recommendation...";
}

func int DIA_MATEY_Q202_FINISH_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q202)) == (LOG_RUNNING)) && ((Q202_LETTERREAD) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_Q202_FINISH_PASS() {
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_15");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_16");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_17");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_18");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_19");
    Q202_FINISHQUEST();
    AI_FUNCTION(SELF, 61977);
}

func void DIA_MATEY_Q202_FINISH_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Q202_Finish_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_02");
    if ((NPC_HASITEMS(OTHER, 37155)) >= (1)) {
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_03");
        Q202_CITIZENDONECOUNT = (Q202_CITIZENDONECOUNT) + (1);
    };
    if ((NPC_HASITEMS(OTHER, 37156)) >= (1)) {
        AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_04");
        Q202_CITIZENDONECOUNT = (Q202_CITIZENDONECOUNT) + (1);
    };
    if ((NPC_HASITEMS(OTHER, 37158)) >= (1)) {
        AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_05");
        Q202_CITIZENDONECOUNT = (Q202_CITIZENDONECOUNT) + (1);
    };
    if ((NPC_HASITEMS(OTHER, 37166)) >= (1)) {
        AI_STARTFACEANI(SELF, S_THINK, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_06");
        Q202_CITIZENDONECOUNT = (Q202_CITIZENDONECOUNT) + (1);
    };
    if ((NPC_HASITEMS(OTHER, 37163)) >= (1)) {
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_07");
        Q202_CITIZENDONECOUNT = (Q202_CITIZENDONECOUNT) + (1);
    };
    if ((NPC_HASITEMS(OTHER, 37165)) >= (1)) {
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_08");
        Q202_CITIZENDONECOUNT = (Q202_CITIZENDONECOUNT) + (1);
    };
    if ((NPC_HASITEMS(OTHER, 37419)) >= (1)) {
        AI_STARTFACEANI(SELF, T_HURT, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_09");
        Q202_CITIZENDONECOUNT = (Q202_CITIZENDONECOUNT) + (1);
    };
    if ((NPC_HASITEMS(OTHER, 37162)) >= (1)) {
        AI_STARTFACEANI(SELF, S_THINK, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_10");
        Q202_CITIZENDONECOUNT = (Q202_CITIZENDONECOUNT) + (1);
    };
    if ((LOG_GETSTATUS(MIS_SQ226)) == (LOG_SUCCESS)) {
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_20");
    };
    if ((Q202_CITIZENDONECOUNT) == (0)) {
        AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_11");
    };
    if ((Q202_CITIZENDONECOUNT) < (3)) {
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_12");
        Q202_CITIZENDONECOUNT = 0;
    };
    if ((Q202_CITIZENDONECOUNT) >= (3)) {
        Q202_GIVEBOOKS();
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        if ((LOG_GETSTATUS(MIS_SQ226)) == (LOG_SUCCESS)) {
            DIA_MATEY_Q202_FINISH_PASS();
        } else {
            Q202_CANPAYGOLD = TRUE;
            AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_12");
            AI_OUTPUT(OTHER, SELF, "DIA_Matey_Q202_Finish_15_13");
            AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Finish_03_14");
        };
    };
    AI_RESETFACEANI(SELF);
}

instance DIA_MATEY_Q202_PAY(C_INFO) {
    NPC = 52102;
    NR = 1;
    CONDITION = DIA_MATEY_Q202_PAY_CONDITION;
    INFORMATION = DIA_MATEY_Q202_PAY_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I want to make a payment for citizenship. (200 GP)";
}

func int DIA_MATEY_Q202_PAY_CONDITION() {
    if (((Q202_CANPAYGOLD) == (TRUE)) && ((LOG_GETSTATUS(MIS_Q202)) == (LOG_RUNNING))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_Q202_PAY_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Q202_Pay_15_01");
    if ((LOG_GETSTATUS(MIS_SQ226)) == (LOG_SUCCESS)) {
        AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_Pay_03_02");
        DIA_MATEY_Q202_FINISH_PASS();
    };
    if ((NPC_HASITEMS(OTHER, 34203)) >= (Q202_PRICE)) {
        B_GIVEINVITEMS(OTHER, SELF, 34203, Q202_PRICE);
        DIA_MATEY_Q202_FINISH_PASS();
    };
    B_SAY(SELF, OTHER, "$NOGOLD");
}

instance DIA_MATEY_Q202_OLDCITY(C_INFO) {
    NPC = 52102;
    NR = 1;
    CONDITION = DIA_MATEY_Q202_OLDCITY_CONDITION;
    INFORMATION = DIA_MATEY_Q202_OLDCITY_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I was thinking of looking for a job in Old Town.";
}

func int DIA_MATEY_Q202_OLDCITY_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q202)) == (LOG_SUCCESS)) && ((OLDCITYENTERED) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_Q202_OLDCITY_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Q202_OldCity_15_01");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_OldCity_03_02");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_OldCity_03_03");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_OldCity_03_04");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q202_OldCity_03_05");
    AI_RESETFACEANI(SELF);
}

instance DIA_MATEY_SQ225_TESTAMENT(C_INFO) {
    NPC = 52102;
    NR = 1;
    CONDITION = DIA_MATEY_SQ225_TESTAMENT_CONDITION;
    INFORMATION = DIA_MATEY_SQ225_TESTAMENT_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I come about the conflict of Valerio's sons.";
}

func int DIA_MATEY_SQ225_TESTAMENT_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ225)) == (LOG_RUNNING)) && ((SQ225_VALERIOTESTAMENT) == (1))) && ((NPC_HASITEMS(OTHER, 37093)) >= (2))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_SQ225_TESTAMENT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_15_05");
    AI_STARTFACEANI(SELF, S_SURPRISE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_03_06");
    B_STANDUP();
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_03_07");
    NPC_REMOVEINVITEMS(SELF, 37093, 2);
    B_USEFAKESCROLL();
    B_GIVEINVITEMS(OTHER, SELF, 37093, 2);
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_03_08");
    INFO_CLEARCHOICES(73625);
    INFO_ADDCHOICE(73625, "Liam had it.", 73629);
    INFO_ADDCHOICE(73625, "What does it matter?", 73630);
    INFO_ADDCHOICE(73625, "I found in the vineyard area.", 73628);
}

func void DIA_MATEY_SQ225_TESTAMENT_FOUNDIT() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_FoundIt_15_01");
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_FoundIt_03_02");
}

func void DIA_MATEY_SQ225_TESTAMENT_LIAM() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_Liam_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_Liam_15_02");
    AI_STARTFACEANI(SELF, S_SMUG, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_Liam_03_03");
    AI_STARTFACEANI(SELF, S_WHAT, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_Liam_03_04");
    AI_RESETFACEANI(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_Liam_03_05");
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_Liam_15_06");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_Liam_03_07");
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_Liam_15_08");
    AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_Liam_03_09");
    INFO_CLEARCHOICES(73625);
    INFO_ADDCHOICE(73625, "It's Venzel's work.", 73635);
    INFO_ADDCHOICE(73625, "I can't disclose my associate.", 73631);
}

func void DIA_MATEY_SQ225_TESTAMENT_WHY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_Why_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_Why_15_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_Why_03_03");
}

func void DIA_MATEY_SQ225_TESTAMENT_LIAM_NO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_No_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_No_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_No_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_No_03_04");
    INFO_CLEARCHOICES(73625);
    INFO_ADDCHOICE(73625, "I'll bring it later.", 73636);
    if ((NPC_HASITEMS(OTHER, 34203)) >= (SQ225_MATEY_PAYFORWORK)) {
        INFO_ADDCHOICE(73625, "All right, here. (100 GP)", 73634);
    };
}

func void DIA_MATEY_SQ225_TESTAMENT_END() {
    B_STANDUP();
    B_USEFAKESCROLL();
    CREATEINVITEMS(SELF, 37096, 1);
    B_GIVEINVITEMS(SELF, OTHER, 37096, 1);
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_Here_03_03");
    if ((SQ225_VENZELINTROUBLE) == (TRUE)) {
        AI_STARTFACEANI(SELF, S_SERIOUS, 1, -(1));
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_Venzel_03_03");
    };
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_Here_15_04");
    AI_RESETFACEANI(OTHER);
    INFO_CLEARCHOICES(73625);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_SQ225, LOG_SQ225_MATEY_TESTAMENTREADY);
}

var int MATEY_SQ225_YOURGOLD;
func void DIA_MATEY_SQ225_TESTAMENT_LIAM_NO_HERE() {
    MATEY_SQ225_YOURGOLD = 0;
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_Here_15_01");
    B_GIVEINVITEMS(OTHER, SELF, 34203, SQ225_MATEY_PAYFORWORK);
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_Here_03_02");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    DIA_MATEY_SQ225_TESTAMENT_END();
}

func void DIA_MATEY_SQ225_TESTAMENT_LIAM_VENZEL() {
    SQ225_REMOVEVENZELFRIEND();
    SQ225_VENZELINTROUBLE = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_Venzel_15_01");
    AI_STARTFACEANI(SELF, S_SMILE, 1, -(1));
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_Venzel_03_02");
    DIA_MATEY_SQ225_TESTAMENT_END();
}

func void DIA_MATEY_SQ225_TESTAMENT_LIAM_NO_LATER() {
    MATEY_SQ225_YOURGOLD = 1;
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ225_Testament_Later_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ225_Testament_Later_03_02");
    INFO_CLEARCHOICES(73625);
}

instance DIA_MATEY_SQ225_YOURGOLD(C_INFO) {
    NPC = 52102;
    NR = 1;
    CONDITION = DIA_MATEY_SQ225_YOURGOLD_CONDITION;
    INFORMATION = DIA_MATEY_SQ225_YOURGOLD_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "All right, here. (100 GP)";
}

func int DIA_MATEY_SQ225_YOURGOLD_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ225)) == (LOG_RUNNING)) && ((MATEY_SQ225_YOURGOLD) == (1))) && ((NPC_HASITEMS(OTHER, 34203)) >= (SQ225_MATEY_PAYFORWORK))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_SQ225_YOURGOLD_INFO() {
    DIA_MATEY_SQ225_TESTAMENT_LIAM_NO_HERE();
}

instance DIA_MATEY_SQ309(C_INFO) {
    NPC = 52102;
    NR = 1;
    CONDITION = DIA_MATEY_SQ309_CONDITION;
    INFORMATION = DIA_MATEY_SQ309_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Hello, Matey, I'm here about the papers.";
}

func int DIA_MATEY_SQ309_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ309)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 75597))) && ((SQ309_MARVINSAWDOCUMENTABOUTMAILOR) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_SQ309_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ309_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ309_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ309_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ309_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ309_15_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ309_03_06");
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ309_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ309_03_08");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ309_03_09");
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ309_15_10");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ309_03_11");
    INFO_CLEARCHOICES(73640);
    INFO_ADDCHOICE(73640, "I don't have that much on me.", 73644);
    if ((NPC_HASITEMS(OTHER, 34203)) >= (SQ309_MATEYINFORMATION)) {
        INFO_ADDCHOICE(73640, "Here's the payment. (25 GP)", 73643);
    };
}

func void DIA_MATEY_SQ309_GOLD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ309_Gold_15_01");
    B_GIVEINVITEMS(OTHER, SELF, 34203, SQ309_MATEYINFORMATION);
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ309_Gold_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ309_Gold_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ309_Gold_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ309_Gold_03_05");
    AI_LOGENTRY(TOPIC_SQ309, LOG_SQ309_MAILORDOC);
    SQ309_MARVINSAWDOCUMENTABOUTMAILOR = TRUE;
    INFO_CLEARCHOICES(73640);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_MATEY_SQ309_NOGOLD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_SQ309_NoGold_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ309_NoGold_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_SQ309_NoGold_03_03");
    INFO_CLEARCHOICES(73640);
    SQ309_NEEDMONEYMATEY = TRUE;
}

instance DIA_MATEY_YOURGOLD(C_INFO) {
    NPC = 52102;
    NR = 1;
    CONDITION = DIA_MATEY_YOURGOLD_CONDITION;
    INFORMATION = DIA_MATEY_YOURGOLD_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Here's the payment. (25 GP)";
}

func int DIA_MATEY_YOURGOLD_CONDITION() {
    if ((((LOG_GETSTATUS(MIS_SQ309)) == (LOG_RUNNING)) && (NPC_KNOWSINFO(OTHER, 73640))) && ((SQ309_NEEDMONEYMATEY) == (TRUE))) {
        if ((NPC_HASITEMS(OTHER, 34203)) >= (SQ309_MATEYINFORMATION)) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_YOURGOLD_INFO() {
    DIA_MATEY_SQ309_GOLD();
}

instance DIA_MATEY_Q311(C_INFO) {
    NPC = 52102;
    NR = 1;
    CONDITION = DIA_MATEY_Q311_CONDITION;
    INFORMATION = DIA_MATEY_Q311_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Do you also accept private assignments?";
}

func int DIA_MATEY_Q311_CONDITION() {
    if ((LOG_GETSTATUS(MIS_Q311)) == (LOG_RUNNING)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_Q311_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Q311_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q311_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q311_03_03");
    INFO_CLEARCHOICES(73648);
    INFO_ADDCHOICE(73648, "I'm looking for the author of certain pamphlets.", 73652);
    INFO_ADDCHOICE(73648, "Who accepts writing assignments?", 73653);
}

func void DIA_MATEY_Q311_END() {
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q311_Author_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q311_Author_03_04");
    INFO_CLEARCHOICES(73648);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_MATEY_Q311_AUTHOR() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Q311_Author_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q311_Author_03_02");
    DIA_MATEY_Q311_END();
    AI_LOGENTRY(TOPIC_Q311, LOG_Q311_MATEY_INFO_V1);
}

func void DIA_MATEY_Q311_WHO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Q311_Who_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q311_Who_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Matey_Q311_Who_03_03");
    DIA_MATEY_Q311_END();
    AI_LOGENTRY(TOPIC_Q311, LOG_Q311_MATEY_INFO_V2);
}

instance DIA_MATEY_AMBIENT(C_INFO) {
    NPC = 52102;
    NR = 850;
    CONDITION = DIA_MATEY_AMBIENT_CONDITION;
    INFORMATION = DIA_MATEY_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How's the work going?";
}

func int DIA_MATEY_AMBIENT_CONDITION() {
    return TRUE;
}

func void DIA_MATEY_AMBIENT_INFO() {
    NPC_INITAMBIENTS(SELF, 2);
    AI_OUTPUT(OTHER, SELF, "DIA_Matey_Ambient_15_01");
    if ((NPC_GETLASTAMBIENT(SELF)) == (1)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Ambient_03_02");
    };
    if ((NPC_GETLASTAMBIENT(SELF)) == (2)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Ambient_03_03");
        AI_OUTPUT(SELF, OTHER, "DIA_Matey_Ambient_03_04");
    };
}

instance DIA_MATEY_PICKPOCKET(C_INFO) {
    NPC = 52102;
    NR = 900;
    CONDITION = DIA_MATEY_PICKPOCKET_CONDITION;
    INFORMATION = DIA_MATEY_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_80;
}

func int DIA_MATEY_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_MATEY_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(73657);
    INFO_ADDCHOICE(73657, DIALOG_BACK, 73661);
    INFO_ADDCHOICE(73657, DIALOG_PICKPOCKET, 73660);
}

func void DIA_MATEY_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (2)) {
        CREATEINVITEMS(SELF, 35988, 2);
        B_GIVEINVITEMS(SELF, OTHER, 35988, 2);
        B_PICKPOCKET_AMBIENT_TIER_2();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(73657);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(73657);
}

func void DIA_MATEY_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(73657);
}

