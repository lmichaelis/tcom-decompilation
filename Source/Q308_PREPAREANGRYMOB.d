func void Q308_PREPAREANGRYMOB() {
    WLD_INSERTNPC(51653, "PARTM5_ANGRYMOB_01");
    WLD_INSERTNPC(51657, "PARTM5_ANGRYMOB_03");
    WLD_INSERTNPC(51661, "PARTM5_ANGRYMOB_07");
    WLD_INSERTNPC(51665, "PARTM5_ANGRYMOB_08");
    WLD_INSERTNPC(51669, "PARTM5_ANGRYMOB_11");
    WLD_INSERTNPC(51673, "PARTM5_ANGRYMOB_12");
    WLD_INSERTNPC(51677, "PARTM5_ANGRYMOB_13");
    WLD_INSERTNPC(51681, "PARTM5_ANGRYMOB_14");
    WLD_INSERTNPC(51685, "PARTM5_ANGRYMOB_17");
    WLD_INSERTNPC(51689, "PARTM5_ANGRYMOB_18");
    WLD_INSERTNPC(51693, "PARTM5_ANGRYMOB_19");
    WLD_INSERTNPC(51697, "PARTM5_ANGRYMOB_20");
    WLD_INSERTNPC(51701, "PARTM5_ANGRYMOB_21");
    WLD_INSERTNPC(51705, "PARTM5_ANGRYMOB_25");
    WLD_INSERTNPC(51709, "PARTM5_ANGRYMOB_26");
    WLD_INSERTNPC(51713, "PARTM5_ANGRYMOB_27");
    WLD_INSERTNPC(51717, "PARTM5_ANGRYMOB_28");
    WLD_INSERTNPC(51721, "PARTM5_ANGRYMOB_29");
    WLD_INSERTNPC(51725, "PARTM5_ANGRYMOB_30");
    WLD_INSERTNPC(51729, "PARTM5_ANGRYMOB_31");
    WLD_INSERTNPC(51733, "PARTM5_ANGRYMOB_32");
    WLD_INSERTNPC(51737, "PARTM5_ANGRYMOB_33");
    WLD_INSERTNPC(51741, "PARTM5_ANGRYMOB_34");
    WLD_INSERTNPC(51745, "PARTM5_ANGRYMOB_38");
    WLD_INSERTNPC(51749, "PARTM5_ANGRYMOB_39");
    WLD_INSERTNPC(51753, "PARTM5_ANGRYMOB_40");
    WLD_INSERTNPC(51757, "PARTM5_ANGRYMOB_41");
    WLD_INSERTNPC(51641, "PARTM5_ANGRYMOB_GUARD_03");
    WLD_INSERTNPC(51644, "PARTM5_ANGRYMOB_GUARD_04");
    WLD_INSERTNPC(51647, "PARTM5_ANGRYMOB_GUARD_05");
    WLD_INSERTNPC(51650, "PARTM5_ANGRYMOB_GUARD_06");
    WLD_SENDTRIGGER("Q308_CROWD_ANGRY");
}

func void Q308_SPAWNNPC() {
    FF_APPLYONCEEXT(63745, 2000, 11);
}

func void Q308_SPAWNNPC_APPLY() {
    var int Q308_SPAWNNPC_COUNT;
    Q308_SPAWNNPC_COUNT = (Q308_SPAWNNPC_COUNT) + (1);
    if ((Q308_SPAWNNPC_COUNT) == (1)) {
        B_STARTOTHERROUTINE(MIL_6402_GUIDO, START);
        WLD_SENDTRIGGER("KM_MOVER_GRAFITI");
        WLD_SENDTRIGGER("KM_BLOODFLASK_MOVER");
        B_STARTOTHERROUTINE(MIL_6385_SAMBOR, "ATTEMPT");
        B_STARTOTHERROUTINE(VLK_6388_MORRIS, "ATTEMPT");
        B_STARTOTHERROUTINE(MIL_6392_MILITIA, "ATTEMPT");
        B_STARTOTHERROUTINE(MIL_6393_MILITIA, "ATTEMPT");
        B_STARTOTHERROUTINE(MIL_4020_CITYGUARD, "ATTEMPT");
        B_STARTOTHERROUTINE(NONE_2246_BRADLOCK, "Q308");
        B_STARTOTHERROUTINE(NONE_6396_VOLKERGUARD, "Q308");
        B_STARTOTHERROUTINE(NONE_6397_VOLKERGUARD, "Q308");
        B_STARTOTHERROUTINE(NONE_13748_VOLKERGUARD, "Q308");
        WLD_INSERTNPC(53494, "PARTM4_PATH_101");
        WLD_INSERTNPC(53497, "PARTM4_PATH_101");
        WLD_INSERTNPC(53500, "PARTM4_PATH_101");
        WLD_INSERTNPC(53503, "PARTM4_PATH_101");
        WLD_INSERTNPC(53506, "PARTM4_PATH_101");
        WLD_INSERTNPC(53460, "PARTM4_PATH_101");
        WLD_INSERTNPC(53463, "PARTM4_PATH_101");
    };
    if ((Q308_SPAWNNPC_COUNT) == (3)) {
        B_STARTOTHERROUTINE(VLK_6454_DANIS, "Q308");
        B_STARTOTHERROUTINE(VLK_6503_GOLAR, "Q308");
    };
    if ((Q308_SPAWNNPC_COUNT) == (5)) {
        Q308_PREPAREANGRYMOB();
    };
    if ((Q308_SPAWNNPC_COUNT) == (7)) {
        B_STARTOTHERROUTINE(KDF_11263_FIREMAGE, "Q308");
        B_STARTOTHERROUTINE(KDW_13875_WATERMAGE, "Q308");
        B_STARTOTHERROUTINE(NOV_13819_NOVIZE, "Q308");
        B_STARTOTHERROUTINE(NOV_13818_NOVIZE, "Q308");
        B_STARTOTHERROUTINE(VLK_3002_HERSHLIK, "WORK");
    };
    if ((Q308_SPAWNNPC_COUNT) == (9)) {
        FF_APPLYONCEEXTGT(63793, 0, -(1));
    };
    if ((Q308_SPAWNNPC_COUNT) == (11)) {
        Q308_SPAWNNPC_COUNT = 0;
        WLD_INSERTNPC(54695, "HARBOUR_Q308_ARAXOS_01");
        WLD_INSERTNPC(54698, "HARBOUR_Q308_ARAXOS_02");
        WLD_INSERTNPC(54641, "HARBOUR_Q308_REFUGEE_01");
        WLD_INSERTNPC(54644, "HARBOUR_Q308_REFUGEE_02");
        WLD_INSERTNPC(54647, "HARBOUR_Q308_REFUGEE_03");
        WLD_INSERTNPC(54650, "HARBOUR_Q308_REFUGEE_04");
        WLD_INSERTNPC(54653, "HARBOUR_Q308_REFUGEE_05");
        WLD_INSERTNPC(54656, "HARBOUR_Q308_REFUGEE_06");
        WLD_INSERTNPC(54611, "HARBOUR_Q308_MILITIA_01");
        WLD_INSERTNPC(54614, "HARBOUR_Q308_MILITIA_02");
        WLD_INSERTNPC(54659, "HARBOUR_Q308_REFUGEE_07");
        WLD_INSERTNPC(54662, "HARBOUR_Q308_REFUGEE_08");
        WLD_INSERTNPC(54665, "HARBOUR_Q308_REFUGEE_09");
        WLD_INSERTNPC(54668, "HARBOUR_Q308_REFUGEE_10");
        WLD_INSERTNPC(54671, "HARBOUR_Q308_REFUGEE_11");
        WLD_INSERTNPC(54608, "HARBOUR_Q308_MILITIA_03");
        WLD_INSERTNPC(54605, "HARBOUR_Q308_MILITIA_04");
        WLD_INSERTNPC(54704, "HARBOUR_Q308_ARAXOS_03");
        WLD_INSERTNPC(54701, "HARBOUR_Q308_ARAXOS_04");
        WLD_INSERTNPC(54707, "HARBOUR_Q308_ARAXOS_05");
        WLD_INSERTNPC(54710, "HARBOUR_KQ404_EURIC");
        WLD_INSERTNPC(54674, "HARBOUR_Q308_REFUGEE_12");
        WLD_INSERTNPC(54677, "HARBOUR_Q308_REFUGEE_13");
        WLD_INSERTNPC(54680, "HARBOUR_Q308_REFUGEE_14");
        WLD_INSERTNPC(54713, "HARBOUR_Q308_ARAXOS_06");
        WLD_INSERTNPC(54716, "HARBOUR_Q308_ARAXOS_07");
        WLD_INSERTNPC(54719, "HARBOUR_Q308_ARAXOS_08");
        WLD_INSERTNPC(54683, "HARBOUR_Q308_REFUGEE_15");
        WLD_INSERTNPC(54686, "HARBOUR_Q308_REFUGEE_16");
        WLD_INSERTNPC(54689, "HARBOUR_Q308_REFUGEE_17");
        WLD_INSERTNPC(54692, "HARBOUR_Q308_REFUGEE_18");
        WLD_INSERTNPC(55299, "SLUMS_Q308_REFUGEE_02");
        WLD_INSERTNPC(55302, "SLUMS_Q308_REFUGEE_01");
        WLD_INSERTNPC(55183, "SLUMS_Q308_MILITIA_01");
        WLD_INSERTNPC(55305, "SLUMS_Q308_REFUGEE_03");
        WLD_INSERTNPC(55308, "SLUMS_Q308_REFUGEE_04");
        WLD_INSERTNPC(55314, "SLUMS_Q308_REFUGEE_05");
        WLD_INSERTNPC(55311, "SLUMS_Q308_REFUGEE_06");
        WLD_INSERTNPC(55186, "SLUMS_Q308_MILITIA_02");
        WLD_INSERTNPC(55192, "SLUMS_Q308_MILITIA_03");
        WLD_INSERTNPC(55189, "SLUMS_Q308_MILITIA_04");
        WLD_INSERTNPC(52309, "PARTM2_GATEGUARD_07");
        WLD_INSERTNPC(52312, "PARTM2_GATEGUARD_01");
        WLD_INSERTNPC(52315, "PARTM2_GATEGUARD_04");
        WLD_INSERTNPC(52318, "PARTM2_GATEGUARD_02");
        WLD_INSERTNPC(52321, "PARTM2_GATEGUARD_08");
        WLD_INSERTNPC(52334, "PARTM2_CONTROL_25");
        WLD_INSERTNPC(52337, "PARTM2_CONTROL_26");
        WLD_INSERTNPC(52340, "PARTM2_CONTROL_27");
        WLD_INSERTNPC(52343, "PARTM2_CONTROL_28");
        WLD_INSERTNPC(52324, "PARTM2_GATEGUARD_09");
        WLD_INSERTNPC(53302, "PARTM4_GUARD_Q308_02");
        WLD_INSERTNPC(53305, "PARTM4_GUARD_Q308_01");
        WLD_INSERTNPC(53308, "PARTM4_GUARD_Q308_03");
        WLD_INSERTNPC(53311, "PARTM4_GUARD_Q308_04");
        WLD_INSERTNPC(53320, "PARTM4_CITIZEN_Q308_01");
        WLD_INSERTNPC(53323, "PARTM4_CITIZEN_Q308_02");
    };
}

func void Q308_PREPAREIVY() {
    B_STARTOTHERROUTINE(NONE_16_IVY, "ATTEMPT");
    B_STARTOTHERROUTINE(VLK_6127_KUNO, "ATTEMPT");
    B_STARTOTHERROUTINE(VLK_6128_LEON, "ATTEMPT");
    B_STARTOTHERROUTINE(BAU_701_KURT, "Q308_ATTEMPT");
    WLD_INSERTNPC(53480, "PARTM4_PATH_110");
    WLD_INSERTNPC(53019, "PARTM3_PRISON_ARS");
    Q312_OPENSEWERS();
}

func void Q308_KUNOLEONCUTSCENE_PREPARE() {
    FF_APPLYONCEEXT(63749, 75, 4);
}

func void Q308_KUNOLEONCUTSCENE_APPLY() {
    var int Q308_KUNOLEONCUTSCENE_COUNT;
    Q308_KUNOLEONCUTSCENE_COUNT = (Q308_KUNOLEONCUTSCENE_COUNT) + (1);
    if ((Q308_KUNOLEONCUTSCENE_COUNT) == (4)) {
        Q308_KUNOLEONCUTSCENE_COUNT = 0;
        CUTSCENE_START(92567);
    };
}

func void Q308_CIVILIANRETURNRTN() {
    B_STARTOTHERROUTINE(VLK_6127_KUNO, "OLDCITY");
    NPC_REFRESH(VLK_6127_KUNO);
    B_STARTOTHERROUTINE(VLK_6128_LEON, "OLDCITY");
    NPC_REFRESH(VLK_6128_LEON);
    B_STARTOTHERROUTINE(VLK_13936_Q308_CITIZEN, TOT);
    NPC_REFRESH(VLK_13936_Q308_CITIZEN);
    B_STARTOTHERROUTINE(VLK_13937_Q308_CITIZEN, TOT);
    NPC_REFRESH(VLK_13937_Q308_CITIZEN);
    B_STARTOTHERROUTINE(VLK_13938_Q308_CITIZEN, TOT);
    NPC_REFRESH(VLK_13938_Q308_CITIZEN);
    B_STARTOTHERROUTINE(VLK_13939_Q308_CITIZEN, TOT);
    NPC_REFRESH(VLK_13939_Q308_CITIZEN);
    B_STARTOTHERROUTINE(VLK_13940_Q308_CITIZEN, TOT);
    NPC_REFRESH(VLK_13940_Q308_CITIZEN);
    B_STARTOTHERROUTINE(BAU_701_KURT, "SQ116_HARBOUR");
    NPC_REFRESH(BAU_701_KURT);
    B_STARTOTHERROUTINE(MIL_6394_MILITIA, CUTSCENERTN);
    NPC_REFRESH(MIL_6394_MILITIA);
}

func void Q308_MILITIARETURNRTN() {
    if ((Q308_MILITIALEAVEPLACE) == (FALSE)) {
        Q308_MILITIALEAVEPLACE = TRUE;
        B_STARTOTHERROUTINE(MIL_6385_SAMBOR, "Q308_OUTSIDE");
        NPC_REFRESH(MIL_6385_SAMBOR);
        B_STARTOTHERROUTINE(MIL_6387_MILITIA, "MORRISHOUSE");
        NPC_REFRESH(MIL_6387_MILITIA);
        B_STARTOTHERROUTINE(MIL_6394_MILITIA, "MORRISHOUSE");
        NPC_REFRESH(MIL_6394_MILITIA);
        B_STARTOTHERROUTINE(VLK_6395_BERNAND, "CLEANWALL");
        NPC_REFRESH(VLK_6395_BERNAND);
        NPC_EXCHANGEROUTINE(VLK_6388_MORRIS, "Q308");
    };
}

func void Q308_PREPAREVOLKERMANS() {
    TELEPORTNPCTOWP(53358, NONE_2246_BRADLOCK.WP);
    B_STARTOTHERROUTINE(NONE_6386_MADOG, "Q308_SMALLTALK");
    NPC_REFRESH(NONE_6386_MADOG);
    TELEPORTNPCTOWP(53368, NONE_6386_MADOG.WP);
    B_STARTOTHERROUTINE(NONE_16_IVY, "Q308_SMALLTALK");
    NPC_REFRESH(NONE_16_IVY);
    TELEPORTNPCTOWP(58543, NONE_16_IVY.WP);
}

func void SQ305_SPAWNHOMELESS() {
    WLD_INSERTNPC(52462, RNG_NS66_WAYPOINT);
    WLD_INSERTNPC(52465, "PARTM2_PATH_EASTEREGG_TRAVELLER");
}

func void SQ305_REMOVESHOBOS() {
    B_STARTOTHERROUTINE(NONE_13942_Q308_HOBO, TOT);
    NPC_REFRESH(NONE_13942_Q308_HOBO);
    NPC_EXCHANGEROUTINE(NONE_13941_Q308_HOBO, TOT);
}

func void BLAKE_ATTACKMARVIN() {
    B_IMMEDIATEATTACKPLAYER(NONE_6410_BLAKE, AR_KILL);
    B_IMMEDIATEATTACKPLAYER(NONE_6411_HASMETH, AR_KILL);
    B_IMMEDIATEATTACKPLAYER(NONE_6412_THULSA, AR_KILL);
    NONE_6410_BLAKE.FLAGS = 0;
    NONE_6411_HASMETH.FLAGS = 0;
    NONE_6412_THULSA.FLAGS = 0;
}

func void B_Q309_GRAVETELEPORT() {
    Q309_READYFORGRAVE = 1;
    B_STARTOTHERROUTINE(KDF_6404_TRIMEGISTO, "GRAVE");
    NPC_REFRESH(KDF_6404_TRIMEGISTO);
    B_STARTOTHERROUTINE(VLK_6045_CITIZEN, "GRAVE");
    NPC_REFRESH(VLK_6045_CITIZEN);
    B_STARTOTHERROUTINE(VLK_6254_MAILOR, "GRAVE");
    NPC_REFRESH(VLK_6254_MAILOR);
    B_STARTOTHERROUTINE(VLK_6113_GUY, "GRAVE");
    NPC_REFRESH(VLK_6113_GUY);
    B_STARTOTHERROUTINE(VLK_6041_GIRL, "GRAVE");
    NPC_REFRESH(VLK_6041_GIRL);
    B_STARTOTHERROUTINE(VLK_6307_GRAVE, "GRAVE");
    NPC_REFRESH(VLK_6307_GRAVE);
    WLD_INSERTNPC(53373, "PARTM8_FUNERAL_SACHES");
    FF_APPLYONCEEXTGT(63759, 0, -(1));
}

func void B_Q309_GRAVEEND() {
    B_STARTOTHERROUTINE(KDF_6404_TRIMEGISTO, "WAIT");
    NPC_REFRESH(KDF_6404_TRIMEGISTO);
    B_STARTOTHERROUTINE(VLK_6045_CITIZEN, START);
    NPC_REFRESH(VLK_6045_CITIZEN);
    B_STARTOTHERROUTINE(VLK_6254_MAILOR, START);
    NPC_REFRESH(VLK_6254_MAILOR);
    B_STARTOTHERROUTINE(VLK_6113_GUY, START);
    NPC_REFRESH(VLK_6113_GUY);
    B_STARTOTHERROUTINE(VLK_6041_GIRL, START);
    NPC_REFRESH(VLK_6041_GIRL);
    B_STARTOTHERROUTINE(VLK_6307_GRAVE, START);
    NPC_REFRESH(VLK_6307_GRAVE);
}

func void Q309_NORMANGRAVE_MOVER() {
    var ZCMOVER MOVER2;
    var ZCMOVER MOVER1;
    var int MOVPTR1;
    var int MOVPTR2;
    var int CHANGEGRAVENORMANCOLLISION;
    if ((CHANGEGRAVENORMANCOLLISION) == (0)) {
        PRINTD("Rozpoczynam - Q309_NormanGrave_Mover");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("KM_GRAVE_NORMAN_BODY");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("KM_GRAVE_DIG_NORMAN");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("KM_NORMAN_GRAVE_DIRT", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("KM_NORMAN_GRAVE_BODY", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("KM_GRAVE_NORMAN_BODY");
        WLD_SENDTRIGGER("KM_GRAVE_DIG_NORMAN");
        CHANGEGRAVENORMANCOLLISION = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - Q309_NormanGrave_Mover");
        CHANGEVOBCOLLISION("KM_NORMAN_GRAVE_DIRT", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("KM_NORMAN_GRAVE_BODY", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(63759);
        CHANGEGRAVENORMANCOLLISION = 0;
    };
}

func void Q311_GERSTANDTAVERN_APPLY() {
    var int Q311_GERSTANDTAVERN_COUNT;
    Q311_GERSTANDTAVERN_COUNT = (Q311_GERSTANDTAVERN_COUNT) + (1);
    if ((Q311_GERSTANDTAVERN_COUNT) == (4)) {
        Q311_GERSTANDTAVERN_COUNT = 0;
        CUTSCENE_START(92590);
    };
}

func void Q311_TAVERNCHANGES() {
    B_STARTOTHERROUTINE(VLK_6418_CITIZEN, CUTSCENERTN);
    NPC_REFRESH(VLK_6418_CITIZEN);
    B_STARTOTHERROUTINE(VLK_6419_CITIZEN, CUTSCENERTN);
    NPC_REFRESH(VLK_6419_CITIZEN);
    B_STARTOTHERROUTINE(VLK_6420_CITIZEN, CUTSCENERTN);
    NPC_REFRESH(VLK_6420_CITIZEN);
    B_STARTOTHERROUTINE(VLK_6421_CITIZEN, CUTSCENERTN);
    NPC_REFRESH(VLK_6421_CITIZEN);
    WLD_INSERTNPC(53271, "PARTM4_TAVERN_CUTSCENE_PROPAGANDIST");
    WLD_INSERTNPC(53266, "HARBOUR_TAVERN_PROPAGANDIST_01");
    WLD_INSERTNPC(52521, "HARBOUR_TAVERN_LEAN_01");
    WLD_INSERTNPC(52524, "HARBOUR_TAVERN_05");
}

func void Q311_PROPAGANDISTRUNAWAY() {
    Q311_PROPAGANDIST02FLEE = TRUE;
    NPC_REFRESH(VLK_6422_BODYGUARD);
    NPC_REFRESH(VLK_6423_BODYGUARD);
    B_IMMEDIATEATTACKPLAYER(VLK_6422_BODYGUARD, AR_NONE);
    B_IMMEDIATEATTACKPLAYER(VLK_6423_BODYGUARD, AR_NONE);
    VLK_6422_BODYGUARD.AIVAR[45] = AF_RUNNING;
    VLK_6423_BODYGUARD.AIVAR[45] = AF_RUNNING;
    PRINTD("Agitator 02 ucieka");
}

func void Q311_PROPAGANDISTRUNAWAY_V1() {
    VLK_6416_PROPAGANDIST.AIVAR[15] = TRUE;
    B_STARTOTHERROUTINE(VLK_6416_PROPAGANDIST, FLEE);
    NPC_REFRESH(VLK_6416_PROPAGANDIST);
    Q311_PROPAGANDISTRUNAWAY();
}

func void Q311_PROPAGANDISTRUNAWAY_V2() {
    VLK_6416_PROPAGANDIST.AIVAR[15] = TRUE;
    NPC_EXCHANGEROUTINE(VLK_6416_PROPAGANDIST, FLEE);
    Q311_PROPAGANDISTRUNAWAY();
}

func void Q311_SPAWNLUDLOF() {
    var int Q311_SPAWNLUDLOF_CHECK;
    if ((Q311_SPAWNLUDLOF_CHECK) == (FALSE)) {
        Q311_SPAWNLUDLOF_CHECK = TRUE;
        PRINTD("Ludlof zrespiony");
        B_STARTOTHERROUTINE(VLK_6084_GUY, "Q311");
        NPC_REFRESH(VLK_6084_GUY);
        B_STARTOTHERROUTINE(VLK_6083_WORKER, "Q311");
        NPC_REFRESH(VLK_6083_WORKER);
        B_STARTOTHERROUTINE(VLK_6070_GUY, "Q311");
        NPC_REFRESH(VLK_6070_GUY);
        B_STARTOTHERROUTINE(VLK_6068_GUY, "Q311");
        NPC_REFRESH(VLK_6068_GUY);
        B_STARTOTHERROUTINE(VLK_6102_WORKER, "Q311");
        NPC_REFRESH(VLK_6102_WORKER);
        WLD_INSERTNPC(54583, "HARBOUT_PROPAGANDIST_03");
    };
}

func void Q311_LUDLOFMANSATTACK() {
    NPC_CLEARAIQUEUE(VLK_6084_GUY);
    NPC_CLEARAIQUEUE(VLK_6083_WORKER);
    NPC_CLEARAIQUEUE(VLK_6070_GUY);
    NPC_CLEARAIQUEUE(VLK_6068_GUY);
    NPC_CLEARAIQUEUE(VLK_6102_WORKER);
    B_IMMEDIATEATTACKPLAYER(VLK_6084_GUY, AR_KILL);
    B_IMMEDIATEATTACKPLAYER(VLK_6083_WORKER, AR_KILL);
    B_IMMEDIATEATTACKPLAYER(VLK_6070_GUY, AR_KILL);
    B_IMMEDIATEATTACKPLAYER(VLK_6068_GUY, AR_KILL);
    B_IMMEDIATEATTACKPLAYER(VLK_6102_WORKER, AR_KILL);
    VLK_6084_GUY.AIVAR[45] = AF_RUNNING;
    VLK_6083_WORKER.AIVAR[45] = AF_RUNNING;
    VLK_6070_GUY.AIVAR[45] = AF_RUNNING;
    VLK_6068_GUY.AIVAR[45] = AF_RUNNING;
    VLK_6102_WORKER.AIVAR[45] = AF_RUNNING;
    VLK_6084_GUY.AIVAR[96] = -(1);
    VLK_6083_WORKER.AIVAR[96] = -(1);
    VLK_6070_GUY.AIVAR[96] = -(1);
    VLK_6068_GUY.AIVAR[96] = -(1);
    VLK_6102_WORKER.AIVAR[96] = -(1);
}

func void Q311_AFTERLUDLOFMANFIGHT() {
    VLK_6084_GUY.AIVAR[96] = 5;
    VLK_6083_WORKER.AIVAR[96] = 7;
    VLK_6070_GUY.AIVAR[96] = 9;
    VLK_6068_GUY.AIVAR[96] = 11;
    VLK_6102_WORKER.AIVAR[96] = 13;
    NPC_SETATTITUDE(VLK_6084_GUY, ATT_NEUTRAL);
    NPC_SETTEMPATTITUDE(VLK_6084_GUY, ATT_NEUTRAL);
    VLK_6084_GUY.AIVAR[0] = FIGHT_NONE;
    VLK_6084_GUY.AIVAR[1] = CRIME_NONE;
    NPC_SETATTITUDE(VLK_6083_WORKER, ATT_NEUTRAL);
    NPC_SETTEMPATTITUDE(VLK_6083_WORKER, ATT_NEUTRAL);
    VLK_6083_WORKER.AIVAR[0] = FIGHT_NONE;
    VLK_6083_WORKER.AIVAR[1] = CRIME_NONE;
    NPC_SETATTITUDE(VLK_6070_GUY, ATT_NEUTRAL);
    NPC_SETTEMPATTITUDE(VLK_6070_GUY, ATT_NEUTRAL);
    VLK_6070_GUY.AIVAR[0] = FIGHT_NONE;
    VLK_6070_GUY.AIVAR[1] = CRIME_NONE;
    NPC_SETATTITUDE(VLK_6068_GUY, ATT_NEUTRAL);
    NPC_SETTEMPATTITUDE(VLK_6068_GUY, ATT_NEUTRAL);
    VLK_6068_GUY.AIVAR[0] = FIGHT_NONE;
    VLK_6068_GUY.AIVAR[1] = CRIME_NONE;
    NPC_SETATTITUDE(VLK_6102_WORKER, ATT_NEUTRAL);
    NPC_SETTEMPATTITUDE(VLK_6102_WORKER, ATT_NEUTRAL);
    VLK_6102_WORKER.AIVAR[0] = FIGHT_NONE;
    VLK_6102_WORKER.AIVAR[1] = CRIME_NONE;
    NPC_EXCHANGEROUTINE(VLK_6084_GUY, START);
    NPC_EXCHANGEROUTINE(VLK_6083_WORKER, START);
    NPC_EXCHANGEROUTINE(VLK_6070_GUY, START);
    NPC_EXCHANGEROUTINE(VLK_6068_GUY, START);
    NPC_EXCHANGEROUTINE(VLK_6102_WORKER, START);
}

func void Q308_IVYINVESTIGATION_HARBOUR() {
    B_STARTOTHERROUTINE(NONE_16_IVY, "Q308_HARBOUR");
    NPC_REFRESH(NONE_16_IVY);
    TELEPORTNPCTOWP(58543, NONE_16_IVY.WP);
    B_STARTOTHERROUTINE(VLK_6425_SLAGER, START);
    NPC_REFRESH(VLK_6425_SLAGER);
    TELEPORTNPCTOWP(53038, VLK_6425_SLAGER.WP);
}

func void Q308_TOTHEOLDTOWN_EVENT() {
    FADESCREENTOBLACKF(1, 63777, 1000);
}

func void Q308_TOTHEOLDTOWN_FADESCREEN() {
    FF_APPLYONCEEXT(63778, 75, 4);
}

func void Q308_TOTHEOLDTOWN_PREPARE() {
    var int Q308_TOTHEOLDTOWN_PREPARE_COUNT;
    Q308_TOTHEOLDTOWN_PREPARE_COUNT = (Q308_TOTHEOLDTOWN_PREPARE_COUNT) + (1);
    if ((Q308_TOTHEOLDTOWN_PREPARE_COUNT) == (4)) {
        Q308_TOTHEOLDTOWN_PREPARE_COUNT = 0;
        CUTSCENE_START(92584);
    };
}

func void Q308_REMOVECITIZENSOLDCITY() {
    B_STARTOTHERROUTINE(MIL_14100_OLDCITYGUARD, TOT);
    NPC_REFRESH(MIL_14100_OLDCITYGUARD);
    TELEPORTNPCTOWP(53563, MIL_14100_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(MIL_14101_OLDCITYGUARD, TOT);
    NPC_REFRESH(MIL_14101_OLDCITYGUARD);
    TELEPORTNPCTOWP(53566, MIL_14101_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(MIL_14102_OLDCITYGUARD, TOT);
    NPC_REFRESH(MIL_14102_OLDCITYGUARD);
    TELEPORTNPCTOWP(53569, MIL_14102_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(MIL_14103_OLDCITYGUARD, TOT);
    NPC_REFRESH(MIL_14103_OLDCITYGUARD);
    TELEPORTNPCTOWP(53572, MIL_14103_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(MIL_14114_OLDCITYGUARD, TOT);
    NPC_REFRESH(MIL_14114_OLDCITYGUARD);
    TELEPORTNPCTOWP(53575, MIL_14114_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(MIL_14115_OLDCITYGUARD, TOT);
    NPC_REFRESH(MIL_14115_OLDCITYGUARD);
    TELEPORTNPCTOWP(53578, MIL_14115_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(MIL_14116_OLDCITYGUARD, TOT);
    NPC_REFRESH(MIL_14116_OLDCITYGUARD);
    TELEPORTNPCTOWP(53581, MIL_14116_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(MIL_14117_OLDCITYGUARD, TOT);
    NPC_REFRESH(MIL_14117_OLDCITYGUARD);
    TELEPORTNPCTOWP(53584, MIL_14117_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(VLK_14104_CITIZEN, TOT);
    NPC_REFRESH(VLK_14104_CITIZEN);
    TELEPORTNPCTOWP(53630, VLK_14104_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14105_CITIZEN, TOT);
    NPC_REFRESH(VLK_14105_CITIZEN);
    TELEPORTNPCTOWP(53633, VLK_14105_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14106_CITIZEN, TOT);
    NPC_REFRESH(VLK_14106_CITIZEN);
    TELEPORTNPCTOWP(53636, VLK_14106_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14107_CITIZEN, TOT);
    NPC_REFRESH(VLK_14107_CITIZEN);
    TELEPORTNPCTOWP(53639, VLK_14107_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14108_CITIZEN, TOT);
    NPC_REFRESH(VLK_14108_CITIZEN);
    TELEPORTNPCTOWP(53642, VLK_14108_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14109_CITIZEN, TOT);
    NPC_REFRESH(VLK_14109_CITIZEN);
    TELEPORTNPCTOWP(53645, VLK_14109_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14110_CITIZEN, TOT);
    NPC_REFRESH(VLK_14110_CITIZEN);
    TELEPORTNPCTOWP(53648, VLK_14110_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14111_CITIZEN, TOT);
    NPC_REFRESH(VLK_14111_CITIZEN);
    TELEPORTNPCTOWP(53651, VLK_14111_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14112_CITIZEN, TOT);
    NPC_REFRESH(VLK_14112_CITIZEN);
    TELEPORTNPCTOWP(53654, VLK_14112_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14113_CITIZEN, TOT);
    NPC_REFRESH(VLK_14113_CITIZEN);
    TELEPORTNPCTOWP(53657, VLK_14113_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_6428_WORKER, TOT);
    NPC_REFRESH(VLK_6428_WORKER);
    TELEPORTNPCTOWP(53683, VLK_6428_WORKER.WP);
    B_STARTOTHERROUTINE(VLK_3011_CITIZEN, TOT);
    NPC_REFRESH(VLK_3011_CITIZEN);
    TELEPORTNPCTOWP(53679, VLK_3011_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14118_CITIZEN, TOT);
    NPC_REFRESH(VLK_14118_CITIZEN);
    TELEPORTNPCTOWP(53660, VLK_14118_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14119_MUSICAN, TOT);
    NPC_REFRESH(VLK_14119_MUSICAN);
    TELEPORTNPCTOWP(53663, VLK_14119_MUSICAN.WP);
    B_STARTOTHERROUTINE(VLK_14120_CITIZEN, TOT);
    NPC_REFRESH(VLK_14120_CITIZEN);
    TELEPORTNPCTOWP(53666, VLK_14120_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14121_CITIZEN, TOT);
    NPC_REFRESH(VLK_14121_CITIZEN);
    TELEPORTNPCTOWP(53669, VLK_14121_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14122_WORKER, TOT);
    NPC_REFRESH(VLK_14122_WORKER);
    TELEPORTNPCTOWP(53672, VLK_14122_WORKER.WP);
    B_STARTOTHERROUTINE(VLK_14123_CITIZEN, TOT);
    NPC_REFRESH(VLK_14123_CITIZEN);
    TELEPORTNPCTOWP(53676, VLK_14123_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_9030_CITIZEN, TOT);
    NPC_REFRESH(VLK_9030_CITIZEN);
    TELEPORTNPCTOWP(53691, VLK_9030_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_9034_CITIZEN, TOT);
    NPC_REFRESH(VLK_9034_CITIZEN);
    TELEPORTNPCTOWP(53703, VLK_9034_CITIZEN.WP);
}

func void Q308_BRINGBACKCITIZENSOLDCITY() {
    B_STARTOTHERROUTINE(MIL_14100_OLDCITYGUARD, START);
    NPC_REFRESH(MIL_14100_OLDCITYGUARD);
    TELEPORTNPCTOWP(53563, MIL_14100_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(MIL_14101_OLDCITYGUARD, START);
    NPC_REFRESH(MIL_14101_OLDCITYGUARD);
    TELEPORTNPCTOWP(53566, MIL_14101_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(MIL_14102_OLDCITYGUARD, START);
    NPC_REFRESH(MIL_14102_OLDCITYGUARD);
    TELEPORTNPCTOWP(53569, MIL_14102_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(MIL_14103_OLDCITYGUARD, START);
    NPC_REFRESH(MIL_14103_OLDCITYGUARD);
    TELEPORTNPCTOWP(53572, MIL_14103_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(MIL_14114_OLDCITYGUARD, START);
    NPC_REFRESH(MIL_14114_OLDCITYGUARD);
    TELEPORTNPCTOWP(53575, MIL_14114_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(MIL_14115_OLDCITYGUARD, START);
    NPC_REFRESH(MIL_14115_OLDCITYGUARD);
    TELEPORTNPCTOWP(53578, MIL_14115_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(MIL_14116_OLDCITYGUARD, START);
    NPC_REFRESH(MIL_14116_OLDCITYGUARD);
    TELEPORTNPCTOWP(53581, MIL_14116_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(MIL_14117_OLDCITYGUARD, START);
    NPC_REFRESH(MIL_14117_OLDCITYGUARD);
    TELEPORTNPCTOWP(53584, MIL_14117_OLDCITYGUARD.WP);
    B_STARTOTHERROUTINE(VLK_14104_CITIZEN, START);
    NPC_REFRESH(VLK_14104_CITIZEN);
    TELEPORTNPCTOWP(53630, VLK_14104_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14105_CITIZEN, START);
    NPC_REFRESH(VLK_14105_CITIZEN);
    TELEPORTNPCTOWP(53633, VLK_14105_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14106_CITIZEN, START);
    NPC_REFRESH(VLK_14106_CITIZEN);
    TELEPORTNPCTOWP(53636, VLK_14106_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14107_CITIZEN, START);
    NPC_REFRESH(VLK_14107_CITIZEN);
    TELEPORTNPCTOWP(53639, VLK_14107_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14108_CITIZEN, START);
    NPC_REFRESH(VLK_14108_CITIZEN);
    TELEPORTNPCTOWP(53642, VLK_14108_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14109_CITIZEN, START);
    NPC_REFRESH(VLK_14109_CITIZEN);
    TELEPORTNPCTOWP(53645, VLK_14109_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14110_CITIZEN, START);
    NPC_REFRESH(VLK_14110_CITIZEN);
    TELEPORTNPCTOWP(53648, VLK_14110_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14111_CITIZEN, START);
    NPC_REFRESH(VLK_14111_CITIZEN);
    TELEPORTNPCTOWP(53651, VLK_14111_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14112_CITIZEN, START);
    NPC_REFRESH(VLK_14112_CITIZEN);
    TELEPORTNPCTOWP(53654, VLK_14112_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14113_CITIZEN, START);
    NPC_REFRESH(VLK_14113_CITIZEN);
    TELEPORTNPCTOWP(53657, VLK_14113_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_6428_WORKER, START);
    NPC_REFRESH(VLK_6428_WORKER);
    TELEPORTNPCTOWP(53683, VLK_6428_WORKER.WP);
    B_STARTOTHERROUTINE(VLK_3011_CITIZEN, START);
    NPC_REFRESH(VLK_3011_CITIZEN);
    TELEPORTNPCTOWP(53679, VLK_3011_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14118_CITIZEN, START);
    NPC_REFRESH(VLK_14118_CITIZEN);
    TELEPORTNPCTOWP(53660, VLK_14118_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14119_MUSICAN, START);
    NPC_REFRESH(VLK_14119_MUSICAN);
    TELEPORTNPCTOWP(53663, VLK_14119_MUSICAN.WP);
    B_STARTOTHERROUTINE(VLK_14120_CITIZEN, START);
    NPC_REFRESH(VLK_14120_CITIZEN);
    TELEPORTNPCTOWP(53666, VLK_14120_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14121_CITIZEN, START);
    NPC_REFRESH(VLK_14121_CITIZEN);
    TELEPORTNPCTOWP(53669, VLK_14121_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_14122_WORKER, START);
    NPC_REFRESH(VLK_14122_WORKER);
    TELEPORTNPCTOWP(53672, VLK_14122_WORKER.WP);
    B_STARTOTHERROUTINE(VLK_14123_CITIZEN, START);
    NPC_REFRESH(VLK_14123_CITIZEN);
    TELEPORTNPCTOWP(53676, VLK_14123_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_9030_CITIZEN, START);
    NPC_REFRESH(VLK_9030_CITIZEN);
    TELEPORTNPCTOWP(53691, VLK_9030_CITIZEN.WP);
    B_STARTOTHERROUTINE(VLK_9034_CITIZEN, START);
    NPC_REFRESH(VLK_9034_CITIZEN);
    TELEPORTNPCTOWP(53703, VLK_9034_CITIZEN.WP);
}

func void Q308_JUDGECUTSCENE_PREPARE() {
    FF_APPLYONCEEXT(63783, 75, 4);
}

func void Q308_JUDGECUTSCENE_PREPARE_APPLY() {
    var int Q308_JUDGECUTSCENE_PREPARE_COUNT;
    Q308_JUDGECUTSCENE_PREPARE_COUNT = (Q308_JUDGECUTSCENE_PREPARE_COUNT) + (1);
    if ((Q308_JUDGECUTSCENE_PREPARE_COUNT) == (4)) {
        Q308_JUDGECUTSCENE_PREPARE_COUNT = 0;
        CUTSCENE_START(92557);
    };
}

func void Q308_TELEPORTTOFINALCUTSCENE() {
    PRINTD("Teleport Morris");
    TELEPORTNPCTOWP(53821, VLK_6454_DANIS.WP);
    NPC_CLEARAIQUEUE(VLK_6454_DANIS);
    AI_TURNTONPC(VLK_6454_DANIS, NONE_16_IVY);
    TELEPORTNPCTOWP(52807, MIL_4000_RODERICH.WP);
    NPC_CLEARAIQUEUE(MIL_4000_RODERICH);
    AI_TURNTONPC(MIL_4000_RODERICH, NONE_16_IVY);
    TELEPORTNPCTOWP(52068, SLD_5000_LORENZO.WP);
    NPC_CLEARAIQUEUE(SLD_5000_LORENZO);
    AI_TURNTONPC(SLD_5000_LORENZO, NONE_16_IVY);
    B_STARTOTHERROUTINE(VLK_6503_GOLAR, "TOWNHALLCUTSCENE");
    NPC_REFRESH(VLK_6503_GOLAR);
    TELEPORTNPCTOWP(53827, VLK_6503_GOLAR.WP);
    NPC_CLEARAIQUEUE(VLK_6503_GOLAR);
    AI_TURNTONPC(VLK_6503_GOLAR, NONE_16_IVY);
    B_STARTOTHERROUTINE(VLK_6388_MORRIS, "TOWNHALLCUTSCENE");
    NPC_REFRESH(VLK_6388_MORRIS);
    TELEPORTNPCTOWP(53804, VLK_6388_MORRIS.WP);
    NPC_CLEARAIQUEUE(VLK_6388_MORRIS);
    AI_TURNTONPC(VLK_6388_MORRIS, NONE_16_IVY);
}

func void Q308_FINALCUTSCENE_PREPARE() {
    FF_APPLYONCEEXT(63787, 75, 4);
}

func void Q308_FINALCUTSCENE_PREPARE_APPLY() {
    var int Q308_FINALCUTSCENE_PREPARE_COUNT;
    Q308_FINALCUTSCENE_PREPARE_COUNT = (Q308_FINALCUTSCENE_PREPARE_COUNT) + (1);
    if ((Q308_FINALCUTSCENE_PREPARE_COUNT) == (4)) {
        Q308_FINALCUTSCENE_PREPARE_COUNT = 0;
        CUTSCENE_START(92536);
    };
}

func void Q308_ANGRYMOBCHANGERTN() {
    B_STARTOTHERROUTINE(VLK_6455_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6455_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6461_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6461_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6462_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6462_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6465_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6465_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6466_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6466_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6467_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6467_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6468_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6468_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6471_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6471_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6472_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6472_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6473_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6473_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6474_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6474_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6475_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6475_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6479_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6479_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6480_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6480_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6481_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6481_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6482_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6482_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6483_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6483_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6484_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6484_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6485_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6485_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6486_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6486_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6487_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6487_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6488_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6488_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6492_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6492_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6493_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6493_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6494_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6494_ANGRYMOB);
    B_STARTOTHERROUTINE(VLK_6495_ANGRYMOB, "STOP");
    NPC_REFRESH(VLK_6495_ANGRYMOB);
    WLD_SENDUNTRIGGER("Q308_CROWD_ANGRY");
}

func void Q308_REMOVEANGRYMOB() {
    RESTOREROUTINE_RODERICH();
    TELEPORTNPCTOWP(52807, MIL_4000_RODERICH.WP);
    RESTOREROUTINE_LORENZO();
    TELEPORTNPCTOWP(52068, SLD_5000_LORENZO.WP);
    B_STARTOTHERROUTINE(VLK_6388_MORRIS, START);
    NPC_REFRESH(VLK_6388_MORRIS);
    TELEPORTNPCTOWP(53804, VLK_6388_MORRIS.WP);
    B_STARTOTHERROUTINE(VLK_6454_DANIS, START);
    NPC_REFRESH(VLK_6454_DANIS);
    TELEPORTNPCTOWP(53821, VLK_6454_DANIS.WP);
    B_STARTOTHERROUTINE(VLK_6503_GOLAR, START);
    NPC_REFRESH(VLK_6503_GOLAR);
    TELEPORTNPCTOWP(53827, VLK_6503_GOLAR.WP);
    B_REMOVENPC(51653);
    B_REMOVENPC(51657);
    B_REMOVENPC(51661);
    B_REMOVENPC(51665);
    B_REMOVENPC(51669);
    B_REMOVENPC(51673);
    B_REMOVENPC(51677);
    B_REMOVENPC(51681);
    B_REMOVENPC(51685);
    B_REMOVENPC(51689);
    B_REMOVENPC(51693);
    B_REMOVENPC(51697);
    B_REMOVENPC(51701);
    B_REMOVENPC(51705);
    B_REMOVENPC(51709);
    B_REMOVENPC(51713);
    B_REMOVENPC(51717);
    B_REMOVENPC(51721);
    B_REMOVENPC(51725);
    B_REMOVENPC(51729);
    B_REMOVENPC(51733);
    B_REMOVENPC(51737);
    B_REMOVENPC(51741);
    B_REMOVENPC(51745);
    B_REMOVENPC(51749);
    B_REMOVENPC(51753);
    B_REMOVENPC(51757);
    B_REMOVENPC(51641);
    B_REMOVENPC(51644);
    B_REMOVENPC(51647);
    B_REMOVENPC(51650);
    B_REMOVENPC(53560);
}

func void Q308_EXECUTIONCUTSCENE_MOBTURN() {
    AI_WAIT(VLK_6455_ANGRYMOB, 1053609165);
    AI_WAIT(VLK_6461_ANGRYMOB, 1068708659);
    AI_WAIT(VLK_6462_ANGRYMOB, 1060320051);
    AI_WAIT(VLK_6465_ANGRYMOB, 1065353216);
    AI_WAIT(VLK_6466_ANGRYMOB, 1056964608);
    AI_WAIT(VLK_6467_ANGRYMOB, 1066192077);
    AI_WAIT(VLK_6468_ANGRYMOB, 1076677837);
    AI_WAIT(VLK_6471_ANGRYMOB, 1067030938);
    AI_WAIT(VLK_6472_ANGRYMOB, 1077936128);
    AI_WAIT(VLK_6473_ANGRYMOB, 1074580685);
    AI_WAIT(VLK_6474_ANGRYMOB, 1060320051);
    AI_WAIT(VLK_6475_ANGRYMOB, 1071225242);
    AI_WAIT(VLK_6479_ANGRYMOB, 1076258406);
    AI_WAIT(VLK_6480_ANGRYMOB, 1077516698);
    AI_WAIT(VLK_6481_ANGRYMOB, 1050253722);
    AI_WAIT(VLK_6482_ANGRYMOB, 1058642330);
    AI_WAIT(VLK_6483_ANGRYMOB, 1063675494);
    AI_WAIT(VLK_6484_ANGRYMOB, 1067030938);
    AI_WAIT(VLK_6485_ANGRYMOB, 1068708659);
    AI_WAIT(VLK_6486_ANGRYMOB, 1072064102);
    AI_WAIT(VLK_6487_ANGRYMOB, 1073741824);
    AI_WAIT(VLK_6488_ANGRYMOB, 1078355558);
    AI_WAIT(VLK_6492_ANGRYMOB, 1058642330);
    AI_WAIT(VLK_6493_ANGRYMOB, 1070386381);
    AI_WAIT(VLK_6494_ANGRYMOB, 1074161254);
    AI_WAIT(VLK_6495_ANGRYMOB, 1080033280);
    B_TURNTONPC(VLK_6455_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6461_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6462_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6465_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6466_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6467_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6468_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6471_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6472_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6473_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6474_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6475_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6479_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6480_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6481_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6482_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6483_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6484_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6485_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6486_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6487_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6488_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6492_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6493_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6494_ANGRYMOB, MIL_6505_MILITIA);
    B_TURNTONPC(VLK_6495_ANGRYMOB, MIL_6505_MILITIA);
}

func void Q308_REMOVEEVENTS() {
    WLD_SENDTRIGGER("KM_MOVER_GRAFITI");
    WLD_SENDTRIGGER("KM_BLOODFLASK_MOVER");
    B_STARTOTHERROUTINE(VLK_6395_BERNAND, START);
    B_STARTOTHERROUTINE(NONE_13748_VOLKERGUARD, START);
    B_STARTOTHERROUTINE(MIL_6392_MILITIA, START);
    NPC_REFRESH(MIL_6392_MILITIA);
    B_STARTOTHERROUTINE(MIL_6393_MILITIA, START);
    NPC_REFRESH(MIL_6393_MILITIA);
    B_STARTOTHERROUTINE(MIL_4020_CITYGUARD, START);
    NPC_REFRESH(MIL_4020_CITYGUARD);
    B_STARTOTHERROUTINE(MIL_6385_SAMBOR, START);
    NPC_REFRESH(MIL_6385_SAMBOR);
    B_REMOVENPC(53494);
    B_REMOVENPC(53497);
    B_REMOVENPC(53500);
    B_REMOVENPC(53503);
    B_REMOVENPC(53506);
    B_REMOVENPC(53460);
    B_REMOVENPC(53463);
    B_REMOVENPC(53266);
    B_REMOVENPC(53271);
    B_REMOVENPC(52521);
    B_REMOVENPC(52524);
    Q311_AFTERLUDLOFMANFIGHT();
    if ((Q311_TAVERNCUTSCENE) != (2)) {
        B_STARTOTHERROUTINE(VLK_6418_CITIZEN, START);
        NPC_REFRESH(VLK_6418_CITIZEN);
        B_STARTOTHERROUTINE(VLK_6419_CITIZEN, START);
        NPC_REFRESH(VLK_6419_CITIZEN);
        B_STARTOTHERROUTINE(VLK_6420_CITIZEN, START);
        NPC_REFRESH(VLK_6420_CITIZEN);
        B_STARTOTHERROUTINE(VLK_6421_CITIZEN, START);
        NPC_REFRESH(VLK_6421_CITIZEN);
    };
    B_REMOVENPC(53019);
    TELEPORTNPCTOWP(53019, TOT);
    B_REMOVENPC(53023);
    TELEPORTNPCTOWP(53023, TOT);
    B_REMOVENPC(54583);
    TELEPORTNPCTOWP(54583, TOT);
    if ((Q308_WHOWILLDIE) != (1)) {
        FF_APPLYONCEEXTGT(63814, 0, -(1));
    };
    if (HLP_ISVALIDNPC(NONE_6414_LAZAR)) {
        if ((NPC_ISDEAD(NONE_6414_LAZAR)) == (FALSE)) {
            B_REMOVENPC(55430);
        };
    };
    if ((LOG_GETSTATUS(MIS_SQ313)) != (LOG_SUCCESS)) {
        if (((LOG_GETSTATUS(MIS_CQ005)) == (LOG_SUCCESS)) && ((CQ005_ENDING) == (1))) {
            if ((SQ313_ENDING) == (1)) {
                SQ313_PREPAREMAGES_HUGHENDING();
            } else if ((SQ313_ENDING) == (2)) {
                SQ313_PREPAREMAGES_TRIMEGISTOENDING();
            } else {
                NPC_EXCHANGEROUTINE(KDF_6404_TRIMEGISTO, "SQ313_START");
            };
        } else {
            NPC_EXCHANGEROUTINE(KDF_6404_TRIMEGISTO, START);
        };
    };
    NPC_EXCHANGEROUTINE(KDF_6404_TRIMEGISTO, START);
    B_STARTOTHERROUTINE(KDF_11263_FIREMAGE, START);
    B_STARTOTHERROUTINE(KDW_13875_WATERMAGE, START);
    B_STARTOTHERROUTINE(NOV_13819_NOVIZE, START);
    B_STARTOTHERROUTINE(NOV_13818_NOVIZE, START);
    if ((((PQ104_ENDING) == (1)) && ((LOG_GETSTATUS(MIS_PQ104)) == (LOG_RUNNING))) && ((NPC_KNOWSINFO(HERO, 73688)) == (FALSE))) {
        B_STARTOTHERROUTINE(VLK_3002_HERSHLIK, "PQ104_SEEDS");
    };
    B_STARTOTHERROUTINE(VLK_3002_HERSHLIK, START);
    SQ305_REMOVESHOBOS();
    B_STARTOTHERROUTINE(VLK_6425_SLAGER, START);
    NPC_REFRESH(VLK_6425_SLAGER);
    TELEPORTNPCTOWP(53038, VLK_6425_SLAGER.WP);
    Q308_BRINGBACK_RANDOM_TRAPS();
}

func void Q308_PREPAREHARBOUR_APPLY() {
    var ZCMOVER MOVER8;
    var int MOVPTR3;
    var ZCMOVER MOVER3;
    var int MOVPTR7;
    var ZCMOVER MOVER5;
    var int MOVPTR8;
    var ZCMOVER MOVER7;
    var ZCMOVER MOVER1;
    var int MOVPTR2;
    var ZCMOVER MOVER4;
    var int MOVPTR1;
    var int MOVPTR4;
    var int MOVPTR6;
    var int Q308_PREPAREHARBOUR_COUNT;
    var int MOVPTR5;
    var ZCMOVER MOVER2;
    var ZCMOVER MOVER6;
    if ((Q308_PREPAREHARBOUR_COUNT) == (0)) {
        PRINTD("Rozpoczynam - Q308_PrepareHarbour_Apply");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("Q308_MOVER_HARBOURSUPPLY_01");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("Q308_MOVER_HARBOURSUPPLY_02");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        MOVPTR3 = MEM_SEARCHVOBBYNAME("Q308_MOVER_HARBOURSUPPLY_03");
        MOVER3 = MEM_PTRTOINST(MOVPTR3);
        MOVPTR4 = MEM_SEARCHVOBBYNAME("Q308_MOVER_HARBOURSUPPLY_04");
        MOVER4 = MEM_PTRTOINST(MOVPTR4);
        MOVPTR5 = MEM_SEARCHVOBBYNAME("Q308_MOVER_HARBOURSUPPLY_05");
        MOVER5 = MEM_PTRTOINST(MOVPTR5);
        MOVPTR6 = MEM_SEARCHVOBBYNAME("Q308_MOVER_HARBOURSUPPLY_06");
        MOVER6 = MEM_PTRTOINST(MOVPTR6);
        MOVPTR7 = MEM_SEARCHVOBBYNAME("Q308_MOVER_HARBOURSUPPLY_07");
        MOVER7 = MEM_PTRTOINST(MOVPTR7);
        MOVPTR8 = MEM_SEARCHVOBBYNAME("Q308_MOVER_HARBOURSUPPLY_08");
        MOVER8 = MEM_PTRTOINST(MOVPTR8);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_01", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_02", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_03", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_04", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_05", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_06", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_07", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_08", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_09", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_10", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_11", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_12", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_13", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_14", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_15", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_16", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_17", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_18", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_19", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_20", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_21", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_22", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_23", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_24", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_25", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_26", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_27", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_28", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_29", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_30", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_31", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_32", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_33", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_34", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_35", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_36", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_37", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_38", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_39", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_40", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_41", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_42", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_43", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_44", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_45", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_46", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_47", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_48", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_49", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_50", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_51", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_52", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_53", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_54", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_55", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_56", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_57", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_58", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_59", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_60", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_61", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_62", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_63", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_64", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_65", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_66", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_67", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_68", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_69", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_70", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_71", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_72", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_73", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_74", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_75", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_76", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_77", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_78", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("Q308_MOVER_HARBOURSUPPLY_01");
        WLD_SENDTRIGGER("Q308_MOVER_HARBOURSUPPLY_02");
        WLD_SENDTRIGGER("Q308_MOVER_HARBOURSUPPLY_03");
        WLD_SENDTRIGGER("Q308_MOVER_HARBOURSUPPLY_04");
        WLD_SENDTRIGGER("Q308_MOVER_HARBOURSUPPLY_05");
        WLD_SENDTRIGGER("Q308_MOVER_HARBOURSUPPLY_06");
        WLD_SENDTRIGGER("Q308_MOVER_HARBOURSUPPLY_07");
        WLD_SENDTRIGGER("Q308_MOVER_HARBOURSUPPLY_08");
        Q308_PREPAREHARBOUR_COUNT = 1;
    };
    if (((((((((((((((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER3.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER3.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER4.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER4.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER5.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER5.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER6.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER6.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER7.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER7.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER8.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER8.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - Q308_PrepareHarbour_Apply");
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_01", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_02", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_03", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_04", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_05", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_06", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_07", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_08", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_09", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_10", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_11", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_12", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_13", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_14", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_15", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_16", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_17", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_18", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_19", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_20", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_21", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_22", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_23", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_24", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_25", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_26", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_27", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_28", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_29", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_30", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_31", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_32", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_33", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_34", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_35", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_36", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_37", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_38", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_39", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_40", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_41", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_42", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_43", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_44", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_45", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_46", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_47", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_48", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_49", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_50", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_51", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_52", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_53", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_54", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_55", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_56", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_57", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_58", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_59", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_60", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_61", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_62", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_63", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_64", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_65", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_66", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_67", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_68", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_69", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_70", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_71", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_72", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_73", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_74", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_75", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_76", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_77", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_HARBOURSUPPLY_78", TRUE, TRUE, TRUE, TRUE);
        if (((LOG_GETSTATUS(MIS_Q312)) == (LOG_RUNNING)) || ((LOG_GETSTATUS(MIS_Q308)) == (LOG_RUNNING))) {
            CHANGEVOBCOLLISION("Q308_MOVER_BOAT_01", TRUE, FALSE, TRUE, TRUE);
            CHANGEVOBCOLLISION("Q308_MOVER_BOAT_02", TRUE, FALSE, TRUE, TRUE);
            CHANGEVOBCOLLISION("Q308_MOVER_BOAT_03", TRUE, FALSE, TRUE, TRUE);
            CHANGEVOBCOLLISION("Q308_MOVER_BOAT_04", TRUE, FALSE, TRUE, TRUE);
            CHANGEVOBCOLLISION("Q308_MOVER_BOAT_05", TRUE, FALSE, TRUE, TRUE);
            CHANGEVOBCOLLISION("Q308_MOVER_BOAT_06", TRUE, FALSE, TRUE, TRUE);
        } else {
            CHANGEVOBCOLLISION("Q308_MOVER_BOAT_01", FALSE, FALSE, FALSE, FALSE);
            CHANGEVOBCOLLISION("Q308_MOVER_BOAT_02", FALSE, FALSE, FALSE, FALSE);
            CHANGEVOBCOLLISION("Q308_MOVER_BOAT_03", FALSE, FALSE, FALSE, FALSE);
            CHANGEVOBCOLLISION("Q308_MOVER_BOAT_04", FALSE, FALSE, FALSE, FALSE);
            CHANGEVOBCOLLISION("Q308_MOVER_BOAT_05", FALSE, FALSE, FALSE, FALSE);
            CHANGEVOBCOLLISION("Q308_MOVER_BOAT_06", FALSE, FALSE, FALSE, FALSE);
        };
        FF_REMOVE(63793);
        Q308_PREPAREHARBOUR_COUNT = 0;
    };
}

func void Q308_AFTEREXECUTION_REMOVECAMERAS() {
    FF_APPLYONCEEXT(63812, 150, 4);
}

func void Q308_AFTEREXECUTION_REMOVECAMERAS_APPLY() {
    var int Q308_AFTEREXECUTION_REMOVECAMERAS_COUNT;
    Q308_AFTEREXECUTION_REMOVECAMERAS_COUNT = (Q308_AFTEREXECUTION_REMOVECAMERAS_COUNT) + (1);
    if ((Q308_AFTEREXECUTION_REMOVECAMERAS_COUNT) == (4)) {
        WLD_SENDUNTRIGGER("KM_EXECUTION_01");
        WLD_SENDUNTRIGGER("KM_EXECUTION_02");
        WLD_SENDUNTRIGGER("KM_EXECUTION_03");
        WLD_SENDUNTRIGGER("KM_EXECUTION_04");
        WLD_SENDUNTRIGGER("KM_EXECUTION_05");
        WLD_SENDUNTRIGGER("KM_EXECUTION_06");
        WLD_SENDUNTRIGGER("KM_EXECUTION_07");
        WLD_SENDUNTRIGGER("KM_EXECUTION_08");
        WLD_SENDUNTRIGGER("KM_EXECUTION_09");
        WLD_SENDUNTRIGGER("KM_EXECUTION_10");
        WLD_SENDUNTRIGGER("KM_EXECUTION_11");
        WLD_SENDUNTRIGGER("KM_EXECUTION_12");
        WLD_SENDUNTRIGGER("KM_EXECUTION_13");
        WLD_SENDUNTRIGGER("KM_EXECUTION_14");
        WLD_SENDUNTRIGGER("KM_EXECUTION_15");
        WLD_SENDUNTRIGGER("KM_EXECUTION_16");
        DIACAM_ENABLE();
        HERO.AIVAR[4] = FALSE;
        Q308_AFTEREXECUTION_REMOVECAMERAS_COUNT = 0;
    };
}

func void Q308_ARSCORPSE_APPLY() {
    var ZCMOVER MOVER1;
    var int MOVPTR1;
    var int Q308_ARSCORPSE_COUNT;
    if ((Q308_ARSCORPSE_COUNT) == (0)) {
        PRINTD("Rozpoczynam - Q308_ARSCORPSE_Apply");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("Q308_MOVER_ARSCORPSE");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        CHANGEVOBCOLLISION("Q308_ARSCORPSE", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("Q308_MOVER_ARSCORPSE");
        Q308_ARSCORPSE_COUNT = 1;
    };
    if (((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - Q308_ARSCORPSE_Apply");
        CHANGEVOBCOLLISION("Q308_ARSCORPSE", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(63814);
        Q308_ARSCORPSE_COUNT = 0;
    };
}

func void Q308_REMOVEREFUGEEINCITY() {
    FF_APPLYONCEEXTGT(63793, 0, -(1));
    B_REMOVENPC(54695);
    B_REMOVENPC(54698);
    B_REMOVENPC(54611);
    B_REMOVENPC(54614);
    B_REMOVENPC(54608);
    B_REMOVENPC(54605);
    B_REMOVENPC(54704);
    B_REMOVENPC(54701);
    B_REMOVENPC(54707);
    B_REMOVENPC(54710);
    B_REMOVENPC(54713);
    B_REMOVENPC(54716);
    B_REMOVENPC(54719);
    B_REMOVENPC(55183);
    B_REMOVENPC(55186);
    B_REMOVENPC(55192);
    B_REMOVENPC(55189);
    B_REMOVENPC(52309);
    B_REMOVENPC(52312);
    B_REMOVENPC(52315);
    B_REMOVENPC(52318);
    B_REMOVENPC(52321);
    B_REMOVENPC(52334);
    B_REMOVENPC(52337);
    B_REMOVENPC(52340);
    B_REMOVENPC(52343);
    B_REMOVENPC(52324);
    B_REMOVENPC(53302);
    B_REMOVENPC(53305);
    B_REMOVENPC(53308);
    B_REMOVENPC(53311);
    B_REMOVENPC(53320);
    B_REMOVENPC(53323);
    B_REMOVENPC(54641);
    B_REMOVENPC(54644);
    B_REMOVENPC(54647);
    B_REMOVENPC(54650);
    B_REMOVENPC(54653);
    B_REMOVENPC(54656);
    B_REMOVENPC(54659);
    B_REMOVENPC(54662);
    B_REMOVENPC(54665);
    B_REMOVENPC(54668);
    B_REMOVENPC(54671);
    B_REMOVENPC(54674);
    B_REMOVENPC(54677);
    B_REMOVENPC(54680);
    B_REMOVENPC(54683);
    B_REMOVENPC(54686);
    B_REMOVENPC(54689);
    B_REMOVENPC(54692);
    B_REMOVENPC(55299);
    B_REMOVENPC(55302);
    B_REMOVENPC(55305);
    B_REMOVENPC(55308);
    B_REMOVENPC(55314);
    B_REMOVENPC(55311);
}

func void Q308_BLAKEDOOR_APPLY() {
    var ZCMOVER MOVER2;
    var ZCMOVER MOVER1;
    var int MOVPTR1;
    var int MOVPTR2;
    var int Q308_BLAKEDOOR_COUNT;
    if ((Q308_BLAKEDOOR_COUNT) == (0)) {
        PRINTD("Rozpoczynam - Q308_BLAKEDOOR_APPLY");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("Q308_MOVER_BLAKEDOOR_CLOSED");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        MOVPTR2 = MEM_SEARCHVOBBYNAME("Q308_MOVER_BLAKEDOOR_OPEN");
        MOVER2 = MEM_PTRTOINST(MOVPTR2);
        CHANGEVOBCOLLISION("Q308_BLAKEDOOR_OPEN", FALSE, FALSE, FALSE, TRUE);
        CHANGEVOBCOLLISION("Q308_BLAKEDOOR_CLOSED", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("Q308_MOVER_BLAKEDOOR_CLOSED");
        WLD_SENDTRIGGER("Q308_MOVER_BLAKEDOOR_OPEN");
        Q308_BLAKEDOOR_COUNT = 1;
    };
    if (((((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_OPENING))) && ((MOVER2.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - Q308_BLAKEDOOR_APPLY");
        CHANGEVOBCOLLISION("Q308_BLAKEDOOR_OPEN", TRUE, TRUE, TRUE, TRUE);
        CHANGEVOBCOLLISION("Q308_BLAKEDOOR_CLOSED", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(63819);
        Q308_BLAKEDOOR_COUNT = 0;
    };
}

