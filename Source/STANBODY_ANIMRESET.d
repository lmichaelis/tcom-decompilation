var int STANBODY_ANIMRESET;
func void STANBODY_S1() {
    var C_NPC HER;
    HER = HLP_GETNPC(50091);
    if ((HLP_GETINSTANCEID(SELF)) == (HLP_GETINSTANCEID(HER))) {
        STANBODY_ANIMRESET = FALSE;
        SELF.AIVAR[4] = TRUE;
        PLAYER_MOBSI_PRODUCTION = MOBSI_STANBODY;
        AI_PROCESSINFOS(HER);
    };
}

func int PC_STANBODY_CONDITION() {
    if (((PLAYER_MOBSI_PRODUCTION) == (MOBSI_STANBODY)) && (NPC_KNOWSINFO(OTHER, 84240))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

instance PC_STANBODY_AUTOEND(C_INFO) {
    NPC = 50091;
    NR = 999;
    CONDITION = PC_STANBODY_AUTOEND_CONDITION;
    INFORMATION = PC_STANBODY_AUTOEND_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int PC_STANBODY_AUTOEND_CONDITION() {
    if (((PLAYER_MOBSI_PRODUCTION) == (MOBSI_STANBODY)) && (!(NPC_KNOWSINFO(OTHER, 84240)))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_STANBODY_AUTOEND_INFO() {
    B_ENDPRODUCTIONDIALOG();
}

instance PC_STANBODY_END(C_INFO) {
    NPC = 50091;
    NR = 999;
    CONDITION = PC_STANBODY_CONDITION;
    INFORMATION = PC_STANBODY_END_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDINSPECTION;
}

func void PC_STANBODY_END_INFO() {
    if ((STANBODY_ANIMRESET) == (TRUE)) {
        AI_PLAYANI(OTHER, "T_CHESTSMALL_S0_2_STAND");
    };
    B_ENDPRODUCTIONDIALOG();
}

instance PC_STANBODY_CHECKBODY(C_INFO) {
    NPC = 50091;
    CONDITION = PC_STANBODY_CONDITION;
    INFORMATION = PC_STANBODY_CHECKBODY_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = DIALOG_CHECKCORPSE;
}

func void PC_STANBODY_CHECKBODY_INFO() {
    STANBODY_ANIMRESET = TRUE;
    AI_PLAYANI(OTHER, "T_CHESTSMALL_S0_2_STAND");
    AI_PLAYANI(OTHER, T_PLUNDER);
    AI_OUTPUT(OTHER, SELF, "DIA_StanBody_CheckBody_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_StanBody_CheckBody_15_02");
    AI_PLAYANI(OTHER, "T_CHESTSMALL_STAND_2_S0");
    B_LOGENTRY(TOPIC_Q303, LOG_Q303_CHECKSTANBODY);
}

instance PC_STANBODY_CHECKTHROAT(C_INFO) {
    NPC = 50091;
    CONDITION = PC_STANBODY_CONDITION;
    INFORMATION = PC_STANBODY_CHECKTHROAT_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = DIALOG_CHECKGULLET;
}

func void PC_STANBODY_CHECKTHROAT_INFO() {
    STANBODY_ANIMRESET = TRUE;
    AI_PLAYANI(OTHER, "T_CHESTSMALL_S0_2_STAND");
    AI_PLAYANI(OTHER, T_PLUNDER);
    AI_OUTPUT(OTHER, SELF, "DIA_StanBody_CheckThroat_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_StanBody_CheckThroat_15_02");
    AI_OUTPUT(OTHER, SELF, "DIA_StanBody_CheckThroat_15_03");
    AI_PLAYANI(OTHER, "T_CHESTSMALL_STAND_2_S0");
    B_LOGENTRY(TOPIC_Q303, LOG_Q303_CHECKSTANTHROAT);
}

instance PC_STANBODY_CHECKPOCKETS(C_INFO) {
    NPC = 50091;
    CONDITION = PC_STANBODY_CONDITION;
    INFORMATION = PC_STANBODY_CHECKPOCKETS_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = DIALOG_CHECKPOCKET;
}

func void PC_STANBODY_CHECKPOCKETS_INFO() {
    STANBODY_ANIMRESET = TRUE;
    AI_PLAYANI(OTHER, "T_CHESTSMALL_S0_2_STAND");
    AI_PLAYANI(OTHER, T_PLUNDER);
    AI_OUTPUT(OTHER, SELF, "DIA_StanBody_CheckPockets_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_StanBody_CheckPockets_15_02");
    AI_PLAYANI(OTHER, "T_CHESTSMALL_STAND_2_S0");
}

instance PC_STANBODY_CHECKFLOOR(C_INFO) {
    NPC = 50091;
    CONDITION = PC_STANBODY_CHECKFLOOR_CONDITION;
    INFORMATION = PC_STANBODY_CHECKFLOOR_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = DIALOG_CHECKFLOORUNDERBODY;
}

func int PC_STANBODY_CHECKFLOOR_CONDITION() {
    if ((((PLAYER_MOBSI_PRODUCTION) == (MOBSI_STANBODY)) && (NPC_KNOWSINFO(OTHER, 48931))) && (NPC_KNOWSINFO(OTHER, 48929))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_STANBODY_CHECKFLOOR_INFO() {
    STANBODY_ANIMRESET = TRUE;
    AI_PLAYANI(OTHER, "T_CHESTSMALL_S0_2_STAND");
    AI_PLAYANI(OTHER, T_PLUNDER);
    AI_OUTPUT(OTHER, SELF, "DIA_StanBody_CheckFloor_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_StanBody_CheckFloor_15_02");
    AI_PLAYANI(OTHER, "T_CHESTSMALL_STAND_2_S0");
}

instance PC_STANBODY_CHECKFOOD(C_INFO) {
    NPC = 50091;
    CONDITION = PC_STANBODY_CHECKFOOD_CONDITION;
    INFORMATION = PC_STANBODY_CHECKFOOD_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = DIALOG_SMELLSTEW;
}

func int PC_STANBODY_CHECKFOOD_CONDITION() {
    if (((PLAYER_MOBSI_PRODUCTION) == (MOBSI_STANBODY)) && (NPC_KNOWSINFO(OTHER, 48933))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void PC_STANBODY_CHECKFOOD_INFO() {
    Q303_TAKESTANSTEW = TRUE;
    CHANGEVOBCOLLISION("KM_OSCARINN_STEW", FALSE, FALSE, FALSE, FALSE);
    STANBODY_ANIMRESET = TRUE;
    AI_PLAYANI(OTHER, "T_CHESTSMALL_S0_2_STAND");
    B_MARVIN_USESTANSTEW_START();
    AI_PLAYANI(OTHER, "R_CHECKSTEW_SNIFF");
    B_MARVIN_USESTANSTEW_END();
    AI_OUTPUT(OTHER, SELF, "DIA_StanBody_CheckFood_15_01");
    AI_OUTPUT(OTHER, SELF, "DIA_StanBody_CheckFood_15_02");
    AI_OUTPUT(OTHER, SELF, "DIA_StanBody_CheckFood_15_03");
    CREATEINVITEMS(SELF, 37431, 1);
    B_LOGENTRY(TOPIC_Q303, LOG_Q303_CHECKSTANSTEW);
    if (NPC_KNOWSINFO(OTHER, 83491)) {
        B_LOGENTRY(TOPIC_Q303, LOG_Q303_STEWANDHIERRO);
    };
    B_LOGENTRY(TOPIC_Q303, LOG_Q303_STEWANDWHO);
    NPC_REMOVEINVITEMS(HERO, 36129, NPC_HASITEMS(HERO, 36129));
    B_ENDPRODUCTIONDIALOG();
}

