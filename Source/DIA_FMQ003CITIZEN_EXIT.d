instance DIA_FMQ003CITIZEN_EXIT(C_INFO) {
    NPC = 51937;
    NR = 999;
    CONDITION = DIA_FMQ003CITIZEN_EXIT_CONDITION;
    INFORMATION = DIA_FMQ003CITIZEN_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_FMQ003CITIZEN_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_FMQ003CITIZEN_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_FMQ003CITIZEN_HELLO(C_INFO) {
    NPC = 51937;
    NR = 1;
    CONDITION = DIA_FMQ003CITIZEN_HELLO_CONDITION;
    INFORMATION = DIA_FMQ003CITIZEN_HELLO_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_FMQ003CITIZEN_HELLO_CONDITION() {
    if (((NPC_GETDISTTOWP(VLK_6244_CITIZEN, "PARTM1_GUILD_SMALLTALK_02")) <= (450)) && ((NPC_GETDISTTOWP(SELF, "PARTM1_GUILD_SMALLTALK_01")) <= (450))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_FMQ003CITIZEN_HELLO_INFO() {
    TRIA_INVITE(VLK_6244_CITIZEN);
    TRIA_START();
    AI_LOOKATNPC(HERO, SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_03_01");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6244_CITIZEN);
    AI_TURNTONPC(SELF, VLK_6244_CITIZEN);
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_03_02");
    TRIA_WAIT();
    AI_TURNTONPC(VLK_6244_CITIZEN, SELF);
    TRIA_WAIT();
    TRIA_NEXT(VLK_6243_CITIZEN);
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_FMQ003Citizen_Hello_15_04");
    TRIA_WAIT();
    AI_WAITTILLEND(SELF, OTHER);
    AI_TURNTONPC(SELF, HERO);
    TRIA_WAIT();
    TRIA_NEXT(VLK_6244_CITIZEN);
    TRIA_WAIT();
    AI_TURNTONPC(VLK_6244_CITIZEN, HERO);
    TRIA_WAIT();
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_03_04");
    AI_LOOKATNPC(SELF, OTHER);
    INFO_CLEARCHOICES(75467);
    INFO_ADDCHOICE(75467, "In that case, no crime took place.", 75470);
    INFO_ADDCHOICE(75467, "I reprimand you.", 75471);
}

func void DIA_FMQ003CITIZEN_HELLO_GOODBYE() {
    AI_OUTPUT(OTHER, SELF, "DIA_FMQ003Citizen_Hello_Goodbye_15_01");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6243_CITIZEN);
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_Goodbye_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_FMQ003Citizen_Hello_Goodbye_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_Goodbye_03_04");
    AI_OUTPUT(OTHER, SELF, "DIA_FMQ003Citizen_Hello_Goodbye_15_05");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6244_CITIZEN);
    AI_LOOKATNPC(SELF, VLK_6244_CITIZEN);
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_Goodbye_03_06");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6243_CITIZEN);
    AI_TURNTONPC(SELF, VLK_6244_CITIZEN);
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_Goodbye_03_07");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6244_CITIZEN);
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_Goodbye_03_08");
    FMQ003_CITIZENTALK = 1;
    TRIA_FINISH();
    AI_WAITTILLEND(SELF, OTHER);
    AI_WAITTILLEND(OTHER, SELF);
    AI_STOPLOOKAT(SELF);
    AI_STOPLOOKAT(OTHER);
    INFO_CLEARCHOICES(75467);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_FMQ003CITIZEN_HELLO_BADGUY() {
    AI_OUTPUT(OTHER, SELF, "DIA_FMQ003Citizen_Hello_BadGuy_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_BadGuy_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_BadGuy_03_03");
    AI_OUTPUT(OTHER, SELF, "DIA_FMQ003Citizen_Hello_BadGuy_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_BadGuy_03_05");
    AI_OUTPUT(OTHER, SELF, "DIA_FMQ003Citizen_Hello_BadGuy_15_06");
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_BadGuy_03_07");
    TRIA_WAIT();
    AI_TURNTONPC(SELF, VLK_6244_CITIZEN);
    AI_LOOKATNPC(SELF, VLK_6244_CITIZEN);
    TRIA_WAIT();
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_BadGuy_03_08");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6243_CITIZEN);
    AI_LOOKATNPC(SELF, HERO);
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_BadGuy_03_09");
    INFO_CLEARCHOICES(75467);
    INFO_ADDCHOICE(75467, "Maybe it could be done...", 75472);
    INFO_ADDCHOICE(75467, "No.", 75473);
}

func void DIA_FMQ003CITIZEN_HELLO_BADGUY_SURE() {
    AI_OUTPUT(OTHER, SELF, "DIA_FMQ003Citizen_Hello_Sure_15_01");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6244_CITIZEN);
    AI_TURNTONPC(SELF, HERO);
    AI_LOOKATNPC(SELF, HERO);
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_Sure_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_FMQ003Citizen_Hello_Sure_15_03");
    AI_OUTPUT(OTHER, SELF, "DIA_FMQ003Citizen_Hello_Sure_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_Sure_03_05");
    AI_OUTPUT(OTHER, SELF, "DIA_FMQ003Citizen_Hello_Sure_15_06");
    AI_PLAYANI(SELF, "T_PISSOFF");
    AI_OUTPUT(OTHER, SELF, "DIA_FMQ003Citizen_Hello_Sure_15_07");
    FMQ003_CITIZENTALK = 2;
    TRIA_FINISH();
    AI_WAITTILLEND(SELF, OTHER);
    AI_WAITTILLEND(OTHER, SELF);
    AI_STOPLOOKAT(SELF);
    AI_STOPLOOKAT(OTHER);
    INFO_CLEARCHOICES(75467);
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_FMQ003CITIZEN_HELLO_BADGUY_NO() {
    AI_OUTPUT(OTHER, SELF, "DIA_FMQ003Citizen_Hello_No_15_01");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6243_CITIZEN);
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_No_03_02");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6244_CITIZEN);
    AI_TURNTONPC(VLK_6244_CITIZEN, SELF);
    AI_TURNTONPC(SELF, VLK_6244_CITIZEN);
    AI_LOOKATNPC(SELF, VLK_6244_CITIZEN);
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_No_03_03");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6243_CITIZEN);
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_No_03_04");
    TRIA_WAIT();
    TRIA_NEXT(VLK_6244_CITIZEN);
    AI_OUTPUT(SELF, OTHER, "DIA_FMQ003Citizen_Hello_No_03_05");
    FMQ003_CITIZENTALK = 3;
    TRIA_FINISH();
    AI_WAITTILLEND(SELF, OTHER);
    AI_WAITTILLEND(OTHER, SELF);
    AI_STOPLOOKAT(SELF);
    AI_STOPLOOKAT(OTHER);
    INFO_CLEARCHOICES(75467);
    AI_STOPPROCESSINFOS(SELF);
}

func void WOMANCITIZENTURN() {
    AI_TURNTONPC(VLK_6243_CITIZEN, VLK_6244_CITIZEN);
}

