instance DIA_JAVAD_Q602_EXIT(C_INFO) {
    NPC = 59952;
    NR = 999;
    CONDITION = DIA_JAVAD_Q602_EXIT_CONDITION;
    INFORMATION = DIA_JAVAD_Q602_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_JAVAD_Q602_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_JAVAD_Q602_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_JAVAD_Q602_FINALLY(C_INFO) {
    NPC = 59952;
    NR = 1;
    CONDITION = DIA_JAVAD_Q602_FINALLY_CONDITION;
    INFORMATION = DIA_JAVAD_Q602_FINALLY_INFO;
    PERMANENT = FALSE;
    IMPORTANT = TRUE;
}

func int DIA_JAVAD_Q602_FINALLY_CONDITION() {
    if (((LOG_GETSTATUS(MIS_Q602)) == (LOG_RUNNING)) && ((NPC_GETDISTTONPC(SELF, OTHER)) <= (500))) {
        if (((NPC_GETDISTTOWP(NONE_6331_JAVAD_Q602, "PARTE1_JAVAD")) <= (400)) && ((NPC_GETDISTTOWP(SLD_5000_LORENZO_Q602, "PARTE1_LORENZO")) <= (400))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_JAVAD_Q602_FINALLY_INFO() {
    TRIA_INVITE(SLD_5000_LORENZO_Q602);
    TRIA_INVITE(SLD_10000_ADELARD_Q602);
    TRIA_START();
    AI_OUTPUT(SELF, OTHER, "DIA_Javad_Q602_Finally_03_01");
    AI_TURNTONPC(SLD_10000_ADELARD_Q602, SLD_5000_LORENZO_Q602);
    AI_OUTPUT(SELF, OTHER, "DIA_Javad_Q602_Finally_03_02");
    INFO_CLEARCHOICES(90574);
    INFO_ADDCHOICE(90574, "It looked like you had the situation under control.", 90577);
}

func void DIA_JAVAD_Q602_FINALLY_CALM() {
    AI_OUTPUT(OTHER, SELF, "DIA_Javad_Q602_Finally_Calm_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Javad_Q602_Finally_Calm_03_02");
    TRIA_WAIT();
    TRIA_NEXT(SLD_5000_LORENZO_Q602);
    AI_OUTPUT(SELF, OTHER, "DIA_Javad_Q602_Finally_Calm_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Javad_Q602_Finally_Calm_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Javad_Q602_Finally_Calm_03_05");
    INFO_CLEARCHOICES(90574);
    INFO_ADDCHOICE(90574, "It seems that Ulryk and the Usurer have joined forces.", 90578);
}

func void DIA_JAVAD_Q602_FINALLY_CALM_CITY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Javad_Q602_Finally_City_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Javad_Q602_Finally_City_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Javad_Q602_Finally_City_03_04");
    TRIA_FINISH();
    INFO_CLEARCHOICES(90574);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_Q602, LOG_Q602_JAVAD_SAVEDLORENZO);
    AI_FUNCTION(SELF, 90579);
}

func void JAVAD_CHANGERTNQ602() {
    NPC_EXCHANGEROUTINE(NONE_6331_JAVAD_Q602, "Q602_OUTSIDE");
    NPC_EXCHANGEROUTINE(SLD_10000_ADELARD_Q602, "Q602_OUTSIDE");
    NPC_EXCHANGEROUTINE(SLD_5000_LORENZO_Q602, "Q602_OUTSIDE");
}

