func void SQ228_COUNTNEST() {
    var int SQ228_COUNTNEXT_LOGENTRY;
    B_GIVEPLAYERXP(XP_SQ228_DESTROYEDNEST);
    SQ228_RATNESTDESTROYEDCOUNT = (SQ228_RATNESTDESTROYEDCOUNT) + (1);
    PRINTD(CS2("Zniszczone gniazda ", INTTOSTRING(SQ228_RATNESTDESTROYEDCOUNT)));
    AI_WAIT(HERO, 1067030938);
    AI_USEMOB(HERO, NPC_GETDETECTEDMOB(HERO), -(1));
    AI_FUNCTION(HERO, 62642);
    if ((SQ228_COUNTNEXT_LOGENTRY) == (FALSE)) {
        SQ228_COUNTNEXT_LOGENTRY = TRUE;
        B_LOGENTRY(TOPIC_SQ228, LOG_SQ228_RATNEST);
        AI_OUTPUT(HERO, HERO, "DIA_Marvin_SQ228_Smell_15_01");
    };
}

func void SQ228_COUNTNEST_REMOVEPOTION() {
    FF_APPLYONCEEXT(62643, 30, 5);
    HERO.AIVAR[4] = FALSE;
    PLAYER_MOBSI_PRODUCTION = MOBSI_NONE;
    AI_STOPPROCESSINFOS(HERO);
}

func void SQ228_COUNTNEST_REMOVEPOTION_APPLY() {
    var int SQ228_COUNTNEST_REMOVEPOTION_COUNT;
    SQ228_COUNTNEST_REMOVEPOTION_COUNT = (SQ228_COUNTNEST_REMOVEPOTION_COUNT) + (1);
    if ((SQ228_COUNTNEST_REMOVEPOTION_COUNT) == (5)) {
        SQ228_COUNTNEST_REMOVEPOTION_COUNT = 0;
        NPC_REMOVEINVITEMS(HERO, 37111, 1);
        PRINTD("Usuwam truciznê");
    };
}

func void SQ228_REMOVEEVENTS() {
    PRINTD("Farma Bengara czysta");
    FF_APPLYONCEEXTGT(64170, 0, -(1));
    WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_POISON_01");
    WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_POISON_02");
    WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_POISON_03");
    WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_POISON_04");
    WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_POISON_05");
    SQ228_CHECKRATNEST_01 = 2;
    SQ228_CHECKRATNEST_02 = 2;
    SQ228_CHECKRATNEST_03 = 2;
    SQ228_CHECKRATNEST_04 = 2;
    SQ228_CHECKRATNEST_05 = 2;
    if (HLP_ISVALIDNPC(BAU_2255_FARMER)) {
        B_STARTOTHERROUTINE(BAU_2255_FARMER, START);
    };
    if (HLP_ISVALIDNPC(BAU_2256_FARMER)) {
        B_STARTOTHERROUTINE(BAU_2256_FARMER, START);
    };
    if (HLP_ISVALIDNPC(BAU_6023_GUY)) {
        B_STARTOTHERROUTINE(BAU_6023_GUY, START);
    };
    if (HLP_ISVALIDNPC(BAU_13810_WORKER)) {
        B_STARTOTHERROUTINE(BAU_13810_WORKER, START);
    };
}

func void SQ228_HIDERATNEST() {
    CHANGEVOBCOLLISION("SQ228_RATNEST_01", FALSE, FALSE, FALSE, TRUE);
    CHANGEVOBCOLLISION("SQ228_RATNEST_02", FALSE, FALSE, FALSE, TRUE);
    CHANGEVOBCOLLISION("SQ228_RATNEST_03", FALSE, FALSE, FALSE, TRUE);
    CHANGEVOBCOLLISION("SQ228_RATNEST_04", FALSE, FALSE, FALSE, TRUE);
    CHANGEVOBCOLLISION("SQ228_RATNEST_05", FALSE, FALSE, FALSE, TRUE);
    if (((SQ228_CHECKRATNEST_01) >= (0)) && ((SQ228_CHECKRATNEST_01) != (2))) {
        WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_01");
        if ((SQ228_CHECKRATNEST_01) == (1)) {
            WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_POISON_01");
        };
    };
    if (((SQ228_CHECKRATNEST_02) >= (0)) && ((SQ228_CHECKRATNEST_02) != (2))) {
        WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_02");
        if ((SQ228_CHECKRATNEST_02) == (1)) {
            WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_POISON_02");
        };
    };
    if (((SQ228_CHECKRATNEST_03) >= (0)) && ((SQ228_CHECKRATNEST_03) != (2))) {
        WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_03");
        if ((SQ228_CHECKRATNEST_03) == (1)) {
            WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_POISON_03");
        };
    };
    if (((SQ228_CHECKRATNEST_04) >= (0)) && ((SQ228_CHECKRATNEST_04) != (2))) {
        WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_04");
        if ((SQ228_CHECKRATNEST_04) == (1)) {
            WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_POISON_04");
        };
    };
    if (((SQ228_CHECKRATNEST_05) >= (0)) && ((SQ228_CHECKRATNEST_05) != (2))) {
        WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_05");
        if ((SQ228_CHECKRATNEST_05) == (1)) {
            WLD_SENDTRIGGER("SQ228_MOVER_RATNEST_POISON_05");
        };
    };
}

