func void SQ413_SPAWNGUARDS() {
    WLD_INSERTNPC(53527, "PARTM5_HOTEL_SQ413_GUARD_01");
    WLD_INSERTNPC(53530, "PARTM5_HOTEL_SQ413_GUARD_02");
    B_STARTOTHERROUTINE(VLK_11310_LIMAK, "PRISON");
    NPC_REFRESH(VLK_11310_LIMAK);
    TELEPORTNPCTOWP(53774, VLK_11310_LIMAK.WP);
    FF_APPLYONCEEXTGT(62516, 0, -(1));
}

func void SQ413_CORPSE_START() {
    var int MOVPTR1;
    var ZCMOVER MOVER1;
    var int SQ413_CORPSE_START_COLLISION;
    if ((SQ413_CORPSE_START_COLLISION) == (0)) {
        PRINTD("Rozpoczynam - SQ413_Corpse_Start");
        MOVPTR1 = MEM_SEARCHVOBBYNAME("SQ413_MOVER_CORPSE");
        MOVER1 = MEM_PTRTOINST(MOVPTR1);
        CHANGEVOBCOLLISION("SQ413_CORPSE_CITIZEN", FALSE, FALSE, FALSE, TRUE);
        WLD_SENDTRIGGER("SQ413_MOVER_CORPSE");
        SQ413_CORPSE_START_COLLISION = 1;
    };
    if (((MOVER1.MOVERSTATE) != (MOVER_STATE_OPENING)) && ((MOVER1.MOVERSTATE) != (MOVER_STATE_CLOSING))) {
        PRINTD("Skoñczy³em - SQ413_Corpse_Start");
        CHANGEVOBCOLLISION("SQ413_CORPSE_CITIZEN", TRUE, TRUE, TRUE, TRUE);
        FF_REMOVE(62516);
        SQ413_CORPSE_START_COLLISION = 0;
    };
}

func void SQ413_REMOVEGUARDS() {
    B_REMOVENPC(53527);
    B_REMOVENPC(53530);
    B_REMOVENPC(53774);
    FF_APPLYONCEEXTGT(62516, 0, -(1));
    WLD_SENDTRIGGER("SQ413_CHEST");
}

func void SQ413_GOAWAY() {
    var int SQ413_FREEEXP;
    if ((SQ413_FREEEXP) == (FALSE)) {
        SQ413_FREEEXP = TRUE;
        B_GIVEPLAYERXP((XP_SQ413_FINISH) / (2));
    };
    if ((HERO.GUILD) == (GIL_MIL)) {
        B_SAY(SELF, OTHER, "$IMBUSY_CALM");
        AI_RESETFACEANI(SELF);
    };
    AI_STARTFACEANI(SELF, S_ANGRY, 1, -(1));
    B_SAY(SELF, OTHER, "$IMBUSY_ANGRY");
    AI_RESETFACEANI(SELF);
    AI_STOPPROCESSINFOS(SELF);
}

