var int SQ102_RASCO_ABOUTOTHO;
var int SQ102_RASCO_JOBDONE;
instance DIA_RASCO_EXIT(C_INFO) {
    NPC = 57616;
    NR = 999;
    CONDITION = DIA_RASCO_EXIT_CONDITION;
    INFORMATION = DIA_RASCO_EXIT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = DIALOG_ENDE;
}

func int DIA_RASCO_EXIT_CONDITION() {
    return TRUE;
}

func void DIA_RASCO_EXIT_INFO() {
    AI_STOPPROCESSINFOS(SELF);
}

func void DIA_RASCO_SQ102_OTHO_REFUSETALK() {
    NPC_SETREFUSETALK(SELF, 60);
}

func void DIA_RASCO_HELLO_HOUSE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_Hello_House_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Hello_House_03_02");
}

func void DIA_RASCO_HELLO_LOSTWAY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_Hello_LostWay_15_01");
    NPC_INITAMBIENTS(SELF, 2);
    if ((NPC_GETLASTAMBIENT(SELF)) == (1)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Hello_LostWay_03_02");
        INFO_CLEARCHOICES(88907);
        DIA_RASCO_SQ102_OTHO_REFUSETALK();
        AI_STOPPROCESSINFOS(SELF);
    };
    if ((NPC_GETLASTAMBIENT(SELF)) == (2)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Hello_LostWay_03_03");
        INFO_CLEARCHOICES(88907);
        AI_STOPPROCESSINFOS(SELF);
        B_ATTACK(SELF, OTHER, AR_NONE, 1);
    };
}

func void DIA_RASCO_SQ102_OTHO() {
    SQ102_RASCO_ABOUTOTHO = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Otho_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_03_02");
    AI_REMOVEWEAPON(SELF);
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Otho_15_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_03_06");
    AI_LOGENTRY(TOPIC_SQ102, LOG_SQ102_RASCO_NOTHIEF);
    INFO_CLEARCHOICES(88907);
    INFO_ADDCHOICE(88907, "Why would I do that?", 88854);
    INFO_ADDCHOICE(88907, "What do I get in return?", 88855);
    INFO_CLEARCHOICES(88858);
    INFO_ADDCHOICE(88858, "Why would I do that?", 88854);
    INFO_ADDCHOICE(88858, "What do I get in return?", 88855);
}

func void DIA_RASCO_SQ102_OTHO_WHY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Otho_Why_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Why_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Why_03_03");
    INFO_ADDCHOICE(88907, "And what if I refuse?", 88856);
    INFO_ADDCHOICE(88907, "All right, I'll do it.", 88857);
    INFO_ADDCHOICE(88858, "And what if I refuse?", 88856);
    INFO_ADDCHOICE(88858, "All right, I'll do it.", 88857);
}

func void DIA_RASCO_SQ102_OTHO_REWARD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Otho_Reward_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Reward_03_02");
}

func void DIA_RASCO_SQ102_OTHO_WHY_REFUSE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Otho_Refuse_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Refuse_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Refuse_03_03");
}

func void DIA_RASCO_SQ102_OTHO_WHY_OKAY() {
    SQ102_HELPRASCOWITHSHIT = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Otho_Okay_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Okay_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Okay_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Otho_Okay_03_04");
    AI_LOGENTRY(TOPIC_SQ102, LOG_SQ102_RASCO_WORK);
    NPC_EXCHANGEROUTINE(NONE_11048_HENKER, "GUARD");
    NPC_EXCHANGEROUTINE(BAU_729_NOB, "RascoQuest");
    INFO_CLEARCHOICES(88907);
    INFO_CLEARCHOICES(88858);
    AI_STOPPROCESSINFOS(SELF);
    DIA_RASCO_SQ102_OTHO_REFUSETALK();
}

instance DIA_RASCO_OTHOSENDME(C_INFO) {
    NPC = 57616;
    NR = 3;
    CONDITION = DIA_RASCO_OTHOSENDME_CONDITION;
    INFORMATION = DIA_RASCO_OTHOSENDME_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Otho sent me.";
}

func int DIA_RASCO_OTHOSENDME_CONDITION() {
    if ((((NPC_KNOWSINFO(OTHER, 89039)) && ((LOG_GETSTATUS(MIS_SQ102)) == (LOG_RUNNING))) && ((SQ102_HELPEDOTHO) == (FALSE))) && ((SQ102_RASCO_ABOUTOTHO) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_RASCO_OTHOSENDME_INFO() {
    DIA_RASCO_SQ102_OTHO();
}

instance DIA_RASCO_SQ102_DONE(C_INFO) {
    NPC = 57616;
    NR = 2;
    CONDITION = DIA_RASCO_SQ102_DONE_CONDITION;
    INFORMATION = DIA_RASCO_SQ102_DONE_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "I did what you wanted.";
}

func int DIA_RASCO_SQ102_DONE_CONDITION() {
    if (((((SQ102_HELPRASCOWITHSHIT) == (TRUE)) && ((SQ102_HELPEDOTHO) == (FALSE))) && ((LOG_GETSTATUS(MIS_SQ102)) == (LOG_RUNNING))) && ((SQ102_RASCO_JOBDONE) == (FALSE))) {
        if (((MOB_HASITEMS("SQ102_ALBYNSACK_CONTAINER", 37036)) == (TRUE)) || ((MOB_HASITEMS("Q104_ALBYNSACK_CONTAINER", 37036)) == (TRUE))) {
            return TRUE;
        };
    };
    return 0 /* !broken stack! */;
}

func void DIA_RASCO_SQ102_DONE_DIALOGUE() {
    SQ102_HELPRASCOWITHSHIT = 2;
    SQ102_RASCO_JOBDONE = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Done_15_01");
    AI_WAITTILLEND(SELF, OTHER);
    AI_REMOVEWEAPON(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_03_04");
    if ((CITYENTERED) == (FALSE)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_03_05");
    };
    NPC_EXCHANGEROUTINE(NONE_11048_HENKER, START);
    if (NPC_KNOWSINFO(HERO, 89078)) {
        NPC_EXCHANGEROUTINE(BAU_729_NOB, "NORMALDAY");
    };
    NPC_EXCHANGEROUTINE(BAU_729_NOB, START);
    INFO_CLEARCHOICES(88861);
    if ((CITYENTERED) == (FALSE)) {
        INFO_ADDCHOICE(88861, "Tell me how to get into town.", 88868);
        if ((LOG_GETSTATUS(MIS_Q201)) != (LOG_SUCCESS)) {
            INFO_ADDCHOICE(88861, "Getting into town is a hassle?", 88867);
        };
    };
    INFO_ADDCHOICE(88861, "I'll take that ring.", 88866);
    INFO_CLEARCHOICES(88907);
    if ((CITYENTERED) == (FALSE)) {
        INFO_ADDCHOICE(88907, "Tell me how to get into town.", 88868);
        if ((LOG_GETSTATUS(MIS_Q201)) != (LOG_SUCCESS)) {
            INFO_ADDCHOICE(88907, "Getting into town is a hassle?", 88867);
        };
    };
    INFO_ADDCHOICE(88907, "I'll take that ring.", 88866);
}

func void DIA_RASCO_SQ102_DONE_INFO() {
    DIA_RASCO_SQ102_DONE_DIALOGUE();
}

func void DIA_RASCO_SQ102_DONE_FINISHJOB() {
    INFO_CLEARCHOICES(88861);
    INFO_CLEARCHOICES(88907);
    SQ102_HELPEDRASCO = TRUE;
    AI_LOGENTRY(TOPIC_SQ102, LOG_SQ102_RASCO_FINISHJOB);
    DIA_RASCO_SQ102_OTHO_REFUSETALK();
}

func void DIA_RASCO_SQ102_DONE_RING() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Done_Ring_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_Ring_03_02");
    CREATEINVITEMS(SELF, 34508, 1);
    B_GIVEINVITEMS(SELF, OTHER, 34508, 1);
    DIA_RASCO_SQ102_DONE_FINISHJOB();
}

func void DIA_RASCO_SQ102_DONE_PROBLEM() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Done_Problem_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_Problem_03_02");
}

func void DIA_RASCO_SQ102_DONE_CITY() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ102_Done_City_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_City_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_City_03_03");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_City_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ102_Done_City_03_05");
    DIA_RASCO_SQ102_DONE_FINISHJOB();
}

instance DIA_RASCO_GQ001_JORN(C_INFO) {
    NPC = 57616;
    NR = 10;
    CONDITION = DIA_RASCO_GQ001_JORN_CONDITION;
    INFORMATION = DIA_RASCO_GQ001_JORN_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "You know anything about Kurt's break-in?";
}

func int DIA_RASCO_GQ001_JORN_CONDITION() {
    if (((NPC_KNOWSINFO(OTHER, 87898)) && ((LOG_GETSTATUS(MIS_GQ001)) == (LOG_RUNNING))) && (!(NPC_KNOWSINFO(OTHER, 87935)))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_RASCO_GQ001_JORN_TELLEVERYTHING() {
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_03_06");
    GQ001_VILLAGEINFORMATIONJORNCOUNT = (GQ001_VILLAGEINFORMATIONJORNCOUNT) + (1);
    INFO_CLEARCHOICES(88869);
    AI_STOPPROCESSINFOS(SELF);
    AI_LOGENTRY(TOPIC_GQ001, LOG_GQ001_RASCO);
}

func void DIA_RASCO_GQ001_JORN_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_GQ001_Jorn_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_03_02");
    if ((SQ102_HELPEDRASCO) == (TRUE)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_03_03");
        DIA_RASCO_GQ001_JORN_TELLEVERYTHING();
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_03_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_03_08");
    INFO_CLEARCHOICES(88869);
    if ((NPC_HASITEMS(OTHER, 34203)) >= (GQ001_RASCOINFORMATION_V1)) {
        INFO_ADDCHOICE(88869, "Maybe a couple of coins will convince you?", 88873);
    };
    INFO_ADDCHOICE(88869, "It's about my brother. Looks like he's been kidnapped.", 88879);
}

func void DIA_RASCO_GQ001_JORN_WANTSOMEGOLD() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_GQ001_Jorn_WantSomeGold_15_01");
    B_STANDUP();
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_WantSomeGold_03_02");
    INFO_CLEARCHOICES(88869);
    INFO_ADDCHOICE(88869, DIALOG_GIVE10G, 88876);
    INFO_ADDCHOICE(88869, DIALOG_GIVE20G, 88877);
    INFO_ADDCHOICE(88869, DIALOG_GIVE30G, 88878);
}

var int RASCO_GQ001_GOLD;
func void DIA_RASCO_GQ001_JORN_WANTSOMEGOLD_GIVE() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_GQ001_Jorn_10_15_01");
    if ((RASCO_GQ001_GOLD) == (1)) {
    };
    if ((RASCO_GQ001_GOLD) == (2)) {
    };
    if ((RASCO_GQ001_GOLD) == (3)) {
        B_GIVEINVITEMS(OTHER, SELF, 34203, GQ001_RASCOINFORMATION_V3);
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_10_03_02");
    DIA_RASCO_GQ001_JORN_TELLEVERYTHING();
}

func void DIA_RASCO_GQ001_JORN_WANTSOMEGOLD_10() {
    RASCO_GQ001_GOLD = 1;
    DIA_RASCO_GQ001_JORN_WANTSOMEGOLD_GIVE();
}

func void DIA_RASCO_GQ001_JORN_WANTSOMEGOLD_20() {
    RASCO_GQ001_GOLD = 2;
    DIA_RASCO_GQ001_JORN_WANTSOMEGOLD_GIVE();
}

func void DIA_RASCO_GQ001_JORN_WANTSOMEGOLD_30() {
    RASCO_GQ001_GOLD = 3;
    DIA_RASCO_GQ001_JORN_WANTSOMEGOLD_GIVE();
}

func void DIA_RASCO_GQ001_JORN_BROTHER() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_GQ001_Jorn_Brother_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_Brother_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_GQ001_Jorn_Brother_03_03");
    AI_PLAYANI(SELF, "T_GETLOST");
    INFO_CLEARCHOICES(88869);
    AI_STOPPROCESSINFOS(SELF);
}

instance DIA_RASCO_SQ202(C_INFO) {
    NPC = 57616;
    NR = 1;
    CONDITION = DIA_RASCO_SQ202_CONDITION;
    INFORMATION = DIA_RASCO_SQ202_INFO;
    PERMANENT = FALSE;
    DESCRIPTION = "Apparently you're interested in a certain stuff.";
}

func int DIA_RASCO_SQ202_CONDITION() {
    if (((((SQ202_RASCOWANTSJOINT) == (TRUE)) && ((LOG_GETSTATUS(MIS_SQ202)) == (LOG_RUNNING))) && ((NPC_HASITEMS(OTHER, 34194)) >= (1))) && ((SQ202_OPENDFREDRIKJOINTS) == (TRUE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_RASCO_SQ202_INFO() {
    SQ202_RASCOWANTSJOINT = 2;
    AI_REMOVEWEAPON(SELF);
    B_STANDUP();
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_03_02");
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_15_03");
    B_MARVIN_USEFAKEJOINTTHROW();
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_03_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_03_05");
    INFO_CLEARCHOICES(88880);
    INFO_ADDCHOICE(88880, "Five.", 88888);
    INFO_ADDCHOICE(88880, "Ten.", 88890);
    INFO_ADDCHOICE(88880, "Fifteen.", 88893);
    INFO_CLEARCHOICES(88907);
    INFO_ADDCHOICE(88907, "Five.", 88888);
    INFO_ADDCHOICE(88907, "Ten.", 88890);
    INFO_ADDCHOICE(88907, "Fifteen.", 88893);
}

func void DIA_RASCO_SQ202_DEAL() {
    var int MARVINCURRENTJOINTS;
    SQ202_FARMERGOODCOUNT = 10;
    if ((NPC_HASITEMS(OTHER, 34194)) == (9)) {
        B_GIVEINVITEMS(SELF, OTHER, 34203, (SQ202_RASCOGOLD) * (9));
        SQ202_EARNEDGOLD = (SQ202_EARNEDGOLD) + ((SQ202_RASCOGOLD) * (9));
    };
    if ((NPC_HASITEMS(OTHER, 34194)) <= (8)) {
        MARVINCURRENTJOINTS = NPC_HASITEMS(OTHER, 34194);
        B_GIVEINVITEMS(SELF, OTHER, 34203, (SQ202_RASCOGOLD) * (MARVINCURRENTJOINTS));
        SQ202_EARNEDGOLD = (SQ202_EARNEDGOLD) + ((SQ202_RASCOGOLD) * (MARVINCURRENTJOINTS));
    };
    if ((MARVINCURRENTJOINTS) >= (5)) {
        SQ202_FREDRIKSUSPICIOUS = TRUE;
    };
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_01");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_02");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_03");
    INFO_CLEARCHOICES(88880);
    INFO_ADDCHOICE(88880, "I prefer not to reveal my sources.", 88886);
    INFO_ADDCHOICE(88880, "I got it from a trader named Petra.", 88887);
    INFO_CLEARCHOICES(88907);
    INFO_ADDCHOICE(88907, "I prefer not to reveal my sources.", 88886);
    INFO_ADDCHOICE(88907, "I got it from a trader named Petra.", 88887);
}

var int RASCO_CANTRADEJOINTS;
func void DIA_RASCO_SQ202_DUNNO() {
    RASCO_CANTRADEJOINTS = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_04");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_05");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_06");
    B_GIVEPLAYERXP(XP_SQ202_GOODANWSER);
    AI_LOGENTRY(TOPIC_SQ202, LOG_SQ202_RASCO_JOINTS_V1);
    INFO_CLEARCHOICES(88880);
    INFO_CLEARCHOICES(88907);
    LOG_CREATETOPIC(TOPIC_BARTER, LOG_NOTE);
    AI_LOGENTRY(TOPIC_BARTER, LOG_SILBACHBARTER_RASCO);
    NPC_SETREFUSETALK(SELF, 30);
}

func void DIA_RASCO_SQ202_FREDRIK() {
    SQ202_FARMERKNOWFREDRIK = TRUE;
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_07");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_08");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_09");
    AI_LOGENTRY(TOPIC_SQ202, LOG_SQ202_RASCO_JOINTS_V2);
    INFO_CLEARCHOICES(88880);
    INFO_CLEARCHOICES(88907);
    NPC_SETREFUSETALK(SELF, 30);
}

func void DIA_RASCO_SQ202_5() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_10");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_11");
    SQ202_RASCOGOLD = 3;
    INFO_CLEARCHOICES(88880);
    INFO_ADDCHOICE(88880, "Four.", 88889);
    INFO_ADDCHOICE(88880, "Agreed.", 88883);
    INFO_CLEARCHOICES(88907);
    INFO_ADDCHOICE(88907, "Four.", 88889);
    INFO_ADDCHOICE(88907, "Agreed.", 88883);
}

func void DIA_RASCO_SQ202_4() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_12");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_13");
    SQ202_RASCOGOLD = 4;
    DIA_RASCO_SQ202_DEAL();
}

func void DIA_RASCO_SQ202_10() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_14");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_15");
    SQ202_RASCOGOLD = 6;
    INFO_CLEARCHOICES(88880);
    INFO_ADDCHOICE(88880, "Eight.", 88891);
    INFO_ADDCHOICE(88880, "Agreed.", 88883);
    INFO_CLEARCHOICES(88907);
    INFO_ADDCHOICE(88907, "Eight.", 88891);
    INFO_ADDCHOICE(88907, "Agreed.", 88883);
}

func void DIA_RASCO_SQ202_8() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_16");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_17");
    SQ202_RASCOGOLD = 5;
    INFO_CLEARCHOICES(88880);
    INFO_ADDCHOICE(88880, "Six.", 88892);
    INFO_ADDCHOICE(88880, "Agreed.", 88883);
    INFO_CLEARCHOICES(88907);
    INFO_ADDCHOICE(88907, "Six.", 88892);
    INFO_ADDCHOICE(88907, "Agreed.", 88883);
}

func void DIA_RASCO_SQ202_6() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_18");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_19");
    SQ202_RASCOGOLD = 6;
    DIA_RASCO_SQ202_DEAL();
}

func void DIA_RASCO_SQ202_15() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_20");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_21");
    SQ202_RASCOGOLD = 8;
    INFO_CLEARCHOICES(88880);
    INFO_ADDCHOICE(88880, "Twelve.", 88894);
    INFO_ADDCHOICE(88880, "Agreed.", 88883);
    INFO_CLEARCHOICES(88907);
    INFO_ADDCHOICE(88907, "Twelve.", 88894);
    INFO_ADDCHOICE(88907, "Agreed.", 88883);
}

func void DIA_RASCO_SQ202_12() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_22");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_23");
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_24");
    SQ202_RASCOGOLD = 8;
    INFO_CLEARCHOICES(88880);
    INFO_ADDCHOICE(88880, "So be it.", 88895);
    INFO_ADDCHOICE(88880, "Agreed.", 88883);
    INFO_CLEARCHOICES(88907);
    INFO_ADDCHOICE(88907, "So be it.", 88895);
    INFO_ADDCHOICE(88907, "Agreed.", 88883);
}

func void DIA_RASCO_SQ202_SHRUG() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SQ202_Offer_15_25");
    if ((SQ102_HELPEDRASCO) == (TRUE)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_26");
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_27");
        SQ202_RASCOGOLD = 10;
        DIA_RASCO_SQ202_DEAL();
        B_GIVEPLAYERXP(XP_SQ202_GOODTRADER);
    };
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_SQ202_Offer_03_28");
    INFO_CLEARCHOICES(88880);
    INFO_CLEARCHOICES(88907);
}

instance DIA_RASCO_SELLJOINTS(C_INFO) {
    NPC = 57616;
    NR = 200;
    CONDITION = DIA_RASCO_SELLJOINTS_CONDITION;
    INFORMATION = DIA_RASCO_SELLJOINTS_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "I have more joints for you.";
}

func int DIA_RASCO_SELLJOINTS_CONDITION() {
    if ((RASCO_CANTRADEJOINTS) == (TRUE)) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

var int RASCO_COUNTALLJOINTS;
func void DIA_RASCO_SELLJOINTS_CHOICES() {
    var string ALL_STRING;
    var string ALL_STRING2;
    INFO_CLEARCHOICES(88896);
    INFO_CLEARCHOICES(88907);
    RASCO_COUNTALLJOINTS = NPC_HASITEMS(HERO, 34194);
    if ((NPC_HASITEMS(OTHER, 34194)) >= (5)) {
        INFO_ADDCHOICE(88896, "Sell 5 pieces.", 88906);
    };
    if ((NPC_HASITEMS(OTHER, 34194)) >= (1)) {
        INFO_ADDCHOICE(88896, "Sell 1 piece.", 88905);
    };
    ALL_STRING2 = CS4(DIALOG_ALL, " (", I2S(RASCO_COUNTALLJOINTS), ")");
    INFO_ADDCHOICE(88896, ALL_STRING2, 88904);
    INFO_ADDCHOICE(88907, DIALOG_BACK, 88903);
    if ((NPC_HASITEMS(OTHER, 34194)) >= (5)) {
        INFO_ADDCHOICE(88907, "Sell 5 pieces.", 88906);
    };
    if ((NPC_HASITEMS(OTHER, 34194)) >= (1)) {
        INFO_ADDCHOICE(88907, "Sell 1 piece.", 88905);
    };
    ALL_STRING = CS4(DIALOG_ALL, " (", I2S(RASCO_COUNTALLJOINTS), ")");
    INFO_ADDCHOICE(88907, ALL_STRING, 88904);
    INFO_ADDCHOICE(88896, DIALOG_BACK, 88903);
}

func void DIA_RASCO_SELLJOINTS_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_SellJoints_15_01");
    DIA_RASCO_SELLJOINTS_CHOICES();
}

func void DIA_RASCO_SELLJOINTS_BACK() {
    RASCO_COUNTALLJOINTS = 0;
    INFO_CLEARCHOICES(88896);
    INFO_CLEARCHOICES(88907);
}

func void DIA_RASCO_SELLJOINTS_EVERYTHING() {
    NPC_REMOVEINVITEMS(SELF, 34194, RASCO_COUNTALLJOINTS);
    CREATEINVITEMS(SELF, 34203, (RASCO_COUNTALLJOINTS) * (SQ202_RASCOGOLD));
    B_GIVEINVITEMS(SELF, OTHER, 34203, (RASCO_COUNTALLJOINTS) * (SQ202_RASCOGOLD));
    DIA_RASCO_SELLJOINTS_CHOICES();
    B_GIVEINVITEMS(OTHER, SELF, 34194, RASCO_COUNTALLJOINTS);
}

func void DIA_RASCO_SELLJOINTS_JOINTONE() {
    NPC_REMOVEINVITEMS(SELF, 34194, 1);
    CREATEINVITEMS(SELF, 34203, SQ202_RASCOGOLD);
    B_GIVEINVITEMS(SELF, OTHER, 34203, SQ202_RASCOGOLD);
    DIA_RASCO_SELLJOINTS_CHOICES();
    B_GIVEINVITEMS(OTHER, SELF, 34194, 1);
}

func void DIA_RASCO_SELLJOINTS_JOINTFIVE() {
    NPC_REMOVEINVITEMS(SELF, 34194, 5);
    CREATEINVITEMS(SELF, 34203, (SQ202_RASCOGOLD) * (5));
    B_GIVEINVITEMS(SELF, OTHER, 34203, (SQ202_RASCOGOLD) * (5));
    DIA_RASCO_SELLJOINTS_CHOICES();
    B_GIVEINVITEMS(OTHER, SELF, 34194, 5);
}

instance DIA_RASCO_HELLO(C_INFO) {
    NPC = 57616;
    NR = 1;
    CONDITION = DIA_RASCO_HELLO_CONDITION;
    INFORMATION = DIA_RASCO_HELLO_INFO;
    PERMANENT = TRUE;
    IMPORTANT = TRUE;
}

func int DIA_RASCO_HELLO_CONDITION() {
    if (((SQ102_HELPRASCOWITHSHIT) >= (1)) || ((RASCO_CANTRADEJOINTS) == (TRUE))) {
        return FALSE;
    };
    if (((NPC_GETDISTTOWP(HERO, "VILLAGE_POORHOUSE04_SLEEP")) <= (500)) && ((NPC_REFUSETALK(SELF)) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_RASCO_HELLO_INFO() {
    B_STANDUP();
    AI_DRAWWEAPON(SELF);
    AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Hello_03_01");
    INFO_CLEARCHOICES(88907);
    INFO_ADDCHOICE(88907, "Uh... nice hut.", 88851);
    INFO_ADDCHOICE(88907, "Looks like I took the wrong turn.", 88852);
    if (((SQ102_HELPEDOTHO) == (FALSE)) && ((LOG_GETSTATUS(MIS_SQ102)) == (LOG_RUNNING))) {
        if (NPC_KNOWSINFO(OTHER, 89039)) {
            if ((SQ102_RASCO_ABOUTOTHO) == (FALSE)) {
                INFO_ADDCHOICE(88907, "Otho sent me.", 88853);
            };
        };
        if (((SQ102_HELPRASCOWITHSHIT) == (TRUE)) && ((SQ102_RASCO_JOBDONE) == (FALSE))) {
            if (((MOB_HASITEMS("SQ102_ALBYNSACK_CONTAINER", 37036)) == (TRUE)) || ((MOB_HASITEMS("Q104_ALBYNSACK_CONTAINER", 37036)) == (TRUE))) {
                INFO_ADDCHOICE(88907, "I did what you wanted.", 88863);
            };
        };
    };
    if (((SQ202_RASCOWANTSJOINT) == (TRUE)) && ((LOG_GETSTATUS(MIS_SQ202)) == (LOG_RUNNING))) {
        if ((NPC_HASITEMS(OTHER, 34194)) >= (1)) {
            INFO_ADDCHOICE(88907, "Apparently you're interested in a certain stuff.", 88882);
        };
    };
    if ((RASCO_CANTRADEJOINTS) == (TRUE)) {
        if ((NPC_HASITEMS(OTHER, 34194)) >= (1)) {
            INFO_ADDCHOICE(88907, "I have more joints for you.", 88902);
        };
    };
}

instance DIA_RASCO_AMBIENT(C_INFO) {
    NPC = 57616;
    NR = 200;
    CONDITION = DIA_RASCO_AMBIENT_CONDITION;
    INFORMATION = DIA_RASCO_AMBIENT_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = "How are you doing?";
}

func int DIA_RASCO_AMBIENT_CONDITION() {
    return TRUE;
}

func void DIA_RASCO_AMBIENT_INFO() {
    AI_OUTPUT(OTHER, SELF, "DIA_Rasco_Ambient_15_01");
    NPC_INITAMBIENTS(SELF, 2);
    if ((NPC_GETLASTAMBIENT(SELF)) == (1)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Ambient_03_02");
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Ambient_03_03");
    };
    if ((NPC_GETLASTAMBIENT(SELF)) == (2)) {
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Ambient_03_04");
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Ambient_03_05");
        AI_OUTPUT(SELF, OTHER, "DIA_Rasco_Ambient_03_06");
    };
}

instance DIA_RASCO_PICKPOCKET(C_INFO) {
    NPC = 57616;
    NR = 900;
    CONDITION = DIA_RASCO_PICKPOCKET_CONDITION;
    INFORMATION = DIA_RASCO_PICKPOCKET_INFO;
    PERMANENT = TRUE;
    DESCRIPTION = PICKPOCKET_80;
}

func int DIA_RASCO_PICKPOCKET_CONDITION() {
    if (((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (1)) && ((SELF.AIVAR[6]) == (FALSE))) {
        return TRUE;
    };
    return 0 /* !broken stack! */;
}

func void DIA_RASCO_PICKPOCKET_INFO() {
    INFO_CLEARCHOICES(88913);
    INFO_ADDCHOICE(88913, DIALOG_BACK, 88917);
    INFO_ADDCHOICE(88913, DIALOG_PICKPOCKET, 88916);
}

func void DIA_RASCO_PICKPOCKET_DOIT() {
    if ((NPC_GETTALENTSKILL(OTHER, NPC_TALENT_PICKPOCKET)) >= (2)) {
        CREATEINVITEMS(SELF, 34194, 4);
        B_GIVEINVITEMS(SELF, OTHER, 34194, 4);
        B_PICKPOCKET_AMBIENT_TIER_2();
        SELF.AIVAR[6] = TRUE;
        INFO_CLEARCHOICES(88913);
    };
    AI_PLAYANI(HERO, T_CANNOTTAKE);
    PRINTSCREEN(PRINT_CANTPICKPOCKETTHISPERSON, -(1), -(1), FONT_SCREEN, 4);
    INFO_CLEARCHOICES(88913);
}

func void DIA_RASCO_PICKPOCKET_BACK() {
    INFO_CLEARCHOICES(88913);
}

