const int CRAFTINGVIEW_DLG = 0;
const int CRAFTINGVIEW_RENDERDLG = 0;
const int CRAFTINGVIEW_RENDERITEM = 0;
const int CRAFTINGVIEW_ISOPEN = 0;
const int CRAFTINGVIEW_SELECTEDTAB = 0;
const int CV_INGREDIENTSTAB = 0;
const int CV_PROPERTIESTAB = 1;
const int CV_CURRENTITEM = 0;
const int CV_CURRENTMODE = 0;
const int CV_CURRENTAMOUNT = 0;
const int CRAFTINGVIEWREFX = 800;
const int CRAFTINGVIEWREFY = 600;
var int CRAFTINGVIEWTEXT[8];
const int MAX_WEAPONRECIPEINSTANCES = 100;
var int WEAPONRECIPEINSTANCE[100];
const int MAX_POTIONRECIPEINSTANCES = 62;
var int POTIONRECIPEINSTANCE[62];
const int MAX_MEALRECIPEINSTANCES = 63;
var int MEALRECIPEINSTANCE[63];
const int MAX_SCROLLRECIPEINSTANCES = 24;
var int SCROLLRECIPEINSTANCE[24];
func void CRAFTINGVIEW_SETUPRECIPESARRAY() {
    WEAPONRECIPEINSTANCE[0] = 37754;
    WEAPONRECIPEINSTANCE[1] = 37756;
    WEAPONRECIPEINSTANCE[2] = 37758;
    WEAPONRECIPEINSTANCE[3] = 37760;
    WEAPONRECIPEINSTANCE[4] = 37762;
    WEAPONRECIPEINSTANCE[5] = 37764;
    WEAPONRECIPEINSTANCE[6] = 37766;
    WEAPONRECIPEINSTANCE[7] = 37768;
    WEAPONRECIPEINSTANCE[8] = 37770;
    WEAPONRECIPEINSTANCE[9] = 37772;
    WEAPONRECIPEINSTANCE[10] = 37774;
    WEAPONRECIPEINSTANCE[11] = 37776;
    WEAPONRECIPEINSTANCE[12] = 37778;
    WEAPONRECIPEINSTANCE[13] = 37780;
    WEAPONRECIPEINSTANCE[14] = 37782;
    WEAPONRECIPEINSTANCE[15] = 37784;
    WEAPONRECIPEINSTANCE[16] = 37786;
    WEAPONRECIPEINSTANCE[17] = 37788;
    WEAPONRECIPEINSTANCE[18] = 37790;
    WEAPONRECIPEINSTANCE[19] = 37792;
    WEAPONRECIPEINSTANCE[20] = 37794;
    WEAPONRECIPEINSTANCE[21] = 37796;
    WEAPONRECIPEINSTANCE[22] = 37798;
    WEAPONRECIPEINSTANCE[23] = 37800;
    WEAPONRECIPEINSTANCE[24] = 37802;
    WEAPONRECIPEINSTANCE[25] = 37804;
    WEAPONRECIPEINSTANCE[26] = 37806;
    WEAPONRECIPEINSTANCE[27] = 37808;
    WEAPONRECIPEINSTANCE[28] = 37810;
    WEAPONRECIPEINSTANCE[29] = 37812;
    WEAPONRECIPEINSTANCE[30] = 37814;
    WEAPONRECIPEINSTANCE[31] = 37816;
    WEAPONRECIPEINSTANCE[32] = 37818;
    WEAPONRECIPEINSTANCE[33] = 37820;
    WEAPONRECIPEINSTANCE[34] = 37822;
    WEAPONRECIPEINSTANCE[35] = 37824;
    WEAPONRECIPEINSTANCE[36] = 37826;
    WEAPONRECIPEINSTANCE[37] = 37828;
    WEAPONRECIPEINSTANCE[38] = 37830;
    WEAPONRECIPEINSTANCE[39] = 37832;
    WEAPONRECIPEINSTANCE[40] = 37834;
    WEAPONRECIPEINSTANCE[41] = 37836;
    WEAPONRECIPEINSTANCE[42] = 37838;
    WEAPONRECIPEINSTANCE[43] = 37840;
    WEAPONRECIPEINSTANCE[44] = 37842;
    WEAPONRECIPEINSTANCE[45] = 37844;
    WEAPONRECIPEINSTANCE[46] = 37846;
    WEAPONRECIPEINSTANCE[47] = 37848;
    WEAPONRECIPEINSTANCE[48] = 37850;
    WEAPONRECIPEINSTANCE[49] = 37852;
    WEAPONRECIPEINSTANCE[50] = 37854;
    WEAPONRECIPEINSTANCE[51] = 37856;
    WEAPONRECIPEINSTANCE[52] = 37858;
    WEAPONRECIPEINSTANCE[53] = 37860;
    WEAPONRECIPEINSTANCE[54] = 37862;
    WEAPONRECIPEINSTANCE[55] = 37864;
    WEAPONRECIPEINSTANCE[56] = 37866;
    WEAPONRECIPEINSTANCE[57] = 37868;
    WEAPONRECIPEINSTANCE[58] = 37870;
    WEAPONRECIPEINSTANCE[59] = 37872;
    WEAPONRECIPEINSTANCE[60] = 37874;
    WEAPONRECIPEINSTANCE[61] = 37876;
    WEAPONRECIPEINSTANCE[62] = 37878;
    WEAPONRECIPEINSTANCE[63] = 37880;
    WEAPONRECIPEINSTANCE[64] = 37882;
    WEAPONRECIPEINSTANCE[65] = 37884;
    WEAPONRECIPEINSTANCE[66] = 37886;
    WEAPONRECIPEINSTANCE[67] = 37888;
    WEAPONRECIPEINSTANCE[68] = 37890;
    WEAPONRECIPEINSTANCE[69] = 37892;
    WEAPONRECIPEINSTANCE[70] = 37894;
    WEAPONRECIPEINSTANCE[71] = 37898;
    WEAPONRECIPEINSTANCE[72] = 37900;
    WEAPONRECIPEINSTANCE[73] = 37902;
    WEAPONRECIPEINSTANCE[74] = 37904;
    WEAPONRECIPEINSTANCE[75] = 37906;
    WEAPONRECIPEINSTANCE[76] = 37908;
    WEAPONRECIPEINSTANCE[77] = 37910;
    WEAPONRECIPEINSTANCE[78] = 37912;
    WEAPONRECIPEINSTANCE[79] = 37914;
    WEAPONRECIPEINSTANCE[80] = 37916;
    WEAPONRECIPEINSTANCE[81] = 37918;
    WEAPONRECIPEINSTANCE[82] = 37920;
    WEAPONRECIPEINSTANCE[83] = 37922;
    WEAPONRECIPEINSTANCE[84] = 37924;
    WEAPONRECIPEINSTANCE[85] = 37926;
    WEAPONRECIPEINSTANCE[86] = 37928;
    WEAPONRECIPEINSTANCE[87] = 37930;
    WEAPONRECIPEINSTANCE[88] = 37932;
    WEAPONRECIPEINSTANCE[89] = 37934;
    WEAPONRECIPEINSTANCE[90] = 37936;
    WEAPONRECIPEINSTANCE[91] = 37938;
    WEAPONRECIPEINSTANCE[92] = 37940;
    WEAPONRECIPEINSTANCE[93] = 37942;
    WEAPONRECIPEINSTANCE[94] = 37944;
    WEAPONRECIPEINSTANCE[95] = 37946;
    WEAPONRECIPEINSTANCE[96] = 37948;
    WEAPONRECIPEINSTANCE[97] = 37950;
    POTIONRECIPEINSTANCE[0] = 34971;
    POTIONRECIPEINSTANCE[1] = 34970;
    POTIONRECIPEINSTANCE[2] = 34972;
    POTIONRECIPEINSTANCE[3] = 34973;
    POTIONRECIPEINSTANCE[4] = 34975;
    POTIONRECIPEINSTANCE[5] = 34977;
    POTIONRECIPEINSTANCE[6] = 34979;
    POTIONRECIPEINSTANCE[7] = 34981;
    POTIONRECIPEINSTANCE[8] = 34983;
    POTIONRECIPEINSTANCE[9] = 34985;
    POTIONRECIPEINSTANCE[10] = 35015;
    POTIONRECIPEINSTANCE[11] = 34987;
    POTIONRECIPEINSTANCE[12] = 34988;
    POTIONRECIPEINSTANCE[13] = 35017;
    POTIONRECIPEINSTANCE[14] = 34991;
    POTIONRECIPEINSTANCE[15] = 34993;
    POTIONRECIPEINSTANCE[16] = 34995;
    POTIONRECIPEINSTANCE[17] = 34997;
    POTIONRECIPEINSTANCE[18] = 34999;
    POTIONRECIPEINSTANCE[19] = 35001;
    POTIONRECIPEINSTANCE[20] = 35003;
    POTIONRECIPEINSTANCE[21] = 35005;
    POTIONRECIPEINSTANCE[22] = 35007;
    POTIONRECIPEINSTANCE[23] = 35009;
    POTIONRECIPEINSTANCE[24] = 35011;
    POTIONRECIPEINSTANCE[25] = 35013;
    POTIONRECIPEINSTANCE[26] = 35019;
    POTIONRECIPEINSTANCE[27] = 35021;
    POTIONRECIPEINSTANCE[28] = 35023;
    POTIONRECIPEINSTANCE[29] = 35025;
    POTIONRECIPEINSTANCE[30] = 35027;
    POTIONRECIPEINSTANCE[31] = 35039;
    POTIONRECIPEINSTANCE[32] = 35041;
    POTIONRECIPEINSTANCE[33] = 35043;
    POTIONRECIPEINSTANCE[34] = 35045;
    POTIONRECIPEINSTANCE[35] = 35047;
    POTIONRECIPEINSTANCE[36] = 34968;
    POTIONRECIPEINSTANCE[37] = 34976;
    POTIONRECIPEINSTANCE[38] = 34980;
    POTIONRECIPEINSTANCE[39] = 34984;
    POTIONRECIPEINSTANCE[40] = 34990;
    POTIONRECIPEINSTANCE[41] = 34992;
    POTIONRECIPEINSTANCE[42] = 34996;
    POTIONRECIPEINSTANCE[43] = 35000;
    POTIONRECIPEINSTANCE[44] = 35004;
    POTIONRECIPEINSTANCE[45] = 34969;
    POTIONRECIPEINSTANCE[46] = 34978;
    POTIONRECIPEINSTANCE[47] = 34982;
    POTIONRECIPEINSTANCE[48] = 34986;
    POTIONRECIPEINSTANCE[49] = 34989;
    POTIONRECIPEINSTANCE[50] = 34994;
    POTIONRECIPEINSTANCE[51] = 34998;
    POTIONRECIPEINSTANCE[52] = 35002;
    POTIONRECIPEINSTANCE[53] = 35006;
    POTIONRECIPEINSTANCE[54] = 35053;
    POTIONRECIPEINSTANCE[55] = 35029;
    POTIONRECIPEINSTANCE[56] = 35031;
    POTIONRECIPEINSTANCE[57] = 35033;
    POTIONRECIPEINSTANCE[58] = 35035;
    POTIONRECIPEINSTANCE[59] = 35037;
    POTIONRECIPEINSTANCE[60] = 35049;
    POTIONRECIPEINSTANCE[61] = 35051;
    MEALRECIPEINSTANCE[0] = 35846;
    MEALRECIPEINSTANCE[1] = 35848;
    MEALRECIPEINSTANCE[2] = 35850;
    MEALRECIPEINSTANCE[3] = 35852;
    MEALRECIPEINSTANCE[4] = 35854;
    MEALRECIPEINSTANCE[5] = 35856;
    MEALRECIPEINSTANCE[6] = 35858;
    MEALRECIPEINSTANCE[7] = 35860;
    MEALRECIPEINSTANCE[8] = 35862;
    MEALRECIPEINSTANCE[9] = 35864;
    MEALRECIPEINSTANCE[10] = 35866;
    MEALRECIPEINSTANCE[11] = 35868;
    MEALRECIPEINSTANCE[12] = 35870;
    MEALRECIPEINSTANCE[13] = 35872;
    MEALRECIPEINSTANCE[14] = 35874;
    MEALRECIPEINSTANCE[15] = 35876;
    MEALRECIPEINSTANCE[16] = 35878;
    MEALRECIPEINSTANCE[17] = 35880;
    MEALRECIPEINSTANCE[18] = 35882;
    MEALRECIPEINSTANCE[19] = 35884;
    MEALRECIPEINSTANCE[20] = 35886;
    MEALRECIPEINSTANCE[21] = 35888;
    MEALRECIPEINSTANCE[22] = 35890;
    MEALRECIPEINSTANCE[23] = 35892;
    MEALRECIPEINSTANCE[25] = 35894;
    MEALRECIPEINSTANCE[26] = 35896;
    MEALRECIPEINSTANCE[27] = 35898;
    MEALRECIPEINSTANCE[28] = 35900;
    MEALRECIPEINSTANCE[29] = 35902;
    MEALRECIPEINSTANCE[30] = 35904;
    MEALRECIPEINSTANCE[31] = 35906;
    MEALRECIPEINSTANCE[32] = 35908;
    MEALRECIPEINSTANCE[33] = 35910;
    MEALRECIPEINSTANCE[34] = 35912;
    MEALRECIPEINSTANCE[35] = 35914;
    MEALRECIPEINSTANCE[36] = 35916;
    MEALRECIPEINSTANCE[37] = 35918;
    MEALRECIPEINSTANCE[39] = 35920;
    MEALRECIPEINSTANCE[40] = 35923;
    MEALRECIPEINSTANCE[41] = 35926;
    MEALRECIPEINSTANCE[42] = 35928;
    MEALRECIPEINSTANCE[43] = 35930;
    MEALRECIPEINSTANCE[45] = 35932;
    MEALRECIPEINSTANCE[46] = 35934;
    MEALRECIPEINSTANCE[47] = 35936;
    MEALRECIPEINSTANCE[48] = 35938;
    MEALRECIPEINSTANCE[49] = 35940;
    MEALRECIPEINSTANCE[50] = 35942;
    MEALRECIPEINSTANCE[51] = 35944;
    MEALRECIPEINSTANCE[52] = 35946;
    MEALRECIPEINSTANCE[53] = 35948;
    MEALRECIPEINSTANCE[54] = 35950;
    MEALRECIPEINSTANCE[55] = 35952;
    MEALRECIPEINSTANCE[56] = 35954;
    MEALRECIPEINSTANCE[57] = 35956;
    MEALRECIPEINSTANCE[58] = 35958;
    MEALRECIPEINSTANCE[59] = 35960;
    MEALRECIPEINSTANCE[60] = 35962;
    MEALRECIPEINSTANCE[61] = 35966;
    MEALRECIPEINSTANCE[62] = 35964;
    SCROLLRECIPEINSTANCE[0] = 38149;
    SCROLLRECIPEINSTANCE[1] = 38150;
    SCROLLRECIPEINSTANCE[2] = 38152;
    SCROLLRECIPEINSTANCE[3] = 38153;
    SCROLLRECIPEINSTANCE[4] = 38154;
    SCROLLRECIPEINSTANCE[5] = 38155;
    SCROLLRECIPEINSTANCE[6] = 38156;
    SCROLLRECIPEINSTANCE[7] = 38157;
    SCROLLRECIPEINSTANCE[8] = 38158;
    SCROLLRECIPEINSTANCE[9] = 38159;
    SCROLLRECIPEINSTANCE[10] = 38160;
    SCROLLRECIPEINSTANCE[11] = 38161;
    SCROLLRECIPEINSTANCE[12] = 38162;
    SCROLLRECIPEINSTANCE[13] = 38163;
    SCROLLRECIPEINSTANCE[14] = 38164;
    SCROLLRECIPEINSTANCE[15] = 38165;
    SCROLLRECIPEINSTANCE[16] = 38166;
    SCROLLRECIPEINSTANCE[17] = 38167;
    SCROLLRECIPEINSTANCE[18] = 38168;
    SCROLLRECIPEINSTANCE[19] = 38169;
    SCROLLRECIPEINSTANCE[20] = 38170;
    SCROLLRECIPEINSTANCE[21] = 38171;
    SCROLLRECIPEINSTANCE[22] = 38172;
    SCROLLRECIPEINSTANCE[23] = 38151;
}

func int RENDER_ADDITEMCENTER(var int ITEMINST, var int X, var int Y, var int W, var int H) {
    return RENDER_ADDITEM(ITEMINST, (X) - ((W) >> (1)), (Y) - ((H) >> (1)), (X) + (((W) + (1)) >> (1)), (Y) + (((H) + (1)) >> (1)));
}

func int RENDER_ADDITEMCENTERPXL(var int ITEMINST, var int X1, var int Y1, var int W, var int H) {
    return RENDER_ADDITEMCENTER(ITEMINST, PRINT_TOVIRTUAL(X1, PS_X), PRINT_TOVIRTUAL(Y1, PS_Y), PRINT_TOVIRTUAL(W, PS_X), PRINT_TOVIRTUAL(H, PS_Y));
}

func void RENDER_TOP(var int PTR) {
    var RENDERITEM ITM;
    ITM = _^(PTR);
    if (ITM.ITMPTR) {
        VIEWPTR_TOP(ITM.VIEW);
    };
}

func void CRAFTINGVIEW_HIDE() {
    var int HND;
    var int I;
    if ((CRAFTINGVIEW_RENDERDLG) != (0)) {
        RENDER_REMOVE(CRAFTINGVIEW_RENDERDLG);
        CRAFTINGVIEW_RENDERDLG = 0;
    };
    if ((CRAFTINGVIEW_RENDERITEM) != (0)) {
        RENDER_REMOVE(CRAFTINGVIEW_RENDERITEM);
        CRAFTINGVIEW_RENDERITEM = 0;
    };
    REPEAT(I, 8);
    HND = MEM_READINTARRAY(_@(CRAFTINGVIEWTEXT[0]), I);
    if (HLP_ISVALIDHANDLE(HND)) {
        PRINT_DELETETEXT(HND);
    };
    END;
    CRAFTINGVIEW_ISOPEN = FALSE;
}

func int CRAFTINGVIEW_CHECKARMORS(var string STR) {
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_01)) {
        return 35414;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_02)) {
        return 35422;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_03)) {
        return 35417;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_04)) {
        return 35414;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_05)) {
        return 35403;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_06)) {
        return 35398;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_07)) {
        return 35531;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_08)) {
        return 35543;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_09)) {
        return 35542;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_10)) {
        return 35533;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_11)) {
        return 35531;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_12)) {
        return 35532;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_13)) {
        if ((TAILOR_VLK_RICH) == (1)) {
            return 35530;
        };
        if ((TAILOR_VLK_RICH) == (2)) {
            return 35528;
        };
        if ((TAILOR_VLK_RICH) == (3)) {
            return 35529;
        };
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_14)) {
        if ((TAILOR_VLK_RICH) == (1)) {
            return 35533;
        };
        if ((TAILOR_VLK_RICH) == (2)) {
            return 35531;
        };
        if ((TAILOR_VLK_RICH) == (3)) {
            return 35532;
        };
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_15)) {
        return 35543;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_16)) {
        return 35544;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_17)) {
        return 35545;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_18)) {
        return 35548;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_19)) {
        return 35550;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_20)) {
        return 35542;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_21)) {
        return 35546;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_22)) {
        return 35549;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_23)) {
        return 35547;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_24)) {
        return 35551;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_25)) {
        return 35417;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_26)) {
        return 35403;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_27)) {
        return 35465;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_28)) {
        return 35398;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_29)) {
        return 35430;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_30)) {
        return 35435;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_31)) {
        return 35407;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_32)) {
        return 35410;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_33)) {
        return 35411;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_34)) {
        return 35412;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_35)) {
        return 35413;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_36)) {
        return 35571;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_37)) {
        return 35394;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_38)) {
        return 35395;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_39)) {
        return 35396;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_40)) {
        return 35397;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_41)) {
        return 35552;
    };
    if (HLP_STRCMP(STR, TXT_ARMORTRADE_42)) {
        return 35525;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_CHAIN_L_TIER2)) {
        return 35399;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_CHAIN_M_TIER2)) {
        return 35404;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_CRAB_TIER2)) {
        return 35408;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_LEATHER_L_TIER2)) {
        return 35415;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_LEATHER_M_TIER2)) {
        return 35418;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_HUNTER_L_TIER2)) {
        return 35423;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_STH_L_TIER2)) {
        return 35431;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_STH_H_TIER2)) {
        return 35436;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_NORDMAR_TIER2)) {
        return 35445;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_ARX_R_TIER2)) {
        return 35452;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_ARX_B_TIER2)) {
        return 35466;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_ARX_W1_TIER2)) {
        return 35455;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_ARX_W2_TIER2)) {
        return 35460;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_ARX_H1_TIER2)) {
        return 35471;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_ARX_H2_TIER2)) {
        return 35476;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_MIL_R_TIER2)) {
        return 35483;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_MIL_B_TIER2)) {
        return 35489;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_MIL_W1_TIER2)) {
        return 35502;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_MIL_W2_TIER2)) {
        return 35507;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_MIL_C1_TIER2)) {
        return 35494;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_MIL_C2_TIER2)) {
        return 35499;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_USM_L_TIER2)) {
        return 35480;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_WS_M_TIER2)) {
        return 35516;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_GRD_M_TIER2)) {
        return 35618;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_KNIGHT_TIER2)) {
        return 35526;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_CHAIN_L_TIER3)) {
        return 35400;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_CHAIN_M_TIER3)) {
        return 35405;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_CRAB_TIER3)) {
        return 35409;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_LEATHER_L_TIER3)) {
        return 35416;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_LEATHER_M_TIER3)) {
        return 35419;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_HUNTER_L_TIER3)) {
        return 35424;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_STH_L_TIER3)) {
        return 35432;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_STH_H_TIER3)) {
        return 35437;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_NORDMAR_TIER3)) {
        return 35446;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_ARX_R_TIER3)) {
        return 35453;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_ARX_B_TIER3)) {
        return 35467;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_ARX_W1_TIER3)) {
        return 35455;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_ARX_W2_TIER3)) {
        return 35460;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_ARX_H1_TIER3)) {
        return 35472;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_ARX_H2_TIER3)) {
        return 35477;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_MIL_R_TIER3)) {
        return 35484;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_MIL_B_TIER3)) {
        return 35490;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_MIL_W1_TIER3)) {
        return 35503;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_MIL_W2_TIER3)) {
        return 35508;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_MIL_C1_TIER3)) {
        return 35495;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_MIL_C2_TIER3)) {
        return 35500;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_USM_L_TIER3)) {
        return 35481;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_WS_M_TIER3)) {
        return 35517;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_GRD_M_TIER3)) {
        return 35619;
    };
    if (HLP_STRCMP(STR, ARMORSELLER_KNIGHT_TIER3)) {
        return 35527;
    };
    return -(1);
}

func void CRAFTINGVIEW_SHOW(var int RECINST, var int MODE, var int AMOUNT) {
    var int COUNT;
    var int COUNTARRAYPTR;
    var int INVITEMS;
    var int I;
    var int COLOR;
    var int YQUARTSIZE;
    var int S;
    var C_ITEM RECITEM;
    var int TEXTARRAYPTR;
    var int FH;
    var int PTR;
    var int J;
    var int SCALEF;
    var int TEXTYPOSH;
    var int TEXTYPOS;
    var C_RECIPE REC;
    var int TEXTXPOS;
    var int TEXTCENTER;
    var string ARMOR_TEXT;
    var C_ITEM CURRENTITEM;
    var int OFFSET;
    var int WINDOWWIDTH;
    var int WINDOWHEIGHT;
    var int CV_TABPTR;
    CV_CURRENTITEM = RECINST;
    CV_CURRENTMODE = MODE;
    CV_CURRENTAMOUNT = AMOUNT;
    PRINT_GETSCREENSIZE();
    YQUARTSIZE = (PRINT_SCREEN[1]) / (4);
    CRAFTINGVIEW_HIDE();
    FH = PRINT_GETFONTHEIGHT(TEXT_FONT_DEFAULT);
    SCALEF = BAR_GETINTERFACESCALING();
    TEXTYPOSH = (((PRINT_SCREEN[1]) / (2)) + ((YQUARTSIZE) / (2))) - (ROUNDF(MULF(MKF(90), SCALEF)));
    TEXTYPOS = (((PRINT_SCREEN[1]) / (2)) + ((YQUARTSIZE) / (2))) - (90);
    TEXTXPOS = ((PRINT_SCREEN[0]) / (2)) - (ROUNDF(MULF(MKF(200), SCALEF)));
    TEXTCENTER = (PRINT_SCREEN[0]) / (2);
    WINDOWWIDTH = ROUNDF(MULF(MKF(800), SCALEF));
    WINDOWHEIGHT = ROUNDF(MULF(MKF(200), SCALEF));
    CRAFTINGVIEW_DLG = VIEWPTR_CREATECENTERPXL((PRINT_SCREEN[0]) / (2), ((PRINT_SCREEN[1]) / (2)) + ((YQUARTSIZE) / (2)), WINDOWWIDTH, WINDOWHEIGHT);
    VIEWPTR_SETTEXTURE(CRAFTINGVIEW_DLG, "DLG_CHOICE.TGA");
    CRAFTINGVIEW_RENDERDLG = RENDER_ADDVIEW(CRAFTINGVIEW_DLG);
    RENDER_TOP(CRAFTINGVIEW_RENDERDLG);
    if ((MODE) != (2)) {
        PTR = CREATE(RECINST);
        REC = MEM_PTRTOINST(PTR);
        CRAFTINGVIEW_RENDERITEM = RENDER_ADDITEMCENTERPXL(REC.RECIPEITEM, ((PRINT_SCREEN[0]) / (2)) - (ROUNDF(MULF(MKF(300), SCALEF))), ((PRINT_SCREEN[1]) / (2)) + ((YQUARTSIZE) / (2)), WINDOWHEIGHT, WINDOWHEIGHT);
        RENDER_TOP(CRAFTINGVIEW_RENDERITEM);
        RENDER_OPENVIEW(CRAFTINGVIEW_RENDERITEM);
        RECITEM = MEM_PTRTOINST(ITM_GETPTR(REC.RECIPEITEM));
        CV_TABPTR = _@S(TXT_CRAFTINGVIEWTAB[0]);
        if ((CRAFTINGVIEW_SELECTEDTAB) == (CV_INGREDIENTSTAB)) {
            CRAFTINGVIEWTEXT[0] = PRINT_EXTPXL(((TEXTCENTER) - (PRINT_GETSTRINGWIDTH(MEM_READSTRINGARRAY(CV_TABPTR, 0), TEXT_FONT_DEFAULT))) - (10), TEXTYPOSH, MEM_READSTRINGARRAY(CV_TABPTR, 0), TEXT_FONT_DEFAULT, COL_WHITE, -(1));
            CRAFTINGVIEWTEXT[1] = PRINT_EXTPXL((TEXTCENTER) + (10), TEXTYPOSH, MEM_READSTRINGARRAY(CV_TABPTR, 1), TEXT_FONT_DEFAULT, COL_GRAY, -(1));
            OFFSET = ((6) - (REC.TOTALREQUIRED)) / (2);
            REPEAT(I, REC.TOTALREQUIRED);
            S = SB_NEW();
            CURRENTITEM = MEM_PTRTOINST(ITM_GETPTR(RECIPE_GETREQUIREDITEMINSTANCE(REC, I)));
            if ((HLP_ISITEMGROUP(RECIPE_GETREQUIREDITEMINSTANCE(REC, I))) == (TRUE)) {
                INVITEMS = NPC_HASITEMGROUP(HERO, RECIPE_GETREQUIREDITEMINSTANCE(REC, I));
            } else {
                INVITEMS = NPC_HASITEMS(HERO, RECIPE_GETREQUIREDITEMINSTANCE(REC, I));
            };
            SB(CURRENTITEM.DESCRIPTION);
            SB(": ");
            SBI(INVITEMS);
            SB("/");
            if (RECIPE_ISREQUIREDITEMMULTIUSE(REC, I)) {
                SBI(RECIPE_GETREQUIREDITEMAMOUNT(REC, I));
                if ((INVITEMS) >= (RECIPE_GETREQUIREDITEMAMOUNT(REC, I))) {
                    COLOR = RGBA(100, 200, 255, 255);
                } else {
                    COLOR = RGBA(255, 50, 50, 255);
                };
            } else {
                SBI((RECIPE_GETREQUIREDITEMAMOUNT(REC, I)) * (AMOUNT));
                if ((INVITEMS) >= ((RECIPE_GETREQUIREDITEMAMOUNT(REC, I)) * (AMOUNT))) {
                    COLOR = RGBA(50, 255, 50, 255);
                } else {
                    COLOR = RGBA(255, 50, 50, 255);
                };
            };
            MEM_WRITEINTARRAY(_@(CRAFTINGVIEWTEXT[0]), ((I) + (2)) + (OFFSET), PRINT_EXTPXL(TEXTXPOS, (TEXTYPOS) + ((FH) * (((I) + (1)) + (OFFSET))), SB_TOSTRING(), TEXT_FONT_DEFAULT, COLOR, -(1)));
            SB_DESTROY();
        } else {
            CRAFTINGVIEW_SELECTEDTAB = CV_PROPERTIESTAB;
            if (0) {
                CRAFTINGVIEWTEXT[0] = PRINT_EXTPXL(((TEXTCENTER) - (PRINT_GETSTRINGWIDTH(MEM_READSTRINGARRAY(CV_TABPTR, 0), TEXT_FONT_DEFAULT))) - (10), TEXTYPOSH, MEM_READSTRINGARRAY(CV_TABPTR, 0), TEXT_FONT_DEFAULT, COL_GRAY, -(1));
                CRAFTINGVIEWTEXT[1] = PRINT_EXTPXL((TEXTCENTER) + (10), TEXTYPOSH, MEM_READSTRINGARRAY(CV_TABPTR, 1), TEXT_FONT_DEFAULT, COL_WHITE, -(1));
                TEXTARRAYPTR = _@S(RECITEM.TEXT[0]);
                COUNTARRAYPTR = _@(RECITEM.COUNT[0]);
                REPEAT(J, ITM_TEXT_MAX);
                COUNT = MEM_READINTARRAY(COUNTARRAYPTR, J);
                S = SB_NEW();
                SB(MEM_READSTRINGARRAY(TEXTARRAYPTR, J));
                if ((COUNT) > (0)) {
                    SB(" ");
                    SBI(COUNT);
                };
                MEM_WRITEINTARRAY(_@(CRAFTINGVIEWTEXT[0]), (J) + (2), PRINT_EXTPXL(TEXTXPOS, (TEXTYPOS) + ((FH) * ((J) + (1))), SB_TOSTRING(), TEXT_FONT_DEFAULT, COL_WHITE, -(1)));
                SB_DESTROY();
                END;
            };
        };
    };
    RECITEM = MEM_PTRTOINST(ITM_GETPTR(RECINST));
    CRAFTINGVIEW_RENDERITEM = RENDER_ADDITEMCENTERPXL(RECINST, ((PRINT_SCREEN[0]) / (2)) - (ROUNDF(MULF(MKF(300), SCALEF))), ((PRINT_SCREEN[1]) / (2)) + ((YQUARTSIZE) / (2)), WINDOWHEIGHT, WINDOWHEIGHT);
    RENDER_TOP(CRAFTINGVIEW_RENDERITEM);
    RENDER_OPENVIEW(CRAFTINGVIEW_RENDERITEM);
    ARMOR_TEXT = I2S(MEM_READINTARRAY(_@(RECITEM.PROTECTION[0]), PROT_BLUNT));
    CRAFTINGVIEWTEXT[1] = PRINT_EXTPXL(TEXTXPOS, (TEXTYPOS) + ((FH) * (1)), CS3(NAME_PROT_BLUNT, " ", ARMOR_TEXT), TEXT_FONT_DEFAULT, COL_WHITE, -(1));
    ARMOR_TEXT = I2S(MEM_READINTARRAY(_@(RECITEM.PROTECTION[0]), PROT_EDGE));
    CRAFTINGVIEWTEXT[2] = PRINT_EXTPXL(TEXTXPOS, (TEXTYPOS) + ((FH) * (2)), CS3(NAME_PROT_EDGE, " ", ARMOR_TEXT), TEXT_FONT_DEFAULT, COL_WHITE, -(1));
    ARMOR_TEXT = I2S(MEM_READINTARRAY(_@(RECITEM.PROTECTION[0]), PROT_POINT));
    CRAFTINGVIEWTEXT[3] = PRINT_EXTPXL(TEXTXPOS, (TEXTYPOS) + ((FH) * (3)), CS3(NAME_PROT_POINT, " ", ARMOR_TEXT), TEXT_FONT_DEFAULT, COL_WHITE, -(1));
    ARMOR_TEXT = I2S(MEM_READINTARRAY(_@(RECITEM.PROTECTION[0]), PROT_FIRE));
    CRAFTINGVIEWTEXT[4] = PRINT_EXTPXL(TEXTXPOS, (TEXTYPOS) + ((FH) * (4)), CS3(NAME_PROT_FIRE, " ", ARMOR_TEXT), TEXT_FONT_DEFAULT, COL_WHITE, -(1));
    ARMOR_TEXT = I2S(MEM_READINTARRAY(_@(RECITEM.PROTECTION[0]), PROT_MAGIC));
    CRAFTINGVIEWTEXT[5] = PRINT_EXTPXL(TEXTXPOS, (TEXTYPOS) + ((FH) * (5)), CS3(NAME_PROT_MAGIC, " ", ARMOR_TEXT), TEXT_FONT_DEFAULT, COL_WHITE, -(1));
    CRAFTINGVIEW_ISOPEN = TRUE;
}

func void CRAFTINGVIEW_TABSWITCHER(var int KEY) {
    if ((CRAFTINGVIEW_ISOPEN) == (TRUE)) {
        if ((CV_CURRENTMODE) != (2)) {
            if (((((((((KEY) == (MEM_GETKEY("keyLeft"))) || ((KEY) == (MEM_GETKEY("keyRight")))) || ((KEY) == (MEM_GETSECONDARYKEY("keyLeft")))) || ((KEY) == (MEM_GETSECONDARYKEY("keyRight")))) || ((KEY) == (MEM_GETKEY("keyStrafeLeft")))) || ((KEY) == (MEM_GETKEY("keyStrafeRight")))) || ((KEY) == (MEM_GETSECONDARYKEY("keyStrafeLeft")))) || ((KEY) == (MEM_GETSECONDARYKEY("keyStrafeRight")))) {
                if ((CRAFTINGVIEW_SELECTEDTAB) == (0)) {
                    CRAFTINGVIEW_SELECTEDTAB = 1;
                } else {
                    CRAFTINGVIEW_SELECTEDTAB = 0;
                };
                CRAFTINGVIEW_SHOW(CV_CURRENTITEM, CV_CURRENTMODE, CV_CURRENTAMOUNT);
            };
        };
    };
}

func void INIT_CRAFTINGVIEW_GAMESTART() {
    HOOKENGINEF(OCINFORMATIONMANAGER__UPDATE, 5, 94786);
}

func void INIT_CRAFTINGVIEW_ALWAYS() {
    CRAFTINGVIEW_SETUPRECIPESARRAY();
}

const int CRAFTINGVIEWLASTCHOICE = -1;
func void CRAFTINGVIEW_UPDATE() {
    var int MAX;
    var int ARMOR_CHECK;
    var int CHOICEITEMINSTANCE;
    var int DLGNR;
    var int LIST;
    var int J;
    var ZCVIEWDIALOGCHOICE DLG;
    var int CINFO_MGR_MODE_INFO;
    var OCINFO DLGINSTANCE;
    var int CHOICEVIEW;
    var int NEXTPOSY;
    var int I;
    var ZCLIST L;
    var ZCARRAY ARR;
    var string DLGDESCRIPTION;
    var int P;
    var string DLG_ALL;
    var C_NPC HER;
    var OCINFOCHOICE DLGCHOICE;
    var C_NPC SLF;
    var int INFOPTR;
    var int CINFO_MGR_MODE_CHOICE;
    DLG = _^(MEM_INFORMATIONMAN.DLGCHOICE);
    CHOICEVIEW = MEM_INFORMATIONMAN.DLGCHOICE;
    if ((DLG.ISACTIVATED) == (1)) {
        if ((CRAFTINGVIEWLASTCHOICE) != (DLG.CHOICESELECTED)) {
            ARR = _^((CHOICEVIEW) + (172));
            if (ARR.ARRAY) {
                NEXTPOSY = 0;
                I = 0;
                P = MEM_STACKPOS.POSITION;
                if ((I) < (DLG.CHOICES)) {
                    SLF = _^(MEM_INFORMATIONMAN.NPC);
                    HER = _^(MEM_INFORMATIONMAN.PLAYER);
                    INFOPTR = 0;
                    if ((MEM_INFORMATIONMAN.MODE) == (CINFO_MGR_MODE_INFO)) {
                        INFOPTR = OCINFOMANAGER_GETINFOUNIMPORTANT(94794, 94795, I);
                    } else if ((MEM_INFORMATIONMAN.MODE) == (CINFO_MGR_MODE_CHOICE)) {
                        INFOPTR = MEM_INFORMATIONMAN.INFO;
                    };
                    if (INFOPTR) {
                        DLGINSTANCE = _^(INFOPTR);
                        DLGDESCRIPTION = DLGINSTANCE.DESCRIPTION;
                        if ((MEM_INFORMATIONMAN.MODE) == (CINFO_MGR_MODE_CHOICE)) {
                            if (DLGINSTANCE.LISTCHOICES_NEXT) {
                                J = 0;
                                LIST = DLGINSTANCE.LISTCHOICES_NEXT;
                                WHILE(LIST);
                                L = _^(LIST);
                                DLGCHOICE = MEM_PTRTOINST(L.DATA);
                                if ((I) == (J)) {
                                    DLGDESCRIPTION = DLGCHOICE.TEXT;
                                };
                                LIST = L.NEXT;
                                J += 1;
                                END;
                            };
                        };
                        DLGNR = DLGINSTANCE.NR;
                        if ((I) == (DLG.CHOICESELECTED)) {
                            ARMOR_CHECK = CRAFTINGVIEW_CHECKARMORS(DLGDESCRIPTION);
                            if ((MEM_INFORMATIONMAN.MODE) == (CINFO_MGR_MODE_CHOICE)) {
                                CHOICEITEMINSTANCE = -(1);
                                if ((POTIONALCHEMY_INSTANCE) != (-(1))) {
                                    CHOICEITEMINSTANCE = POTIONALCHEMY_INSTANCE;
                                } else if ((SCROLL_WRITING_INSTANCE) != (-(1))) {
                                    CHOICEITEMINSTANCE = SCROLL_WRITING_INSTANCE;
                                } else if ((COOKINGMEALS_INSTANCE) != (-(1))) {
                                    CHOICEITEMINSTANCE = COOKINGMEALS_INSTANCE;
                                };
                                if ((CHOICEITEMINSTANCE) != (-(1))) {
                                    MAX = PC_CRAFTRECIPEITEM_MAX(CHOICEITEMINSTANCE);
                                    DLG_ALL = CS4(DIALOG_ALL, " (", I2S(MAX), ")");
                                    if ((STR_TOINT(DLGDESCRIPTION)) > (0)) {
                                        CRAFTINGVIEW_SHOW(CHOICEITEMINSTANCE, 1, STR_TOINT(DLGDESCRIPTION));
                                    } else if ((STR_TOINT(STR_SPLIT(DLGDESCRIPTION, ".", 0))) > (0)) {
                                        CRAFTINGVIEW_SHOW(CHOICEITEMINSTANCE, 1, STR_TOINT(STR_SPLIT(DLGDESCRIPTION, ".", 0)));
                                    } else if (HLP_STRCMP(DLGDESCRIPTION, DLG_ALL)) {
                                        CRAFTINGVIEW_SHOW(CHOICEITEMINSTANCE, 1, MAX);
                                    } else {
                                        CRAFTINGVIEW_HIDE();
                                    };
                                } else if ((ARMOR_CHECK) != (-(1))) {
                                    CRAFTINGVIEW_SHOW(ARMOR_CHECK, 2, 1);
                                } else {
                                    CRAFTINGVIEW_HIDE();
                                };
                            } else if (((DLGNR) >= (10000)) && ((DLGNR) < (10100))) {
                                CRAFTINGVIEW_SHOW(MEM_READINTARRAY(_@(WEAPONRECIPEINSTANCE[0]), (DLGNR) - (10000)), 0, 1);
                            } else if (((DLGNR) >= (10100)) && ((DLGNR) < (10200))) {
                                CRAFTINGVIEW_SHOW(MEM_READINTARRAY(_@(POTIONRECIPEINSTANCE[0]), (DLGNR) - (10100)), 1, 1);
                            } else if (((DLGNR) >= (10200)) && ((DLGNR) < (10300))) {
                                CRAFTINGVIEW_SHOW(MEM_READINTARRAY(_@(MEALRECIPEINSTANCE[0]), (DLGNR) - (10200)), 1, 1);
                            } else if (((DLGNR) >= (10300)) && ((DLGNR) < (10400))) {
                                CRAFTINGVIEW_SHOW(MEM_READINTARRAY(_@(SCROLLRECIPEINSTANCE[0]), (DLGNR) - (10300)), 1, 1);
                            } else if ((ARMOR_CHECK) != (-(1))) {
                                CRAFTINGVIEW_SHOW(ARMOR_CHECK, 2, 1);
                            } else if ((CRAFTINGVIEW_ISOPEN) == (TRUE)) {
                                CRAFTINGVIEW_HIDE();
                            };
                        };
                    };
                    I += 1;
                    MEM_STACKPOS.POSITION = P;
                };
            };
        };
        CRAFTINGVIEWLASTCHOICE = DLG.CHOICESELECTED;
    };
    if ((CRAFTINGVIEW_ISOPEN) == (TRUE)) {
        CRAFTINGVIEW_HIDE();
    };
}

