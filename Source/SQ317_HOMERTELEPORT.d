instance SQ317_HOMERTELEPORT(CUTSCENE) {
    ONSTART = FUNCTION(92959);
}

func void SQ317_HOMERTELEPORT_START() {
    WLD_SENDTRIGGER("SQ317_HOMERTELEPORT_01");
    TELEPORTNPCTOWP(1819, "PART17_SQ317_CUTSCENE_HERO");
    TELEPORTNPCTOWP(58848, "TELEPORT_SWAMPV2");
    NPC_CLEARAIQUEUE(NONE_13719_HOMER);
    AI_TURNTONPC(NONE_13719_HOMER, HERO);
    AI_TURNTONPC(HERO, NONE_13719_HOMER);
    FF_APPLYONCEEXT(92960, 1000, 3);
    CREATEINVITEM(NONE_13719_HOMER, 34594);
    B_READYSPELL(NONE_13719_HOMER, SPL_TELEPORTXARDAS, SPL_COST_TELEPORT);
    AI_WAITTILLEND(NONE_13719_HOMER, HERO);
    AI_WAIT(NONE_13719_HOMER, 1045220557);
    AI_PLAYANI(NONE_13719_HOMER, "T_MAGRUN_2_HEASHOOT");
    AI_WAITTILLEND(HERO, NONE_13719_HOMER);
    AI_FUNCTION(HERO, 62462);
    AI_WAIT(HERO, 1053609165);
    AI_PLAYANI(HERO, R_SCRATCHHEAD);
    AI_PLAYANI(HERO, "T_DONTKNOW");
    AI_FUNCTION(HERO, 62463);
}

func void SQ317_HOMERTELEPORT_START_COUNT() {
    var int SQ317_HOMERTELEPORT_START_COUNT_TIMER;
    SQ317_HOMERTELEPORT_START_COUNT_TIMER = (SQ317_HOMERTELEPORT_START_COUNT_TIMER) + (1);
    if ((SQ317_HOMERTELEPORT_START_COUNT_TIMER) == (3)) {
        WLD_SENDTRIGGER("SQ317_HOMERTELEPORT_02");
        WLD_SENDUNTRIGGER("SQ317_HOMERTELEPORT_01");
    };
}

